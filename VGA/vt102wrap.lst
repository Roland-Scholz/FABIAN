
ASEM-51 V1.3                                         Copyright (c) 2002 by W.W. Heinz                                         PAGE 1





       MCS-51 Family Macro Assembler   A S E M - 5 1   V 1.3
       =====================================================



	Source File:	C:\github\FABIAN\VGA\vt102wrap.a51
	Object File:	C:\github\FABIAN\VGA\vt102wrap.hex
	List File:	C:\github\FABIAN\VGA\vt102wrap.lst



 Line  I  Addr  Code            Source

    1:						$NOMOD51
    2:						$INCLUDE (89S52.MCU)
    3: 1			;   AT89S52 processor definition file
    4: 1			;   =================================
    5: 1
    6: 1	N	 80	P0	DATA	080H
    7: 1	N	 81	SP	DATA	081H
    8: 1	N	 82	DP0L	DATA	082H
    9: 1	N	 83	DP0H	DATA	083H
   10: 1	N	 84	DP1L	DATA	084H
   11: 1	N	 85	DP1H	DATA	085H
   12: 1	N	 87	PCON	DATA	087H
   13: 1	N	 88	TCON	DATA	088H
   14: 1	N	 89	TMOD	DATA	089H
   15: 1	N	 8A	TL0	DATA	08AH
   16: 1	N	 8B	TL1	DATA	08BH
   17: 1	N	 8C	TH0	DATA	08CH
   18: 1	N	 8D	TH1	DATA	08DH
   19: 1	N	 8E	AUXR	DATA	08EH
   20: 1	N	 90	P1	DATA	090H
   21: 1	N	 98	SCON	DATA	098H
   22: 1	N	 99	SBUF	DATA	099H
   23: 1	N	 A0	P2	DATA	0A0H
   24: 1	N	 A2	AUXR1	DATA	0A2H
   25: 1	N	 A6	WDTRST	DATA	0A6H
   26: 1	N	 A8	IE	DATA	0A8H
   27: 1	N	 B0	P3	DATA	0B0H
   28: 1	N	 B8	IP	DATA	0B8H
   29: 1	N	 C8	T2CON	DATA	0C8H
   30: 1	N	 C9	T2MOD	DATA	0C9H
   31: 1	N	 CA	RCAP2L	DATA	0CAH
   32: 1	N	 CB	RCAP2H	DATA	0CBH
   33: 1	N	 CC	TL2	DATA	0CCH
   34: 1	N	 CD	TH2	DATA	0CDH
   35: 1	N	 D0	PSW	DATA	0D0H
   36: 1	N	 E0	ACC	DATA	0E0H
   37: 1	N	 F0	B	DATA	0F0H
   38: 1
   39: 1	N	 88	IT0	BIT	088H
   40: 1	N	 89	IE0	BIT	089H
   41: 1	N	 8A	IT1	BIT	08AH
   42: 1	N	 8B	IE1	BIT	08BH
   43: 1	N	 8C	TR0	BIT	08CH

ASEM-51 V1.3                                         Copyright (c) 2002 by W.W. Heinz                                         PAGE 2



 Line  I  Addr  Code            Source

   44: 1	N	 8D	TF0	BIT	08DH
   45: 1	N	 8E	TR1	BIT	08EH
   46: 1	N	 8F	TF1	BIT	08FH
   47: 1	N	 90	T2	BIT	090H
   48: 1	N	 91	T2EX	BIT	091H
   49: 1	N	 95	MOSI	BIT	095H
   50: 1	N	 96	MISO	BIT	096H
   51: 1	N	 97	SCK	BIT	097H
   52: 1	N	 98	RI	BIT	098H
   53: 1	N	 99	TI	BIT	099H
   54: 1	N	 9A	RB8	BIT	09AH
   55: 1	N	 9B	TB8	BIT	09BH
   56: 1	N	 9C	REN	BIT	09CH
   57: 1	N	 9D	SM2	BIT	09DH
   58: 1	N	 9E	SM1	BIT	09EH
   59: 1	N	 9F	SM0	BIT	09FH
   60: 1	N	 A8	EX0	BIT	0A8H
   61: 1	N	 A9	ET0	BIT	0A9H
   62: 1	N	 AA	EX1	BIT	0AAH
   63: 1	N	 AB	ET1	BIT	0ABH
   64: 1	N	 AC	ES	BIT	0ACH
   65: 1	N	 AD	ET2	BIT	0ADH
   66: 1	N	 AF	EA	BIT	0AFH
   67: 1	N	 B0	RXD	BIT	0B0H
   68: 1	N	 B1	TXD	BIT	0B1H
   69: 1	N	 B2	INT0	BIT	0B2H
   70: 1	N	 B3	INT1	BIT	0B3H
   71: 1	N	 B4	T0	BIT	0B4H
   72: 1	N	 B5	T1	BIT	0B5H
   73: 1	N	 B6	WR	BIT	0B6H
   74: 1	N	 B7	RD	BIT	0B7H
   75: 1	N	 B8	PX0	BIT	0B8H
   76: 1	N	 B9	PT0	BIT	0B9H
   77: 1	N	 BA	PX1	BIT	0BAH
   78: 1	N	 BB	PT1	BIT	0BBH
   79: 1	N	 BC	PS	BIT	0BCH
   80: 1	N	 BD	PT2	BIT	0BDH
   81: 1	N	 C8	CPRL2	BIT	0C8H
   82: 1	N	 C9	CT2	BIT	0C9H
   83: 1	N	 CA	TR2	BIT	0CAH
   84: 1	N	 CB	EXEN2	BIT	0CBH
   85: 1	N	 CC	TCLK	BIT	0CCH
   86: 1	N	 CD	RCLK	BIT	0CDH
   87: 1	N	 CE	EXF2	BIT	0CEH
   88: 1	N	 CF	TF2	BIT	0CFH
   89: 1	N	 D0	P	BIT	0D0H
   90: 1	N	 D2	OV	BIT	0D2H
   91: 1	N	 D3	RS0	BIT	0D3H
   92: 1	N	 D4	RS1	BIT	0D4H
   93: 1	N	 D5	F0	BIT	0D5H
   94: 1	N	 D6	AC	BIT	0D6H
   95: 1	N	 D7	CY	BIT	0D7H
   96: 1
   97: 1	N      0000	RESET	CODE	000H
   98: 1	N      0003	EXTI0	CODE	003H
   99: 1	N      000B	TIMER0	CODE	00BH

ASEM-51 V1.3                                         Copyright (c) 2002 by W.W. Heinz                                         PAGE 3



 Line  I  Addr  Code            Source

  100: 1	N      0013	EXTI1	CODE	013H
  101: 1	N      001B	TIMER1	CODE	01BH
  102: 1	N      0023	SINT	CODE	023H
  103: 1	N      002B	TIMER2	CODE	02BH
  104:				;===============================================
  105:				; adjust base for RAM or ROM version
  106:				; RAM: 02000h
  107:				; ROM: 00000h
  108:				;===============================================
  109:		N      2000	base		equ	02000h
  110:		N      2000	vector		equ	base
  111:		N      0000	psw_init	equ	0		;value for psw (which reg bank to use)
  112:		N      0010	dnld_parm	equ 	10h		;block of 16 bytes for download
  113:		N      0050	stack		equ	50h		;location of the stack
  114:		D      0082	dpl		equ	dp0l
  115:		D      0083	dph		equ	dp0h
  116:		N      0000	monstart	equ	0
  117:
  118:						$include (vt102.a51)
  119: 1			;===============================================
  120: 1			; AT89S52 code for emulating a
  121: 1			; - VT102  terminal
  122: 1			; - ADM-3A terminal
  123: 1			; - DUMP   hex-dump terminal
  124: 1			;
  125: 1			; 2023-24 Roland Scholz (rolandscholz@gmx.de)
  126: 1			; no warranties
  127: 1			; do whatever you want with this code
  128: 1			; assembled with M-IDE Studio for MCS-51
  129: 1			;===============================================
  130: 1
  131: 1			;		$NOMOD51
  132: 1			;		$INCLUDE (89S52.MCU)
  133: 1
  134: 1	N      2000	vt102base	equ	base
  135: 1
  136: 1	N      0050	WIDTH		equ	80
  137: 1	N      0018	HEIGHT		equ	24
  138: 1
  139: 1	N      0000	ST_IDLE		equ	0
  140: 1	N      0002	ST_ESC		equ	2
  141: 1	N      0004	ST_CSI		equ	4
  142: 1	N      0006	ST_ESC_Q	equ	6
  143: 1	N      0008	ST_ESC_HASH	equ	8
  144: 1	N      000A	ST_CMD_ARG	equ	10
  145: 1	N      000C	ST_ESC_LBRACK	equ	12
  146: 1	N      000E	ST_CSI_Q	equ	14
  147: 1	N      0010	ST_ESC_RBRACK	equ	16
  148: 1	N      0012	ST_ROW		equ	18
  149: 1	N      0014	ST_COLUMN	equ	20
  150: 1
  151: 1	N      0000	BLACK		equ	0
  152: 1	N      0001	RED		equ	1
  153: 1	N      0002	GREEN		equ	2
  154: 1	N      0003	YELLOW		equ	3
  155: 1	N      0004	BLUE		equ	4

ASEM-51 V1.3                                         Copyright (c) 2002 by W.W. Heinz                                         PAGE 4



 Line  I  Addr  Code            Source

  156: 1	N      0005	MAGENTA		equ	5
  157: 1	N      0006	TURQUOISE	equ	6
  158: 1	N      0007	WHITE		equ	7
  159: 1
  160: 1	N      0070	DEFAULTCOLOR	equ	WHITE SHL 4 + BLACK
  161: 1
  162: 1	N      000A	C_TIME		equ	10
  163: 1
  164: 1	N      0007	C_BELL		equ	7
  165: 1	N      0008	C_BACKSP	equ	8
  166: 1	N      0009	C_TAB		equ	9
  167: 1	N      000A	C_NEWLINE	equ	10
  168: 1	N      000B	C_VT		equ	11
  169: 1	N      000C	C_FF		equ	12
  170: 1	N      000D	C_CR		equ	13
  171: 1	N      000E	C_SO		equ	14
  172: 1	N      000F	C_SI		equ	15
  173: 1	N      0011	C_XON		equ	17
  174: 1	N      0013	C_XOFF		equ	19
  175: 1	N      001B	C_ESC		equ	27
  176: 1	N      007F	C_DEL		equ	07fh
  177: 1
  178: 1	N      0007	CTRLG		equ	7
  179: 1	N      0008	CTRLH		equ	8
  180: 1	N      0009	CTRLI		equ	9
  181: 1	N      000A	CTRLJ		equ	10
  182: 1	N      000B	CTRLK		equ	11
  183: 1	N      000C	CTRLL		equ	12
  184: 1	N      000D	CTRLM		equ	13
  185: 1	N      001A	CTRLZ		equ	26
  186: 1	N      001E	CTRLLT		equ	30
  187: 1	N      001F	CTRLGT		equ	31
  188: 1
  189: 1	N      001C	CCHM		equ	01Ch	;move cursor home
  190: 1	N      001D	CCBT		equ	01Dh	;move cursor to bottom
  191: 1	N      001E	CCLM		equ	01Eh	;move cursor to left margin
  192: 1	N      001F	CCRM		equ	01Fh	;move cursor to right margin
  193: 1
  194: 1							;SUPERF equ 0
  195: 1
  196: 1	N      0001	CLS		equ	001h	;clear screen
  197: 1	N      0008	BACK		equ	008h	;backspace
  198: 1	N      0009	TABU		equ	009h	;tabulator
  199: 1	N      000A	LF		equ	00Ah	;$9B	;end of line (RETURN)
  200: 1	N      001B	ESC		equ	01Bh	;escape key
  201: 1	N      001C	CCUP		equ	01Ch	;cursor up
  202: 1	N      001D	CCDN		equ	01Dh	;cursor down
  203: 1	N      001E	CCLF		equ	01Eh	;cursor left
  204: 1	N      001F	CCRT		equ	01Fh	;cursor right
  205: 1	N      0020	CSPACE		equ	020h	;space
  206: 1	N      009D	CILN		equ	09Dh	;insert line
  207: 1	N      00FE	CDCH		equ	0FEh	;delete character
  208: 1	N      00FF	CICH		equ	0FFh	;insert character
  209: 1
  210: 1	N      0080	F1		equ	080h	;key code for F1
  211: 1	N      0081	F2		equ	081h	;key code for F2

ASEM-51 V1.3                                         Copyright (c) 2002 by W.W. Heinz                                         PAGE 5



 Line  I  Addr  Code            Source

  212: 1	N      0082	F3		equ	082h	;key code for F3
  213: 1	N      0083	F4		equ	083h	;key code for F4
  214: 1	N      0084	F5		equ	084h	;key code for F5
  215: 1	N      0085	F6		equ	085h	;key code for F6
  216: 1	N      0086	F7		equ	086h	;key code for F7
  217: 1	N      0087	F8		equ	087h	;key code for F8
  218: 1	N      0088	F9		equ	088h	;key code for F9
  219: 1	N      0089	F10		equ	089h	;key code for F10
  220: 1	N      008A	F11		equ	08ah	;key code for F11
  221: 1	N      008B	F12		equ	08bh	;key code for F12
  222: 1
  223: 1			;	special key scan-codes
  224: 1	N      0011	ALTGR		equ	011h	;extended!
  225: 1	N      0011	ALR		equ	011h
  226: 1	N      0012	CLSHIFT		equ	012h
  227: 1	N      0014	CLSTRG		equ	014h
  228: 1	N      0059	CRSHIFT		equ	059h
  229: 1	N      0058	CCAPS		equ	058h
  230: 1
  231: 1	N      00E0	EXTENDED	equ	0e0h
  232: 1	N      00F0	BREAK		equ	0f0h
  233: 1
  234: 1					;	0	;Error (ignored)
  235: 1	N      0001	DECCKM		equ	1	;Cursor key
  236: 1	N      0002	DECANM		equ	2	;ANSI/VT52
  237: 1	N      0003	DECCOLM		equ	3	;Column
  238: 1	N      0004	DECSCLM		equ	4	;Scrolling
  239: 1	N      0005	DECSCNM		equ	5	;Screen
  240: 1	N      0006	DECOM		equ	6	;Origin
  241: 1	N      0007	DECAWM		equ	7	;Auto wrap
  242: 1	N      0008	DECARM		equ	8	;Auto repeating
  243: 1	N      0009	DECINLM		equ	9	;Interlace
  244: 1	N      0004	IRM		equ	4	;Insert Replace mode
  245: 1	N      0014	LNM		equ	20	;new line mode
  246: 1
  247: 1	N      0030	VARLEN		equ	48
  248: 1
  249: 1	N      0020	VARS		equ	020h
  250: 1
  251: 1	N      0020	flags		equ	020h
  252: 1	B      0000	special		equ	flags.0
  253: 1	B      0001	lastchar	equ	flags.1
  254: 1	B      0002	lchartmp	equ	flags.2
  255: 1	B      0003	inverse		equ	flags.3
  256: 1	B      0004	xonoff		equ	flags.4
  257: 1	B      0005	serbusy		equ	flags.5
  258: 1
  259: 1	N      0021	flags1		equ	021h
  260: 1	B      0008	keyavail	equ	flags1.0
  261: 1	B      0009	keyrxextended	equ	flags1.1
  262: 1	B      000A	keyrxbreak	equ	flags1.2
  263: 1	B      000B	keyrxshift	equ	flags1.3
  264: 1	B      000C	keyrxaltgr	equ	flags1.4
  265: 1	B      000D	keyrxstrg	equ	flags1.5
  266: 1
  267: 1	N      0022	flags2		equ	022h

ASEM-51 V1.3                                         Copyright (c) 2002 by W.W. Heinz                                         PAGE 6



 Line  I  Addr  Code            Source

  268: 1	B      0010	wrap		equ	flags2.0
  269: 1	B      0011	origin		equ	flags2.1
  270: 1	B      0012	newlinemode	equ	flags2.2
  271: 1	B      0013	insert		equ	flags2.3
  272: 1	B      0014	databits	equ	flags2.4
  273: 1	B      0015	evenodd		equ	flags2.5
  274: 1	B      0016	termmode	equ	flags2.6
  275: 1	B      0017	dumpmode	equ	flags2.7
  276: 1
  277: 1	N      0023	retstate	equ	023h
  278: 1	N      0025	nargs		equ	025h
  279: 1	N      0026	arg0		equ	026h
  280: 1	N      0027	arg1		equ	027h
  281: 1	N      0028	arg2		equ	028h
  282: 1	N      0029	arg3		equ	029h
  283: 1	N      002A	baudidx		equ	02ah
  284: 1	N      002B	scursorx	equ	02bh
  285: 1	N      002C	scursory	equ	02ch
  286: 1	N      002D	color		equ	02dh
  287: 1	N      002E	cursorpos	equ	02eh
  288: 1	N      002F	cursorpos1	equ	02fh
  289: 1	N      0030	cursorsave	equ	030h
  290: 1	N      0031	top		equ	031h
  291: 1	N      0032	bottom		equ	032h
  292: 1	N      0033	state		equ	033h
  293: 1	N      0034	serstart	equ	034h
  294: 1	N      0035	serend		equ	035h
  295: 1	N      0036	sercount	equ	036h
  296: 1	N      0037	cursorx		equ	037h
  297: 1	N      0038	cursory		equ	038h
  298: 1	N      0039	t0cnt		equ	039h
  299: 1	N      003A	keyrxcnt	equ	03ah
  300: 1	N      003B	keyrxval	equ	03bh
  301: 1	N      003C	oldstatus	equ	03ch
  302: 1	N      003D	defcol		equ	03dh
  303: 1	N      003E	dumpcnt		equ	03eh
  304: 1
  305: 1	N      0040	tabutab		equ	040h		;10-bytes tabulator
  306: 1
  307: 1	N      004A	free0		equ	04ah
  308: 1	N      004B	free1		equ	04bh
  309: 1	N      004C	free2		equ	04ch
  310: 1	N      004D	free3		equ	04dh
  311: 1	N      004E	free4		equ	04eh
  312: 1	N      004F	free5		equ	04fh
  313: 1
  314: 1			;stack @ 50h
  315: 1
  316: 1	N      0080	serbuf		equ	080h
  317: 1	N      0040	serlim		equ	64
  318: 1
  319: 1			;===============================================
  320: 1			; Interrupt vector table
  321: 1			;
  322: 1			;===============================================
  323: 1	N      2000			org	vt102base

ASEM-51 V1.3                                         Copyright (c) 2002 by W.W. Heinz                                         PAGE 7



 Line  I  Addr  Code            Source

  324: 1  2000	41 82				ajmp	start
  325: 1
  326: 1	N      2003			org	vt102base + 3		;ext int0 vector
  327: 1  2003	41 53				ajmp	exint0			;PS/2 keyboard
  328: 1
  329: 1	N      200B			org	vt102base + 11		;timer0 vector
  330: 1  200B	41 36				ajmp	timer0int		;cursor blink
  331: 1
  332: 1	N      2013			org	vt102base + 19		;ext int1 vector
  333: 1									;not used
  334: 1
  335: 1	N      201B			org	vt102base + 27		;timer1 vector
  336: 1									;not used
  337: 1
  338: 1	N      2023			org	vt102base + 35		;uart vector
  339: 1  2023	41 03				ajmp	serint
  340: 1
  341: 1	N      202B			org	vt102base + 43		;timer2 vector (8052)
  342: 1									;not used
  343: 1
  344: 1			;
  345: 1			; leave space for a mini-monitor
  346: 1			;
  347: 1	N      2200			org	vt102base + 200h
  348: 1  2200	02 22 82			jmp	start
  349: 1
  350: 1  2203	30 99 05	serint:		jnb	ti, serintri		;ti active?
  351: 1  2206	C2 05				clr	serbusy
  352: 1  2208	C2 99				clr	ti
  353: 1  220A	32				reti
  354: 1
  355: 1  220B	C0 D0		serintri:	push	psw
  356: 1  220D	C0 E0				push	acc
  357: 1  220F	C0 00				push	ar0
  358: 1
  359: 1  2211	E5 35				mov	a, serend
  360: 1  2213	04				inc	a
  361: 1  2214	D2 E7				setb	acc.7
  362: 1  2216	F5 35				mov	serend, a
  363: 1  2218	F8				mov	r0, a
  364: 1  2219	A6 99				mov	@r0, sbuf
  365: 1
  366: 1  221B	20 04 0F			jb	xonoff, serintex	;XON/XOFF already active?
  367: 1  221E	C3				clr	c			;no compute number auf bytes in buffer
  368: 1  221F	95 34				subb	a, serstart
  369: 1  2221	50 02				jnc	serint1
  370: 1  2223	F4				cpl	a
  371: 1  2224	04				inc	a
  372: 1  2225	B4 40 05	serint1:	cjne	a, #serlim, serintex
  373: 1					;jc	serintex
  374: 1  2228	D2 04				setb	xonoff
  375: 1
  376: 1  222A	75 99 13			mov	SBUF, #C_XOFF
  377: 1
  378: 1  222D	D0 00		serintex:	pop	ar0
  379: 1  222F	D0 E0				pop	acc

ASEM-51 V1.3                                         Copyright (c) 2002 by W.W. Heinz                                         PAGE 8



 Line  I  Addr  Code            Source

  380: 1  2231	D0 D0				pop	psw
  381: 1  2233	C2 98				clr	ri			;no, receive int
  382: 1  2235	32				reti
  383: 1
  384: 1
  385: 1
  386: 1
  387: 1
  388: 1
  389: 1			;===============================================
  390: 1			; Timer 0 Interrupt 0
  391: 1			;===============================================
  392: 1  2236	D5 39 19	timer0int:	djnz	t0cnt, timer0int_ex
  393: 1  2239	75 39 0A			mov	t0cnt, #C_TIME
  394: 1  223C	C0 D0				push	psw
  395: 1  223E	C0 E0				push	acc
  396: 1  2240	C0 00				push	ar0
  397: 1
  398: 1  2242	85 2F A0			mov	p2, cursorpos+1
  399: 1  2245	A8 2E				mov	r0, cursorpos
  400: 1  2247	E2				movx	a, @r0
  401: 1  2248	E5 90				mov	a, p1
  402: 1  224A	F4				cpl	a
  403: 1  224B	F2				movx	@r0, a
  404: 1
  405: 1  224C	D0 00				pop	ar0
  406: 1  224E	D0 E0				pop	acc
  407: 1  2250	D0 D0				pop	psw
  408: 1  2252	32		timer0int_ex:	reti
  409: 1
  410: 1
  411: 1
  412: 1			;===============================================
  413: 1			; External Interrupt 0 (falling edge)
  414: 1			; collect bits sent from keyboard
  415: 1			; lsb first
  416: 1			; 8E1, start-bit (low), 8 data-bits, even-parity, stop-bit (high)
  417: 1			;===============================================
  418: 1  2253	C0 D0		exint0:		push	psw
  419: 1  2255	C0 E0				push	acc
  420: 1
  421: 1  2257	E5 3A				mov	a, keyrxcnt
  422: 1			;		mov	dptr, #8000h
  423: 1			;		clr	c
  424: 1			;		rlc	a
  425: 1			;		add	a, dp0l
  426: 1			;		mov	dp0l, a
  427: 1			;		clr	a
  428: 1			;		mov	a, #'0'
  429: 1			;		mov	c, t0
  430: 1			;		mov	acc.0, c
  431: 1			;		movx	@dptr, a
  432: 1
  433: 1  2259	E5 3A				mov	a, keyrxcnt
  434: 1  225B	70 03				jnz	exint0b			;first bit?
  435: 1  225D	20 B4 1D			jb	t0, exint0ex		;not zero, no startbit

ASEM-51 V1.3                                         Copyright (c) 2002 by W.W. Heinz                                         PAGE 9



 Line  I  Addr  Code            Source

  436: 1
  437: 1  2260	04		exint0b:	inc	a
  438: 1  2261	F5 3A				mov	keyrxcnt, a
  439: 1  2263	B4 0A 00			cjne	a, #10, $+3
  440: 1  2266	40 0E				jc	exint0a			;< 10, collect bits
  441: 1  2268	B4 0B 12			cjne	a, #11, exint0ex	;skip parity-bit
  442: 1  226B	75 3A 00			mov	keyrxcnt, #0
  443: 1  226E	30 B4 0C			jnb	t0, exint0ex		;no stop bit?
  444: 1  2271	12 2B F5			call	keydecode
  445: 1  2274	80 07				sjmp 	exint0ex
  446: 1
  447: 1  2276	E5 3B		exint0a:	mov	a, keyrxval
  448: 1  2278	A2 B4				mov	c, t0			;shift in bit of t0
  449: 1  227A	13				rrc	a
  450: 1  227B	F5 3B				mov	keyrxval, a
  451: 1
  452: 1  227D	D0 E0		exint0ex:	pop	acc
  453: 1  227F	D0 D0				pop	psw
  454: 1  2281	32				reti
  455: 1
  456: 1
  457: 1
  458: 1			;LOCAT		equ	02100h
  459: 1			;
  460: 1			;		org	LOCAT
  461: 1			;
  462: 1			;		ORG    LOCAT
  463: 1			;		DB     0A5H,0E5H,0E0H,0A5H	;SIGNITURE BYTES
  464: 1			;		DB     35,0,0,0			;ID (35=PROG), id (253=startup)
  465: 1			;		DB     0,0,0,0			;PROMPT CODE VECTOR
  466: 1			;		DB     0,0,0,0			;RESERVED
  467: 1			;		DB     0,0,0,0			;RESERVED
  468: 1			;		DB     0,0,0,0			;RESERVED
  469: 1			;		DB     0,0,0,0			;USER DEFINED
  470: 1			;		DB     255,255,255,255		;LENGTH AND CHECKSUM (255=UNUSED)
  471: 1			;		DB     "VT100",0		;MAX 31 CHARACTERS, PLUS THE ZERO
  472: 1
  473: 1			;		ORG    LOCAT+64			;EXECUTABLE CODE BEGINS HERE
  474: 1
  475: 1  2282			start:
  476: 1
  477: 1  2282	75 81 50			mov	sp, #stack		;set stack
  478: 1									;1  1  0  1	0    1    1   1
  479: 1  2285	75 B0 D7			mov	p3, #0d7h		;RD WR T1 T0	INT1 INT0 TXD RXD
  480: 1			;		clr	T0
  481: 1			;		clr	T1			;E 6845 = low
  482: 1			;		clr	INT0			;charset 0
  483: 1			;		clr	INT1			;screen 0
  484: 1  2288	E4				clr	a
  485: 1  2289	F5 A2				mov	AUXR1, a
  486: 1  228B	F5 A8				mov	ie, a
  487: 1
  488: 1
  489: 1			;		setb	PS			;make PS high priority
  490: 1									;enbale all, serial, timer0, extint0
  491: 1  228D	75 A8 93			mov	ie, #093h		;ea - ET2 ES  ET1 EX1 ET0 EX0

ASEM-51 V1.3                                        Copyright (c) 2002 by W.W. Heinz                                         PAGE 10



 Line  I  Addr  Code            Source

  492: 1  2290	D2 88				setb	it0			;set int0 to falling edge
  493: 1
  494: 1
  495: 1  2292	12 29 7A			call	term_reset
  496: 1
  497: 1  2295	74 11				mov	a, #C_XON
  498: 1  2297	12 2B A9			call	cout
  499: 1
  500: 1  229A	12 2B 17	init:		call	init6845
  501: 1  229D	12 2B 56			call	copyFont
  502: 1  22A0	12 2B 6F			call	testScreen
  503: 1
  504: 1  22A3	90 80 00			mov	dptr, #8000h
  505: 1  22A6	E0				movx	a, @dptr
  506: 1  22A7	E5 90				mov	a, p1
  507: 1  22A9	14				dec	a
  508: 1  22AA	60 06				jz	init_loop
  509: 1  22AC	90 00 00			mov	dptr, #0h
  510: 1  22AF	E0				movx	a, @dptr
  511: 1  22B0	80 E8				sjmp	init
  512: 1
  513: 1  22B2			init_loop:
  514: 1			;		call	cin
  515: 1			;		cjne	a, #'x', init_1
  516: 1			;		sjmp	init_2
  517: 1
  518: 1			;init_1:		cjne	a, #'y', init_loop
  519: 1
  520: 1			;loop_test:	call	cin
  521: 1			;		call	cout
  522: 1			;		sjmp	loop_test
  523: 1
  524: 1
  525: 1  22B2	D2 8C		init_2:		setb	tr0				;start timer0
  526: 1  22B4	12 29 7A			call	term_reset
  527: 1
  528: 1			;		mov	dptr, #msg1
  529: 1			;		call	print
  530: 1
  531: 1  22B7	30 08 79	main_loop:	jnb	keyavail, main_serin		;key available?
  532: 1  22BA	C2 08				clr	keyavail			;clear key available
  533: 1  22BC	E5 3B				mov	a, keyrxval
  534: 1
  535: 1  22BE	B4 84 02			cjne	a, #F5, main_F6			;F5 ?
  536: 1  22C1	41 B2				ajmp	init_2				;reset terminal
  537: 1  22C3	B4 85 0E	main_F6:	cjne	a, #F6, main_F7			;F6 ?
  538: 1  22C6	E5 2A				mov	a, baudidx			;switch baud
  539: 1  22C8	04				inc	a
  540: 1  22C9	B4 05 01			cjne	a, #5, main_F6a
  541: 1  22CC	E4				clr	a
  542: 1  22CD	F5 2A		main_F6a:	mov	baudidx, a
  543: 1  22CF	12 23 4E			call	setbaud
  544: 1  22D2	80 75				sjmp	main_status
  545: 1
  546: 1
  547: 1  22D4	B4 86 10	main_F7:	cjne	a, #F7, main_F8			;F7 8/7 data bits, even/odd

ASEM-51 V1.3                                        Copyright (c) 2002 by W.W. Heinz                                         PAGE 11



 Line  I  Addr  Code            Source

  548: 1  22D7	20 14 04			jb	databits, main_F7a
  549: 1  22DA	D2 14				setb	databits
  550: 1  22DC	80 6B				sjmp	main_status
  551: 1  22DE	B2 15		main_F7a:	cpl	evenodd
  552: 1  22E0	20 15 66			jb	evenodd, main_status
  553: 1  22E3	C2 14				clr	databits
  554: 1  22E5	80 62				sjmp	main_status
  555: 1
  556: 1
  557: 1  22E7	B4 87 10	main_F8:	cjne	a, #F8, main_F12		;F8 terminal mode VT102 / ADM-3A
  558: 1  22EA	20 16 04			jb	termmode, main_F8a
  559: 1  22ED	D2 16				setb	termmode
  560: 1  22EF	80 58				sjmp	main_status
  561: 1  22F1	B2 17		main_F8a:	cpl	dumpmode
  562: 1  22F3	20 17 53			jb	dumpmode, main_status
  563: 1  22F6	B2 16				cpl	termmode
  564: 1  22F8	80 4F				sjmp	main_status
  565: 1
  566: 1  22FA	B4 8B 0C	main_F12:	cjne	a, #F12, main_cout		;F12 cycle color
  567: 1  22FD	E5 3D				mov	a, defcol
  568: 1  22FF	24 10				add	a, #16
  569: 1  2301	54 7F				anl	a, #07fh
  570: 1  2303	F5 3D				mov	defcol, a
  571: 1  2305	F5 2D				mov	color, a
  572: 1  2307	80 AE				sjmp	main_loop
  573: 1
  574: 1  2309	30 16 0C	main_cout:	jnb	termmode, main_cout3		;ADM-3A to uppercase?
  575: 1  230C	B4 61 00			cjne	a, #'a', $+3			;< 'a'
  576: 1  230F	40 07				jc	main_cout3
  577: 1  2311	B4 7B 00			cjne	a, #'z'+1, $+3			;<= z?
  578: 1  2314	50 02				jnc	main_cout3
  579: 1  2316	94 1F				subb	a, #31				;=32, carry set
  580: 1
  581: 1  2318	30 14 0A	main_cout3:	jnb	databits, main_cout2		;8 databits, just output
  582: 1  231B	54 7F				anl	a, #07fh
  583: 1  231D	A2 D0				mov	c, P
  584: 1  231F	30 15 01			jnb	evenodd, main_cout1
  585: 1  2322	B3				cpl	c
  586: 1  2323	92 E7		main_cout1:	mov	acc.7, c
  587: 1
  588: 1  2325	12 2B A9	main_cout2:	call	cout				;send out over serial
  589: 1  2328	B4 0D 08			cjne	a, #C_CR, main_serin		;CR sent?
  590: 1  232B	30 12 05			jnb	newlinemode, main_serin
  591: 1  232E	74 0A				mov	a, #C_NEWLINE			;send LF, too
  592: 1  2330	12 2B A9			call	cout
  593: 1
  594: 1  2333	E5 34		main_serin:	mov	a, serstart			;serin available?
  595: 1  2335	B5 35 02			cjne	a, serend, loop_cin
  596: 1  2338	41 B7				ajmp	main_loop			;no serin available
  597: 1
  598: 1  233A	12 2B B1	loop_cin:	call	cin				;read from serial
  599: 1  233D	12 23 5A			call	ansiout				;output to terminal's CRT
  600: 1
  601: 1  2340	E5 22				mov	a, flags2			;have flags changed?
  602: 1  2342	65 3C				xrl	a, oldstatus
  603: 1  2344	60 06				jz	main_loop1			;no

ASEM-51 V1.3                                        Copyright (c) 2002 by W.W. Heinz                                         PAGE 12



 Line  I  Addr  Code            Source

  604: 1  2346	85 22 3C			mov	oldstatus, flags2
  605: 1  2349	12 2E 0A	main_status:	call	prtstatus			;print status-line
  606: 1  234C	41 B7		main_loop1:	ajmp	main_loop
  607: 1
  608: 1
  609: 1  234E	12 2D DE	setbaud:	call	getbaud
  610: 1  2351	C2 8E				clr	tr1
  611: 1  2353	F5 8D				mov	TH1, a
  612: 1  2355	F5 8B				mov	TL1, a
  613: 1  2357	D2 8E				setb	tr1
  614: 1  2359	22				ret
  615: 1			;===============================================
  616: 1			; ansiout: dispatch vt102 or ADM-3A or DUMPMDOE
  617: 1			;===============================================
  618: 1  235A	30 14 02	ansiout:	jnb	databits, ansiout3		;8-bit?
  619: 1  235D	54 7F				anl	a, #07fh			;mask out bit 7
  620: 1  235F	FF		ansiout3:	mov	r7, a				;save acc in r7
  621: 1
  622: 1  2360	A2 01				mov	C, lastchar
  623: 1  2362	92 02				mov	lchartmp, C
  624: 1  2364	C2 01				clr	lastchar
  625: 1
  626: 1  2366	E4				clr	a
  627: 1  2367	F8				mov	r0, a				;x-offset
  628: 1  2368	F9				mov	r1, a				;y-offset
  629: 1  2369	FA				mov	r2, a				;scrolling, 0 = no
  630: 1
  631: 1  236A	20 17 25			jb	dumpmode, dumpterm
  632: 1  236D	20 16 4A			jb	termmode, adm3a			;switch to ADM-3A
  633: 1
  634: 1  2370	E5 33				mov	a, state
  635: 1			;		jz	do_idle				;speed up
  636: 1  2372	24 0C				add	a, #ansi_tab-ansiout1+1		;fetch low-byte
  637: 1  2374	83				movc	a, @a+pc
  638: 1  2375	C0 E0		ansiout1:	push	acc				;2
  639: 1  2377	E5 33				mov	a, state			;2
  640: 1  2379	24 04				add	a, #ansi_tab-ansiout2		;2
  641: 1  237B	83				movc	a, @a+pc			;1 fetch, high-byte
  642: 1  237C	C0 E0		ansiout2:	push	acc				;2
  643: 1  237E	EF				mov	a, r7				;1
  644: 1  237F	22				ret					;1
  645: 1
  646: 1  2380	24 36 25 30	ansi_tab:	dw	do_idle, do_esc, do_csi, do_esc_q, do_esc_hash, do_cmd_arg, do_esc_lbrack, d
       1  2384	25 93 28 B1	o_csi_q
       1  2388	28 B5 28 CD
       1  238C	28 C1 28 64
  647: 1  2390	28 C1				dw	do_esc_rbrack
  648: 1
  649: 1  2392	EF		dumpterm:	mov	a, r7
  650: 1  2393	71 A9				acall	dumpnibble
  651: 1  2395	71 A9				acall	dumpnibble
  652: 1  2397	7F 20				mov	r7, #' '
  653: 1  2399	91 AD				acall	draw_char
  654: 1  239B	E5 3E				mov	a, dumpcnt
  655: 1  239D	04				inc	a
  656: 1  239E	B4 10 05			cjne	a, #16, dumpterm2

ASEM-51 V1.3                                        Copyright (c) 2002 by W.W. Heinz                                         PAGE 13



 Line  I  Addr  Code            Source

  657: 1  23A1	78 00				mov	r0, #0
  658: 1  23A3	91 79				acall	do_newline
  659: 1  23A5	E4				clr	a
  660: 1  23A6	F5 3E		dumpterm2:	mov	dumpcnt, a
  661: 1  23A8	22				ret
  662: 1
  663: 1  23A9	C4		dumpnibble:	swap	a				;SWAP A will be twice => A unchanged
  664: 1  23AA	C0 E0				push	acc
  665: 1  23AC	54 0F				anl	a, #15
  666: 1  23AE	24 90				add	a, #90h				; acc is 0x9X, where X is hex digit
  667: 1  23B0	D4				da	a				; if A to F, C=1 and lower four bits are 0..
       1			5
  668: 1  23B1	34 40				addc	a, #40h
  669: 1  23B3	D4				da	a
  670: 1  23B4	FF				mov	r7, a
  671: 1  23B5	91 AD				acall	draw_char
  672: 1  23B7	D0 E0				pop	acc
  673: 1  23B9	22				ret
  674: 1
  675: 1
  676: 1			;===============================================
  677: 1			; ADM-3A code
  678: 1			;===============================================
  679: 1  23BA	E5 33		adm3a:		mov	a, state
  680: 1  23BC	B4 00 3E			cjne	a, #ST_IDLE, adm_esc		;not in IDLE state?
  681: 1
  682: 1			;===============================================
  683: 1			; state ADM_IDLE
  684: 1			;===============================================
  685: 1  23BF	BF 20 00			cjne	r7, #32, $+3			;<32, do CTRL-codes
  686: 1  23C2	40 02				jc	adm_ctrl_g
  687: 1  23C4	81 AD				ajmp	draw_char
  688: 1
  689: 1  23C6	BF 07 02	adm_ctrl_g:	cjne	r7, #CTRLG, adm_ctrl_h
  690: 1  23C9	81 45				ajmp	do_idle_bell+3			;bell
  691: 1  23CB	BF 08 02	adm_ctrl_h:	cjne	r7, #CTRLH, adm_ctrl_i
  692: 1  23CE	81 49				ajmp	do_idle_bs+3			;back space
  693: 1  23D0	BF 09 02	adm_ctrl_i:	cjne	r7, #CTRLI, adm_ctrl_j
  694: 1  23D3	81 50				ajmp	do_idle_tab+3			;tab
  695: 1  23D5	BF 0A 02	adm_ctrl_j:	cjne	r7, #CTRLJ, adm_ctrl_k
  696: 1  23D8	81 79				ajmp	do_idle_nl+3			;newline
  697: 1  23DA	BF 0B 02	adm_ctrl_k:	cjne	r7, #CTRLK, adm_ctrl_l
  698: 1  23DD	A1 61				ajmp	do_esc_M+3			;cursor up
  699: 1  23DF	BF 0C 02	adm_ctrl_l:	cjne	r7, #CTRLL, adm_ctrl_m
  700: 1  23E2	A1 C4				ajmp	do_csi_C+3			;cursor right
  701: 1  23E4	BF 0D 02	adm_ctrl_m:	cjne	r7, #CTRLM, adm_ctrl_z
  702: 1  23E7	81 84				ajmp	do_idle_cr+3			;carriage return
  703: 1  23E9	BF 1A 05	adm_ctrl_z:	cjne	r7, #CTRLZ, adm_ctrl_esc
  704: 1  23EC	12 2A 7F	adm_ctrl_z1:	call	clear_screen			;clr-home
  705: 1  23EF	E1 0F				ajmp	do_csi_rc
  706: 1  23F1	BF 1B 03	adm_ctrl_esc:	cjne	r7, #ESC, adm_ctrl_lt
  707: 1  23F4	75 33 02			mov	state, #ST_ESC			;ESC
  708: 1  23F7	BF 1E 02	adm_ctrl_lt:	cjne	r7, #CTRLLT, adm_ctrl_gr
  709: 1  23FA	E1 0F				ajmp	do_csi_rc			;CTRL-< (home)
  710: 1  23FC			adm_ctrl_gr:	;cjne	r7, #CTRLGT, adm_ctrl_draw
  711: 1  23FC	22				ret					;CTRL-> (direct)

ASEM-51 V1.3                                        Copyright (c) 2002 by W.W. Heinz                                         PAGE 14



 Line  I  Addr  Code            Source

  712: 1
  713: 1
  714: 1			;===============================================
  715: 1			; state ADM_ESC
  716: 1			;===============================================
  717: 1  23FD	B4 02 1F	adm_esc:	cjne	a, #ST_ESC, adm_row		;ESC = <row> <col>?
  718: 1  2400	75 33 00			mov	state, #ST_IDLE
  719: 1  2403	BF 2A 02			cjne	r7, #'*', adm_esc_7
  720: 1  2406	61 EC				ajmp	adm_ctrl_z1			;clr-home
  721: 1  2408	BF 37 02	adm_esc_7:	cjne	r7, #'7', adm_esc_eq
  722: 1  240B	D2 03				setb	inverse				;inverse
  723: 1  240D	BF 3D 03	adm_esc_eq:	cjne	r7, #'=', adm_esc_lbr
  724: 1  2410	75 33 12			mov	state, #ST_ROW
  725: 1  2413	BF 28 02	adm_esc_lbr:	cjne	r7, #'(', adm_esc_esc
  726: 1  2416	C2 03				clr	inverse
  727: 1  2418	BF 1B 03	adm_esc_esc:	cjne	r7, #C_ESC, adm_esc_ex
  728: 1  241B	02 00 00			ljmp	monstart
  729: 1  241E	22		adm_esc_ex:	ret
  730: 1
  731: 1			;===============================================
  732: 1			; state ADM_ROW
  733: 1			;===============================================
  734: 1  241F	B4 12 09	adm_row:	cjne	a, #ST_ROW, adm_column
  735: 1  2422	75 33 14			mov	state, #ST_COLUMN
  736: 1  2425	EF				mov	a, r7
  737: 1  2426	94 20				subb	a, #32				;carry clear!
  738: 1  2428	F5 38				mov	cursory, a
  739: 1  242A	22				ret
  740: 1
  741: 1			;===============================================
  742: 1			; state ADM_COLUMN
  743: 1			;===============================================
  744: 1  242B	75 33 00	adm_column:	mov	state, #ST_IDLE
  745: 1  242E	EF				mov	a, r7
  746: 1  242F	94 20				subb	a, #32				;carry clear! R7 > ST_ROW
  747: 1  2431	F5 37				mov	cursorx, a
  748: 1  2433	02 29 0C			jmp	ansi_move
  749: 1
  750: 1
  751: 1			;===============================================
  752: 1			; state VT102-IDLE
  753: 1			;===============================================
  754: 1  2436			do_idle:
  755: 1
  756: 1  2436	BF 7F 04	do_idle_del:	cjne	r7, #C_DEL, do_idle_pre
  757: 1  2439	18				dec	r0
  758: 1  243A	02 29 0C			jmp	ansi_move
  759: 1
  760: 1  243D	BF 20 00	do_idle_pre:	cjne	r7, #32, $+3			;speed up
  761: 1  2440	50 6B				jnc	draw_char
  762: 1
  763: 1  2442	BF 07 01	do_idle_bell:	cjne	r7, #C_BELL, do_idle_bs
  764: 1  2445	22				ret					;no bell yet
  765: 1
  766: 1  2446	BF 08 04	do_idle_bs:	cjne	r7, #C_BACKSP, do_idle_tab	;backspace
  767: 1  2449	18				dec	r0

ASEM-51 V1.3                                        Copyright (c) 2002 by W.W. Heinz                                         PAGE 15



 Line  I  Addr  Code            Source

  768: 1  244A	02 29 0C			jmp	ansi_move
  769: 1
  770: 1  244D	BF 09 26	do_idle_tab:	cjne	r7, #C_TAB, do_idle_nl		;tabulator
  771: 1  2450	12 29 C7			call	tab_set_r0_r1
  772: 1  2453	E4		do_idle_tab3:	clr	a
  773: 1  2454	09				inc	r1
  774: 1  2455	05 37				inc	cursorx
  775: 1  2457	B9 08 10			cjne	r1, #8, do_idle_tab1
  776: 1  245A	08				inc	r0
  777: 1  245B	F9				mov	r1, a
  778: 1  245C	B8 4A 0B			cjne	r0, #tabutab+10, do_idle_tab1
  779: 1  245F	F8				mov	r0, a
  780: 1  2460	F5 37				mov	cursorx, a
  781: 1  2462	09				inc	r1
  782: 1  2463	0A				inc	r2				;scroll on
  783: 1  2464	12 29 0C			call	ansi_move
  784: 1  2467	12 29 C7			call	tab_set_r0_r1
  785: 1  246A	12 29 D7	do_idle_tab1:	call	getbit
  786: 1  246D	56				anl	a, @r0
  787: 1  246E	60 E3				jz	do_idle_tab3			;bit not found
  788: 1  2470	E4		do_idle_tab2:	clr	a
  789: 1  2471	F8				mov	r0, a
  790: 1  2472	F9				mov	r1, a
  791: 1  2473	02 29 0C			jmp	ansi_move
  792: 1
  793: 1
  794: 1  2476	BF 0A 08	do_idle_nl:	cjne	r7, #C_NEWLINE, do_idle_cr
  795: 1  2479	75 37 00	do_newline:	mov	cursorx, #0
  796: 1  247C	09				inc	r1
  797: 1  247D	0A				inc	r2
  798: 1  247E	02 29 0C			jmp	ansi_move
  799: 1
  800: 1  2481	BF 0D 0A	do_idle_cr:	cjne	r7, #C_CR, do_idle_esc
  801: 1  2484	75 37 00	do_cr:		mov	cursorx, #0
  802: 1  2487	12 29 0C			call	ansi_move
  803: 1  248A	20 12 EC			jb	newlinemode, do_newline		;per default, CR
  804: 1  248D	22				ret
  805: 1
  806: 1  248E	BF 1B 06	do_idle_esc:	cjne	r7, #C_ESC, do_idle_so
  807: 1  2491	75 33 02			mov	state, #ST_ESC
  808: 1  2494	02 29 E3			jmp	clearargs
  809: 1
  810: 1  2497	BF 0E 03	do_idle_so:	cjne	r7, #C_SO, do_idle_si
  811: 1  249A	D2 00				setb	special
  812: 1  249C	22				ret
  813: 1
  814: 1  249D	BF 0F 03	do_idle_si:	cjne	r7, #C_SI, do_idle_vt
  815: 1  24A0	C2 00				clr	special
  816: 1  24A2	22				ret
  817: 1
  818: 1  24A3	BF 0B 02	do_idle_vt:	cjne	r7, #C_VT, do_idle_ff
  819: 1  24A6	80 D1				sjmp	do_newline
  820: 1
  821: 1  24A8	BF 0C 02	do_idle_ff:	cjne	r7, #C_FF, do_idle_end
  822: 1  24AB	80 CC				sjmp	do_newline
  823: 1

ASEM-51 V1.3                                        Copyright (c) 2002 by W.W. Heinz                                         PAGE 16



 Line  I  Addr  Code            Source

  824: 1  24AD			do_idle_end:	;ajmp	draw_char
  825: 1
  826: 1
  827: 1
  828: 1  24AD	C0 07		draw_char:	push	ar7				;save r7 (received byte)
  829: 1  24AF	12 2A E0			call	cursor_off			;reset + disable cursor
  830: 1
  831: 1  24B2	0A				inc	r2				;with scroll
  832: 1  24B3	30 02 05			jnb	lchartmp, char_out		;last char in line?
  833: 1  24B6	30 10 02			jnb	wrap, char_out			;wrap turned on?
  834: 1  24B9	91 79				call	do_newline
  835: 1
  836: 1			;===============================================
  837: 1			; draws a char in ACC at cursor position
  838: 1			;===============================================
  839: 1  24BB	12 2B 03	char_out:	call	comp_dptr
  840: 1
  841: 1  24BE	D0 01				pop	ar1
  842: 1
  843: 1  24C0	30 00 0E			jnb	special, char_out_3	;special not set?
  844: 1  24C3	B9 60 00			cjne	r1, #060h, $+3
  845: 1  24C6	40 09				jc	char_out_3		;<60h, do nothing
  846: 1  24C8	B9 7F 00			cjne	r1, #07fh, $+3
  847: 1  24CB	50 04				jnc	char_out_3		;>=7fh, do nothing
  848: 1  24CD	E9				mov	a, r1
  849: 1  24CE	94 5E				subb	a, #5eh			;carry set! subtract 5fh
  850: 1  24D0	F9				mov	r1, a
  851: 1  24D1	30 13 3D	char_out_3:	jnb	insert, char_out_4	;insert mode?
  852: 1
  853: 1  24D4	C3				clr	c
  854: 1  24D5	74 4F				mov	a, #WIDTH-1
  855: 1  24D7	95 37				subb	a, cursorx
  856: 1  24D9	33				rlc	a			;* 2
  857: 1  24DA	60 35				jz	char_out_4
  858: 1  24DC	F8				mov	r0, a			;R0: number of chars to copy in
  859: 1  24DD	04				inc	a
  860: 1
  861: 1  24DE	25 84				add	a, dp1l			;add r0, to dptr1 (destination)
  862: 1  24E0	F5 84				mov	dp1l, a
  863: 1  24E2	E5 85				mov	a, dp1h
  864: 1  24E4	34 00				addc	a, #0
  865: 1  24E6	F5 85				mov	dp1h, a
  866: 1
  867: 1  24E8	E5 84				mov	a, dp1l			;dptr0 = dptr1 - 2 (source)
  868: 1  24EA	94 02				subb	a, #2
  869: 1  24EC	F5 82				mov	dp0l, a
  870: 1  24EE	E5 85				mov	a, dp1h
  871: 1  24F0	94 00				subb	a, #0
  872: 1  24F2	F5 83				mov	dp0h, a
  873: 1
  874: 1  24F4	E0		char_out_2:	movx	a, @dptr		;copy r0 bytes from right to left
  875: 1  24F5	05 A2				inc	auxr1
  876: 1  24F7	E5 90				mov	a, p1
  877: 1  24F9	F0				movx	@dptr, a
  878: 1  24FA	05 A2				inc	auxr1
  879: 1  24FC	E5 82				mov	a, dp0l

ASEM-51 V1.3                                        Copyright (c) 2002 by W.W. Heinz                                         PAGE 17



 Line  I  Addr  Code            Source

  880: 1  24FE	70 02				jnz	char_out_2a
  881: 1  2500	15 83				dec	dp0h
  882: 1  2502	15 82		char_out_2a:	dec	dp0l
  883: 1  2504	E5 84				mov	a, dp1l
  884: 1  2506	70 02				jnz	char_out_2b
  885: 1  2508	15 85				dec	dp1h
  886: 1  250A	15 84		char_out_2b:	dec	dp1l
  887: 1  250C	D8 E6				djnz	r0, char_out_2
  888: 1  250E	12 2B 03			call	comp_dptr
  889: 1
  890: 1  2511	E9		char_out_4:	mov	a, r1
  891: 1  2512	05 A2				inc	auxr1
  892: 1  2514	F0				movx	@dptr, a
  893: 1  2515	A3				inc	dptr
  894: 1  2516	E5 2D				mov	a, color
  895: 1  2518	30 03 01			jnb	inverse, char_out_1
  896: 1  251B	C4				swap	a
  897: 1  251C	F0		char_out_1:	movx	@dptr, a
  898: 1  251D	05 A2				inc	auxr1
  899: 1
  900: 1  251F	E5 37				mov	a, cursorx
  901: 1  2521	B4 4F 02			cjne	a, #WIDTH-1, draw_char_1
  902: 1  2524	D2 01				setb	lastchar
  903: 1
  904: 1  2526	78 01		draw_char_1:	mov	r0, #1
  905: 1  2528	79 00				mov	r1, #0
  906: 1  252A	12 2A C0			call	draw_cursor
  907: 1  252D	02 29 0C			jmp	ansi_move
  908: 1
  909: 1			;===============================================
  910: 1			; state ESC
  911: 1			;===============================================
  912: 1  2530	75 33 00	do_esc:		mov	state, #ST_IDLE
  913: 1  2533	B4 1B 03			cjne	a, #C_ESC, do_esc_csi	;2x ESC? return to monitor
  914: 1			;		call	dump_vars
  915: 1			;		call	cin
  916: 1  2536	02 00 00			ljmp	monstart
  917: 1
  918: 1  2539	B4 5B 04	do_esc_csi:	cjne	a, #'[', do_esc_7	;switch to CSI state
  919: 1  253C	75 33 04			mov	state, #ST_CSI
  920: 1  253F	22				ret
  921: 1
  922: 1  2540	B4 37 07	do_esc_7:	cjne	a, #'7', do_esc_8	;save cursor
  923: 1  2543	85 37 2B			mov	scursorx, cursorx
  924: 1  2546	85 38 2C			mov	scursory, cursory
  925: 1  2549	22				ret
  926: 1
  927: 1  254A	B4 38 09	do_esc_8:	cjne	a, #'8', do_esc_D	;restore cursor
  928: 1  254D	85 2B 37			mov	cursorx, scursorx
  929: 1  2550	85 2C 38			mov	cursory, scursory
  930: 1  2553	02 2A BD			jmp	move_cursor
  931: 1
  932: 1  2556	B4 44 05	do_esc_D:	cjne	a, #'D', do_esc_M	;move cursor down and scroll
  933: 1  2559	0A				inc	r2			;with scrolling
  934: 1  255A	74 42				mov	a, #'B'
  935: 1  255C	A1 A1				ajmp	do_csi_keys		;do cursor down

ASEM-51 V1.3                                        Copyright (c) 2002 by W.W. Heinz                                         PAGE 18



 Line  I  Addr  Code            Source

  936: 1
  937: 1  255E	B4 4D 05	do_esc_M:	cjne	a, #'M', do_esc_ha	;move cursor up and scroll
  938: 1  2561	0A				inc	r2			;with scrolling
  939: 1  2562	74 41				mov	a, #'A'
  940: 1  2564	A1 A1				ajmp	do_csi_keys		;do cursor up
  941: 1
  942: 1  2566	B4 23 04	do_esc_ha:	cjne	a, #'#', do_esc_lbr
  943: 1  2569	75 33 08			mov	state, #ST_ESC_HASH
  944: 1  256C	22				ret
  945: 1
  946: 1  256D	B4 28 04	do_esc_lbr:	cjne	a, #'(', do_esc_rbr
  947: 1  2570	75 33 0C			mov	state, #ST_ESC_LBRACK
  948: 1  2573	22				ret
  949: 1
  950: 1  2574	B4 29 04	do_esc_rbr:	cjne	a, #')', do_esc_c
  951: 1  2577	75 33 10			mov	state, #ST_ESC_RBRACK
  952: 1  257A	22				ret
  953: 1
  954: 1  257B	B4 63 03	do_esc_c:	cjne	a, #'c', do_esc_H
  955: 1  257E	02 29 7A			jmp	term_reset
  956: 1
  957: 1  2581	B4 48 09	do_esc_H:	cjne	a, #'H', do_esc_Z
  958: 1  2584	12 29 C7			call	tab_set_r0_r1
  959: 1  2587	12 29 D7			call	getbit
  960: 1  258A	46				orl	a, @r0
  961: 1  258B	F6				mov	@r0, a
  962: 1  258C	22				ret
  963: 1
  964: 1  258D	B4 5A 02	do_esc_Z:	cjne	a, #'Z', do_esc_ex
  965: 1  2590	C1 CA				ajmp	do_csi_cc2
  966: 1
  967: 1  2592	22		do_esc_ex:	ret
  968: 1
  969: 1			;===============================================
  970: 1			; state CSI
  971: 1			;===============================================
  972: 1  2593			do_csi:
  973: 1  2593	12 29 63			call	isparm			;is parameter?
  974: 1  2596	50 09				jnc	do_csi_keys		;no
  975: 1  2598	85 33 23			mov	retstate, state
  976: 1  259B	75 33 0A			mov	state, #ST_CMD_ARG
  977: 1  259E	02 28 CD			jmp	do_cmd_arg
  978: 1
  979: 1  25A1	78 00		do_csi_keys:	mov	r0, #0			;x (column)
  980: 1  25A3	79 00				mov	r1, #0			;y (row
  981: 1  25A5	75 33 00			mov	state, #ST_IDLE
  982: 1
  983: 1  25A8	B4 41 0B			cjne	a, #'A', do_csi_B	;cursor up
  984: 1  25AB	12 28 F8			call	args_gr_zero
  985: 1  25AE	E5 26				mov	a, arg0
  986: 1  25B0	F4				cpl	a
  987: 1  25B1	04				inc	a
  988: 1  25B2	F9				mov	r1, a
  989: 1  25B3	02 29 0C			jmp	ansi_move
  990: 1
  991: 1

ASEM-51 V1.3                                        Copyright (c) 2002 by W.W. Heinz                                         PAGE 19



 Line  I  Addr  Code            Source

  992: 1  25B6	B4 42 08	do_csi_B: 	cjne	a, #'B', do_csi_C	;cursor down
  993: 1  25B9	12 28 F8			call	args_gr_zero
  994: 1  25BC	A9 26				mov	r1, arg0
  995: 1  25BE	02 29 0C			jmp	ansi_move
  996: 1
  997: 1
  998: 1  25C1	B4 43 08	do_csi_C:	cjne	a, #'C', do_csi_D	;cursor right
  999: 1  25C4	12 28 F8			call	args_gr_zero
 1000: 1  25C7	A8 26				mov	r0, arg0
 1001: 1  25C9	02 29 0C			jmp	ansi_move
 1002: 1
 1003: 1
 1004: 1  25CC	B4 44 0B	do_csi_D:	cjne	a, #'D', do_csi_H 	;cursor left
 1005: 1  25CF	12 28 F8			call	args_gr_zero
 1006: 1  25D2	E5 26				mov	a, arg0
 1007: 1  25D4	F4				cpl	a
 1008: 1  25D5	04				inc	a
 1009: 1  25D6	F8				mov	r0, a
 1010: 1  25D7	02 29 0C			jmp	ansi_move
 1011: 1
 1012: 1
 1013: 1  25DA	B4 48 02	do_csi_H:	cjne	a, #'H', do_csi_H1	;position cursor
 1014: 1  25DD	80 03				sjmp	do_csi_H2
 1015: 1  25DF	B4 66 10	do_csi_H1:	cjne	a, #'f', do_csi_s
 1016: 1  25E2	12 28 F8	do_csi_H2:	call	args_gr_zero
 1017: 1  25E5	E5 26				mov	a, arg0
 1018: 1  25E7	14				dec	a
 1019: 1  25E8	F5 38				mov	cursory, a
 1020: 1  25EA	E5 27				mov	a, arg1
 1021: 1  25EC	14				dec	a
 1022: 1  25ED	F5 37				mov	cursorx, a
 1023: 1  25EF	02 29 0C			jmp	ansi_move
 1024: 1
 1025: 1
 1026: 1  25F2	B4 73 07	do_csi_s:	cjne	a, #'s', do_csi_u	;save cursor
 1027: 1  25F5	85 37 2B			mov	scursorx, cursorx
 1028: 1  25F8	85 38 2C			mov	scursory, cursory
 1029: 1  25FB	22				ret
 1030: 1
 1031: 1
 1032: 1  25FC	B4 75 09	do_csi_u:	cjne	a, #'u', do_csi_m	;restore cursor
 1033: 1  25FF	85 2B 37			mov	cursorx, scursorx
 1034: 1  2602	85 2C 38			mov	cursory, scursory
 1035: 1  2605	02 29 0C			jmp	ansi_move
 1036: 1
 1037: 1
 1038: 1  2608	B4 6D 6A	do_csi_m:	cjne	a, #'m', do_csi_n	;color handling
 1039: 1  260B	A9 25				mov	r1, nargs
 1040: 1  260D	B9 00 06			cjne	r1, #0, do_csi_ma	;no args, reset
 1041: 1  2610	85 3D 2D			mov	color, defcol
 1042: 1  2613	C2 03				clr	inverse
 1043: 1  2615	22				ret
 1044: 1  2616	78 26		do_csi_ma:	mov	r0, #arg0
 1045: 1  2618	E6		do_csi_mc:	mov	a, @r0
 1046: 1  2619	B4 00 07			cjne	a, #0, do_csi_md	;if arg = 0, all attrs off
 1047: 1  261C	85 3D 2D			mov	color, defcol

ASEM-51 V1.3                                        Copyright (c) 2002 by W.W. Heinz                                         PAGE 20



 Line  I  Addr  Code            Source

 1048: 1  261F	C2 03				clr	inverse
 1049: 1  2621	C1 71				ajmp	do_csi_mx3		;loop nargs
 1050: 1  2623	B4 1E 00	do_csi_md:	cjne	a, #30, do_csi_mb
 1051: 1  2626	50 02		do_csi_mb:	jnc	do_csi_me		;arg >= 30
 1052: 1  2628	80 2A				sjmp	do_csi_mx		;loop nargs
 1053: 1  262A	B4 26 00	do_csi_me:	cjne	a, #38, do_csi_mf
 1054: 1  262D	50 42		do_csi_mf:	jnc	do_csi_mx3		;>= 38	loop nargs
 1055: 1  262F	94 1D				subb	a, #29			; - 30 (carry set!)
 1056: 1  2631	C4				swap	a
 1057: 1  2632	FA				mov	r2, a
 1058: 1  2633	E5 2D				mov	a, color
 1059: 1  2635	54 0F				anl	a, #0fh
 1060: 1  2637	4A				orl	a, r2
 1061: 1  2638	F5 2D				mov	color, a
 1062: 1  263A	C1 71				ajmp	do_csi_mx3		;loop nargs
 1063: 1  263C	B4 28 00	do_csi_mg:	cjne	a, #40, $+3
 1064: 1  263F	50 02				jnc	do_csi_mh		;>= 40
 1065: 1  2641	C1 54				ajmp	do_csi_mx		;loop nargs
 1066: 1  2643	B4 30 00	do_csi_mh:	cjne	a, #48, $+3
 1067: 1  2646	50 0C				jnc	do_csi_mx		;>= 48 loop
 1068: 1  2648	94 27				subb	a, #39			;- 40 (carry set!)
 1069: 1  264A	FA				mov	r2, a
 1070: 1  264B	F5 2D				mov	color, a
 1071: 1  264D	54 F0				anl	a, #0f0h
 1072: 1  264F	4A				orl	a, r2
 1073: 1  2650	F5 2D				mov	color, a
 1074: 1  2652	C1 71				ajmp	do_csi_mx3		;loop nargs
 1075: 1  2654	B4 07 02	do_csi_mx:	cjne	a, #7, do_csi_mx1	;inverse
 1076: 1  2657	D2 03				setb	inverse
 1077: 1  2659	B4 01 0A	do_csi_mx1:	cjne	a, #1, do_csi_mx2	;bold
 1078: 1  265C	E5 2D				mov	a, color
 1079: 1  265E	54 0F				anl	a, #0fh
 1080: 1  2660	44 30				orl	a, #YELLOW SHL 4
 1081: 1  2662	F5 2D				mov	color, a
 1082: 1  2664	80 0B				sjmp	do_csi_mx3
 1083: 1  2666	B4 05 08	do_csi_mx2:	cjne	a, #5, do_csi_mx3
 1084: 1  2669	E5 2D				mov	a, color		;underline
 1085: 1  266B	54 0F				anl	a, #0fh
 1086: 1  266D	44 10				orl	a, #RED SHL 4
 1087: 1  266F	F5 2D				mov	color, a
 1088: 1  2671	08		do_csi_mx3:	inc	r0
 1089: 1  2672	D9 A4				djnz	r1, do_csi_mc
 1090: 1  2674	22				ret
 1091: 1
 1092: 1  2675	B4 6E 4F	do_csi_n:	cjne	a, #'n', do_csi_cc	;terminal status report
 1093: 1  2678	E5 26				mov	a, arg0
 1094: 1  267A	B4 05 0E			cjne	a, #5, do_csi_n6
 1095: 1  267D	78 01				mov	r0, #1			;always OK: "ESC [ 0 n"
 1096: 1  267F	E8		do_csi_n1:	mov	a, r0
 1097: 1  2680	12 26 BA			call	getreport
 1098: 1  2683	12 2B A9			call	cout
 1099: 1  2686	08				inc	r0
 1100: 1  2687	B8 05 F5			cjne	r0, #5, do_csi_n1
 1101: 1  268A	22				ret
 1102: 1  268B	B4 06 39	do_csi_n6:	cjne	a, #6, do_csi_cc	;report cursor position
 1103: 1  268E	74 1B				mov	a, #ESC

ASEM-51 V1.3                                        Copyright (c) 2002 by W.W. Heinz                                         PAGE 21



 Line  I  Addr  Code            Source

 1104: 1  2690	12 2B A9			call	cout
 1105: 1  2693	74 5B				mov	a, #'['
 1106: 1  2695	12 2B A9			call	cout
 1107: 1  2698	E5 38				mov	a, cursory
 1108: 1  269A	95 31				subb	a, top
 1109: 1  269C	12 26 AE			call	sendpos
 1110: 1  269F	74 3B				mov	a, #';'
 1111: 1  26A1	12 2B A9			call	cout
 1112: 1  26A4	E5 37				mov	a, cursorx
 1113: 1  26A6	12 26 AE			call	sendpos
 1114: 1  26A9	74 52				mov	a, #'R'
 1115: 1  26AB	02 2B A9			jmp	cout
 1116: 1
 1117: 1  26AE	04		sendpos:	inc	a
 1118: 1  26AF	12 2A F6			call	hex2dez
 1119: 1  26B2	E8				mov	a, r0
 1120: 1  26B3	12 2B A9			call	cout
 1121: 1  26B6	E9				mov	a, r1
 1122: 1  26B7	02 2B A9			jmp	cout
 1123: 1
 1124: 1  26BA	83		getreport:	movc	a, @a+pc
 1125: 1  26BB	22				ret
 1126: 1  26BC	1B 5B 30 6E	reportok:	db	ESC, "[0n"		;terminal OK
 1127: 1  26C0	1B 5B 3F 31	reportda:	db	ESC, "[?1;0c"		;device attributes (VT100, no options)
       1  26C4	3B 30 63
 1128: 1
 1129: 1  26C7	B4 63 0D	do_csi_cc:	cjne	a, #'c', do_csi_r
 1130: 1  26CA	78 05		do_csi_cc2:	mov	r0, #5			;reportda
 1131: 1  26CC	E8		do_csi_cc1:	mov	a, r0
 1132: 1  26CD	D1 BA				call	getreport
 1133: 1  26CF	12 2B A9			call	cout
 1134: 1  26D2	08				inc	r0
 1135: 1  26D3	B8 0C F6			cjne	r0, #5+7, do_csi_cc1
 1136: 1  26D6	22				ret
 1137: 1
 1138: 1  26D7	B4 72 45	do_csi_r:	cjne	a, #'r', do_csi_J	;set scroll margins
 1139: 1  26DA	E5 25				mov	a, nargs
 1140: 1  26DC	70 08				jnz	do_csi_ra		;nargs > 0
 1141: 1  26DE	75 31 00			mov	top, #0
 1142: 1  26E1	75 32 17			mov	bottom, #HEIGHT-1
 1143: 1  26E4	80 29				sjmp	do_csi_rc
 1144: 1  26E6	12 28 F8	do_csi_ra:	call	args_gr_zero
 1145: 1  26E9	B4 02 00			cjne	a, #2, $+3
 1146: 1  26EC	50 0A				jnc	do_csi_rb		;>= 2 args
 1147: 1  26EE	85 26 31			mov	top, arg0
 1148: 1  26F1	15 31				dec	top
 1149: 1  26F3	75 32 17			mov	bottom, #HEIGHT-1
 1150: 1  26F6	80 17				sjmp	do_csi_rc
 1151: 1  26F8	E5 26		do_csi_rb:	mov	a, arg0
 1152: 1  26FA	95 27				subb	a, arg1			;carry clear!
 1153: 1  26FC	50 21				jnc	do_csi_J		; a >= b
 1154: 1  26FE	85 26 31			mov	top, arg0
 1155: 1  2701	15 31				dec	top
 1156: 1
 1157: 1  2703	E5 27				mov	a, arg1
 1158: 1  2705	B4 19 00			cjne	a, #HEIGHT+1, $+3

ASEM-51 V1.3                                        Copyright (c) 2002 by W.W. Heinz                                         PAGE 22



 Line  I  Addr  Code            Source

 1159: 1  2708	40 02				jc	do_csi_re
 1160: 1  270A	74 18				mov	a, #HEIGHT
 1161: 1  270C	14		do_csi_re:	dec	a
 1162: 1  270D	F5 32				mov	bottom, a
 1163: 1
 1164: 1  270F	E4		do_csi_rc:	clr	a			;cursor home
 1165: 1  2710	F8				mov	r0, a
 1166: 1  2711	F9				mov	r1, a
 1167: 1  2712	F5 37				mov	cursorx, a
 1168: 1  2714	F5 38				mov	cursory, a
 1169: 1  2716	30 11 03			jnb	origin, do_csi_rd
 1170: 1  2719	85 31 38			mov	cursory, top
 1171: 1  271C	02 29 0C	do_csi_rd:	jmp	ansi_move
 1172: 1
 1173: 1
 1174: 1  271F	B4 4A 35	do_csi_J:	cjne	a, #'J', do_csi_ques		;ED – Erase In Display
 1175: 1  2722	A8 26				mov	r0, arg0
 1176: 1  2724	B8 00 0F	do_csi_Ja:	cjne	r0, #0, do_csi_Jb
 1177: 1  2727	A8 38		do_csi_Jc:	mov	r0, cursory			;Erase from the active position to the end o
       1			f the screen, inclusive (default)
 1178: 1  2729	79 17				mov	r1, #HEIGHT-1			;y from cursory to HEIGHT-1
 1179: 1  272B	AA 37				mov	r2, cursorx			;start position x
 1180: 1  272D	74 50				mov	a, #WIDTH			;chars to erase first line
 1181: 1  272F	9A				subb	a, r2
 1182: 1  2730	FB				mov	r3, a
 1183: 1  2731	7D 50				mov	r5, #WIDTH			;chars to erase last line
 1184: 1  2733	02 2A 8C			jmp	clear_lines
 1185: 1
 1186: 1  2736	B8 01 0E	do_csi_Jb:	cjne	r0, #1, do_csi_Jd
 1187: 1  2739	78 00				mov	r0, #0				;Erase from start of the screen to the activ
       1			e position, inclusive
 1188: 1  273B	A9 38				mov	r1, cursory
 1189: 1  273D	7A 00				mov	r2, #0
 1190: 1  273F	7B 50				mov	r3, #WIDTH			;chars to erase first line
 1191: 1  2741	AD 37				mov	r5, cursorx
 1192: 1  2743	0D				inc	r5				;chars to erase last line
 1193: 1  2744	02 2A 8C			jmp	clear_lines
 1194: 1
 1195: 1  2747	B8 02 0D	do_csi_Jd:	cjne	r0, #2, do_csi_ques
 1196: 1  274A	78 00				mov	r0, #0				;Erase all of the display – all lines are er
       1			ased and the cursor does not move.
 1197: 1  274C	79 17				mov	r1, #HEIGHT-1
 1198: 1  274E	7A 00				mov	r2, #0
 1199: 1  2750	7B 50				mov	r3, #WIDTH			;chars to erase first line
 1200: 1  2752	7D 50				mov	r5, #WIDTH			;chars to erase first line
 1201: 1  2754	02 2A 8C			jmp	clear_lines
 1202: 1
 1203: 1  2757	B4 3F 04	do_csi_ques:	cjne	a, #'?', do_csi_K
 1204: 1  275A	75 33 0E			mov	state, #ST_CSI_Q
 1205: 1  275D	22				ret
 1206: 1
 1207: 1  275E	B4 4B 2A	do_csi_K:	cjne	a, #'K', do_csi_g
 1208: 1  2761	A8 38				mov	r0, cursory
 1209: 1  2763	A9 38				mov	r1, cursory
 1210: 1  2765	E5 26				mov	a, arg0
 1211: 1  2767	B4 00 09			cjne	a, #0, do_csi_Ka		;Erase from the active position to the end o

ASEM-51 V1.3                                        Copyright (c) 2002 by W.W. Heinz                                         PAGE 23



 Line  I  Addr  Code            Source

       1			f the line, inclusive (default)
 1212: 1  276A	AA 37				mov	r2, cursorx
 1213: 1  276C	74 50				mov	a, #WIDTH
 1214: 1  276E	9A				subb	a, r2
 1215: 1  276F	FD				mov	r5, a
 1216: 1  2770	02 2A 8C			jmp	clear_lines
 1217: 1  2773	B4 01 08	do_csi_Ka:	cjne	a, #1, do_csi_Kb		;Erase from the start of the screen to the a
       1			ctive position, inclusive
 1218: 1  2776	7A 00				mov	r2, #0
 1219: 1  2778	AD 37				mov	r5, cursorx
 1220: 1  277A	0D				inc	r5
 1221: 1  277B	02 2A 8C			jmp	clear_lines
 1222: 1  277E	B4 02 07	do_csi_Kb:	cjne	a, #2, do_csi_end1		;Erase all of the line, inclusive
 1223: 1  2781	7A 00				mov	r2, #0
 1224: 1  2783	7D 50				mov	r5, #WIDTH
 1225: 1  2785	02 2A 8C			jmp	clear_lines
 1226: 1  2788	02 28 63	do_csi_end1:	jmp	do_csi_end
 1227: 1
 1228: 1  278B	B4 67 14	do_csi_g:	cjne	a, #'g', do_csi_L
 1229: 1  278E	E5 26				mov	a, arg0
 1230: 1  2790	B4 03 03			cjne	a, #3, do_csi_g1
 1231: 1  2793	02 29 BB			jmp	cleartabu			;clear all tabs
 1232: 1  2796	12 29 C7	do_csi_g1:	call	tab_set_r0_r1
 1233: 1  2799	12 29 D7			call	getbit
 1234: 1  279C	F4				cpl	a
 1235: 1  279D	56				anl	a, @r0
 1236: 1  279E	F6				mov	@r0, a
 1237: 1  279F	02 28 63			jmp	do_csi_end
 1238: 1
 1239: 1  27A2	B4 4C 26	do_csi_L:	cjne	a, #'L', do_csi_MM		;insert line
 1240: 1  27A5	12 28 F8			call	args_gr_zero
 1241: 1  27A8	E5 38				mov	a, cursory			;check if within bounds
 1242: 1  27AA	B5 31 00			cjne	a, top, $+3
 1243: 1  27AD	40 D9				jc	do_csi_end1
 1244: 1  27AF	B5 32 00			cjne	a, bottom, $+3
 1245: 1  27B2	80 02				sjmp	do_csi_L1
 1246: 1  27B4	50 D2				jnc	do_csi_end1
 1247: 1  27B6	12 2A E0	do_csi_L1:	call	cursor_off
 1248: 1  27B9	A8 26				mov	r0, arg0
 1249: 1  27BB	7B FF		do_csi_L2:	mov	r3, #-1
 1250: 1  27BD	C3				clr	c
 1251: 1  27BE	E5 32				mov	a, bottom
 1252: 1  27C0	95 38				subb	a, cursory
 1253: 1  27C2	FC				mov	r4, a
 1254: 1  27C3	12 29 FE			call	scroll_r4
 1255: 1  27C6	D8 F3				djnz	r0, do_csi_L2
 1256: 1  27C8	02 2A CE			jmp	cursor_on
 1257: 1
 1258: 1  27CB	B4 4D 2D	do_csi_MM:	cjne	a, #'M', do_csi_hh		;delete line
 1259: 1  27CE	12 28 F8			call	args_gr_zero
 1260: 1  27D1	E5 38				mov	a, cursory			;check if within bounds
 1261: 1  27D3	B5 31 00			cjne	a, top, $+3
 1262: 1  27D6	40 B0				jc	do_csi_end1
 1263: 1  27D8	B5 32 00			cjne	a, bottom, $+3
 1264: 1  27DB	80 02				sjmp	do_csi_MM1
 1265: 1  27DD	50 A9				jnc	do_csi_end1

ASEM-51 V1.3                                        Copyright (c) 2002 by W.W. Heinz                                         PAGE 24



 Line  I  Addr  Code            Source

 1266: 1  27DF	12 2A E0	do_csi_MM1:	call	cursor_off
 1267: 1  27E2	A8 26				mov	r0, arg0
 1268: 1  27E4	C0 31				push	top
 1269: 1  27E6	7B 01		do_csi_MM2:	mov	r3, #1
 1270: 1  27E8	C3				clr	c
 1271: 1  27E9	E5 32				mov	a, bottom
 1272: 1  27EB	95 38				subb	a, cursory
 1273: 1  27ED	FC				mov	r4, a
 1274: 1  27EE	85 38 31			mov	top, cursory
 1275: 1  27F1	12 29 FE			call	scroll_r4
 1276: 1  27F4	D8 F0				djnz	r0, do_csi_MM2
 1277: 1  27F6	D0 31				pop	top
 1278: 1  27F8	02 2A CE			jmp	cursor_on
 1279: 1
 1280: 1  27FB	75 33 00	do_csi_hh:	mov	state, #ST_IDLE			;h set NEWLINE / INSERT
 1281: 1  27FE	85 22 3C			mov	oldstatus, flags2
 1282: 1
 1283: 1  2801	B4 68 16			cjne	a, #'h', do_csi_ll		;set mode
 1284: 1  2804	78 26				mov	r0, #arg0
 1285: 1  2806	A9 25				mov	r1, nargs
 1286: 1  2808	B9 00 01			cjne	r1, #0, do_csi_hh1		;>= 1 arg
 1287: 1  280B	22				ret
 1288: 1  280C	B6 14 02	do_csi_hh1:	cjne	@r0, #LNM, do_csi_hh2
 1289: 1  280F	D2 12				setb	newlinemode			;set newlinemode
 1290: 1  2811	B6 04 02	do_csi_hh2:	cjne	@r0, #IRM, do_csi_hhx
 1291: 1  2814	D2 13				setb	insert				;set insert mode
 1292: 1  2816	08		do_csi_hhx:	inc	r0
 1293: 1  2817	D9 F3				djnz	r1, do_csi_hh1
 1294: 1  2819	22				ret
 1295: 1
 1296: 1  281A	B4 6C 16	do_csi_ll:	cjne	a, #'l', do_csi_P		;h reset NEWLINE / INSERT
 1297: 1  281D	78 26				mov	r0, #arg0
 1298: 1  281F	A9 25				mov	r1, nargs
 1299: 1  2821	B9 00 01			cjne	r1, #0, do_csi_ll1
 1300: 1  2824	22				ret
 1301: 1  2825	B6 14 02	do_csi_ll1:	cjne	@r0, #LNM, do_csi_ll2
 1302: 1  2828	C2 12				clr	newlinemode			;clear newlinemode
 1303: 1  282A	B6 04 02	do_csi_ll2:	cjne	@r0, #IRM, do_csi_llx
 1304: 1  282D	C2 13				clr	insert				;clear insert mode
 1305: 1  282F	08		do_csi_llx:	inc	r0
 1306: 1  2830	D9 F3				djnz	r1, do_csi_ll1
 1307: 1  2832	22				ret
 1308: 1
 1309: 1  2833	B4 50 2D	do_csi_P:	cjne	a, #'P', do_csi_end		;Delete Character (DCH)
 1310: 1  2836	12 28 F8			call	args_gr_zero
 1311: 1  2839	A9 26				mov	r1, arg0
 1312: 1  283B	C3		do_csi_P2:	clr	c
 1313: 1  283C	74 4F				mov	a, #WIDTH-1
 1314: 1  283E	95 37				subb	a, cursorx
 1315: 1  2840	60 21				jz	do_csi_end			;nothing to do
 1316: 1  2842	23				rl	a
 1317: 1  2843	F8				mov	r0, a
 1318: 1  2844	12 2B 03			call	comp_dptr			;compute dptr1
 1319: 1  2847	85 84 82			mov	dp0l, dp1l			;copy to dptr0
 1320: 1  284A	85 85 83			mov	dp0h, dp1h
 1321: 1  284D	A3				inc	dptr				;

ASEM-51 V1.3                                        Copyright (c) 2002 by W.W. Heinz                                         PAGE 25



 Line  I  Addr  Code            Source

 1322: 1  284E	A3				inc	dptr				;dptr0 = dptr1 + 2
 1323: 1
 1324: 1  284F	E0		do_csi_P1:	movx	a, @dptr
 1325: 1  2850	E5 90				mov	a, P1
 1326: 1  2852	A3				inc	dptr
 1327: 1  2853	05 A2				inc	auxr1
 1328: 1  2855	F0				movx	@dptr, a
 1329: 1  2856	A3				inc	dptr
 1330: 1  2857	05 A2				inc	auxr1
 1331: 1  2859	D8 F4				djnz	r0, do_csi_P1
 1332: 1  285B	05 A2				inc	auxr1
 1333: 1  285D	E4				clr	a
 1334: 1  285E	F0				movx	@dptr, a
 1335: 1  285F	05 A2				inc	auxr1
 1336: 1  2861	D9 D8				djnz	r1, do_csi_P2
 1337: 1  2863	22		do_csi_end:	ret
 1338: 1
 1339: 1			;		mov	a, r0
 1340: 1			;		call	phex
 1341: 1			;		mov	a, dp0h
 1342: 1			;		call	phex
 1343: 1			;		mov	a, dp0l
 1344: 1			;		call	phex
 1345: 1			;		call	space
 1346: 1			;		mov	a, dp1h
 1347: 1			;		call	phex
 1348: 1			;		mov	a, dp1l
 1349: 1			;		call	phex
 1350: 1			;		call	space
 1351: 1			;		call	space
 1352: 1
 1353: 1			;===============================================
 1354: 1			; state CSI_questionmark "ESC [ ?"
 1355: 1			;===============================================
 1356: 1  2864	12 29 63	do_csi_q:	call	isparm				;is parameter?
 1357: 1  2867	50 09				jnc	do_csi_q_h			;no
 1358: 1  2869	85 33 23			mov	retstate, state
 1359: 1  286C	75 33 0A			mov	state, #ST_CMD_ARG
 1360: 1  286F	02 28 CD			jmp	do_cmd_arg
 1361: 1
 1362: 1  2872	75 33 00	do_csi_q_h:	mov	state, #ST_IDLE
 1363: 1  2875	85 22 3C			mov	oldstatus, flags2
 1364: 1
 1365: 1  2878	B4 68 19			cjne	a, #'h', do_csi_q_l		;set mode
 1366: 1  287B	78 26				mov	r0, #arg0
 1367: 1  287D	A9 25				mov	r1, nargs
 1368: 1  287F	B9 00 01			cjne	r1, #0, do_csi_q_h1		;>= 1 arg
 1369: 1  2882	22				ret
 1370: 1  2883	B6 07 02	do_csi_q_h1:	cjne	@r0, #DECAWM, do_csi_q_h2	;set auto wrap
 1371: 1  2886	D2 10				setb	wrap
 1372: 1  2888	B6 06 05	do_csi_q_h2:	cjne	@r0, #DECOM, do_csi_q_hx	;set origin
 1373: 1  288B	D2 11				setb	origin
 1374: 1  288D	02 27 0F			jmp	do_csi_rc			;position cursor home
 1375: 1  2890	08		do_csi_q_hx:	inc	r0
 1376: 1  2891	D9 F0				djnz	r1, do_csi_q_h1
 1377: 1  2893	22				ret

ASEM-51 V1.3                                        Copyright (c) 2002 by W.W. Heinz                                         PAGE 26



 Line  I  Addr  Code            Source

 1378: 1
 1379: 1  2894	B4 6C 19	do_csi_q_l:	cjne	a, #'l', do_csi_q_end		;reset mode
 1380: 1  2897	78 26				mov	r0, #arg0
 1381: 1  2899	A9 25				mov	r1, nargs
 1382: 1  289B	B9 00 02			cjne	r1, #0, do_csi_q_l1
 1383: 1  289E	80 C3				sjmp	do_csi_end
 1384: 1  28A0	B6 07 02	do_csi_q_l1:	cjne	@r0, #DECAWM, do_csi_q_l2	;reset auto wrap
 1385: 1  28A3	C2 10				clr	wrap
 1386: 1  28A5	B6 06 05	do_csi_q_l2:	cjne	@r0, #DECOM, do_csi_q_lx	;reset origin
 1387: 1  28A8	C2 11				clr	origin
 1388: 1  28AA	02 27 0F			jmp	do_csi_rc			;position cursor home
 1389: 1  28AD	08		do_csi_q_lx:	inc	r0
 1390: 1  28AE	D9 F0				djnz	r1, do_csi_q_l1
 1391: 1  28B0	22		do_csi_q_end:	ret
 1392: 1
 1393: 1
 1394: 1			;===============================================
 1395: 1			; state ESC_questionmark "ESC ?"
 1396: 1			;===============================================
 1397: 1  28B1			do_esc_q:
 1398: 1  28B1	75 33 00			mov	state, #ST_IDLE
 1399: 1  28B4	22				ret
 1400: 1
 1401: 1			;===============================================
 1402: 1			; state ESC_hash "ESC #"
 1403: 1			;===============================================
 1404: 1  28B5	75 33 00	do_esc_hash:	mov	state, #ST_IDLE
 1405: 1
 1406: 1  28B8	B4 38 05			cjne	a, #'8', do_esc_hash_end
 1407: 1  28BB	7C 45				mov	r4, #'E'
 1408: 1  28BD	02 2A 81			jmp	fill_screen
 1409: 1
 1410: 1  28C0			do_esc_hash_end:
 1411: 1  28C0	22				ret
 1412: 1
 1413: 1
 1414: 1			;===============================================
 1415: 1			; state ESC right-bracket "ESC )"
 1416: 1			;===============================================
 1417: 1  28C1			do_esc_rbrack:
 1418: 1			;===============================================
 1419: 1			; state ESC left-bracket "ESC ("
 1420: 1			;===============================================
 1421: 1  28C1	75 33 00	do_esc_lbrack:	mov	state, #ST_IDLE
 1422: 1
 1423: 1  28C4	B4 30 03			cjne	a, #'0', do_esc_lb_1
 1424: 1  28C7	D2 00				setb	special
 1425: 1  28C9	22				ret
 1426: 1  28CA	C2 00		do_esc_lb_1:	clr	special
 1427: 1  28CC	22				ret
 1428: 1
 1429: 1
 1430: 1			;===============================================
 1431: 1			; state command arg
 1432: 1			;===============================================
 1433: 1  28CD			do_cmd_arg:

ASEM-51 V1.3                                        Copyright (c) 2002 by W.W. Heinz                                         PAGE 27



 Line  I  Addr  Code            Source

 1434: 1  28CD	F9				mov	r1, a			;save a
 1435: 1  28CE	74 26				mov	a, #arg0		;pointer to vars
 1436: 1  28D0	25 25				add	a, nargs
 1437: 1  28D2	F8				mov	r0, a
 1438: 1  28D3	E9				mov	a, r1
 1439: 1  28D4	12 29 6F			call	isdigit
 1440: 1  28D7	50 0A				jnc	do_cmd_arg_1		;no digit
 1441: 1			;		inc	argcnt
 1442: 1  28D9	E6				mov	a, @r0
 1443: 1  28DA	75 F0 0A			mov	b, #10
 1444: 1  28DD	A4				mul	ab
 1445: 1  28DE	29				add	a, r1
 1446: 1  28DF	94 30				subb	a, #'0'
 1447: 1  28E1	F6				mov	@r0, a
 1448: 1  28E2	22				ret
 1449: 1  28E3	B4 3B 03	do_cmd_arg_1:	cjne	a, #';', do_cmd_arg_2
 1450: 1  28E6	05 25				inc	nargs
 1451: 1			;		mov	a, argcnt
 1452: 1			;		jnz	do_cmd_arg_3
 1453: 1			;		mov	@r0, #1
 1454: 1			;do_cmd_arg_3:	mov	argcnt, #0
 1455: 1  28E8	22				ret
 1456: 1  28E9	B4 1B 04	do_cmd_arg_2:	cjne	a, #C_ESC, do_cmd_arg_3
 1457: 1  28EC	75 33 02			mov	state, #ST_ESC
 1458: 1  28EF	22				ret
 1459: 1  28F0	05 25		do_cmd_arg_3:	inc	nargs
 1460: 1  28F2	85 23 33			mov	state, retstate
 1461: 1  28F5			do_cmd_arg_4:	;mov	retstate, #0
 1462: 1  28F5	02 23 5A			jmp	ansiout
 1463: 1
 1464: 1
 1465: 1			;
 1466: 1			; set arg0-3 to one if zero
 1467: 1			;
 1468: 1  28F8	C0 00		args_gr_zero:	push	ar0
 1469: 1  28FA	C0 01				push	ar1
 1470: 1  28FC	78 26				mov	r0, #arg0
 1471: 1  28FE	79 04				mov	r1, #4
 1472: 1  2900	B6 00 01	args_gr_zero_2:	cjne	@r0, #0, args_gr_zero_1
 1473: 1  2903	06				inc	@r0
 1474: 1  2904	08		args_gr_zero_1:	inc	r0
 1475: 1  2905	D9 F9				djnz	r1, args_gr_zero_2
 1476: 1  2907	D0 01				pop	ar1
 1477: 1  2909	D0 00				pop	ar0
 1478: 1  290B	22				ret
 1479: 1
 1480: 1			; r0: x - offset
 1481: 1			; r1: y - offset
 1482: 1			; r2: 0: without scroll, 1: with scroll
 1483: 1			; r3: scroll occured
 1484: 1			; r4: 0 = within bounds, 1 = out of bounds
 1485: 1  290C			ansi_move:
 1486: 1					;call	cursor_off
 1487: 1
 1488: 1  290C	7B 00				mov	r3, #0			;no scroll
 1489: 1  290E	AC 31				mov	r4, top

ASEM-51 V1.3                                        Copyright (c) 2002 by W.W. Heinz                                         PAGE 28



 Line  I  Addr  Code            Source

 1490: 1  2910	AD 32				mov	r5, bottom
 1491: 1
 1492: 1			;
 1493: 1			; check new x-posiion
 1494: 1			;
 1495: 1  2912	E8				mov	a, r0
 1496: 1  2913	25 37				add	a, cursorx		;< 0?
 1497: 1  2915	30 E7 01			jnb	acc.7, ansi_move_x1	;no, check width
 1498: 1  2918	E4				clr	a
 1499: 1  2919	B4 50 00	ansi_move_x1:	cjne	a, #WIDTH, $+3		;>= WIDTH ?
 1500: 1  291C	40 02				jc	ansi_move_x3		;< WIDTH
 1501: 1  291E	74 4F				mov	a, #WIDTH-1		;=WIDTH, set to WIDTH-1
 1502: 1  2920	F5 37		ansi_move_x3:	mov	cursorx, a
 1503: 1
 1504: 1			;
 1505: 1			; check if within margins
 1506: 1			;
 1507: 1  2922	20 11 13			jb	origin, ansi_move_y	;if origin, no out-of-margins
 1508: 1  2925	E5 38				mov	a, cursory		;check margins
 1509: 1  2927	B5 31 00			cjne	a, top, $+3
 1510: 1  292A	40 07				jc	ansi_move_m1		;< top!
 1511: 1  292C	B5 32 02			cjne	a, bottom, $+5
 1512: 1  292F	80 07				sjmp	ansi_move_y		;= bottom
 1513: 1  2931	40 05				jc	ansi_move_y		;< bottom
 1514: 1  2933	E4		ansi_move_m1:	clr	a
 1515: 1  2934	FA				mov	r2, a			;no scroll
 1516: 1  2935	FC				mov	r4, a
 1517: 1  2936	7D 17				mov	r5, #HEIGHT-1
 1518: 1
 1519: 1			;
 1520: 1			; check y-position
 1521: 1			;
 1522: 1  2938	E9		ansi_move_y:	mov	a, r1
 1523: 1  2939	25 38				add	a, cursory		;
 1524: 1  293B	20 E7 05			jb	acc.7, ansi_move_y2	;< 0
 1525: 1  293E	B5 04 00			cjne	a, ar4, $+3		;
 1526: 1  2941	50 04				jnc	ansi_move_y1		;>= top
 1527: 1  2943	C3		ansi_move_y2:	clr	c
 1528: 1  2944	9C				subb	a, r4
 1529: 1  2945	FB				mov	r3, a
 1530: 1  2946	EC				mov	a, r4			;< top, set to top
 1531: 1
 1532: 1  2947	B5 05 02	ansi_move_y1:	cjne	a, ar5, $+5		;= bottom ?
 1533: 1  294A	80 05				sjmp	ansi_move_y3		;yes
 1534: 1  294C	40 03				jc	ansi_move_y3		;< bottom?
 1535: 1  294E	9D				subb	a, r5			;no, >bottom
 1536: 1  294F	FB				mov	r3, a
 1537: 1  2950	ED				mov	a, r5			;set to bottom
 1538: 1  2951	F5 38		ansi_move_y3:	mov	cursory, a
 1539: 1  2953	12 2A E0			call	cursor_off
 1540: 1
 1541: 1  2956	EA				mov	a, r2			;is scrolling enabled ?
 1542: 1  2957	60 06				jz	ansi_move_ex		;no, exit
 1543: 1  2959	EB				mov	a, r3			;did scrolling occur?
 1544: 1  295A	60 03				jz	ansi_move_ex		;no, exit
 1545: 1

ASEM-51 V1.3                                        Copyright (c) 2002 by W.W. Heinz                                         PAGE 29



 Line  I  Addr  Code            Source

 1546: 1  295C	12 29 F8			call	scroll
 1547: 1
 1548: 1  295F	12 2A C0	ansi_move_ex:	call	draw_cursor
 1549: 1  2962	22				ret
 1550: 1
 1551: 1			;ansi_line_left:
 1552: 1					;call	phex
 1553: 1			;		ret
 1554: 1
 1555: 1  2963	12 29 6F	isparm:		call	isdigit
 1556: 1  2966	40 04				jc	isparmex
 1557: 1  2968	B4 3B 02			cjne	a, #';', isparm1
 1558: 1  296B	D3				setb	c
 1559: 1  296C	22		isparmex:	ret
 1560: 1  296D	C3		isparm1:	clr	c
 1561: 1  296E	22				ret
 1562: 1			;
 1563: 1			; is acc beteen '0' and '9'?
 1564: 1			; if so, return carry clear, set otherwise
 1565: 1			;
 1566: 1  296F	B4 30 00	isdigit:	cjne	a, #'0', isdigit1
 1567: 1  2972	50 02		isdigit1:	jnc	isdigit2		;>= '0'
 1568: 1  2974	B3				cpl	c
 1569: 1  2975	22				ret				;carry set
 1570: 1  2976	B4 3A 00	isdigit2:	cjne	a, #'9'+1, isdigit3
 1571: 1  2979	22		isdigit3:	ret				;= '9' carry clear
 1572: 1
 1573: 1
 1574: 1
 1575: 1			;===============================================
 1576: 1			; reset terminal
 1577: 1			;===============================================
 1578: 1  297A	C2 AF		term_reset:	clr	ea
 1579: 1  297C	12 29 A3			call	clear_vars
 1580: 1  297F	75 3D 70			mov	defcol, #DEFAULTCOLOR
 1581: 1  2982	85 3D 2D			mov	color, defcol
 1582: 1  2985	75 32 17			mov	bottom, #HEIGHT-1
 1583: 1  2988	75 34 80			mov	serstart, #serbuf
 1584: 1  298B	75 35 80			mov	serend, #serbuf
 1585: 1  298E	75 39 0A			mov	t0cnt, #C_TIME
 1586: 1
 1587: 1			;		inc	baudidx
 1588: 1			;		setb	databits
 1589: 1			;		setb	evenodd
 1590: 1			;		setb	termmode
 1591: 1
 1592: 1  2991	12 23 4E			call	setbaud
 1593: 1  2994	12 29 AD			call	resettabu
 1594: 1  2997	12 2A 7F			call	clear_screen
 1595: 1  299A	D2 AF				setb	ea
 1596: 1
 1597: 1  299C	12 2E 0A			call	prtstatus
 1598: 1  299F	12 2A C0			call	draw_cursor
 1599: 1  29A2	22				ret
 1600: 1
 1601: 1			;

ASEM-51 V1.3                                        Copyright (c) 2002 by W.W. Heinz                                         PAGE 30



 Line  I  Addr  Code            Source

 1602: 1			; clear VARLEN vars from "state" on
 1603: 1			;
 1604: 1  29A3			clear_vars:
 1605: 1			;		mov	r0, #080h
 1606: 1			;clear_v2:	mov	@r0, #0aah
 1607: 1			;		inc	r0
 1608: 1			;		cjne	r0, #0, clear_v2
 1609: 1
 1610: 1  29A3	78 20				mov	r0, #VARS	;clear term-vars
 1611: 1  29A5	79 30				mov	r1, #VARLEN
 1612: 1  29A7	76 00		clear_v1:	mov	@r0, #0
 1613: 1  29A9	08				inc	r0
 1614: 1  29AA	D9 FB				djnz	r1, clear_v1
 1615: 1  29AC	22				ret
 1616: 1
 1617: 1			;dump_vars:	mov	r0, #0
 1618: 1			;dump_vars2:	mov	r1, #16
 1619: 1			;		mov	a, r0
 1620: 1			;		acall	phex
 1621: 1			;		acall	space
 1622: 1			;		mov	a, #':'
 1623: 1			;		acall	cout
 1624: 1			;		acall	space
 1625: 1			;dump_vars1:	mov	a, @r0
 1626: 1			;		acall	phex
 1627: 1			;		acall	space
 1628: 1			;		inc	r0
 1629: 1			;		djnz	r1, dump_vars1
 1630: 1			;		acall	newline
 1631: 1			;		cjne	r0, #0, dump_vars2
 1632: 1			;		ret
 1633: 1
 1634: 1  29AD	78 40		resettabu:	mov	r0, #tabutab
 1635: 1  29AF	79 0A				mov	r1, #10
 1636: 1  29B1	76 80		resettabu1:	mov	@r0, #128
 1637: 1  29B3	08				inc	r0
 1638: 1  29B4	D9 FB				djnz	r1, resettabu1
 1639: 1  29B6	89 40				mov	tabutab, r1	;R1 = 0
 1640: 1  29B8	05 49				inc	tabutab+9	;128 + 1 = 129
 1641: 1  29BA	22				ret
 1642: 1
 1643: 1
 1644: 1  29BB	78 40		cleartabu:	mov	r0, #tabutab
 1645: 1  29BD	79 0A				mov	r1, #10
 1646: 1  29BF	76 00		cleartabu1:	mov	@r0, #0
 1647: 1  29C1	08				inc	r0
 1648: 1  29C2	D9 FB				djnz	r1, cleartabu1
 1649: 1  29C4	05 49				inc	tabutab+9	;tabutab+9 = 1
 1650: 1  29C6	22				ret
 1651: 1
 1652: 1			;
 1653: 1			; compute
 1654: 1			; r0 = cursorx / 8 (byte holding tab-info) + tabutab
 1655: 1			; r1 = cursorx AND 7 (bi tposition within byte)
 1656: 1			;
 1657: 1  29C7	E5 37		tab_set_r0_r1:	mov	a, cursorx

ASEM-51 V1.3                                        Copyright (c) 2002 by W.W. Heinz                                         PAGE 31



 Line  I  Addr  Code            Source

 1658: 1  29C9	03				rr	a
 1659: 1  29CA	03				rr	a
 1660: 1  29CB	03				rr	a
 1661: 1  29CC	54 0F				anl	a, #0fh
 1662: 1  29CE	24 40				add	a, #tabutab
 1663: 1  29D0	F8				mov	r0, a				;address byte
 1664: 1  29D1	E5 37				mov	a, cursorx
 1665: 1  29D3	54 07				anl	a, #7
 1666: 1  29D5	F9				mov	r1, a
 1667: 1  29D6	22				ret
 1668: 1
 1669: 1
 1670: 1  29D7	E9		getbit:		mov	a, r1
 1671: 1  29D8	04				inc	a
 1672: 1  29D9	83				movc	a, @a+pc
 1673: 1  29DA	22				ret
 1674: 1  29DB	80 40 20 10	getbittab:	db	128, 64, 32, 16, 8, 4, 2, 1
       1  29DF	08 04 02 01
 1675: 1
 1676: 1
 1677: 1  29E3	78 25		clearargs:	mov	r0, #nargs
 1678: 1  29E5	79 05				mov	r1, #5
 1679: 1  29E7	76 00		clearargs1:	mov	@r0, #0
 1680: 1  29E9	08				inc	r0
 1681: 1  29EA	D9 FB				djnz	r1, clearargs1
 1682: 1  29EC	22				ret
 1683: 1
 1684: 1
 1685: 1  29ED	E4		print:		clr	a
 1686: 1  29EE	93				movc	a, @a+dptr
 1687: 1  29EF	70 01				jnz	print1
 1688: 1  29F1	22				ret
 1689: 1  29F2	12 23 5A	print1:		call	ansiout
 1690: 1  29F5	A3				inc	dptr
 1691: 1  29F6	80 F5				sjmp	print
 1692: 1
 1693: 1			;msg1:		db	C_ESC, "[J", C_ESC, "[5;5H", 0
 1694: 1			;msg4:		db	C_ESC,"[5;65H", C_ESC,"[31mH", C_ESC,"[32mello ", C_ESC, "[mWorld", C_ESC, "
       1			[AJ", C_ESC, "[23;65Ha", C_ESC, "[H"
 1695: 1			;msg2:		db	"Hello world!", C_NEWLINE,0
 1696: 1			;msg3:		db	C_ESC, "[5C", C_ESC, "[7D", 0
 1697: 1
 1698: 1			;===============================================
 1699: 1			; pyhsical routines
 1700: 1			;===============================================
 1701: 1
 1702: 1			;===============================================
 1703: 1			; scrolls one line up or down
 1704: 1			; clear first or last line
 1705: 1			; r3 positive (0-127) scroll-up, scroll-down otherwise
 1706: 1			; r4 numbers of lines to scroll
 1707: 1			; ----------------------------------------------
 1708: 1			; r5 used for x-count
 1709: 1			;===============================================
 1710: 1  29F8	C3		scroll:		clr	c
 1711: 1  29F9	E5 32				mov	a, bottom

ASEM-51 V1.3                                        Copyright (c) 2002 by W.W. Heinz                                         PAGE 32



 Line  I  Addr  Code            Source

 1712: 1  29FB	95 31				subb	a, top
 1713: 1  29FD	FC				mov	r4, a			;number of lines to scroll
 1714: 1  29FE			scroll_r4:
 1715: 1  29FE	BB 80 00			cjne	r3, #128, $+3
 1716: 1  2A01	40 47				jc	scroll_up		;<128, positive, scroll up
 1717: 1
 1718: 1  2A03	E5 32				mov	a, bottom
 1719: 1  2A05	14				dec	a
 1720: 1  2A06	75 F0 A0			mov	b, #WIDTH*2
 1721: 1  2A09	A4				mul	ab
 1722: 1  2A0A	24 9F				add	a, #(WIDTH*2)-1
 1723: 1  2A0C	F5 82				mov	dp0l, a
 1724: 1  2A0E	E5 F0				mov	a, b
 1725: 1  2A10	34 80				addc 	a, #80h
 1726: 1  2A12	F5 83				mov	dp0h, a
 1727: 1
 1728: 1  2A14	E5 82				mov	a, dp0l
 1729: 1  2A16	24 A0				add	a, #WIDTH*2
 1730: 1  2A18	F5 84				mov	dp1l, a
 1731: 1  2A1A	E5 83				mov	a, dp0h
 1732: 1  2A1C	34 00				addc	a, #0
 1733: 1  2A1E	F5 85				mov	dp1h, a
 1734: 1
 1735: 1			;		call	phex16
 1736: 1			;		mov	a, dp1h
 1737: 1			;		call	phex
 1738: 1			;		mov	a, dp1l
 1739: 1			;		call	phex
 1740: 1			;		jmp	cursor_on
 1741: 1
 1742: 1  2A20	EC				mov	a, r4
 1743: 1  2A21	60 1F				jz	scroll_down_6
 1744: 1  2A23			scroll_down_4:
 1745: 1  2A23	7D A0				mov	r5, #WIDTH*2
 1746: 1  2A25			scroll_down_1:
 1747: 1  2A25	E0				movx	a, @dptr
 1748: 1  2A26	E5 90				mov	a, P1
 1749: 1  2A28	05 A2				inc	auxr1
 1750: 1  2A2A	F0				movx	@dptr, a
 1751: 1  2A2B	05 A2				inc	auxr1
 1752: 1
 1753: 1  2A2D	E5 82				mov	a, dp0l
 1754: 1  2A2F	70 02				jnz	scroll_down_2
 1755: 1  2A31	15 83				dec	dp0h
 1756: 1  2A33	15 82		scroll_down_2:	dec	dp0l
 1757: 1
 1758: 1  2A35	E5 84				mov	a, dp1l
 1759: 1  2A37	70 02				jnz	scroll_down_3
 1760: 1  2A39	15 85				dec	dp1h
 1761: 1  2A3B	15 84		scroll_down_3:	dec	dp1l
 1762: 1
 1763: 1  2A3D	DD E6				djnz	r5, scroll_down_1
 1764: 1  2A3F	DC E2				djnz	r4, scroll_down_4
 1765: 1
 1766: 1  2A41	A3				inc	dptr
 1767: 1

ASEM-51 V1.3                                        Copyright (c) 2002 by W.W. Heinz                                         PAGE 33



 Line  I  Addr  Code            Source

 1768: 1					;call	phex16
 1769: 1  2A42			scroll_down_6:
 1770: 1  2A42	7D A0				mov	r5, #WIDTH*2
 1771: 1  2A44	E4				clr	a
 1772: 1  2A45	F0		scroll_down_5:	movx	@dptr, a
 1773: 1  2A46	A3				inc	dptr
 1774: 1  2A47	DD FC				djnz	r5, scroll_down_5
 1775: 1
 1776: 1					;ajmp	cursor_on		;reactivate cursor
 1777: 1  2A49	22				ret
 1778: 1
 1779: 1  2A4A			scroll_up:
 1780: 1  2A4A	E5 31				mov	a, top			;dp0 = topline
 1781: 1  2A4C	75 F0 A0			mov	b, #WIDTH * 2		;dp1 = topline + 1
 1782: 1  2A4F	A4				mul	ab
 1783: 1  2A50	F5 82				mov	dp0l, a
 1784: 1  2A52	E5 F0				mov	a, b
 1785: 1  2A54	34 80				addc	a, #80h
 1786: 1  2A56	F5 83				mov	dp0h, a
 1787: 1
 1788: 1  2A58	E5 82				mov	a, dp0l
 1789: 1  2A5A	24 A0				add	a, #WIDTH * 2
 1790: 1  2A5C	F5 84				mov	dp1l, a
 1791: 1  2A5E	E5 83				mov	a, dp0h
 1792: 1  2A60	34 00				addc	a, #0
 1793: 1  2A62	F5 85				mov	dp1h, a
 1794: 1
 1795: 1  2A64	EC				mov	a, r4
 1796: 1  2A65	60 10				jz	scroll_up_4
 1797: 1
 1798: 1  2A67			scroll_up_1:
 1799: 1  2A67	7D A0				mov	r5, #WIDTH * 2
 1800: 1
 1801: 1  2A69	05 A2		scroll_up_2:	inc	auxr1			;copy from line n+1 to line n
 1802: 1  2A6B	E0				movx	a, @dptr
 1803: 1  2A6C	A3				inc	dptr
 1804: 1  2A6D	E5 90				mov	a, P1
 1805: 1  2A6F	05 A2				inc	auxr1
 1806: 1  2A71	F0				movx	@dptr, a
 1807: 1  2A72	A3				inc	dptr
 1808: 1  2A73	DD F4				djnz	r5, scroll_up_2
 1809: 1  2A75	DC F0				djnz	r4, scroll_up_1
 1810: 1
 1811: 1  2A77			scroll_up_4:
 1812: 1  2A77	7D A0				mov	r5, #WIDTH * 2		;clear last line
 1813: 1  2A79	E4				clr	a
 1814: 1  2A7A	F0		scroll_up_3:	movx	@dptr, a
 1815: 1  2A7B	A3				inc	dptr
 1816: 1  2A7C	DD FC				djnz	r5, scroll_up_3
 1817: 1
 1818: 1  2A7E	22				ret
 1819: 1					;ajmp	cursor_on		;restore cursor
 1820: 1
 1821: 1
 1822: 1			;
 1823: 1			; r0: top line

ASEM-51 V1.3                                        Copyright (c) 2002 by W.W. Heinz                                         PAGE 34



 Line  I  Addr  Code            Source

 1824: 1			; r1: bottom line
 1825: 1			; r2: start position first line
 1826: 1			; r3: chars to fill first line
 1827: 1			; r4: value filled with
 1828: 1			; r5; chars to fill last line
 1829: 1			;
 1830: 1  2A7F	7C 00		clear_screen:	mov	r4, #0
 1831: 1  2A81	E4		fill_screen:	clr	a
 1832: 1  2A82	F8				mov	r0, a
 1833: 1  2A83	79 17				mov	r1, #HEIGHT-1
 1834: 1  2A85	FA				mov	r2, a
 1835: 1  2A86	7B 50				mov	r3, #WIDTH
 1836: 1  2A88	7D 50				mov	r5, #WIDTH
 1837: 1  2A8A	80 02				sjmp	fill_lines
 1838: 1
 1839: 1  2A8C			clear_lines:
 1840: 1  2A8C	7C 00				mov	r4, #0				;fill with zero
 1841: 1  2A8E			fill_lines:
 1842: 1  2A8E	EA				mov	a, r2				;r2 = r2 * 2
 1843: 1  2A8F	23				rl	a
 1844: 1  2A90	FA				mov	r2, a
 1845: 1
 1846: 1  2A91	E9				mov	a, r1				;r1 = r1 - r0 + 1
 1847: 1  2A92	C3				clr	c
 1848: 1  2A93	98				subb	a, r0
 1849: 1  2A94	04				inc	a
 1850: 1  2A95	F9				mov	r1, a				;line count in r1
 1851: 1
 1852: 1  2A96	E8				mov	a, r0				;compute start-position from r0 und r2
 1853: 1  2A97	75 F0 A0			mov	b, #WIDTH * 2
 1854: 1  2A9A	A4				mul	ab
 1855: 1  2A9B	2A				add	a, r2
 1856: 1  2A9C	F5 84				mov	dp1l, a
 1857: 1  2A9E	E5 F0				mov	a, b
 1858: 1  2AA0	34 80				addc	a, #80h
 1859: 1  2AA2	F5 85				mov	dp1h, a
 1860: 1
 1861: 1  2AA4	05 A2				inc	auxr1				;switch to dptr1
 1862: 1  2AA6	A8 03				mov	r0, ar3				;chars to fill first line
 1863: 1
 1864: 1  2AA8	B9 01 02	clear_lines2:	cjne 	r1, #1, clear_lines1		;last line?
 1865: 1  2AAB	A8 05				mov	r0, ar5				;chars to fill last line
 1866: 1  2AAD	EC		clear_lines1:	mov	a, r4
 1867: 1  2AAE	F0				movx	@dptr, a
 1868: 1  2AAF	A3				inc	dptr
 1869: 1  2AB0	74 70				mov	a, #70h
 1870: 1  2AB2	F0				movx	@dptr, a
 1871: 1  2AB3	A3				inc	dptr
 1872: 1  2AB4	D8 F7				djnz	r0, clear_lines1
 1873: 1  2AB6	78 50				mov	r0, #WIDTH
 1874: 1  2AB8	D9 EE				djnz	r1, clear_lines2
 1875: 1  2ABA	05 A2				inc	auxr1
 1876: 1  2ABC	22				ret
 1877: 1
 1878: 1
 1879: 1			;===============================================

ASEM-51 V1.3                                        Copyright (c) 2002 by W.W. Heinz                                         PAGE 35



 Line  I  Addr  Code            Source

 1880: 1			; move cursor
 1881: 1			;===============================================
 1882: 1  2ABD	12 2A E0	move_cursor:	call	cursor_off			;restore color under cursor
 1883: 1  2AC0	12 2B 03	draw_cursor:	call	comp_dptr			;compute new address
 1884: 1  2AC3	05 A2				inc	auxr1				;increase by 1 for color
 1885: 1  2AC5	A3				inc	dptr
 1886: 1  2AC6	05 A2				inc	auxr1
 1887: 1  2AC8	85 84 2E			mov	cursorpos, dp1l			;store in cursorpos/+1
 1888: 1  2ACB	85 85 2F			mov	cursorpos+1, dp1h
 1889: 1
 1890: 1			;		ajmp	cursor_on			;save color under cursor
 1891: 1			;
 1892: 1			; save color under new cursor position in cursorsave
 1893: 1			; enable interrupt
 1894: 1			;
 1895: 1  2ACE			cursor_on:	;mov	a, cursorpos+1
 1896: 1					;call	phex
 1897: 1					;mov	a, cursorpos
 1898: 1					;call	phex
 1899: 1
 1900: 1  2ACE	85 2E 84			mov	dp1l, cursorpos
 1901: 1  2AD1	85 2F 85			mov	dp1h, cursorpos+1
 1902: 1  2AD4	05 A2				inc	auxr1
 1903: 1  2AD6	E0				movx	a, @dptr
 1904: 1  2AD7	E5 90				mov	a, P1
 1905: 1  2AD9	F5 30				mov	cursorsave, a
 1906: 1  2ADB	05 A2				inc	auxr1
 1907: 1  2ADD	D2 8C				setb	tr0				;enable timer
 1908: 1  2ADF	22				ret
 1909: 1
 1910: 1			;
 1911: 1			; clear timer0 interrupt
 1912: 1			; restore color under cursor
 1913: 1			; reset t0cnt
 1914: 1			;
 1915: 1  2AE0	C2 8C		cursor_off:	clr	tr0				;stop timer
 1916: 1
 1917: 1			;		mov	a, cursorpos+1
 1918: 1			;		call	phex
 1919: 1			;		mov	a, cursorpos
 1920: 1			;		call	phex
 1921: 1
 1922: 1  2AE2	85 2E 84			mov	dp1l, cursorpos
 1923: 1  2AE5	85 2F 85			mov	dp1h, cursorpos+1
 1924: 1  2AE8	05 A2				inc	auxr1
 1925: 1  2AEA	E5 30				mov	a, cursorsave
 1926: 1  2AEC	F0				movx	@dptr, a
 1927: 1  2AED	05 A2				inc	auxr1
 1928: 1  2AEF	75 8C 80			mov	TH0, #128
 1929: 1  2AF2	75 39 01			mov	t0cnt, #1
 1930: 1  2AF5	22				ret
 1931: 1
 1932: 1			;
 1933: 1			; converts accu	into two digits in R0, R1 (high, low)
 1934: 1			;
 1935: 1  2AF6	75 F0 0A	hex2dez:	mov	b, #10

ASEM-51 V1.3                                        Copyright (c) 2002 by W.W. Heinz                                         PAGE 36



 Line  I  Addr  Code            Source

 1936: 1  2AF9	84				div	ab
 1937: 1  2AFA	24 30				add	a, #'0'
 1938: 1  2AFC	F8				mov	r0, a
 1939: 1  2AFD	E5 F0				mov	a, b
 1940: 1  2AFF	24 30				add	a, #'0'
 1941: 1  2B01	F9				mov	r1, a
 1942: 1  2B02	22				ret
 1943: 1
 1944: 1			;
 1945: 1			; compute dp1 cursor screen address
 1946: 1			; dp1l/h = cursorx * 2 + cursory * WIDTH * 2 + 0x8000
 1947: 1			;
 1948: 1  2B03			comp_dptr:
 1949: 1  2B03	E5 37				mov	a, cursorx
 1950: 1  2B05	23				rl	a
 1951: 1  2B06	FF				mov	r7, a
 1952: 1
 1953: 1  2B07	E5 38				mov	a, cursory
 1954: 1  2B09	75 F0 A0			mov	b, #WIDTH * 2
 1955: 1  2B0C	A4				mul	ab
 1956: 1
 1957: 1  2B0D	2F				add	a, r7
 1958: 1  2B0E	F5 84				mov	dp1l, a
 1959: 1  2B10	E5 F0				mov	a, b
 1960: 1  2B12	34 80				addc	a, #80h
 1961: 1  2B14	F5 85				mov	dp1h, a
 1962: 1  2B16	22				ret
 1963: 1
 1964: 1					$INCLUDE (io.a51)
 1965: 2			;
 1966: 2			;
 1967: 2			;
 1968: 2  2B17			init6845:
 1969: 2  2B17	90 00 00			mov	dptr, #0		;enable ADR + DAT
 1970: 2  2B1A	E0				movx	a, @dptr
 1971: 2
 1972: 2  2B1B	90 80 00			mov	DPTR, #08000h
 1973: 2  2B1E	05 A2				inc	AUXR1
 1974: 2  2B20	90 2B 42			mov	DPTR, #SYDATA
 1975: 2  2B23	05 A2				inc	AUXR1
 1976: 2  2B25	78 00				mov	R0, #0
 1977: 2
 1978: 2  2B27			setregs:
 1979: 2			;		call	PHEX
 1980: 2			;		call	SPACE
 1981: 2
 1982: 2  2B27	E8				mov	A, R0			;send address
 1983: 2			;		call	PHEX
 1984: 2  2B28	F0				movx	@DPTR,A			;address register
 1985: 2  2B29	D2 B5				setb	T1			;clock high
 1986: 2  2B2B	C2 B5				clr	T1			;clock low
 1987: 2  2B2D	A3				inc	DPTR			;data reg
 1988: 2
 1989: 2  2B2E	05 A2				inc	AUXR1			;data pointer
 1990: 2  2B30	93				movc	A, @A+DPTR
 1991: 2			;		call	PHEX

ASEM-51 V1.3                                        Copyright (c) 2002 by W.W. Heinz                                         PAGE 37



 Line  I  Addr  Code            Source

 1992: 2  2B31	05 A2				inc	AUXR1			;address pointer
 1993: 2  2B33	F0				movx	@DPTR, A		;send data
 1994: 2  2B34	D2 B5				setb	T1			;clock high
 1995: 2  2B36	C2 B5				clr	T1			;clock low
 1996: 2
 1997: 2			;		call	SPACE
 1998: 2  2B38	A3				inc	DPTR
 1999: 2  2B39	08				inc	R0
 2000: 2  2B3A	B8 0F EA			cjne	R0, #15, setregs
 2001: 2
 2002: 2  2B3D	90 00 00			mov	dptr, #0		;enable ADR + DAT
 2003: 2  2B40	E0				movx	a, @dptr
 2004: 2
 2005: 2			;		call	newline
 2006: 2			;		call	CIN
 2007: 2			;
 2008: 2			;		setb	INT0
 2009: 2			;		call	CIN
 2010: 2  2B41	22				ret
 2011: 2
 2012: 2			;
 2013: 2			; 25,333 Mhz / 8 = 3,166 Mhz
 2014: 2			;
 2015: 2			; 31468 HZ = 31,77 uS
 2016: 2			;
 2017: 2			; 25,333 Mhz / 8 / 31468 ~ 	100 chars Horizontal Total
 2018: 2			;				  2 chars Fornt Porch
 2019: 2			;				  6 chars Back Porch
 2020: 2			;				 80 chars Horizontal Visible
 2021: 2			;				 12 chars Sync Pulse
 2022: 2			;Scanline part	Pixels	Time [µs]
 2023: 2			;Visible area	640	25.422045680238
 2024: 2			;Front porch	16	0.63555114200596
 2025: 2			;Sync pulse	96	3.8133068520357
 2026: 2			;Back porch	48	1.9066534260179
 2027: 2			;Whole line	800	31.777557100298
 2028: 2
 2029: 2			;Frame part	Lines	Time [ms]
 2030: 2			;Visible area	400	12.711022840119
 2031: 2			;Front porch	12	0.38133068520357
 2032: 2			;Sync pulse	2	0.063555114200596
 2033: 2			;Back porch	35	1.1122144985104
 2034: 2			;Whole frame	449	14.268123138034
 2035: 2			;
 2036: 2  2B42	64		SYDATA:		DB	100		;R0 Horizontal Total - 1
 2037: 2  2B43	50				DB	80		;R1 Horizontal Displayed
 2038: 2  2B44	54				DB	84		;R2 Horizontal Sync Position
 2039: 2  2B45	0C				DB	0ch		;R3 VSYNC & HSYNC width
 2040: 2  2B46	1C				DB	28		;R4 Vertical total - 1			;27	32
 2041: 2  2B47	05				DB	5		;R5 Vertical Adjust
 2042: 2  2B48	19				DB	25		;R6 Vertical Displayed			;25	30
 2043: 2  2B49	1B				DB	27		;R7 Vertical Sync Position		;25	32
 2044: 2  2B4A	00				DB	00h		;R8 Mode Control
 2045: 2  2B4B	0F				DB	15		;R9 Scan Lines - 1 (character lines)
 2046: 2  2B4C	00				DB	0		;R10 Cursor Start
 2047: 2  2B4D	00				DB	0		;R11 Cursor End

ASEM-51 V1.3                                        Copyright (c) 2002 by W.W. Heinz                                         PAGE 38



 Line  I  Addr  Code            Source

 2048: 2  2B4E	00				DB	000h		;R12 Display Start High
 2049: 2  2B4F	00				DB	000h		;R13 Display Start Low
 2050: 2  2B50	00				DB	0		;R14 Cursor Pos High
 2051: 2  2B51	00				DB	0		;R15 Cursor Pos Low
 2052: 2  2B52	00				DB	0		;R16 Light Pen High
 2053: 2  2B53	00				DB	0		;R17 Light Pen Low
 2054: 2  2B54	00				DB	0		;R18 Update Address Reg High
 2055: 2  2B55	00				DB	0		;R19 Update Address Reg Low
 2056: 2								;R31 Dummy Register
 2057: 2			;
 2058: 2			;
 2059: 2			;
 2060: 2  2B56			copyFont:
 2061: 2  2B56	90 30 00			mov	DPTR, #vt100_font
 2062: 2  2B59	05 A2				inc	AUXR1
 2063: 2  2B5B	90 A0 00			mov	DPTR, #(8000h+2000h) ;+4000h+1000h
 2064: 2  2B5E	05 A2				inc	AUXR1
 2065: 2
 2066: 2  2B60	E4		copyFont1:	clr	A
 2067: 2  2B61	93				movc	A, @A+DPTR
 2068: 2  2B62	A3				inc	DPTR
 2069: 2  2B63	05 A2				inc	AUXR1
 2070: 2  2B65	F0				movx	@DPTR, A
 2071: 2  2B66	A3				inc	DPTR
 2072: 2  2B67	05 A2				inc	AUXR1
 2073: 2
 2074: 2  2B69	E5 83				mov	A, DP0H
 2075: 2					;call	PHEX
 2076: 2  2B6B	B4 80 F2			cjne	A, #80h, copyFont1
 2077: 2
 2078: 2			;		mov	A, AUXR1
 2079: 2			;		call	PHEX
 2080: 2			;		call	newline
 2081: 2  2B6E	22				ret
 2082: 2
 2083: 2			;
 2084: 2			;
 2085: 2			;
 2086: 2  2B6F	90 80 00	testScreen:	mov	DPTR, #8000h
 2087: 2  2B72	78 15				mov	R0, #21
 2088: 2
 2089: 2  2B74	79 50		testScreen3:	mov	R1, #80
 2090: 2  2B76	7A 01				mov	R2, #1
 2091: 2  2B78	EA		testScreen1:	mov	A, R2
 2092: 2  2B79	F0				movx	@DPTR, A
 2093: 2  2B7A	A3				inc	DPTR
 2094: 2  2B7B	74 70				mov	A, #70h
 2095: 2					;anl	A, #3
 2096: 2					;orl	A, #0f0h
 2097: 2					;inc	A
 2098: 2  2B7D	F0				movx	@DPTR, A
 2099: 2  2B7E	A3				inc	DPTR
 2100: 2  2B7F	0A				inc	R2
 2101: 2  2B80	BA 3A 02			cjne	R2, #'9'+1, testScreen2
 2102: 2  2B83	7A 30				mov	R2, #'0'
 2103: 2  2B85	D9 F1		testScreen2:	djnz	R1, testScreen1

ASEM-51 V1.3                                        Copyright (c) 2002 by W.W. Heinz                                         PAGE 39



 Line  I  Addr  Code            Source

 2104: 2  2B87	D8 EB				djnz	R0, testScreen3
 2105: 2
 2106: 2  2B89	E8		testScreen4:	mov	a, r0
 2107: 2  2B8A	F0				movx	@dptr, a
 2108: 2  2B8B	A3				inc	dptr
 2109: 2  2B8C	74 60				mov	a, #60h
 2110: 2  2B8E	F0				movx	@dptr, a
 2111: 2  2B8F	A3				inc	dptr
 2112: 2  2B90	08				inc	r0
 2113: 2  2B91	B8 00 F5			cjne	r0, #0, testScreen4
 2114: 2  2B94	22				ret
 2115: 2			;
 2116: 2			;
 2117: 2			;
 2118: 2  2B95	C0 E0		space:		push	acc
 2119: 2  2B97	74 20				mov	a, #' '
 2120: 2  2B99	12 2B A9			call	cout
 2121: 2  2B9C	D0 E0				pop	acc
 2122: 2  2B9E	22				ret
 2123: 2
 2124: 2  2B9F	C0 E0		newline:	push	acc
 2125: 2  2BA1	74 0A				mov	a, #0ah
 2126: 2  2BA3	12 2B A9			call	cout
 2127: 2  2BA6	D0 E0				pop	acc
 2128: 2  2BA8	22				ret
 2129: 2
 2130: 2
 2131: 2  2BA9	20 05 FD	cout:		jb	serbusy, cout
 2132: 2  2BAC	D2 05				setb	serbusy
 2133: 2  2BAE	F5 99				mov	sbuf, a
 2134: 2  2BB0	22				ret
 2135: 2
 2136: 2
 2137: 2  2BB1	C0 00		cin:		push	ar0
 2138: 2  2BB3	C0 01				push	ar1
 2139: 2  2BB5	E5 34		cin_2:		mov	a, serstart
 2140: 2  2BB7	A9 35				mov	r1, serend
 2141: 2  2BB9	B5 01 02			cjne	a, ar1, cin_1
 2142: 2  2BBC	80 F7				sjmp	cin_2
 2143: 2
 2144: 2  2BBE			cin_1:		;clr	ES			;no serial interrupt
 2145: 2  2BBE	04				inc	a
 2146: 2  2BBF	D2 E7				setb	acc.7
 2147: 2  2BC1	F8				mov	r0, a
 2148: 2  2BC2	F5 34				mov	serstart, a
 2149: 2
 2150: 2  2BC4	30 04 09			jnb	xonoff, cin_3		;XON/XOFF active?
 2151: 2  2BC7	B5 01 06			cjne	a, ar1, cin_3
 2152: 2
 2153: 2  2BCA			cin_4:		;setb	ES
 2154: 2  2BCA	74 11				mov	a, #C_XON		;yes, send XON
 2155: 2  2BCC	71 A9				acall	cout
 2156: 2  2BCE	C2 04				clr	xonoff
 2157: 2
 2158: 2  2BD0			cin_3:		;setb	ES
 2159: 2  2BD0	E6				mov	a, @r0

ASEM-51 V1.3                                        Copyright (c) 2002 by W.W. Heinz                                         PAGE 40



 Line  I  Addr  Code            Source

 2160: 2  2BD1	D0 01				pop	ar1
 2161: 2  2BD3	D0 00				pop	ar0
 2162: 2  2BD5	22				ret
 2163: 2
 2164: 2
 2165: 2			;cin_x:		jnb	ri, cin
 2166: 2			;		clr	ri
 2167: 2			;		mov	a, sbuf
 2168: 2			;		ret
 2169: 2
 2170: 2			; Highly code efficient resursive call phex contributed
 2171: 2			; by Alexander B. Alexandrov <abalex@cbr.spb.ru>
 2172: 2
 2173: 2  2BD6			phex:
 2174: 2  2BD6			phex8:
 2175: 2  2BD6	71 D8				acall	phex_b
 2176: 2  2BD8	C4		phex_b:		swap	a		;SWAP A will be twice => A unchanged
 2177: 2  2BD9	C0 E0		phex1:		push	acc
 2178: 2  2BDB	54 0F				anl	a, #15
 2179: 2  2BDD	24 90				add	a, #90h	; acc is 0x9X, where X is hex digit
 2180: 2  2BDF	D4				da	a		; if A to F, C=1 and lower four bits are 0..5
 2181: 2  2BE0	34 40				addc	a, #40h
 2182: 2  2BE2	D4				da	a
 2183: 2  2BE3	71 A9				call	cout
 2184: 2  2BE5	D0 E0				pop	acc
 2185: 2  2BE7	22				ret
 2186: 2
 2187: 2  2BE8			phex16:
 2188: 2  2BE8	C0 E0				push	acc
 2189: 2  2BEA	E5 83				mov	a, dph
 2190: 2  2BEC	71 D6				call	phex
 2191: 2  2BEE	E5 82				mov	a, dpl
 2192: 2  2BF0	71 D6				call	phex
 2193: 2  2BF2	D0 E0				pop	acc
 2194: 2  2BF4	22				ret
 2195: 2
 2196: 2			;a not so well documented feature of pstr is that you can print
 2197: 2			;multiple consecutive strings without needing to reload dptr
 2198: 2			;(which takes 3 bytes of code!)... this is useful for inserting
 2199: 2			;numbers or spaces between strings.
 2200: 2
 2201: 2			;pstr:		push	acc
 2202: 2			;pstr1:		clr	a
 2203: 2			;		movc	a, @a+dptr
 2204: 2			;		inc	dptr
 2205: 2			;		jz	pstr2
 2206: 2			;		mov	c, acc.7
 2207: 2			;		anl	a, 7Fh
 2208: 2			;		call	cout
 2209: 2			;		jc	pstr2
 2210: 2			;		sjmp	pstr1
 2211: 2			;pstr2:		pop	acc
 2212: 2			;		ret
 2213: 2
 2214: 2			;converts the ascii code in Acc to uppercase, if it is lowercase
 2215: 2

ASEM-51 V1.3                                        Copyright (c) 2002 by W.W. Heinz                                         PAGE 41



 Line  I  Addr  Code            Source

 2216: 2			; Code efficient (saves 6 byes) upper contributed
 2217: 2			; by Alexander B. Alexandrov <abalex@cbr.spb.ru>
 2218: 2
 2219: 2			;upper:
 2220: 2			;		cjne	a, #97, upper2
 2221: 2			;upper2:		jc	upper4		;end if acc < 97
 2222: 2			;		cjne	a, #123, upper3
 2223: 2			;upper3:		jnc	upper4		;end if acc >= 123
 2224: 2			;		add	a, #224		;convert to uppercase
 2225: 2			;upper4:		ret
 2226: 1
 2227: 1			;===============================================
 2228: 1			; decode scancode
 2229: 1			;===============================================
 2230: 1  2BF5			keydecode:
 2231: 1			;		mov	a, keyrxval
 2232: 1			;		call	phex
 2233: 1
 2234: 1  2BF5	74 E0				mov	a, #EXTENDED			;extended?
 2235: 1  2BF7	B5 3B 03			cjne	a, keyrxval, keybreak
 2236: 1  2BFA	D2 09				setb	keyrxextended			;set extended flag
 2237: 1  2BFC	22				ret
 2238: 1
 2239: 1  2BFD	74 F0		keybreak:	mov	a, #BREAK			;break?
 2240: 1  2BFF	B5 3B 03			cjne	a, keyrxval, keyshift
 2241: 1  2C02	D2 0A				setb	keyrxbreak
 2242: 1  2C04	22				ret
 2243: 1
 2244: 1  2C05	74 12		keyshift:	mov	a, #CLSHIFT			;left-shift?
 2245: 1  2C07	B5 3B 02			cjne	a, keyrxval, keyshift1
 2246: 1  2C0A	80 05				sjmp	keyshift2
 2247: 1  2C0C	74 59		keyshift1:	mov	a, #CRSHIFT			;right shift?
 2248: 1  2C0E	B5 3B 07			cjne	a, keyrxval, keyStrg
 2249: 1  2C11	A2 0A		keyshift2:	mov	c, keyrxbreak
 2250: 1  2C13	B3				cpl	c
 2251: 1  2C14	92 0B				mov	keyrxshift, c
 2252: 1  2C16	80 16				sjmp	keyCheckBrk1
 2253: 1
 2254: 1  2C18	74 14		keyStrg:	mov	a, #CLSTRG
 2255: 1  2C1A	B5 3B 07			cjne	a, keyrxval, keyCheckBrk
 2256: 1  2C1D	A2 0A				mov	c, keyrxbreak
 2257: 1  2C1F	B3				cpl	c
 2258: 1  2C20	92 0D				mov	keyrxstrg, c
 2259: 1  2C22	80 0A				sjmp	keyCheckBrk1
 2260: 1
 2261: 1  2C24	30 0A 0C	keyCheckBrk:	jnb	keyrxbreak, keynormal		;break active?
 2262: 1  2C27	74 11				mov	a, #ALTGR			;ALT-GR?
 2263: 1  2C29	B5 3B 02			cjne	a, keyrxval, keyCheckBrk1
 2264: 1  2C2C	C2 0C				clr	keyrxaltgr			;clear ALT-GR
 2265: 1  2C2E	C2 0A		keyCheckBrk1:	clr	keyrxbreak
 2266: 1  2C30	C2 09				clr	keyrxextended
 2267: 1  2C32	22				ret
 2268: 1
 2269: 1  2C33	C0 00		keynormal:	push	ar0
 2270: 1  2C35	30 0B 05			jnb	keyrxshift, keyMakeExt
 2271: 1  2C38	12 2D 13			call	keygetshift

ASEM-51 V1.3                                        Copyright (c) 2002 by W.W. Heinz                                         PAGE 42



 Line  I  Addr  Code            Source

 2272: 1  2C3B	80 3A				sjmp	keyExitOK
 2273: 1
 2274: 1  2C3D	30 09 1A	keyMakeExt:	jnb	keyrxextended, keyAltGr
 2275: 1  2C40	C2 09				clr	keyrxextended			;clear extended
 2276: 1  2C42	78 0D				mov	r0, #13
 2277: 1  2C44	12 2D BE	keyMakeExt2:	call	keygetextind
 2278: 1  2C47	B5 3B 0C			cjne	a, keyrxval, keyMakeExt1	;found?
 2279: 1  2C4A	12 2D CE			call	keygetext
 2280: 1  2C4D	B4 11 04			cjne	a, #ALTGR, keyMakeExt3		;ALTGR-pressed?
 2281: 1  2C50	D2 0C				setb	keyrxaltgr			;set ALTGR-flag
 2282: 1  2C52	80 27				sjmp	keyExit
 2283: 1  2C54	80 21		keyMakeExt3:	sjmp	keyExitOK
 2284: 1  2C56	D8 EC		keyMakeExt1:	djnz	r0, keyMakeExt2
 2285: 1  2C58	80 21				sjmp	keyExit
 2286: 1
 2287: 1  2C5A	30 0C 11	keyAltGr:	jnb	keyrxaltgr, keyMake		;AltGR pressed?
 2288: 1  2C5D	78 08				mov	r0, #8
 2289: 1  2C5F	12 2D A8	keyAltGr2:	call	keygetaltgrind
 2290: 1  2C62	B5 3B 05			cjne	a, keyrxval, keyAltGr1		;found?
 2291: 1  2C65	12 2D B3			call	keygetaltgr
 2292: 1  2C68	80 0D				sjmp	keyExitOK
 2293: 1  2C6A	D8 F3		keyAltGr1:	djnz	r0, keyAltGr2
 2294: 1  2C6C	80 0D				sjmp	keyExit
 2295: 1
 2296: 1  2C6E	12 2C 7E	keyMake:	call	keygetnoshift
 2297: 1  2C71	30 0D 03			jnb	keyrxstrg, keyExitOK
 2298: 1  2C74	C3				clr	c
 2299: 1  2C75	94 60				subb	a, #96
 2300: 1
 2301: 1  2C77	F5 3B		keyExitOK:	mov	keyrxval, a
 2302: 1  2C79	D2 08				setb	keyavail
 2303: 1
 2304: 1			;		mov	p2, #High(08000h + 24*160 + 77*2)
 2305: 1			;		mov	r0, #Low(08000h + 24*160 + 77*2);
 2306: 1			;		movx	@r0, a
 2307: 1
 2308: 1  2C7B	D0 00		keyExit:	pop	ar0
 2309: 1  2C7D	22				ret
 2310: 1
 2311: 1
 2312: 1  2C7E	E5 3B		keygetnoshift:	mov	a, keyrxval
 2313: 1  2C80	04				inc	a
 2314: 1  2C81	83				movc	a, @a+pc
 2315: 1  2C82	22				ret
 2316: 1  2C83			CHARTABLE_NOSHIFT:
 2317: 1			;		 	 00   01   02   03   04   05   06   07   08   09   0A   0B   0C   0D   0E
       1			0F
 2318: 1  2C83	00 88 00 84			db	  0,  F9,   0,  F5,  F3,  F1,  F2, F12,   0, F10,  F8,  F6,  F4,TABU, '^',
       1  2C87	82 80 81 8B	 0	; 00
       1  2C8B	00 89 87 85
       1  2C8F	83 09 5E 00
 2319: 1  2C93	00 00 00 00			db     	  0,   0,   0,   0,   0, 'q', '1',   0,   0,   0, 'y', 's', 'a', 'w', '2',
       1  2C97	00 71 31 00	 0	; 10
       1  2C9B	00 00 79 73
       1  2C9F	61 77 32 00
 2320: 1  2CA3	00 63 78 64			db	  0, 'c', 'x', 'd', 'e', '4', '3',   0,   0, ' ', 'v', 'f', 't', 'r', '5',

ASEM-51 V1.3                                        Copyright (c) 2002 by W.W. Heinz                                         PAGE 43



 Line  I  Addr  Code            Source

       1  2CA7	65 34 33 00	 0	; 20
       1  2CAB	00 20 76 66
       1  2CAF	74 72 35 00
 2321: 1  2CB3	00 6E 62 68			db	  0, 'n', 'b', 'h', 'g', 'z', '6',   0,   0,   0, 'm', 'j', 'u', '7', '8',
       1  2CB7	67 7A 36 00	 0	; 30
       1  2CBB	00 00 6D 6A
       1  2CBF	75 37 38 00
 2322: 1  2CC3	00 2C 6B 69			db	  0, ',', 'k', 'i', 'o', '0', '9',   0,   0, '.', '-', 'l', 246, 'p', 223,
       1  2CC7	6F 30 39 00	 0	; 40 	5c = \, 223 = ß
       1  2CCB	00 2E 2D 6C
       1  2CCF	F6 70 DF 00
 2323: 1  2CD3	00 00 E4 58			db	  0,   0, 228,  'X',252, 180,   0,   0,   0,   0,C_CR, '+',   0, '#',   0,
       1  2CD7	FC B4 00 00	 0	; 50
       1  2CDB	00 00 0D 2B
       1  2CDF	00 23 00 00
 2324: 1  2CE3	00 3C 00 00			db	  0, '<',   0,   0,   0,   0,C_DEL,  0,   0, '1',   0, '4', '7',   0,   0,
       1  2CE7	00 00 7F 00	 0	; 60
       1  2CEB	00 31 00 34
       1  2CEF	37 00 00 00
 2325: 1  2CF3	30 2E 32 35			db	 '0', '.', '2', '5', '6', '8',ESC,   0, F11, '+', '3', '-', '*', '9', CLS,
       1  2CF7	36 38 1B 00	 0	; 70
       1  2CFB	8A 2B 33 2D
       1  2CFF	2A 39 01 00
 2326: 1  2D03	00 00 00 86			db	  0,   0,   0,  F7,   0,   0,   0,   0,   0,   0,   0,   0,   0,   0,   0,
       1  2D07	00 00 00 00	 0	; 80
       1  2D0B	00 00 00 00
       1  2D0F	00 00 00 00
 2327: 1
 2328: 1  2D13	E5 3B		keygetshift:	mov	a, keyrxval
 2329: 1  2D15	04				inc	a
 2330: 1  2D16	83				movc	a, @a+pc
 2331: 1  2D17	22				ret
 2332: 1  2D18			CHARTABLE_SHIFT:
 2333: 1			;		 	 00   01   02   03   04   05   06   07   08   09   0A   0B   0C   0D   0E
       1			0F
 2334: 1  2D18	00 09 00 05			db	  0,   9,   0,   5,   3,   1,   2,  12,   0,  10,   8,   6,   4,TABU,0B0h,
       1  2D1C	03 01 02 0C	 0	; 00
       1  2D20	00 0A 08 06
       1  2D24	04 09 B0 00
 2335: 1  2D28	00 00 00 00			db        0,   0,   0,   0,   0, 'Q', '!',   0,   0,   0, 'Y', 'S', 'A', 'W', '"',
       1  2D2C	00 51 21 00	 0	; 10
       1  2D30	00 00 59 53
       1  2D34	41 57 22 00
 2336: 1  2D38	00 43 58 44			db	  0, 'C', 'X', 'D', 'E', '$', 167,   0,   0, ' ', 'V', 'F', 'T', 'R', '%',
       1  2D3C	45 24 A7 00	 0	; 20 	167=§
       1  2D40	00 20 56 46
       1  2D44	54 52 25 00
 2337: 1  2D48	00 4E 42 48			db	  0, 'N', 'B', 'H', 'G', 'Z', '&',   0,   0,   0, 'M', 'J', 'U', '/', '(',
       1  2D4C	47 5A 26 00	 0	; 30
       1  2D50	00 00 4D 4A
       1  2D54	55 2F 28 00
 2338: 1  2D58	00 3B 4B 49			db	  0, ';', 'K', 'I', 'O', '=', ')',   0,   0, ':', '_', 'L', 214, 'P', '?',
       1  2D5C	4F 3D 29 00	 0	; 40
       1  2D60	00 3A 5F 4C
       1  2D64	D6 50 3F 00
 2339: 1  2D68	00 00 C4 00			db	  0,   0, 196,   0, 220, '`',   0,   0,   0,   0,  LF, '*',   0,027h,   0,

ASEM-51 V1.3                                        Copyright (c) 2002 by W.W. Heinz                                         PAGE 44



 Line  I  Addr  Code            Source

       1  2D6C	DC 60 00 00	 0	; 50
       1  2D70	00 00 0A 2A
       1  2D74	00 27 00 00
 2340: 1  2D78	00 3E 00 00			db	  0, '>',   0,   0,   0,   0,CDCH,   0,   0, '1',   0, CCLF, '7',   0,  0,
       1  2D7C	00 00 FE 00	 0	; 60
       1  2D80	00 31 00 1E
       1  2D84	37 00 00 00
 2341: 1  2D88	30 2E 1D 35			db	'0', '.', CCDN, '5', CCRT, CCUP,  0,   0,  11, '+', '3', '-', '*', '9', 0,
       1  2D8C	1F 1C 00 00	 0  ; 70
       1  2D90	0B 2B 33 2D
       1  2D94	2A 39 00 00
 2342: 1  2D98	00 00 00 07			db	  0,   0,   0,   7,   0,   0,   0,   0,   0,   0,   0,   0,   0,  0,    0,
       1  2D9C	00 00 00 00	 0	; 80
       1  2DA0	00 00 00 00
       1  2DA4	00 00 00 00
 2343: 1
 2344: 1
 2345: 1  2DA8	E8		keygetaltgrind:	mov	a, r0
 2346: 1  2DA9	83				movc	a, @a+pc
 2347: 1  2DAA	22				ret
 2348: 1  2DAB			ALTGR_TABLE_IND:
 2349: 1  2DAB	15				db	015h	; q = @
 2350: 1  2DAC	61				db	061h	; <> = |
 2351: 1  2DAD	5B				db	05Bh	; *+ = ~
 2352: 1  2DAE	4E				db	04Eh	; ?ß = \
 2353: 1  2DAF	3E				db	03Eh	; 8( = [
 2354: 1  2DB0	46				db	046h	; 9) = ]
 2355: 1  2DB1	3D				db	03Dh	; 7/ = {
 2356: 1  2DB2	45				db	045h	; 0= = }
 2357: 1
 2358: 1
 2359: 1  2DB3	E8		keygetaltgr:	mov	a, r0
 2360: 1  2DB4	83				movc	a, @a+pc
 2361: 1  2DB5	22				ret
 2362: 1  2DB6	40		ALTGR_TABLE:	db	'@'
 2363: 1  2DB7	7C				db	'|'
 2364: 1  2DB8	7E				db	'~'
 2365: 1  2DB9	5C				db	05Ch
 2366: 1  2DBA	5B				db	'['
 2367: 1  2DBB	5D				db	']'
 2368: 1  2DBC	7B				db	'{'
 2369: 1  2DBD	7D				db	'}'
 2370: 1
 2371: 1
 2372: 1  2DBE	E8		keygetextind:	mov	a, r0
 2373: 1  2DBF	83				movc	a, @a+pc
 2374: 1  2DC0	22				ret
 2375: 1  2DC1	11		EXT_TABLE_IND:	db	ALTGR
 2376: 1  2DC2	4A				db	04Ah	; /
 2377: 1  2DC3	5A				db	05Ah	; ENTER
 2378: 1  2DC4	69				db	069h	; END
 2379: 1  2DC5	6B				db	06Bh	; LEFT
 2380: 1  2DC6	6C				db	06Ch	; HOME
 2381: 1  2DC7	70				db	070h	; INS
 2382: 1  2DC8	71				db	071h	; DEL
 2383: 1  2DC9	72				db	072h	; DOWN

ASEM-51 V1.3                                        Copyright (c) 2002 by W.W. Heinz                                         PAGE 45



 Line  I  Addr  Code            Source

 2384: 1  2DCA	74				db	074h	; RIGHT
 2385: 1  2DCB	75				db	075h	; Up
 2386: 1  2DCC	7A				db	07Ah	; PAGE DOWN
 2387: 1  2DCD	7D				db	07Dh	; PAGE UP
 2388: 1
 2389: 1  2DCE	E8		keygetext:	mov	a, r0
 2390: 1  2DCF	83				movc	a, @a+pc
 2391: 1  2DD0	22				ret
 2392: 1  2DD1	11		EXT_TABLE:	db	ALTGR
 2393: 1  2DD2	2F				db	'/'	; NumPad division symbol
 2394: 1  2DD3	0D				db	C_CR	; ENTER
 2395: 1  2DD4	1D				db	CCBT	; cursor bottom with SuperFlag
 2396: 1  2DD5	13				db	19	; cursor left	CTRL-S
 2397: 1  2DD6	1C				db	CCHM	; cursor home with SuperFLag
 2398: 1  2DD7	16				db	22	; insert	CTRL-V
 2399: 1  2DD8	07				db	7	; delete	CTRL-G
 2400: 1  2DD9	18				db	24	; cursor down	CTRL-X
 2401: 1  2DDA	04				db	4	; cursor right	CTRL-D
 2402: 1  2DDB	05				db	5	; cursor up	CTRL-E
 2403: 1  2DDC	03				db	3	; pagedown CTRL-C
 2404: 1  2DDD	12				db	18	; pageup CTRL-R
 2405: 1			;
 2406: 1			;
 2407: 1			;
 2408: 1  2DDE	E5 2A		getbaud:	mov	a, baudidx
 2409: 1  2DE0	04				inc	a
 2410: 1  2DE1	83				movc	a, @a+pc
 2411: 1  2DE2	22				ret
 2412: 1  2DE3	FF				db	0ffh	;115200
 2413: 1  2DE4	F4				db	0f4h	;9600
 2414: 1  2DE5	FA				db	0fah	;19200
 2415: 1  2DE6	FD				db	0fdh	;38400
 2416: 1  2DE7	FE				db	0feh	;57600
 2417: 1
 2418: 1  2DE8	83		getbdtxt:	movc	a, @a+pc
 2419: 1  2DE9	22				ret
 2420: 1  2DEA	31 31 35 32			db	"1152"
 2421: 1  2DEE	20 20 39 36			db	"  96"
 2422: 1  2DF2	20 31 39 32			db	" 192"
 2423: 1  2DF6	20 33 38 34			db	" 384"
 2424: 1  2DFA	20 35 37 36			db	" 576"
 2425: 1  2DFE	41 44 4D 2D	adm3atext:	db	"ADM-3A"
       1  2E02	33 41
 2426: 1  2E04	44 55 4D 50	dumptext:	db	"DUMP  "
       1  2E08	20 20
 2427: 1
 2428: 1			;
 2429: 1			;
 2430: 1  2E0A	90 8F 00	prtstatus:	mov	dptr, #08000h + 24 * WIDTH * 2
 2431: 1  2E0D	78 01				mov	r0, #1
 2432: 1  2E0F	12 2E 81	prtstatus1:	call	getstatus			;get status line
 2433: 1  2E12	F0				movx	@dptr, a
 2434: 1  2E13	A3				inc	dptr
 2435: 1  2E14	74 06				mov	a, #TURQUOISE			;color turquoise
 2436: 1  2E16	F0				movx	@dptr, a
 2437: 1  2E17	A3				inc	dptr

ASEM-51 V1.3                                        Copyright (c) 2002 by W.W. Heinz                                         PAGE 46



 Line  I  Addr  Code            Source

 2438: 1  2E18	08				inc	r0
 2439: 1  2E19	B8 51 F3			cjne	r0, #81, prtstatus1
 2440: 1
 2441: 1  2E1C	90 8F 0E			mov	dptr, #08000h + 24 * WIDTH * 2 + 7 * 2
 2442: 1  2E1F	E5 2A				mov	a, baudidx
 2443: 1  2E21	23				rl	a				;mul2
 2444: 1  2E22	23				rl	a				;mul4
 2445: 1  2E23	04				inc	a
 2446: 1  2E24	F8				mov	r0, a
 2447: 1  2E25	79 00				mov	r1, #0
 2448: 1  2E27	B1 E8		prtbaud:	call	getbdtxt
 2449: 1  2E29	F0				movx	@dptr, a
 2450: 1  2E2A	A3				inc	dptr
 2451: 1  2E2B	A3				inc	dptr
 2452: 1  2E2C	08				inc	r0
 2453: 1  2E2D	E8				mov	a, r0
 2454: 1  2E2E	09				inc	r1
 2455: 1  2E2F	B9 04 F5			cjne	r1, #4, prtbaud
 2456: 1
 2457: 1  2E32	30 14 11			jnb	databits, prtstatus6		;print 7 data bits
 2458: 1  2E35	74 37				mov	a, #'7'
 2459: 1  2E37	90 8F 1C			mov	dptr, #08000h + 24 * WIDTH * 2 + 14 * 2
 2460: 1  2E3A	F0				movx	@dptr, a
 2461: 1  2E3B	74 45				mov	a, #'E'
 2462: 1  2E3D	30 15 02			jnb	evenodd, prtstatus7
 2463: 1  2E40	74 4F				mov	a, #'O'
 2464: 1  2E42	90 8F 1E	prtstatus7:	mov	dptr, #08000h + 24 * WIDTH * 2 + 15 * 2
 2465: 1  2E45	F0				movx	@dptr, a
 2466: 1  2E46	74 FB		prtstatus6:	mov	a, #251				;Haken
 2467: 1  2E48	30 12 04			jnb	newlinemode, prtstatus2
 2468: 1  2E4B	90 8F 38			mov	dptr, #08000h + 24 * WIDTH * 2 + 28 * 2
 2469: 1  2E4E	F0				movx	@dptr, a
 2470: 1  2E4F	30 13 04	prtstatus2:	jnb	insert	, prtstatus3
 2471: 1  2E52	90 8F 50			mov	dptr, #08000h + 24 * WIDTH * 2 + 40 * 2
 2472: 1  2E55	F0				movx	@dptr, a
 2473: 1  2E56	30 11 04	prtstatus3:	jnb	origin, prtstatus4
 2474: 1  2E59	90 8F 68			mov	dptr, #08000h + 24 * WIDTH * 2 + 52 * 2
 2475: 1  2E5C	F0				movx	@dptr, a
 2476: 1  2E5D	30 10 04	prtstatus4:	jnb	wrap, prtstatus5
 2477: 1  2E60	90 8F 7C			mov	dptr, #08000h + 24 * WIDTH * 2 + 62 * 2
 2478: 1  2E63	F0				movx	@dptr, a
 2479: 1  2E64	20 17 03	prtstatus5:	jb	dumpmode, prtstatus5c
 2480: 1  2E67	30 16 16			jnb	termmode, prtstatusex
 2481: 1  2E6A	90 8F 8A	prtstatus5c:	mov	dptr, #08000h + 24 * WIDTH * 2 + 69 * 2
 2482: 1  2E6D	78 00				mov	r0, #0
 2483: 1  2E6F	E8		prtstatus5a:	mov	a, r0
 2484: 1  2E70	24 15				add	a, #adm3atext-getbdtxt-1
 2485: 1  2E72	30 17 02			jnb	dumpmode, prtstatus5b
 2486: 1  2E75	24 06				add	a, #6
 2487: 1  2E77	B1 E8		prtstatus5b:	acall	getbdtxt
 2488: 1  2E79	F0				movx	@dptr, a
 2489: 1  2E7A	A3				inc	dptr
 2490: 1  2E7B	A3				inc	dptr
 2491: 1  2E7C	08				inc	r0
 2492: 1  2E7D	B8 06 EF			cjne	r0, #6, prtstatus5a
 2493: 1  2E80	22		prtstatusex:	ret

ASEM-51 V1.3                                        Copyright (c) 2002 by W.W. Heinz                                         PAGE 47



 Line  I  Addr  Code            Source

 2494: 1
 2495: 1  2E81	E8		getstatus:	mov	a, r0
 2496: 1  2E82	83				movc	a, @a + pc
 2497: 1  2E83	22				ret
 2498: 1			;			"0         1         2         3         4         5         6         7
       1			     "
 2499: 1			;			"012345678901234567890123456789012345678901234567890123456789012345678901234
       1			56789
 2500: 1  2E84	7C 42 61 75	status:		db	"|Baud: xxxx00 8N | Newline: - | Insert: - | Origin: - | Wrap: - |    VT102
       1  2E88	64 3A 20 78	    |"
       1  2E8C	78 78 78 30
       1  2E90	30 20 38 4E
       1  2E94	20 7C 20 4E
       1  2E98	65 77 6C 69
       1  2E9C	6E 65 3A 20
       1  2EA0	2D 20 7C 20
       1  2EA4	49 6E 73 65
       1  2EA8	72 74 3A 20
       1  2EAC	2D 20 7C 20
       1  2EB0	4F 72 69 67
       1  2EB4	69 6E 3A 20
       1  2EB8	2D 20 7C 20
       1  2EBC	57 72 61 70
       1  2EC0	3A 20 2D 20
       1  2EC4	7C 20 20 20
       1  2EC8	20 56 54 31
       1  2ECC	30 32 20 20
       1  2ED0	20 20 20 7C
 2501: 1
 2502: 1			;vt100_font	equ	base + 1000h
 2503: 1					$include (vt100_font.a51)
 2504: 2	N      3000			org	base + 1000h
 2505: 2  3000			vt100_font:
 2506: 2  3000	00 00 00 00			db	000h, 000h, 000h, 000h, 000h, 000h, 000h, 000h, 000h, 000h, 000h, 000h
       2  3004	00 00 00 00
       2  3008	00 00 00 00
 2507: 2  300C	00 00 00 00			db	000h, 000h, 000h, 000h, 000h, 000h, 000h, 000h, 010h, 038h, 07Ch, 0FEh
       2  3010	00 00 00 00
       2  3014	10 38 7C FE
 2508: 2  3018	7C 38 10 00			db	07Ch, 038h, 010h, 000h, 000h, 000h, 000h, 000h, 055h, 0AAh, 055h, 0AAh
       2  301C	00 00 00 00
       2  3020	55 AA 55 AA
 2509: 2  3024	55 AA 55 AA			db	055h, 0AAh, 055h, 0AAh, 055h, 0AAh, 055h, 0AAh, 055h, 0AAh, 055h, 0AAh
       2  3028	55 AA 55 AA
       2  302C	55 AA 55 AA
 2510: 2  3030	00 88 88 88			db	000h, 088h, 088h, 088h, 0F8h, 088h, 088h, 088h, 000h, 03Eh, 008h, 008h
       2  3034	F8 88 88 88
       2  3038	00 3E 08 08
 2511: 2  303C	08 08 08 00			db	008h, 008h, 008h, 000h, 000h, 0F0h, 080h, 080h, 0E0h, 080h, 080h, 080h
       2  3040	00 F0 80 80
       2  3044	E0 80 80 80
 2512: 2  3048	1E 10 10 1C			db	01Eh, 010h, 010h, 01Ch, 010h, 010h, 010h, 000h, 000h, 070h, 080h, 080h
       2  304C	10 10 10 00
       2  3050	00 70 80 80
 2513: 2  3054	80 80 70 00			db	080h, 080h, 070h, 000h, 01Eh, 012h, 012h, 01Ch, 018h, 014h, 012h, 000h
       2  3058	1E 12 12 1C

ASEM-51 V1.3                                        Copyright (c) 2002 by W.W. Heinz                                         PAGE 48



 Line  I  Addr  Code            Source

       2  305C	18 14 12 00
 2514: 2  3060	00 80 80 80			db	000h, 080h, 080h, 080h, 080h, 080h, 0F0h, 000h, 01Eh, 010h, 010h, 01Ch
       2  3064	80 80 F0 00
       2  3068	1E 10 10 1C
 2515: 2  306C	10 10 10 00			db	010h, 010h, 010h, 000h, 000h, 038h, 06Ch, 06Ch, 038h, 000h, 000h, 000h
       2  3070	00 38 6C 6C
       2  3074	38 00 00 00
 2516: 2  3078	00 00 00 00			db	000h, 000h, 000h, 000h, 000h, 000h, 000h, 000h, 000h, 000h, 000h, 000h
       2  307C	00 00 00 00
       2  3080	00 00 00 00
 2517: 2  3084	18 18 7E 18			db	018h, 018h, 07Eh, 018h, 018h, 000h, 000h, 0FFh, 000h, 000h, 000h, 000h
       2  3088	18 00 00 FF
       2  308C	00 00 00 00
 2518: 2  3090	00 88 C8 A8			db	000h, 088h, 0C8h, 0A8h, 0A8h, 098h, 088h, 000h, 010h, 010h, 010h, 010h
       2  3094	A8 98 88 00
       2  3098	10 10 10 10
 2519: 2  309C	10 10 1E 00			db	010h, 010h, 01Eh, 000h, 000h, 088h, 088h, 088h, 050h, 050h, 050h, 020h
       2  30A0	00 88 88 88
       2  30A4	50 50 50 20
 2520: 2  30A8	00 3E 08 08			db	000h, 03Eh, 008h, 008h, 008h, 008h, 008h, 000h, 018h, 018h, 018h, 018h
       2  30AC	08 08 08 00
       2  30B0	18 18 18 18
 2521: 2  30B4	18 18 18 F8			db	018h, 018h, 018h, 0F8h, 000h, 000h, 000h, 000h, 000h, 000h, 000h, 000h
       2  30B8	00 00 00 00
       2  30BC	00 00 00 00
 2522: 2  30C0	00 00 00 00			db	000h, 000h, 000h, 000h, 000h, 000h, 000h, 0F8h, 018h, 018h, 018h, 018h
       2  30C4	00 00 00 F8
       2  30C8	18 18 18 18
 2523: 2  30CC	18 18 18 18			db	018h, 018h, 018h, 018h, 000h, 000h, 000h, 000h, 000h, 000h, 000h, 01Fh
       2  30D0	00 00 00 00
       2  30D4	00 00 00 1F
 2524: 2  30D8	18 18 18 18			db	018h, 018h, 018h, 018h, 018h, 018h, 018h, 018h, 018h, 018h, 018h, 018h
       2  30DC	18 18 18 18
       2  30E0	18 18 18 18
 2525: 2  30E4	18 18 18 1F			db	018h, 018h, 018h, 01Fh, 000h, 000h, 000h, 000h, 000h, 000h, 000h, 000h
       2  30E8	00 00 00 00
       2  30EC	00 00 00 00
 2526: 2  30F0	18 18 18 18			db	018h, 018h, 018h, 018h, 018h, 018h, 018h, 0FFh, 018h, 018h, 018h, 018h
       2  30F4	18 18 18 FF
       2  30F8	18 18 18 18
 2527: 2  30FC	18 18 18 18			db	018h, 018h, 018h, 018h, 0FFh, 000h, 000h, 000h, 000h, 000h, 000h, 000h
       2  3100	FF 00 00 00
       2  3104	00 00 00 00
 2528: 2  3108	00 00 00 00			db	000h, 000h, 000h, 000h, 000h, 000h, 000h, 000h, 000h, 000h, 000h, 0FFh
       2  310C	00 00 00 00
       2  3110	00 00 00 FF
 2529: 2  3114	00 00 00 00			db	000h, 000h, 000h, 000h, 000h, 000h, 000h, 000h, 000h, 000h, 000h, 000h
       2  3118	00 00 00 00
       2  311C	00 00 00 00
 2530: 2  3120	00 00 00 00			db	000h, 000h, 000h, 000h, 000h, 000h, 000h, 0FFh, 000h, 000h, 000h, 000h
       2  3124	00 00 00 FF
       2  3128	00 00 00 00
 2531: 2  312C	00 00 00 00			db	000h, 000h, 000h, 000h, 000h, 000h, 000h, 000h, 000h, 000h, 000h, 000h
       2  3130	00 00 00 00
       2  3134	00 00 00 00
 2532: 2  3138	00 00 00 FF			db	000h, 000h, 000h, 0FFh, 000h, 000h, 000h, 000h, 000h, 000h, 000h, 000h

ASEM-51 V1.3                                        Copyright (c) 2002 by W.W. Heinz                                         PAGE 49



 Line  I  Addr  Code            Source

       2  313C	00 00 00 00
       2  3140	00 00 00 00
 2533: 2  3144	00 00 00 00			db	000h, 000h, 000h, 000h, 000h, 000h, 000h, 000h, 000h, 000h, 0FFh, 000h
       2  3148	00 00 00 00
       2  314C	00 00 FF 00
 2534: 2  3150	18 18 18 18			db	018h, 018h, 018h, 018h, 018h, 018h, 018h, 01Fh, 018h, 018h, 018h, 018h
       2  3154	18 18 18 1F
       2  3158	18 18 18 18
 2535: 2  315C	18 18 18 18			db	018h, 018h, 018h, 018h, 018h, 018h, 018h, 018h, 018h, 018h, 018h, 0F8h
       2  3160	18 18 18 18
       2  3164	18 18 18 F8
 2536: 2  3168	18 18 18 18			db	018h, 018h, 018h, 018h, 018h, 018h, 018h, 018h, 018h, 018h, 018h, 018h
       2  316C	18 18 18 18
       2  3170	18 18 18 18
 2537: 2  3174	18 18 18 FF			db	018h, 018h, 018h, 0FFh, 000h, 000h, 000h, 000h, 000h, 000h, 000h, 000h
       2  3178	00 00 00 00
       2  317C	00 00 00 00
 2538: 2  3180	00 00 00 00			db	000h, 000h, 000h, 000h, 000h, 000h, 000h, 0FFh, 018h, 018h, 018h, 018h
       2  3184	00 00 00 FF
       2  3188	18 18 18 18
 2539: 2  318C	18 18 18 18			db	018h, 018h, 018h, 018h, 018h, 018h, 018h, 018h, 018h, 018h, 018h, 018h
       2  3190	18 18 18 18
       2  3194	18 18 18 18
 2540: 2  3198	18 18 18 18			db	018h, 018h, 018h, 018h, 018h, 018h, 018h, 018h, 000h, 000h, 000h, 00Ch
       2  319C	18 18 18 18
       2  31A0	00 00 00 0C
 2541: 2  31A4	18 30 60 30			db	018h, 030h, 060h, 030h, 018h, 00Ch, 000h, 07Eh, 000h, 000h, 000h, 000h
       2  31A8	18 0C 00 7E
       2  31AC	00 00 00 00
 2542: 2  31B0	00 00 00 30			db	000h, 000h, 000h, 030h, 018h, 00Ch, 006h, 00Ch, 018h, 030h, 000h, 07Eh
       2  31B4	18 0C 06 0C
       2  31B8	18 30 00 7E
 2543: 2  31BC	00 00 00 00			db	000h, 000h, 000h, 000h, 000h, 000h, 000h, 000h, 0FEh, 06Ch, 06Ch, 06Ch
       2  31C0	00 00 00 00
       2  31C4	FE 6C 6C 6C
 2544: 2  31C8	6C 6C 6C 6C			db	06Ch, 06Ch, 06Ch, 06Ch, 000h, 000h, 000h, 000h, 000h, 000h, 000h, 002h
       2  31CC	00 00 00 00
       2  31D0	00 00 00 02
 2545: 2  31D4	04 7E 08 10			db	004h, 07Eh, 008h, 010h, 07Eh, 020h, 040h, 000h, 000h, 000h, 000h, 000h
       2  31D8	7E 20 40 00
       2  31DC	00 00 00 00
 2546: 2  31E0	00 38 6C 64			db	000h, 038h, 06Ch, 064h, 060h, 0F0h, 060h, 060h, 060h, 060h, 0E6h, 0FCh
       2  31E4	60 F0 60 60
       2  31E8	60 60 E6 FC
 2547: 2  31EC	00 00 00 00			db	000h, 000h, 000h, 000h, 000h, 000h, 000h, 000h, 000h, 000h, 000h, 018h
       2  31F0	00 00 00 00
       2  31F4	00 00 00 18
 2548: 2  31F8	18 00 00 00			db	018h, 000h, 000h, 000h, 000h, 000h, 000h, 000h, 000h, 000h, 000h, 000h
       2  31FC	00 00 00 00
       2  3200	00 00 00 00
 2549: 2  3204	00 00 00 00			db	000h, 000h, 000h, 000h, 000h, 000h, 000h, 000h, 000h, 000h, 000h, 000h
       2  3208	00 00 00 00
       2  320C	00 00 00 00
 2550: 2  3210	00 00 18 3C			db	000h, 000h, 018h, 03Ch, 03Ch, 03Ch, 018h, 018h, 018h, 000h, 018h, 018h
       2  3214	3C 3C 18 18
       2  3218	18 00 18 18

ASEM-51 V1.3                                        Copyright (c) 2002 by W.W. Heinz                                         PAGE 50



 Line  I  Addr  Code            Source

 2551: 2  321C	00 00 00 00			db	000h, 000h, 000h, 000h, 000h, 066h, 066h, 066h, 024h, 000h, 000h, 000h
       2  3220	00 66 66 66
       2  3224	24 00 00 00
 2552: 2  3228	00 00 00 00			db	000h, 000h, 000h, 000h, 000h, 000h, 000h, 000h, 000h, 000h, 000h, 06Ch
       2  322C	00 00 00 00
       2  3230	00 00 00 6C
 2553: 2  3234	6C FE 6C 6C			db	06Ch, 0FEh, 06Ch, 06Ch, 06Ch, 0FEh, 06Ch, 06Ch, 000h, 000h, 000h, 000h
       2  3238	6C FE 6C 6C
       2  323C	00 00 00 00
 2554: 2  3240	18 18 7C C6			db	018h, 018h, 07Ch, 0C6h, 0C2h, 0C0h, 07Ch, 006h, 006h, 086h, 0C6h, 07Ch
       2  3244	C2 C0 7C 06
       2  3248	06 86 C6 7C
 2555: 2  324C	18 18 00 00			db	018h, 018h, 000h, 000h, 000h, 000h, 000h, 000h, 0C2h, 0C6h, 00Ch, 018h
       2  3250	00 00 00 00
       2  3254	C2 C6 0C 18
 2556: 2  3258	30 60 C6 86			db	030h, 060h, 0C6h, 086h, 000h, 000h, 000h, 000h, 000h, 000h, 038h, 06Ch
       2  325C	00 00 00 00
       2  3260	00 00 38 6C
 2557: 2  3264	6C 38 76 DC			db	06Ch, 038h, 076h, 0DCh, 0CCh, 0CCh, 0CCh, 076h, 000h, 000h, 000h, 000h
       2  3268	CC CC CC 76
       2  326C	00 00 00 00
 2558: 2  3270	00 30 30 30			db	000h, 030h, 030h, 030h, 060h, 000h, 000h, 000h, 000h, 000h, 000h, 000h
       2  3274	60 00 00 00
       2  3278	00 00 00 00
 2559: 2  327C	00 00 00 00			db	000h, 000h, 000h, 000h, 000h, 000h, 00Ch, 018h, 030h, 030h, 030h, 030h
       2  3280	00 00 0C 18
       2  3284	30 30 30 30
 2560: 2  3288	30 30 18 0C			db	030h, 030h, 018h, 00Ch, 000h, 000h, 000h, 000h, 000h, 000h, 030h, 018h
       2  328C	00 00 00 00
       2  3290	00 00 30 18
 2561: 2  3294	0C 0C 0C 0C			db	00Ch, 00Ch, 00Ch, 00Ch, 00Ch, 00Ch, 018h, 030h, 000h, 000h, 000h, 000h
       2  3298	0C 0C 18 30
       2  329C	00 00 00 00
 2562: 2  32A0	00 00 00 00			db	000h, 000h, 000h, 000h, 000h, 066h, 03Ch, 0FFh, 03Ch, 066h, 000h, 000h
       2  32A4	00 66 3C FF
       2  32A8	3C 66 00 00
 2563: 2  32AC	00 00 00 00			db	000h, 000h, 000h, 000h, 000h, 000h, 000h, 000h, 000h, 018h, 018h, 07Eh
       2  32B0	00 00 00 00
       2  32B4	00 18 18 7E
 2564: 2  32B8	18 18 00 00			db	018h, 018h, 000h, 000h, 000h, 000h, 000h, 000h, 000h, 000h, 000h, 000h
       2  32BC	00 00 00 00
       2  32C0	00 00 00 00
 2565: 2  32C4	00 00 00 00			db	000h, 000h, 000h, 000h, 000h, 018h, 018h, 018h, 030h, 000h, 000h, 000h
       2  32C8	00 18 18 18
       2  32CC	30 00 00 00
 2566: 2  32D0	00 00 00 00			db	000h, 000h, 000h, 000h, 000h, 000h, 000h, 0FEh, 000h, 000h, 000h, 000h
       2  32D4	00 00 00 FE
       2  32D8	00 00 00 00
 2567: 2  32DC	00 00 00 00			db	000h, 000h, 000h, 000h, 000h, 000h, 000h, 000h, 000h, 000h, 000h, 000h
       2  32E0	00 00 00 00
       2  32E4	00 00 00 00
 2568: 2  32E8	00 00 18 18			db	000h, 000h, 018h, 018h, 000h, 000h, 000h, 000h, 000h, 000h, 000h, 000h
       2  32EC	00 00 00 00
       2  32F0	00 00 00 00
 2569: 2  32F4	02 06 0C 18			db	002h, 006h, 00Ch, 018h, 030h, 060h, 0C0h, 080h, 000h, 000h, 000h, 000h
       2  32F8	30 60 C0 80

ASEM-51 V1.3                                        Copyright (c) 2002 by W.W. Heinz                                         PAGE 51



 Line  I  Addr  Code            Source

       2  32FC	00 00 00 00
 2570: 2  3300	00 00 38 6C			db	000h, 000h, 038h, 06Ch, 0C6h, 0C6h, 0D6h, 0D6h, 0C6h, 0C6h, 06Ch, 038h
       2  3304	C6 C6 D6 D6
       2  3308	C6 C6 6C 38
 2571: 2  330C	00 00 00 00			db	000h, 000h, 000h, 000h, 000h, 000h, 018h, 038h, 078h, 018h, 018h, 018h
       2  3310	00 00 18 38
       2  3314	78 18 18 18
 2572: 2  3318	18 18 18 7E			db	018h, 018h, 018h, 07Eh, 000h, 000h, 000h, 000h, 000h, 000h, 07Ch, 0C6h
       2  331C	00 00 00 00
       2  3320	00 00 7C C6
 2573: 2  3324	06 0C 18 30			db	006h, 00Ch, 018h, 030h, 060h, 0C0h, 0C6h, 0FEh, 000h, 000h, 000h, 000h
       2  3328	60 C0 C6 FE
       2  332C	00 00 00 00
 2574: 2  3330	00 00 7C C6			db	000h, 000h, 07Ch, 0C6h, 006h, 006h, 03Ch, 006h, 006h, 006h, 0C6h, 07Ch
       2  3334	06 06 3C 06
       2  3338	06 06 C6 7C
 2575: 2  333C	00 00 00 00			db	000h, 000h, 000h, 000h, 000h, 000h, 00Ch, 01Ch, 03Ch, 06Ch, 0CCh, 0FEh
       2  3340	00 00 0C 1C
       2  3344	3C 6C CC FE
 2576: 2  3348	0C 0C 0C 1E			db	00Ch, 00Ch, 00Ch, 01Eh, 000h, 000h, 000h, 000h, 000h, 000h, 0FEh, 0C0h
       2  334C	00 00 00 00
       2  3350	00 00 FE C0
 2577: 2  3354	C0 C0 FC 06			db	0C0h, 0C0h, 0FCh, 006h, 006h, 006h, 0C6h, 07Ch, 000h, 000h, 000h, 000h
       2  3358	06 06 C6 7C
       2  335C	00 00 00 00
 2578: 2  3360	00 00 38 60			db	000h, 000h, 038h, 060h, 0C0h, 0C0h, 0FCh, 0C6h, 0C6h, 0C6h, 0C6h, 07Ch
       2  3364	C0 C0 FC C6
       2  3368	C6 C6 C6 7C
 2579: 2  336C	00 00 00 00			db	000h, 000h, 000h, 000h, 000h, 000h, 0FEh, 0C6h, 006h, 006h, 00Ch, 018h
       2  3370	00 00 FE C6
       2  3374	06 06 0C 18
 2580: 2  3378	30 30 30 30			db	030h, 030h, 030h, 030h, 000h, 000h, 000h, 000h, 000h, 000h, 07Ch, 0C6h
       2  337C	00 00 00 00
       2  3380	00 00 7C C6
 2581: 2  3384	C6 C6 7C C6			db	0C6h, 0C6h, 07Ch, 0C6h, 0C6h, 0C6h, 0C6h, 07Ch, 000h, 000h, 000h, 000h
       2  3388	C6 C6 C6 7C
       2  338C	00 00 00 00
 2582: 2  3390	00 00 7C C6			db	000h, 000h, 07Ch, 0C6h, 0C6h, 0C6h, 07Eh, 006h, 006h, 006h, 00Ch, 078h
       2  3394	C6 C6 7E 06
       2  3398	06 06 0C 78
 2583: 2  339C	00 00 00 00			db	000h, 000h, 000h, 000h, 000h, 000h, 000h, 000h, 018h, 018h, 000h, 000h
       2  33A0	00 00 00 00
       2  33A4	18 18 00 00
 2584: 2  33A8	00 18 18 00			db	000h, 018h, 018h, 000h, 000h, 000h, 000h, 000h, 000h, 000h, 000h, 000h
       2  33AC	00 00 00 00
       2  33B0	00 00 00 00
 2585: 2  33B4	18 18 00 00			db	018h, 018h, 000h, 000h, 000h, 018h, 018h, 030h, 000h, 000h, 000h, 000h
       2  33B8	00 18 18 30
       2  33BC	00 00 00 00
 2586: 2  33C0	00 00 00 06			db	000h, 000h, 000h, 006h, 00Ch, 018h, 030h, 060h, 030h, 018h, 00Ch, 006h
       2  33C4	0C 18 30 60
       2  33C8	30 18 0C 06
 2587: 2  33CC	00 00 00 00			db	000h, 000h, 000h, 000h, 000h, 000h, 000h, 000h, 000h, 07Eh, 000h, 000h
       2  33D0	00 00 00 00
       2  33D4	00 7E 00 00
 2588: 2  33D8	7E 00 00 00			db	07Eh, 000h, 000h, 000h, 000h, 000h, 000h, 000h, 000h, 000h, 000h, 060h

ASEM-51 V1.3                                        Copyright (c) 2002 by W.W. Heinz                                         PAGE 52



 Line  I  Addr  Code            Source

       2  33DC	00 00 00 00
       2  33E0	00 00 00 60
 2589: 2  33E4	30 18 0C 06			db	030h, 018h, 00Ch, 006h, 00Ch, 018h, 030h, 060h, 000h, 000h, 000h, 000h
       2  33E8	0C 18 30 60
       2  33EC	00 00 00 00
 2590: 2  33F0	00 00 7C C6			db	000h, 000h, 07Ch, 0C6h, 0C6h, 00Ch, 018h, 018h, 018h, 000h, 018h, 018h
       2  33F4	C6 0C 18 18
       2  33F8	18 00 18 18
 2591: 2  33FC	00 00 00 00			db	000h, 000h, 000h, 000h, 000h, 000h, 000h, 07Ch, 0C6h, 0C6h, 0DEh, 0DEh
       2  3400	00 00 00 7C
       2  3404	C6 C6 DE DE
 2592: 2  3408	DE DC C0 7C			db	0DEh, 0DCh, 0C0h, 07Ch, 000h, 000h, 000h, 000h, 000h, 000h, 010h, 038h
       2  340C	00 00 00 00
       2  3410	00 00 10 38
 2593: 2  3414	6C C6 C6 FE			db	06Ch, 0C6h, 0C6h, 0FEh, 0C6h, 0C6h, 0C6h, 0C6h, 000h, 000h, 000h, 000h
       2  3418	C6 C6 C6 C6
       2  341C	00 00 00 00
 2594: 2  3420	00 00 FC 66			db	000h, 000h, 0FCh, 066h, 066h, 066h, 07Ch, 066h, 066h, 066h, 066h, 0FCh
       2  3424	66 66 7C 66
       2  3428	66 66 66 FC
 2595: 2  342C	00 00 00 00			db	000h, 000h, 000h, 000h, 000h, 000h, 03Ch, 066h, 0C2h, 0C0h, 0C0h, 0C0h
       2  3430	00 00 3C 66
       2  3434	C2 C0 C0 C0
 2596: 2  3438	C0 C2 66 3C			db	0C0h, 0C2h, 066h, 03Ch, 000h, 000h, 000h, 000h, 000h, 000h, 0F8h, 06Ch
       2  343C	00 00 00 00
       2  3440	00 00 F8 6C
 2597: 2  3444	66 66 66 66			db	066h, 066h, 066h, 066h, 066h, 066h, 06Ch, 0F8h, 000h, 000h, 000h, 000h
       2  3448	66 66 6C F8
       2  344C	00 00 00 00
 2598: 2  3450	00 00 FE 66			db	000h, 000h, 0FEh, 066h, 062h, 068h, 078h, 068h, 060h, 062h, 066h, 0FEh
       2  3454	62 68 78 68
       2  3458	60 62 66 FE
 2599: 2  345C	00 00 00 00			db	000h, 000h, 000h, 000h, 000h, 000h, 0FEh, 066h, 062h, 068h, 078h, 068h
       2  3460	00 00 FE 66
       2  3464	62 68 78 68
 2600: 2  3468	60 60 60 F0			db	060h, 060h, 060h, 0F0h, 000h, 000h, 000h, 000h, 000h, 000h, 03Ch, 066h
       2  346C	00 00 00 00
       2  3470	00 00 3C 66
 2601: 2  3474	C2 C0 C0 DE			db	0C2h, 0C0h, 0C0h, 0DEh, 0C6h, 0C6h, 066h, 03Ah, 000h, 000h, 000h, 000h
       2  3478	C6 C6 66 3A
       2  347C	00 00 00 00
 2602: 2  3480	00 00 C6 C6			db	000h, 000h, 0C6h, 0C6h, 0C6h, 0C6h, 0FEh, 0C6h, 0C6h, 0C6h, 0C6h, 0C6h
       2  3484	C6 C6 FE C6
       2  3488	C6 C6 C6 C6
 2603: 2  348C	00 00 00 00			db	000h, 000h, 000h, 000h, 000h, 000h, 03Ch, 018h, 018h, 018h, 018h, 018h
       2  3490	00 00 3C 18
       2  3494	18 18 18 18
 2604: 2  3498	18 18 18 3C			db	018h, 018h, 018h, 03Ch, 000h, 000h, 000h, 000h, 000h, 000h, 01Eh, 00Ch
       2  349C	00 00 00 00
       2  34A0	00 00 1E 0C
 2605: 2  34A4	0C 0C 0C 0C			db	00Ch, 00Ch, 00Ch, 00Ch, 0CCh, 0CCh, 0CCh, 078h, 000h, 000h, 000h, 000h
       2  34A8	CC CC CC 78
       2  34AC	00 00 00 00
 2606: 2  34B0	00 00 E6 66			db	000h, 000h, 0E6h, 066h, 066h, 06Ch, 078h, 078h, 06Ch, 066h, 066h, 0E6h
       2  34B4	66 6C 78 78
       2  34B8	6C 66 66 E6

ASEM-51 V1.3                                        Copyright (c) 2002 by W.W. Heinz                                         PAGE 53



 Line  I  Addr  Code            Source

 2607: 2  34BC	00 00 00 00			db	000h, 000h, 000h, 000h, 000h, 000h, 0F0h, 060h, 060h, 060h, 060h, 060h
       2  34C0	00 00 F0 60
       2  34C4	60 60 60 60
 2608: 2  34C8	60 62 66 FE			db	060h, 062h, 066h, 0FEh, 000h, 000h, 000h, 000h, 000h, 000h, 0C6h, 0EEh
       2  34CC	00 00 00 00
       2  34D0	00 00 C6 EE
 2609: 2  34D4	FE FE D6 C6			db	0FEh, 0FEh, 0D6h, 0C6h, 0C6h, 0C6h, 0C6h, 0C6h, 000h, 000h, 000h, 000h
       2  34D8	C6 C6 C6 C6
       2  34DC	00 00 00 00
 2610: 2  34E0	00 00 C6 E6			db	000h, 000h, 0C6h, 0E6h, 0F6h, 0FEh, 0DEh, 0CEh, 0C6h, 0C6h, 0C6h, 0C6h
       2  34E4	F6 FE DE CE
       2  34E8	C6 C6 C6 C6
 2611: 2  34EC	00 00 00 00			db	000h, 000h, 000h, 000h, 000h, 000h, 07Ch, 0C6h, 0C6h, 0C6h, 0C6h, 0C6h
       2  34F0	00 00 7C C6
       2  34F4	C6 C6 C6 C6
 2612: 2  34F8	C6 C6 C6 7C			db	0C6h, 0C6h, 0C6h, 07Ch, 000h, 000h, 000h, 000h, 000h, 000h, 0FCh, 066h
       2  34FC	00 00 00 00
       2  3500	00 00 FC 66
 2613: 2  3504	66 66 7C 60			db	066h, 066h, 07Ch, 060h, 060h, 060h, 060h, 0F0h, 000h, 000h, 000h, 000h
       2  3508	60 60 60 F0
       2  350C	00 00 00 00
 2614: 2  3510	00 00 7C C6			db	000h, 000h, 07Ch, 0C6h, 0C6h, 0C6h, 0C6h, 0C6h, 0C6h, 0D6h, 0DEh, 07Ch
       2  3514	C6 C6 C6 C6
       2  3518	C6 D6 DE 7C
 2615: 2  351C	0C 0E 00 00			db	00Ch, 00Eh, 000h, 000h, 000h, 000h, 0FCh, 066h, 066h, 066h, 07Ch, 06Ch
       2  3520	00 00 FC 66
       2  3524	66 66 7C 6C
 2616: 2  3528	66 66 66 E6			db	066h, 066h, 066h, 0E6h, 000h, 000h, 000h, 000h, 000h, 000h, 07Ch, 0C6h
       2  352C	00 00 00 00
       2  3530	00 00 7C C6
 2617: 2  3534	C6 60 38 0C			db	0C6h, 060h, 038h, 00Ch, 006h, 0C6h, 0C6h, 07Ch, 000h, 000h, 000h, 000h
       2  3538	06 C6 C6 7C
       2  353C	00 00 00 00
 2618: 2  3540	00 00 7E 7E			db	000h, 000h, 07Eh, 07Eh, 05Ah, 018h, 018h, 018h, 018h, 018h, 018h, 03Ch
       2  3544	5A 18 18 18
       2  3548	18 18 18 3C
 2619: 2  354C	00 00 00 00			db	000h, 000h, 000h, 000h, 000h, 000h, 0C6h, 0C6h, 0C6h, 0C6h, 0C6h, 0C6h
       2  3550	00 00 C6 C6
       2  3554	C6 C6 C6 C6
 2620: 2  3558	C6 C6 C6 7C			db	0C6h, 0C6h, 0C6h, 07Ch, 000h, 000h, 000h, 000h, 000h, 000h, 0C6h, 0C6h
       2  355C	00 00 00 00
       2  3560	00 00 C6 C6
 2621: 2  3564	C6 C6 C6 C6			db	0C6h, 0C6h, 0C6h, 0C6h, 0C6h, 06Ch, 038h, 010h, 000h, 000h, 000h, 000h
       2  3568	C6 6C 38 10
       2  356C	00 00 00 00
 2622: 2  3570	00 00 C6 C6			db	000h, 000h, 0C6h, 0C6h, 0C6h, 0C6h, 0D6h, 0D6h, 0D6h, 0FEh, 0EEh, 06Ch
       2  3574	C6 C6 D6 D6
       2  3578	D6 FE EE 6C
 2623: 2  357C	00 00 00 00			db	000h, 000h, 000h, 000h, 000h, 000h, 0C6h, 0C6h, 06Ch, 07Ch, 038h, 038h
       2  3580	00 00 C6 C6
       2  3584	6C 7C 38 38
 2624: 2  3588	7C 6C C6 C6			db	07Ch, 06Ch, 0C6h, 0C6h, 000h, 000h, 000h, 000h, 000h, 000h, 066h, 066h
       2  358C	00 00 00 00
       2  3590	00 00 66 66
 2625: 2  3594	66 66 3C 18			db	066h, 066h, 03Ch, 018h, 018h, 018h, 018h, 03Ch, 000h, 000h, 000h, 000h
       2  3598	18 18 18 3C

ASEM-51 V1.3                                        Copyright (c) 2002 by W.W. Heinz                                         PAGE 54



 Line  I  Addr  Code            Source

       2  359C	00 00 00 00
 2626: 2  35A0	00 00 FE C6			db	000h, 000h, 0FEh, 0C6h, 086h, 00Ch, 018h, 030h, 060h, 0C2h, 0C6h, 0FEh
       2  35A4	86 0C 18 30
       2  35A8	60 C2 C6 FE
 2627: 2  35AC	00 00 00 00			db	000h, 000h, 000h, 000h, 000h, 000h, 03Ch, 030h, 030h, 030h, 030h, 030h
       2  35B0	00 00 3C 30
       2  35B4	30 30 30 30
 2628: 2  35B8	30 30 30 3C			db	030h, 030h, 030h, 03Ch, 000h, 000h, 000h, 000h, 000h, 000h, 000h, 080h
       2  35BC	00 00 00 00
       2  35C0	00 00 00 80
 2629: 2  35C4	C0 E0 70 38			db	0C0h, 0E0h, 070h, 038h, 01Ch, 00Eh, 006h, 002h, 000h, 000h, 000h, 000h
       2  35C8	1C 0E 06 02
       2  35CC	00 00 00 00
 2630: 2  35D0	00 00 3C 0C			db	000h, 000h, 03Ch, 00Ch, 00Ch, 00Ch, 00Ch, 00Ch, 00Ch, 00Ch, 00Ch, 03Ch
       2  35D4	0C 0C 0C 0C
       2  35D8	0C 0C 0C 3C
 2631: 2  35DC	00 00 00 00			db	000h, 000h, 000h, 000h, 010h, 038h, 06Ch, 0C6h, 000h, 000h, 000h, 000h
       2  35E0	10 38 6C C6
       2  35E4	00 00 00 00
 2632: 2  35E8	00 00 00 00			db	000h, 000h, 000h, 000h, 000h, 000h, 000h, 000h, 000h, 000h, 000h, 000h
       2  35EC	00 00 00 00
       2  35F0	00 00 00 00
 2633: 2  35F4	00 00 00 00			db	000h, 000h, 000h, 000h, 000h, 000h, 000h, 000h, 000h, 0FFh, 000h, 000h
       2  35F8	00 00 00 00
       2  35FC	00 FF 00 00
 2634: 2  3600	30 30 18 00			db	030h, 030h, 018h, 000h, 000h, 000h, 000h, 000h, 000h, 000h, 000h, 000h
       2  3604	00 00 00 00
       2  3608	00 00 00 00
 2635: 2  360C	00 00 00 00			db	000h, 000h, 000h, 000h, 000h, 000h, 000h, 000h, 000h, 078h, 00Ch, 07Ch
       2  3610	00 00 00 00
       2  3614	00 78 0C 7C
 2636: 2  3618	CC CC CC 76			db	0CCh, 0CCh, 0CCh, 076h, 000h, 000h, 000h, 000h, 000h, 000h, 0E0h, 060h
       2  361C	00 00 00 00
       2  3620	00 00 E0 60
 2637: 2  3624	60 78 6C 66			db	060h, 078h, 06Ch, 066h, 066h, 066h, 066h, 07Ch, 000h, 000h, 000h, 000h
       2  3628	66 66 66 7C
       2  362C	00 00 00 00
 2638: 2  3630	00 00 00 00			db	000h, 000h, 000h, 000h, 000h, 07Ch, 0C6h, 0C0h, 0C0h, 0C0h, 0C6h, 07Ch
       2  3634	00 7C C6 C0
       2  3638	C0 C0 C6 7C
 2639: 2  363C	00 00 00 00			db	000h, 000h, 000h, 000h, 000h, 000h, 01Ch, 00Ch, 00Ch, 03Ch, 06Ch, 0CCh
       2  3640	00 00 1C 0C
       2  3644	0C 3C 6C CC
 2640: 2  3648	CC CC CC 76			db	0CCh, 0CCh, 0CCh, 076h, 000h, 000h, 000h, 000h, 000h, 000h, 000h, 000h
       2  364C	00 00 00 00
       2  3650	00 00 00 00
 2641: 2  3654	00 7C C6 FE			db	000h, 07Ch, 0C6h, 0FEh, 0C0h, 0C0h, 0C6h, 07Ch, 000h, 000h, 000h, 000h
       2  3658	C0 C0 C6 7C
       2  365C	00 00 00 00
 2642: 2  3660	00 00 38 6C			db	000h, 000h, 038h, 06Ch, 064h, 060h, 0F0h, 060h, 060h, 060h, 060h, 0F0h
       2  3664	64 60 F0 60
       2  3668	60 60 60 F0
 2643: 2  366C	00 00 00 00			db	000h, 000h, 000h, 000h, 000h, 000h, 000h, 000h, 000h, 076h, 0CCh, 0CCh
       2  3670	00 00 00 00
       2  3674	00 76 CC CC
 2644: 2  3678	CC CC CC 7C			db	0CCh, 0CCh, 0CCh, 07Ch, 00Ch, 0CCh, 078h, 000h, 000h, 000h, 0E0h, 060h

ASEM-51 V1.3                                        Copyright (c) 2002 by W.W. Heinz                                         PAGE 55



 Line  I  Addr  Code            Source

       2  367C	0C CC 78 00
       2  3680	00 00 E0 60
 2645: 2  3684	60 6C 76 66			db	060h, 06Ch, 076h, 066h, 066h, 066h, 066h, 0E6h, 000h, 000h, 000h, 000h
       2  3688	66 66 66 E6
       2  368C	00 00 00 00
 2646: 2  3690	00 00 18 18			db	000h, 000h, 018h, 018h, 000h, 038h, 018h, 018h, 018h, 018h, 018h, 03Ch
       2  3694	00 38 18 18
       2  3698	18 18 18 3C
 2647: 2  369C	00 00 00 00			db	000h, 000h, 000h, 000h, 000h, 000h, 006h, 006h, 000h, 00Eh, 006h, 006h
       2  36A0	00 00 06 06
       2  36A4	00 0E 06 06
 2648: 2  36A8	06 06 06 06			db	006h, 006h, 006h, 006h, 066h, 066h, 03Ch, 000h, 000h, 000h, 0E0h, 060h
       2  36AC	66 66 3C 00
       2  36B0	00 00 E0 60
 2649: 2  36B4	60 66 6C 78			db	060h, 066h, 06Ch, 078h, 078h, 06Ch, 066h, 0E6h, 000h, 000h, 000h, 000h
       2  36B8	78 6C 66 E6
       2  36BC	00 00 00 00
 2650: 2  36C0	00 00 38 18			db	000h, 000h, 038h, 018h, 018h, 018h, 018h, 018h, 018h, 018h, 018h, 03Ch
       2  36C4	18 18 18 18
       2  36C8	18 18 18 3C
 2651: 2  36CC	00 00 00 00			db	000h, 000h, 000h, 000h, 000h, 000h, 000h, 000h, 000h, 0ECh, 0FEh, 0D6h
       2  36D0	00 00 00 00
       2  36D4	00 EC FE D6
 2652: 2  36D8	D6 D6 D6 C6			db	0D6h, 0D6h, 0D6h, 0C6h, 000h, 000h, 000h, 000h, 000h, 000h, 000h, 000h
       2  36DC	00 00 00 00
       2  36E0	00 00 00 00
 2653: 2  36E4	00 DC 66 66			db	000h, 0DCh, 066h, 066h, 066h, 066h, 066h, 066h, 000h, 000h, 000h, 000h
       2  36E8	66 66 66 66
       2  36EC	00 00 00 00
 2654: 2  36F0	00 00 00 00			db	000h, 000h, 000h, 000h, 000h, 07Ch, 0C6h, 0C6h, 0C6h, 0C6h, 0C6h, 07Ch
       2  36F4	00 7C C6 C6
       2  36F8	C6 C6 C6 7C
 2655: 2  36FC	00 00 00 00			db	000h, 000h, 000h, 000h, 000h, 000h, 000h, 000h, 000h, 0DCh, 066h, 066h
       2  3700	00 00 00 00
       2  3704	00 DC 66 66
 2656: 2  3708	66 66 66 7C			db	066h, 066h, 066h, 07Ch, 060h, 060h, 0F0h, 000h, 000h, 000h, 000h, 000h
       2  370C	60 60 F0 00
       2  3710	00 00 00 00
 2657: 2  3714	00 76 CC CC			db	000h, 076h, 0CCh, 0CCh, 0CCh, 0CCh, 0CCh, 07Ch, 00Ch, 00Ch, 01Eh, 000h
       2  3718	CC CC CC 7C
       2  371C	0C 0C 1E 00
 2658: 2  3720	00 00 00 00			db	000h, 000h, 000h, 000h, 000h, 0DCh, 076h, 066h, 060h, 060h, 060h, 0F0h
       2  3724	00 DC 76 66
       2  3728	60 60 60 F0
 2659: 2  372C	00 00 00 00			db	000h, 000h, 000h, 000h, 000h, 000h, 000h, 000h, 000h, 07Ch, 0C6h, 060h
       2  3730	00 00 00 00
       2  3734	00 7C C6 60
 2660: 2  3738	38 0C C6 7C			db	038h, 00Ch, 0C6h, 07Ch, 000h, 000h, 000h, 000h, 000h, 000h, 010h, 030h
       2  373C	00 00 00 00
       2  3740	00 00 10 30
 2661: 2  3744	30 FC 30 30			db	030h, 0FCh, 030h, 030h, 030h, 030h, 036h, 01Ch, 000h, 000h, 000h, 000h
       2  3748	30 30 36 1C
       2  374C	00 00 00 00
 2662: 2  3750	00 00 00 00			db	000h, 000h, 000h, 000h, 000h, 0CCh, 0CCh, 0CCh, 0CCh, 0CCh, 0CCh, 076h
       2  3754	00 CC CC CC
       2  3758	CC CC CC 76

ASEM-51 V1.3                                        Copyright (c) 2002 by W.W. Heinz                                         PAGE 56



 Line  I  Addr  Code            Source

 2663: 2  375C	00 00 00 00			db	000h, 000h, 000h, 000h, 000h, 000h, 000h, 000h, 000h, 066h, 066h, 066h
       2  3760	00 00 00 00
       2  3764	00 66 66 66
 2664: 2  3768	66 66 3C 18			db	066h, 066h, 03Ch, 018h, 000h, 000h, 000h, 000h, 000h, 000h, 000h, 000h
       2  376C	00 00 00 00
       2  3770	00 00 00 00
 2665: 2  3774	00 C6 C6 D6			db	000h, 0C6h, 0C6h, 0D6h, 0D6h, 0D6h, 0FEh, 06Ch, 000h, 000h, 000h, 000h
       2  3778	D6 D6 FE 6C
       2  377C	00 00 00 00
 2666: 2  3780	00 00 00 00			db	000h, 000h, 000h, 000h, 000h, 0C6h, 06Ch, 038h, 038h, 038h, 06Ch, 0C6h
       2  3784	00 C6 6C 38
       2  3788	38 38 6C C6
 2667: 2  378C	00 00 00 00			db	000h, 000h, 000h, 000h, 000h, 000h, 000h, 000h, 000h, 0C6h, 0C6h, 0C6h
       2  3790	00 00 00 00
       2  3794	00 C6 C6 C6
 2668: 2  3798	C6 C6 C6 7E			db	0C6h, 0C6h, 0C6h, 07Eh, 006h, 00Ch, 0F8h, 000h, 000h, 000h, 000h, 000h
       2  379C	06 0C F8 00
       2  37A0	00 00 00 00
 2669: 2  37A4	00 FE CC 18			db	000h, 0FEh, 0CCh, 018h, 030h, 060h, 0C6h, 0FEh, 000h, 000h, 000h, 000h
       2  37A8	30 60 C6 FE
       2  37AC	00 00 00 00
 2670: 2  37B0	00 00 0E 18			db	000h, 000h, 00Eh, 018h, 018h, 018h, 070h, 018h, 018h, 018h, 018h, 00Eh
       2  37B4	18 18 70 18
       2  37B8	18 18 18 0E
 2671: 2  37BC	00 00 00 00			db	000h, 000h, 000h, 000h, 000h, 000h, 018h, 018h, 018h, 018h, 000h, 018h
       2  37C0	00 00 18 18
       2  37C4	18 18 00 18
 2672: 2  37C8	18 18 18 18			db	018h, 018h, 018h, 018h, 000h, 000h, 000h, 000h, 000h, 000h, 070h, 018h
       2  37CC	00 00 00 00
       2  37D0	00 00 70 18
 2673: 2  37D4	18 18 0E 18			db	018h, 018h, 00Eh, 018h, 018h, 018h, 018h, 070h, 000h, 000h, 000h, 000h
       2  37D8	18 18 18 70
       2  37DC	00 00 00 00
 2674: 2  37E0	00 00 76 DC			db	000h, 000h, 076h, 0DCh, 000h, 000h, 000h, 000h, 000h, 000h, 000h, 000h
       2  37E4	00 00 00 00
       2  37E8	00 00 00 00
 2675: 2  37EC	00 00 00 00			db	000h, 000h, 000h, 000h, 000h, 000h, 000h, 000h, 010h, 038h, 06Ch, 0C6h
       2  37F0	00 00 00 00
       2  37F4	10 38 6C C6
 2676: 2  37F8	C6 C6 FE 00			db	0C6h, 0C6h, 0FEh, 000h, 000h, 000h, 000h, 000h, 000h, 000h, 03Ch, 066h
       2  37FC	00 00 00 00
       2  3800	00 00 3C 66
 2677: 2  3804	C2 C0 C0 C0			db	0C2h, 0C0h, 0C0h, 0C0h, 0C2h, 066h, 03Ch, 00Ch, 006h, 07Ch, 000h, 000h
       2  3808	C2 66 3C 0C
       2  380C	06 7C 00 00
 2678: 2  3810	00 00 CC 00			db	000h, 000h, 0CCh, 000h, 000h, 0CCh, 0CCh, 0CCh, 0CCh, 0CCh, 0CCh, 076h
       2  3814	00 CC CC CC
       2  3818	CC CC CC 76
 2679: 2  381C	00 00 00 00			db	000h, 000h, 000h, 000h, 000h, 00Ch, 018h, 030h, 000h, 07Ch, 0C6h, 0FEh
       2  3820	00 0C 18 30
       2  3824	00 7C C6 FE
 2680: 2  3828	C0 C0 C6 7C			db	0C0h, 0C0h, 0C6h, 07Ch, 000h, 000h, 000h, 000h, 000h, 010h, 038h, 06Ch
       2  382C	00 00 00 00
       2  3830	00 10 38 6C
 2681: 2  3834	00 78 0C 7C			db	000h, 078h, 00Ch, 07Ch, 0CCh, 0CCh, 0CCh, 076h, 000h, 000h, 000h, 000h
       2  3838	CC CC CC 76

ASEM-51 V1.3                                        Copyright (c) 2002 by W.W. Heinz                                         PAGE 57



 Line  I  Addr  Code            Source

       2  383C	00 00 00 00
 2682: 2  3840	00 00 CC 00			db	000h, 000h, 0CCh, 000h, 000h, 078h, 00Ch, 07Ch, 0CCh, 0CCh, 0CCh, 076h
       2  3844	00 78 0C 7C
       2  3848	CC CC CC 76
 2683: 2  384C	00 00 00 00			db	000h, 000h, 000h, 000h, 000h, 060h, 030h, 018h, 000h, 078h, 00Ch, 07Ch
       2  3850	00 60 30 18
       2  3854	00 78 0C 7C
 2684: 2  3858	CC CC CC 76			db	0CCh, 0CCh, 0CCh, 076h, 000h, 000h, 000h, 000h, 000h, 038h, 06Ch, 038h
       2  385C	00 00 00 00
       2  3860	00 38 6C 38
 2685: 2  3864	00 78 0C 7C			db	000h, 078h, 00Ch, 07Ch, 0CCh, 0CCh, 0CCh, 076h, 000h, 000h, 000h, 000h
       2  3868	CC CC CC 76
       2  386C	00 00 00 00
 2686: 2  3870	00 00 00 00			db	000h, 000h, 000h, 000h, 03Ch, 066h, 060h, 060h, 066h, 03Ch, 00Ch, 006h
       2  3874	3C 66 60 60
       2  3878	66 3C 0C 06
 2687: 2  387C	3C 00 00 00			db	03Ch, 000h, 000h, 000h, 000h, 010h, 038h, 06Ch, 000h, 07Ch, 0C6h, 0FEh
       2  3880	00 10 38 6C
       2  3884	00 7C C6 FE
 2688: 2  3888	C0 C0 C6 7C			db	0C0h, 0C0h, 0C6h, 07Ch, 000h, 000h, 000h, 000h, 000h, 000h, 0C6h, 000h
       2  388C	00 00 00 00
       2  3890	00 00 C6 00
 2689: 2  3894	00 7C C6 FE			db	000h, 07Ch, 0C6h, 0FEh, 0C0h, 0C0h, 0C6h, 07Ch, 000h, 000h, 000h, 000h
       2  3898	C0 C0 C6 7C
       2  389C	00 00 00 00
 2690: 2  38A0	00 60 30 18			db	000h, 060h, 030h, 018h, 000h, 07Ch, 0C6h, 0FEh, 0C0h, 0C0h, 0C6h, 07Ch
       2  38A4	00 7C C6 FE
       2  38A8	C0 C0 C6 7C
 2691: 2  38AC	00 00 00 00			db	000h, 000h, 000h, 000h, 000h, 000h, 066h, 000h, 000h, 038h, 018h, 018h
       2  38B0	00 00 66 00
       2  38B4	00 38 18 18
 2692: 2  38B8	18 18 18 3C			db	018h, 018h, 018h, 03Ch, 000h, 000h, 000h, 000h, 000h, 018h, 03Ch, 066h
       2  38BC	00 00 00 00
       2  38C0	00 18 3C 66
 2693: 2  38C4	00 38 18 18			db	000h, 038h, 018h, 018h, 018h, 018h, 018h, 03Ch, 000h, 000h, 000h, 000h
       2  38C8	18 18 18 3C
       2  38CC	00 00 00 00
 2694: 2  38D0	00 60 30 18			db	000h, 060h, 030h, 018h, 000h, 038h, 018h, 018h, 018h, 018h, 018h, 03Ch
       2  38D4	00 38 18 18
       2  38D8	18 18 18 3C
 2695: 2  38DC	00 00 00 00			db	000h, 000h, 000h, 000h, 000h, 0C6h, 000h, 010h, 038h, 06Ch, 0C6h, 0C6h
       2  38E0	00 C6 00 10
       2  38E4	38 6C C6 C6
 2696: 2  38E8	FE C6 C6 C6			db	0FEh, 0C6h, 0C6h, 0C6h, 000h, 000h, 000h, 000h, 038h, 06Ch, 038h, 000h
       2  38EC	00 00 00 00
       2  38F0	38 6C 38 00
 2697: 2  38F4	38 6C C6 C6			db	038h, 06Ch, 0C6h, 0C6h, 0FEh, 0C6h, 0C6h, 0C6h, 000h, 000h, 000h, 000h
       2  38F8	FE C6 C6 C6
       2  38FC	00 00 00 00
 2698: 2  3900	18 30 60 00			db	018h, 030h, 060h, 000h, 0FEh, 066h, 060h, 07Ch, 060h, 060h, 066h, 0FEh
       2  3904	FE 66 60 7C
       2  3908	60 60 66 FE
 2699: 2  390C	00 00 00 00			db	000h, 000h, 000h, 000h, 000h, 000h, 000h, 000h, 000h, 0CCh, 076h, 036h
       2  3910	00 00 00 00
       2  3914	00 CC 76 36
 2700: 2  3918	7E D8 D8 6E			db	07Eh, 0D8h, 0D8h, 06Eh, 000h, 000h, 000h, 000h, 000h, 000h, 03Eh, 06Ch

ASEM-51 V1.3                                        Copyright (c) 2002 by W.W. Heinz                                         PAGE 58



 Line  I  Addr  Code            Source

       2  391C	00 00 00 00
       2  3920	00 00 3E 6C
 2701: 2  3924	CC CC FE CC			db	0CCh, 0CCh, 0FEh, 0CCh, 0CCh, 0CCh, 0CCh, 0CEh, 000h, 000h, 000h, 000h
       2  3928	CC CC CC CE
       2  392C	00 00 00 00
 2702: 2  3930	00 10 38 6C			db	000h, 010h, 038h, 06Ch, 000h, 07Ch, 0C6h, 0C6h, 0C6h, 0C6h, 0C6h, 07Ch
       2  3934	00 7C C6 C6
       2  3938	C6 C6 C6 7C
 2703: 2  393C	00 00 00 00			db	000h, 000h, 000h, 000h, 000h, 000h, 0C6h, 000h, 000h, 07Ch, 0C6h, 0C6h
       2  3940	00 00 C6 00
       2  3944	00 7C C6 C6
 2704: 2  3948	C6 C6 C6 7C			db	0C6h, 0C6h, 0C6h, 07Ch, 000h, 000h, 000h, 000h, 000h, 060h, 030h, 018h
       2  394C	00 00 00 00
       2  3950	00 60 30 18
 2705: 2  3954	00 7C C6 C6			db	000h, 07Ch, 0C6h, 0C6h, 0C6h, 0C6h, 0C6h, 07Ch, 000h, 000h, 000h, 000h
       2  3958	C6 C6 C6 7C
       2  395C	00 00 00 00
 2706: 2  3960	00 30 78 CC			db	000h, 030h, 078h, 0CCh, 000h, 0CCh, 0CCh, 0CCh, 0CCh, 0CCh, 0CCh, 076h
       2  3964	00 CC CC CC
       2  3968	CC CC CC 76
 2707: 2  396C	00 00 00 00			db	000h, 000h, 000h, 000h, 000h, 060h, 030h, 018h, 000h, 0CCh, 0CCh, 0CCh
       2  3970	00 60 30 18
       2  3974	00 CC CC CC
 2708: 2  3978	CC CC CC 76			db	0CCh, 0CCh, 0CCh, 076h, 000h, 000h, 000h, 000h, 000h, 000h, 0C6h, 000h
       2  397C	00 00 00 00
       2  3980	00 00 C6 00
 2709: 2  3984	00 C6 C6 C6			db	000h, 0C6h, 0C6h, 0C6h, 0C6h, 0C6h, 0C6h, 07Eh, 006h, 00Ch, 078h, 000h
       2  3988	C6 C6 C6 7E
       2  398C	06 0C 78 00
 2710: 2  3990	00 C6 00 7C			db	000h, 0C6h, 000h, 07Ch, 0C6h, 0C6h, 0C6h, 0C6h, 0C6h, 0C6h, 0C6h, 07Ch
       2  3994	C6 C6 C6 C6
       2  3998	C6 C6 C6 7C
 2711: 2  399C	00 00 00 00			db	000h, 000h, 000h, 000h, 000h, 0C6h, 000h, 0C6h, 0C6h, 0C6h, 0C6h, 0C6h
       2  39A0	00 C6 00 C6
       2  39A4	C6 C6 C6 C6
 2712: 2  39A8	C6 C6 C6 7C			db	0C6h, 0C6h, 0C6h, 07Ch, 000h, 000h, 000h, 000h, 000h, 018h, 018h, 03Ch
       2  39AC	00 00 00 00
       2  39B0	00 18 18 3C
 2713: 2  39B4	66 60 60 60			db	066h, 060h, 060h, 060h, 066h, 03Ch, 018h, 018h, 000h, 000h, 000h, 000h
       2  39B8	66 3C 18 18
       2  39BC	00 00 00 00
 2714: 2  39C0	00 38 6C 64			db	000h, 038h, 06Ch, 064h, 060h, 0F0h, 060h, 060h, 060h, 060h, 0E6h, 0FCh
       2  39C4	60 F0 60 60
       2  39C8	60 60 E6 FC
 2715: 2  39CC	00 00 00 00			db	000h, 000h, 000h, 000h, 000h, 000h, 066h, 066h, 03Ch, 018h, 07Eh, 018h
       2  39D0	00 00 66 66
       2  39D4	3C 18 7E 18
 2716: 2  39D8	7E 18 18 18			db	07Eh, 018h, 018h, 018h, 000h, 000h, 000h, 000h, 000h, 0F8h, 0CCh, 0CCh
       2  39DC	00 00 00 00
       2  39E0	00 F8 CC CC
 2717: 2  39E4	F8 C4 CC DE			db	0F8h, 0C4h, 0CCh, 0DEh, 0CCh, 0CCh, 0CCh, 0C6h, 000h, 000h, 000h, 000h
       2  39E8	CC CC CC C6
       2  39EC	00 00 00 00
 2718: 2  39F0	00 0E 1B 18			db	000h, 00Eh, 01Bh, 018h, 018h, 018h, 07Eh, 018h, 018h, 018h, 018h, 018h
       2  39F4	18 18 7E 18
       2  39F8	18 18 18 18

ASEM-51 V1.3                                        Copyright (c) 2002 by W.W. Heinz                                         PAGE 59



 Line  I  Addr  Code            Source

 2719: 2  39FC	D8 70 00 00			db	0D8h, 070h, 000h, 000h, 000h, 018h, 030h, 060h, 000h, 078h, 00Ch, 07Ch
       2  3A00	00 18 30 60
       2  3A04	00 78 0C 7C
 2720: 2  3A08	CC CC CC 76			db	0CCh, 0CCh, 0CCh, 076h, 000h, 000h, 000h, 000h, 000h, 00Ch, 018h, 030h
       2  3A0C	00 00 00 00
       2  3A10	00 0C 18 30
 2721: 2  3A14	00 38 18 18			db	000h, 038h, 018h, 018h, 018h, 018h, 018h, 03Ch, 000h, 000h, 000h, 000h
       2  3A18	18 18 18 3C
       2  3A1C	00 00 00 00
 2722: 2  3A20	00 18 30 60			db	000h, 018h, 030h, 060h, 000h, 07Ch, 0C6h, 0C6h, 0C6h, 0C6h, 0C6h, 07Ch
       2  3A24	00 7C C6 C6
       2  3A28	C6 C6 C6 7C
 2723: 2  3A2C	00 00 00 00			db	000h, 000h, 000h, 000h, 000h, 018h, 030h, 060h, 000h, 0CCh, 0CCh, 0CCh
       2  3A30	00 18 30 60
       2  3A34	00 CC CC CC
 2724: 2  3A38	CC CC CC 76			db	0CCh, 0CCh, 0CCh, 076h, 000h, 000h, 000h, 000h, 000h, 000h, 076h, 0DCh
       2  3A3C	00 00 00 00
       2  3A40	00 00 76 DC
 2725: 2  3A44	00 DC 66 66			db	000h, 0DCh, 066h, 066h, 066h, 066h, 066h, 066h, 000h, 000h, 000h, 000h
       2  3A48	66 66 66 66
       2  3A4C	00 00 00 00
 2726: 2  3A50	76 DC 00 C6			db	076h, 0DCh, 000h, 0C6h, 0E6h, 0F6h, 0FEh, 0DEh, 0CEh, 0C6h, 0C6h, 0C6h
       2  3A54	E6 F6 FE DE
       2  3A58	CE C6 C6 C6
 2727: 2  3A5C	00 00 00 00			db	000h, 000h, 000h, 000h, 000h, 03Ch, 06Ch, 06Ch, 03Eh, 000h, 07Eh, 000h
       2  3A60	00 3C 6C 6C
       2  3A64	3E 00 7E 00
 2728: 2  3A68	00 00 00 00			db	000h, 000h, 000h, 000h, 000h, 000h, 000h, 000h, 000h, 038h, 06Ch, 06Ch
       2  3A6C	00 00 00 00
       2  3A70	00 38 6C 6C
 2729: 2  3A74	38 00 7C 00			db	038h, 000h, 07Ch, 000h, 000h, 000h, 000h, 000h, 000h, 000h, 000h, 000h
       2  3A78	00 00 00 00
       2  3A7C	00 00 00 00
 2730: 2  3A80	00 00 30 30			db	000h, 000h, 030h, 030h, 000h, 030h, 030h, 060h, 0C0h, 0C6h, 0C6h, 07Ch
       2  3A84	00 30 30 60
       2  3A88	C0 C6 C6 7C
 2731: 2  3A8C	00 00 00 00			db	000h, 000h, 000h, 000h, 000h, 000h, 000h, 000h, 000h, 000h, 0FEh, 0C0h
       2  3A90	00 00 00 00
       2  3A94	00 00 FE C0
 2732: 2  3A98	C0 C0 C0 00			db	0C0h, 0C0h, 0C0h, 000h, 000h, 000h, 000h, 000h, 000h, 000h, 000h, 000h
       2  3A9C	00 00 00 00
       2  3AA0	00 00 00 00
 2733: 2  3AA4	00 00 FE 06			db	000h, 000h, 0FEh, 006h, 006h, 006h, 006h, 000h, 000h, 000h, 000h, 000h
       2  3AA8	06 06 06 00
       2  3AAC	00 00 00 00
 2734: 2  3AB0	00 C0 C0 C2			db	000h, 0C0h, 0C0h, 0C2h, 0C6h, 0CCh, 018h, 030h, 060h, 0DCh, 086h, 00Ch
       2  3AB4	C6 CC 18 30
       2  3AB8	60 DC 86 0C
 2735: 2  3ABC	18 3E 00 00			db	018h, 03Eh, 000h, 000h, 000h, 0C0h, 0C0h, 0C2h, 0C6h, 0CCh, 018h, 030h
       2  3AC0	00 C0 C0 C2
       2  3AC4	C6 CC 18 30
 2736: 2  3AC8	66 CE 9E 3E			db	066h, 0CEh, 09Eh, 03Eh, 006h, 006h, 000h, 000h, 000h, 000h, 018h, 018h
       2  3ACC	06 06 00 00
       2  3AD0	00 00 18 18
 2737: 2  3AD4	00 18 18 18			db	000h, 018h, 018h, 018h, 03Ch, 03Ch, 03Ch, 018h, 000h, 000h, 000h, 000h
       2  3AD8	3C 3C 3C 18

ASEM-51 V1.3                                        Copyright (c) 2002 by W.W. Heinz                                         PAGE 60



 Line  I  Addr  Code            Source

       2  3ADC	00 00 00 00
 2738: 2  3AE0	00 00 00 00			db	000h, 000h, 000h, 000h, 000h, 036h, 06Ch, 0D8h, 06Ch, 036h, 000h, 000h
       2  3AE4	00 36 6C D8
       2  3AE8	6C 36 00 00
 2739: 2  3AEC	00 00 00 00			db	000h, 000h, 000h, 000h, 000h, 000h, 000h, 000h, 000h, 0D8h, 06Ch, 036h
       2  3AF0	00 00 00 00
       2  3AF4	00 D8 6C 36
 2740: 2  3AF8	6C D8 00 00			db	06Ch, 0D8h, 000h, 000h, 000h, 000h, 000h, 000h, 011h, 044h, 011h, 044h
       2  3AFC	00 00 00 00
       2  3B00	11 44 11 44
 2741: 2  3B04	11 44 11 44			db	011h, 044h, 011h, 044h, 011h, 044h, 011h, 044h, 011h, 044h, 011h, 044h
       2  3B08	11 44 11 44
       2  3B0C	11 44 11 44
 2742: 2  3B10	55 AA 55 AA			db	055h, 0AAh, 055h, 0AAh, 055h, 0AAh, 055h, 0AAh, 055h, 0AAh, 055h, 0AAh
       2  3B14	55 AA 55 AA
       2  3B18	55 AA 55 AA
 2743: 2  3B1C	55 AA 55 AA			db	055h, 0AAh, 055h, 0AAh, 0DDh, 077h, 0DDh, 077h, 0DDh, 077h, 0DDh, 077h
       2  3B20	DD 77 DD 77
       2  3B24	DD 77 DD 77
 2744: 2  3B28	DD 77 DD 77			db	0DDh, 077h, 0DDh, 077h, 0DDh, 077h, 0DDh, 077h, 018h, 018h, 018h, 018h
       2  3B2C	DD 77 DD 77
       2  3B30	18 18 18 18
 2745: 2  3B34	18 18 18 18			db	018h, 018h, 018h, 018h, 018h, 018h, 018h, 018h, 018h, 018h, 018h, 018h
       2  3B38	18 18 18 18
       2  3B3C	18 18 18 18
 2746: 2  3B40	18 18 18 18			db	018h, 018h, 018h, 018h, 018h, 018h, 018h, 0F8h, 018h, 018h, 018h, 018h
       2  3B44	18 18 18 F8
       2  3B48	18 18 18 18
 2747: 2  3B4C	18 18 18 18			db	018h, 018h, 018h, 018h, 018h, 018h, 018h, 018h, 018h, 0F8h, 018h, 0F8h
       2  3B50	18 18 18 18
       2  3B54	18 F8 18 F8
 2748: 2  3B58	18 18 18 18			db	018h, 018h, 018h, 018h, 018h, 018h, 018h, 018h, 036h, 036h, 036h, 036h
       2  3B5C	18 18 18 18
       2  3B60	36 36 36 36
 2749: 2  3B64	36 36 36 F6			db	036h, 036h, 036h, 0F6h, 036h, 036h, 036h, 036h, 036h, 036h, 036h, 036h
       2  3B68	36 36 36 36
       2  3B6C	36 36 36 36
 2750: 2  3B70	00 00 00 00			db	000h, 000h, 000h, 000h, 000h, 000h, 000h, 0FEh, 036h, 036h, 036h, 036h
       2  3B74	00 00 00 FE
       2  3B78	36 36 36 36
 2751: 2  3B7C	36 36 36 36			db	036h, 036h, 036h, 036h, 000h, 000h, 000h, 000h, 000h, 0F8h, 018h, 0F8h
       2  3B80	00 00 00 00
       2  3B84	00 F8 18 F8
 2752: 2  3B88	18 18 18 18			db	018h, 018h, 018h, 018h, 018h, 018h, 018h, 018h, 036h, 036h, 036h, 036h
       2  3B8C	18 18 18 18
       2  3B90	36 36 36 36
 2753: 2  3B94	36 F6 06 F6			db	036h, 0F6h, 006h, 0F6h, 036h, 036h, 036h, 036h, 036h, 036h, 036h, 036h
       2  3B98	36 36 36 36
       2  3B9C	36 36 36 36
 2754: 2  3BA0	36 36 36 36			db	036h, 036h, 036h, 036h, 036h, 036h, 036h, 036h, 036h, 036h, 036h, 036h
       2  3BA4	36 36 36 36
       2  3BA8	36 36 36 36
 2755: 2  3BAC	36 36 36 36			db	036h, 036h, 036h, 036h, 000h, 000h, 000h, 000h, 000h, 0FEh, 006h, 0F6h
       2  3BB0	00 00 00 00
       2  3BB4	00 FE 06 F6
 2756: 2  3BB8	36 36 36 36			db	036h, 036h, 036h, 036h, 036h, 036h, 036h, 036h, 036h, 036h, 036h, 036h

ASEM-51 V1.3                                        Copyright (c) 2002 by W.W. Heinz                                         PAGE 61



 Line  I  Addr  Code            Source

       2  3BBC	36 36 36 36
       2  3BC0	36 36 36 36
 2757: 2  3BC4	36 F6 06 FE			db	036h, 0F6h, 006h, 0FEh, 000h, 000h, 000h, 000h, 000h, 000h, 000h, 000h
       2  3BC8	00 00 00 00
       2  3BCC	00 00 00 00
 2758: 2  3BD0	36 36 36 36			db	036h, 036h, 036h, 036h, 036h, 036h, 036h, 0FEh, 000h, 000h, 000h, 000h
       2  3BD4	36 36 36 FE
       2  3BD8	00 00 00 00
 2759: 2  3BDC	00 00 00 00			db	000h, 000h, 000h, 000h, 018h, 018h, 018h, 018h, 018h, 0F8h, 018h, 0F8h
       2  3BE0	18 18 18 18
       2  3BE4	18 F8 18 F8
 2760: 2  3BE8	00 00 00 00			db	000h, 000h, 000h, 000h, 000h, 000h, 000h, 000h, 000h, 000h, 000h, 000h
       2  3BEC	00 00 00 00
       2  3BF0	00 00 00 00
 2761: 2  3BF4	00 00 00 F8			db	000h, 000h, 000h, 0F8h, 018h, 018h, 018h, 018h, 018h, 018h, 018h, 018h
       2  3BF8	18 18 18 18
       2  3BFC	18 18 18 18
 2762: 2  3C00	18 18 18 18			db	018h, 018h, 018h, 018h, 018h, 018h, 018h, 01Fh, 000h, 000h, 000h, 000h
       2  3C04	18 18 18 1F
       2  3C08	00 00 00 00
 2763: 2  3C0C	00 00 00 00			db	000h, 000h, 000h, 000h, 018h, 018h, 018h, 018h, 018h, 018h, 018h, 0FFh
       2  3C10	18 18 18 18
       2  3C14	18 18 18 FF
 2764: 2  3C18	00 00 00 00			db	000h, 000h, 000h, 000h, 000h, 000h, 000h, 000h, 000h, 000h, 000h, 000h
       2  3C1C	00 00 00 00
       2  3C20	00 00 00 00
 2765: 2  3C24	00 00 00 FF			db	000h, 000h, 000h, 0FFh, 018h, 018h, 018h, 018h, 018h, 018h, 018h, 018h
       2  3C28	18 18 18 18
       2  3C2C	18 18 18 18
 2766: 2  3C30	18 18 18 18			db	018h, 018h, 018h, 018h, 018h, 018h, 018h, 01Fh, 018h, 018h, 018h, 018h
       2  3C34	18 18 18 1F
       2  3C38	18 18 18 18
 2767: 2  3C3C	18 18 18 18			db	018h, 018h, 018h, 018h, 000h, 000h, 000h, 000h, 000h, 000h, 000h, 0FFh
       2  3C40	00 00 00 00
       2  3C44	00 00 00 FF
 2768: 2  3C48	00 00 00 00			db	000h, 000h, 000h, 000h, 000h, 000h, 000h, 000h, 018h, 018h, 018h, 018h
       2  3C4C	00 00 00 00
       2  3C50	18 18 18 18
 2769: 2  3C54	18 18 18 FF			db	018h, 018h, 018h, 0FFh, 018h, 018h, 018h, 018h, 018h, 018h, 018h, 018h
       2  3C58	18 18 18 18
       2  3C5C	18 18 18 18
 2770: 2  3C60	18 18 18 18			db	018h, 018h, 018h, 018h, 018h, 01Fh, 018h, 01Fh, 018h, 018h, 018h, 018h
       2  3C64	18 1F 18 1F
       2  3C68	18 18 18 18
 2771: 2  3C6C	18 18 18 18			db	018h, 018h, 018h, 018h, 036h, 036h, 036h, 036h, 036h, 036h, 036h, 037h
       2  3C70	36 36 36 36
       2  3C74	36 36 36 37
 2772: 2  3C78	36 36 36 36			db	036h, 036h, 036h, 036h, 036h, 036h, 036h, 036h, 036h, 036h, 036h, 036h
       2  3C7C	36 36 36 36
       2  3C80	36 36 36 36
 2773: 2  3C84	36 37 30 3F			db	036h, 037h, 030h, 03Fh, 000h, 000h, 000h, 000h, 000h, 000h, 000h, 000h
       2  3C88	00 00 00 00
       2  3C8C	00 00 00 00
 2774: 2  3C90	00 00 00 00			db	000h, 000h, 000h, 000h, 000h, 03Fh, 030h, 037h, 036h, 036h, 036h, 036h
       2  3C94	00 3F 30 37
       2  3C98	36 36 36 36

ASEM-51 V1.3                                        Copyright (c) 2002 by W.W. Heinz                                         PAGE 62



 Line  I  Addr  Code            Source

 2775: 2  3C9C	36 36 36 36			db	036h, 036h, 036h, 036h, 036h, 036h, 036h, 036h, 036h, 0F7h, 000h, 0FFh
       2  3CA0	36 36 36 36
       2  3CA4	36 F7 00 FF
 2776: 2  3CA8	00 00 00 00			db	000h, 000h, 000h, 000h, 000h, 000h, 000h, 000h, 000h, 000h, 000h, 000h
       2  3CAC	00 00 00 00
       2  3CB0	00 00 00 00
 2777: 2  3CB4	00 FF 00 F7			db	000h, 0FFh, 000h, 0F7h, 036h, 036h, 036h, 036h, 036h, 036h, 036h, 036h
       2  3CB8	36 36 36 36
       2  3CBC	36 36 36 36
 2778: 2  3CC0	36 36 36 36			db	036h, 036h, 036h, 036h, 036h, 037h, 030h, 037h, 036h, 036h, 036h, 036h
       2  3CC4	36 37 30 37
       2  3CC8	36 36 36 36
 2779: 2  3CCC	36 36 36 36			db	036h, 036h, 036h, 036h, 000h, 000h, 000h, 000h, 000h, 0FFh, 000h, 0FFh
       2  3CD0	00 00 00 00
       2  3CD4	00 FF 00 FF
 2780: 2  3CD8	00 00 00 00			db	000h, 000h, 000h, 000h, 000h, 000h, 000h, 000h, 036h, 036h, 036h, 036h
       2  3CDC	00 00 00 00
       2  3CE0	36 36 36 36
 2781: 2  3CE4	36 F7 00 F7			db	036h, 0F7h, 000h, 0F7h, 036h, 036h, 036h, 036h, 036h, 036h, 036h, 036h
       2  3CE8	36 36 36 36
       2  3CEC	36 36 36 36
 2782: 2  3CF0	18 18 18 18			db	018h, 018h, 018h, 018h, 018h, 0FFh, 000h, 0FFh, 000h, 000h, 000h, 000h
       2  3CF4	18 FF 00 FF
       2  3CF8	00 00 00 00
 2783: 2  3CFC	00 00 00 00			db	000h, 000h, 000h, 000h, 036h, 036h, 036h, 036h, 036h, 036h, 036h, 0FFh
       2  3D00	36 36 36 36
       2  3D04	36 36 36 FF
 2784: 2  3D08	00 00 00 00			db	000h, 000h, 000h, 000h, 000h, 000h, 000h, 000h, 000h, 000h, 000h, 000h
       2  3D0C	00 00 00 00
       2  3D10	00 00 00 00
 2785: 2  3D14	00 FF 00 FF			db	000h, 0FFh, 000h, 0FFh, 018h, 018h, 018h, 018h, 018h, 018h, 018h, 018h
       2  3D18	18 18 18 18
       2  3D1C	18 18 18 18
 2786: 2  3D20	00 00 00 00			db	000h, 000h, 000h, 000h, 000h, 000h, 000h, 0FFh, 036h, 036h, 036h, 036h
       2  3D24	00 00 00 FF
       2  3D28	36 36 36 36
 2787: 2  3D2C	36 36 36 36			db	036h, 036h, 036h, 036h, 036h, 036h, 036h, 036h, 036h, 036h, 036h, 03Fh
       2  3D30	36 36 36 36
       2  3D34	36 36 36 3F
 2788: 2  3D38	00 00 00 00			db	000h, 000h, 000h, 000h, 000h, 000h, 000h, 000h, 018h, 018h, 018h, 018h
       2  3D3C	00 00 00 00
       2  3D40	18 18 18 18
 2789: 2  3D44	18 1F 18 1F			db	018h, 01Fh, 018h, 01Fh, 000h, 000h, 000h, 000h, 000h, 000h, 000h, 000h
       2  3D48	00 00 00 00
       2  3D4C	00 00 00 00
 2790: 2  3D50	00 00 00 00			db	000h, 000h, 000h, 000h, 000h, 01Fh, 018h, 01Fh, 018h, 018h, 018h, 018h
       2  3D54	00 1F 18 1F
       2  3D58	18 18 18 18
 2791: 2  3D5C	18 18 18 18			db	018h, 018h, 018h, 018h, 000h, 000h, 000h, 000h, 000h, 000h, 000h, 03Fh
       2  3D60	00 00 00 00
       2  3D64	00 00 00 3F
 2792: 2  3D68	36 36 36 36			db	036h, 036h, 036h, 036h, 036h, 036h, 036h, 036h, 036h, 036h, 036h, 036h
       2  3D6C	36 36 36 36
       2  3D70	36 36 36 36
 2793: 2  3D74	36 36 36 FF			db	036h, 036h, 036h, 0FFh, 036h, 036h, 036h, 036h, 036h, 036h, 036h, 036h
       2  3D78	36 36 36 36

ASEM-51 V1.3                                        Copyright (c) 2002 by W.W. Heinz                                         PAGE 63



 Line  I  Addr  Code            Source

       2  3D7C	36 36 36 36
 2794: 2  3D80	18 18 18 18			db	018h, 018h, 018h, 018h, 018h, 0FFh, 018h, 0FFh, 018h, 018h, 018h, 018h
       2  3D84	18 FF 18 FF
       2  3D88	18 18 18 18
 2795: 2  3D8C	18 18 18 18			db	018h, 018h, 018h, 018h, 018h, 018h, 018h, 018h, 018h, 018h, 018h, 0F8h
       2  3D90	18 18 18 18
       2  3D94	18 18 18 F8
 2796: 2  3D98	00 00 00 00			db	000h, 000h, 000h, 000h, 000h, 000h, 000h, 000h, 000h, 000h, 000h, 000h
       2  3D9C	00 00 00 00
       2  3DA0	00 00 00 00
 2797: 2  3DA4	00 00 00 1F			db	000h, 000h, 000h, 01Fh, 018h, 018h, 018h, 018h, 018h, 018h, 018h, 018h
       2  3DA8	18 18 18 18
       2  3DAC	18 18 18 18
 2798: 2  3DB0	FF FF FF FF			db	0FFh, 0FFh, 0FFh, 0FFh, 0FFh, 0FFh, 0FFh, 0FFh, 0FFh, 0FFh, 0FFh, 0FFh
       2  3DB4	FF FF FF FF
       2  3DB8	FF FF FF FF
 2799: 2  3DBC	FF FF FF FF			db	0FFh, 0FFh, 0FFh, 0FFh, 000h, 000h, 000h, 000h, 000h, 000h, 000h, 0FFh
       2  3DC0	00 00 00 00
       2  3DC4	00 00 00 FF
 2800: 2  3DC8	FF FF FF FF			db	0FFh, 0FFh, 0FFh, 0FFh, 0FFh, 0FFh, 0FFh, 0FFh, 0F0h, 0F0h, 0F0h, 0F0h
       2  3DCC	FF FF FF FF
       2  3DD0	F0 F0 F0 F0
 2801: 2  3DD4	F0 F0 F0 F0			db	0F0h, 0F0h, 0F0h, 0F0h, 0F0h, 0F0h, 0F0h, 0F0h, 0F0h, 0F0h, 0F0h, 0F0h
       2  3DD8	F0 F0 F0 F0
       2  3DDC	F0 F0 F0 F0
 2802: 2  3DE0	0F 0F 0F 0F			db	00Fh, 00Fh, 00Fh, 00Fh, 00Fh, 00Fh, 00Fh, 00Fh, 00Fh, 00Fh, 00Fh, 00Fh
       2  3DE4	0F 0F 0F 0F
       2  3DE8	0F 0F 0F 0F
 2803: 2  3DEC	0F 0F 0F 0F			db	00Fh, 00Fh, 00Fh, 00Fh, 0FFh, 0FFh, 0FFh, 0FFh, 0FFh, 0FFh, 0FFh, 000h
       2  3DF0	FF FF FF FF
       2  3DF4	FF FF FF 00
 2804: 2  3DF8	00 00 00 00			db	000h, 000h, 000h, 000h, 000h, 000h, 000h, 000h, 000h, 000h, 000h, 000h
       2  3DFC	00 00 00 00
       2  3E00	00 00 00 00
 2805: 2  3E04	00 76 DC D8			db	000h, 076h, 0DCh, 0D8h, 0D8h, 0D8h, 0DCh, 076h, 000h, 000h, 000h, 000h
       2  3E08	D8 D8 DC 76
       2  3E0C	00 00 00 00
 2806: 2  3E10	00 00 78 CC			db	000h, 000h, 078h, 0CCh, 0CCh, 0CCh, 0D8h, 0CCh, 0C6h, 0C6h, 0C6h, 0CCh
       2  3E14	CC CC D8 CC
       2  3E18	C6 C6 C6 CC
 2807: 2  3E1C	00 00 00 00			db	000h, 000h, 000h, 000h, 000h, 000h, 0FEh, 0C6h, 0C6h, 0C0h, 0C0h, 0C0h
       2  3E20	00 00 FE C6
       2  3E24	C6 C0 C0 C0
 2808: 2  3E28	C0 C0 C0 C0			db	0C0h, 0C0h, 0C0h, 0C0h, 000h, 000h, 000h, 000h, 000h, 000h, 000h, 000h
       2  3E2C	00 00 00 00
       2  3E30	00 00 00 00
 2809: 2  3E34	FE 6C 6C 6C			db	0FEh, 06Ch, 06Ch, 06Ch, 06Ch, 06Ch, 06Ch, 06Ch, 000h, 000h, 000h, 000h
       2  3E38	6C 6C 6C 6C
       2  3E3C	00 00 00 00
 2810: 2  3E40	00 00 00 FE			db	000h, 000h, 000h, 0FEh, 0C6h, 060h, 030h, 018h, 030h, 060h, 0C6h, 0FEh
       2  3E44	C6 60 30 18
       2  3E48	30 60 C6 FE
 2811: 2  3E4C	00 00 00 00			db	000h, 000h, 000h, 000h, 000h, 000h, 000h, 000h, 000h, 07Eh, 0D8h, 0D8h
       2  3E50	00 00 00 00
       2  3E54	00 7E D8 D8
 2812: 2  3E58	D8 D8 D8 70			db	0D8h, 0D8h, 0D8h, 070h, 000h, 000h, 000h, 000h, 000h, 000h, 000h, 000h

ASEM-51 V1.3                                        Copyright (c) 2002 by W.W. Heinz                                         PAGE 64



 Line  I  Addr  Code            Source

       2  3E5C	00 00 00 00
       2  3E60	00 00 00 00
 2813: 2  3E64	66 66 66 66			db	066h, 066h, 066h, 066h, 066h, 07Ch, 060h, 060h, 0C0h, 000h, 000h, 000h
       2  3E68	66 7C 60 60
       2  3E6C	C0 00 00 00
 2814: 2  3E70	00 00 00 00			db	000h, 000h, 000h, 000h, 076h, 0DCh, 018h, 018h, 018h, 018h, 018h, 018h
       2  3E74	76 DC 18 18
       2  3E78	18 18 18 18
 2815: 2  3E7C	00 00 00 00			db	000h, 000h, 000h, 000h, 000h, 000h, 000h, 07Eh, 018h, 03Ch, 066h, 066h
       2  3E80	00 00 00 7E
       2  3E84	18 3C 66 66
 2816: 2  3E88	66 3C 18 7E			db	066h, 03Ch, 018h, 07Eh, 000h, 000h, 000h, 000h, 000h, 000h, 000h, 038h
       2  3E8C	00 00 00 00
       2  3E90	00 00 00 38
 2817: 2  3E94	6C C6 C6 FE			db	06Ch, 0C6h, 0C6h, 0FEh, 0C6h, 0C6h, 06Ch, 038h, 000h, 000h, 000h, 000h
       2  3E98	C6 C6 6C 38
       2  3E9C	00 00 00 00
 2818: 2  3EA0	00 00 38 6C			db	000h, 000h, 038h, 06Ch, 0C6h, 0C6h, 0C6h, 06Ch, 06Ch, 06Ch, 06Ch, 0EEh
       2  3EA4	C6 C6 C6 6C
       2  3EA8	6C 6C 6C EE
 2819: 2  3EAC	00 00 00 00			db	000h, 000h, 000h, 000h, 000h, 000h, 01Eh, 030h, 018h, 00Ch, 03Eh, 066h
       2  3EB0	00 00 1E 30
       2  3EB4	18 0C 3E 66
 2820: 2  3EB8	66 66 66 3C			db	066h, 066h, 066h, 03Ch, 000h, 000h, 000h, 000h, 000h, 000h, 000h, 000h
       2  3EBC	00 00 00 00
       2  3EC0	00 00 00 00
 2821: 2  3EC4	00 7E DB DB			db	000h, 07Eh, 0DBh, 0DBh, 0DBh, 07Eh, 000h, 000h, 000h, 000h, 000h, 000h
       2  3EC8	DB 7E 00 00
       2  3ECC	00 00 00 00
 2822: 2  3ED0	00 00 00 03			db	000h, 000h, 000h, 003h, 006h, 07Eh, 0DBh, 0DBh, 0F3h, 07Eh, 060h, 0C0h
       2  3ED4	06 7E DB DB
       2  3ED8	F3 7E 60 C0
 2823: 2  3EDC	00 00 00 00			db	000h, 000h, 000h, 000h, 000h, 000h, 01Ch, 030h, 060h, 060h, 07Ch, 060h
       2  3EE0	00 00 1C 30
       2  3EE4	60 60 7C 60
 2824: 2  3EE8	60 60 30 1C			db	060h, 060h, 030h, 01Ch, 000h, 000h, 000h, 000h, 000h, 000h, 000h, 07Ch
       2  3EEC	00 00 00 00
       2  3EF0	00 00 00 7C
 2825: 2  3EF4	C6 C6 C6 C6			db	0C6h, 0C6h, 0C6h, 0C6h, 0C6h, 0C6h, 0C6h, 0C6h, 000h, 000h, 000h, 000h
       2  3EF8	C6 C6 C6 C6
       2  3EFC	00 00 00 00
 2826: 2  3F00	00 00 00 00			db	000h, 000h, 000h, 000h, 0FEh, 000h, 000h, 0FEh, 000h, 000h, 0FEh, 000h
       2  3F04	FE 00 00 FE
       2  3F08	00 00 FE 00
 2827: 2  3F0C	00 00 00 00			db	000h, 000h, 000h, 000h, 000h, 000h, 000h, 000h, 018h, 018h, 07Eh, 018h
       2  3F10	00 00 00 00
       2  3F14	18 18 7E 18
 2828: 2  3F18	18 00 00 FF			db	018h, 000h, 000h, 0FFh, 000h, 000h, 000h, 000h, 000h, 000h, 000h, 030h
       2  3F1C	00 00 00 00
       2  3F20	00 00 00 30
 2829: 2  3F24	18 0C 06 0C			db	018h, 00Ch, 006h, 00Ch, 018h, 030h, 000h, 07Eh, 000h, 000h, 000h, 000h
       2  3F28	18 30 00 7E
       2  3F2C	00 00 00 00
 2830: 2  3F30	00 00 00 0C			db	000h, 000h, 000h, 00Ch, 018h, 030h, 060h, 030h, 018h, 00Ch, 000h, 07Eh
       2  3F34	18 30 60 30
       2  3F38	18 0C 00 7E

ASEM-51 V1.3                                        Copyright (c) 2002 by W.W. Heinz                                         PAGE 65



 Line  I  Addr  Code            Source

 2831: 2  3F3C	00 00 00 00			db	000h, 000h, 000h, 000h, 000h, 000h, 00Eh, 01Bh, 01Bh, 018h, 018h, 018h
       2  3F40	00 00 0E 1B
       2  3F44	1B 18 18 18
 2832: 2  3F48	18 18 18 18			db	018h, 018h, 018h, 018h, 018h, 018h, 018h, 018h, 018h, 018h, 018h, 018h
       2  3F4C	18 18 18 18
       2  3F50	18 18 18 18
 2833: 2  3F54	18 18 18 18			db	018h, 018h, 018h, 018h, 0D8h, 0D8h, 0D8h, 070h, 000h, 000h, 000h, 000h
       2  3F58	D8 D8 D8 70
       2  3F5C	00 00 00 00
 2834: 2  3F60	00 00 00 00			db	000h, 000h, 000h, 000h, 018h, 018h, 000h, 07Eh, 000h, 018h, 018h, 000h
       2  3F64	18 18 00 7E
       2  3F68	00 18 18 00
 2835: 2  3F6C	00 00 00 00			db	000h, 000h, 000h, 000h, 000h, 000h, 000h, 000h, 000h, 076h, 0DCh, 000h
       2  3F70	00 00 00 00
       2  3F74	00 76 DC 00
 2836: 2  3F78	76 DC 00 00			db	076h, 0DCh, 000h, 000h, 000h, 000h, 000h, 000h, 000h, 038h, 06Ch, 06Ch
       2  3F7C	00 00 00 00
       2  3F80	00 38 6C 6C
 2837: 2  3F84	38 00 00 00			db	038h, 000h, 000h, 000h, 000h, 000h, 000h, 000h, 000h, 000h, 000h, 000h
       2  3F88	00 00 00 00
       2  3F8C	00 00 00 00
 2838: 2  3F90	00 00 00 00			db	000h, 000h, 000h, 000h, 000h, 000h, 000h, 018h, 018h, 000h, 000h, 000h
       2  3F94	00 00 00 18
       2  3F98	18 00 00 00
 2839: 2  3F9C	00 00 00 00			db	000h, 000h, 000h, 000h, 000h, 000h, 000h, 000h, 000h, 000h, 000h, 000h
       2  3FA0	00 00 00 00
       2  3FA4	00 00 00 00
 2840: 2  3FA8	18 00 00 00			db	018h, 000h, 000h, 000h, 000h, 000h, 000h, 000h, 000h, 00Fh, 00Ch, 00Ch
       2  3FAC	00 00 00 00
       2  3FB0	00 0F 0C 0C
 2841: 2  3FB4	0C 0C 0C EC			db	00Ch, 00Ch, 00Ch, 0ECh, 06Ch, 06Ch, 03Ch, 01Ch, 000h, 000h, 000h, 000h
       2  3FB8	6C 6C 3C 1C
       2  3FBC	00 00 00 00
 2842: 2  3FC0	00 D8 6C 6C			db	000h, 0D8h, 06Ch, 06Ch, 06Ch, 06Ch, 06Ch, 000h, 000h, 000h, 000h, 000h
       2  3FC4	6C 6C 6C 00
       2  3FC8	00 00 00 00
 2843: 2  3FCC	00 00 00 00			db	000h, 000h, 000h, 000h, 000h, 070h, 0D8h, 030h, 060h, 0C8h, 0F8h, 000h
       2  3FD0	00 70 D8 30
       2  3FD4	60 C8 F8 00
 2844: 2  3FD8	00 00 00 00			db	000h, 000h, 000h, 000h, 000h, 000h, 000h, 000h, 000h, 000h, 000h, 000h
       2  3FDC	00 00 00 00
       2  3FE0	00 00 00 00
 2845: 2  3FE4	7C 7C 7C 7C			db	07Ch, 07Ch, 07Ch, 07Ch, 07Ch, 07Ch, 07Ch, 000h, 000h, 000h, 000h, 000h
       2  3FE8	7C 7C 7C 00
       2  3FEC	00 00 00 00
 2846: 2  3FF0	00 00 00 00			db	000h, 000h, 000h, 000h, 000h, 000h, 000h, 000h, 000h, 000h, 000h, 000h
       2  3FF4	00 00 00 00
       2  3FF8	00 00 00 00
 2847: 2  3FFC	00 00 00 00			db	000h, 000h, 000h, 000h
 2848: 1			;		end
 2849:						END






ASEM-51 V1.3                                        Copyright (c) 2002 by W.W. Heinz                                         PAGE 66



                     register banks used:  0

                     no errors




ASEM-51 V1.3                                        Copyright (c) 2002 by W.W. Heinz                                         PAGE 67





	       L I S T   O F   S Y M B O L S
	       =============================


SYMBOL				  TYPE     VALUE	LINE
------------------------------------------------------------
??ASEM_51			  NUMBER    8051
??VERSION			  NUMBER    0130
AC				  BIT	      D6	  94
ACC				  DATA	      E0	  36
ADM3A				  CODE	    23BA	 679
ADM3ATEXT			  CODE	    2DFE	2425
ADM_COLUMN			  CODE	    242B	 744
ADM_CTRL_ESC			  CODE	    23F1	 706
ADM_CTRL_G			  CODE	    23C6	 689
ADM_CTRL_GR			  CODE	    23FC	 710
ADM_CTRL_H			  CODE	    23CB	 691
ADM_CTRL_I			  CODE	    23D0	 693
ADM_CTRL_J			  CODE	    23D5	 695
ADM_CTRL_K			  CODE	    23DA	 697
ADM_CTRL_L			  CODE	    23DF	 699
ADM_CTRL_LT			  CODE	    23F7	 708
ADM_CTRL_M			  CODE	    23E4	 701
ADM_CTRL_Z			  CODE	    23E9	 703
ADM_CTRL_Z1			  CODE	    23EC	 704
ADM_ESC				  CODE	    23FD	 717
ADM_ESC_7			  CODE	    2408	 721
ADM_ESC_EQ			  CODE	    240D	 723
ADM_ESC_ESC			  CODE	    2418	 727
ADM_ESC_EX			  CODE	    241E	 729
ADM_ESC_LBR			  CODE	    2413	 725
ADM_ROW				  CODE	    241F	 734
ALR				  NUMBER    0011	 225
ALTGR				  NUMBER    0011	 224
ALTGR_TABLE			  CODE	    2DB6	2362
ALTGR_TABLE_IND			  CODE	    2DAB	2348
ANSIOUT				  CODE	    235A	 618
ANSIOUT1			  CODE	    2375	 638
ANSIOUT2			  CODE	    237C	 642
ANSIOUT3			  CODE	    235F	 620
ANSI_MOVE			  CODE	    290C	1485
ANSI_MOVE_EX			  CODE	    295F	1548
ANSI_MOVE_M1			  CODE	    2933	1514
ANSI_MOVE_X1			  CODE	    2919	1499
ANSI_MOVE_X3			  CODE	    2920	1502
ANSI_MOVE_Y			  CODE	    2938	1522
ANSI_MOVE_Y1			  CODE	    2947	1532
ANSI_MOVE_Y2			  CODE	    2943	1527
ANSI_MOVE_Y3			  CODE	    2951	1538
ANSI_TAB			  CODE	    2380	 646
ARG0				  NUMBER    0026	 279
ARG1				  NUMBER    0027	 280
ARG2				  NUMBER    0028	 281
ARG3				  NUMBER    0029	 282
ARGS_GR_ZERO			  CODE	    28F8	1468
ARGS_GR_ZERO_1			  CODE	    2904	1474

ASEM-51 V1.3                                        Copyright (c) 2002 by W.W. Heinz                                         PAGE 68



SYMBOL				  TYPE     VALUE	LINE
------------------------------------------------------------
ARGS_GR_ZERO_2			  CODE	    2900	1472
AUXR				  DATA	      8E	  19
AUXR1				  DATA	      A2	  24
B				  DATA	      F0	  37
BACK				  NUMBER    0008	 197
BASE				  NUMBER    2000	 109
BAUDIDX				  NUMBER    002A	 283
BLACK				  NUMBER    0000	 151
BLUE				  NUMBER    0004	 155
BOTTOM				  NUMBER    0032	 291
BREAK				  NUMBER    00F0	 232
CCAPS				  NUMBER    0058	 229
CCBT				  NUMBER    001D	 190
CCDN				  NUMBER    001D	 202
CCHM				  NUMBER    001C	 189
CCLF				  NUMBER    001E	 203
CCLM				  NUMBER    001E	 191
CCRM				  NUMBER    001F	 192
CCRT				  NUMBER    001F	 204
CCUP				  NUMBER    001C	 201
CDCH				  NUMBER    00FE	 207
CHARTABLE_NOSHIFT		  CODE	    2C83	2316
CHARTABLE_SHIFT			  CODE	    2D18	2332
CHAR_OUT			  CODE	    24BB	 839
CHAR_OUT_1			  CODE	    251C	 897
CHAR_OUT_2			  CODE	    24F4	 874
CHAR_OUT_2A			  CODE	    2502	 882
CHAR_OUT_2B			  CODE	    250A	 886
CHAR_OUT_3			  CODE	    24D1	 851
CHAR_OUT_4			  CODE	    2511	 890
CICH				  NUMBER    00FF	 208
CILN				  NUMBER    009D	 206
CIN				  CODE	    2BB1	2137
CIN_1				  CODE	    2BBE	2144
CIN_2				  CODE	    2BB5	2139
CIN_3				  CODE	    2BD0	2158
CIN_4				  CODE	    2BCA	2153
CLEARARGS			  CODE	    29E3	1677
CLEARARGS1			  CODE	    29E7	1679
CLEARTABU			  CODE	    29BB	1644
CLEARTABU1			  CODE	    29BF	1646
CLEAR_LINES			  CODE	    2A8C	1839
CLEAR_LINES1			  CODE	    2AAD	1866
CLEAR_LINES2			  CODE	    2AA8	1864
CLEAR_SCREEN			  CODE	    2A7F	1830
CLEAR_V1			  CODE	    29A7	1612
CLEAR_VARS			  CODE	    29A3	1604
CLS				  NUMBER    0001	 196
CLSHIFT				  NUMBER    0012	 226
CLSTRG				  NUMBER    0014	 227
COLOR				  NUMBER    002D	 286
COMP_DPTR			  CODE	    2B03	1948
COPYFONT			  CODE	    2B56	2060
COPYFONT1			  CODE	    2B60	2066
COUT				  CODE	    2BA9	2131
CPRL2				  BIT	      C8	  81

ASEM-51 V1.3                                        Copyright (c) 2002 by W.W. Heinz                                         PAGE 69



SYMBOL				  TYPE     VALUE	LINE
------------------------------------------------------------
CRSHIFT				  NUMBER    0059	 228
CSPACE				  NUMBER    0020	 205
CT2				  BIT	      C9	  82
CTRLG				  NUMBER    0007	 178
CTRLGT				  NUMBER    001F	 187
CTRLH				  NUMBER    0008	 179
CTRLI				  NUMBER    0009	 180
CTRLJ				  NUMBER    000A	 181
CTRLK				  NUMBER    000B	 182
CTRLL				  NUMBER    000C	 183
CTRLLT				  NUMBER    001E	 186
CTRLM				  NUMBER    000D	 184
CTRLZ				  NUMBER    001A	 185
CURSORPOS			  NUMBER    002E	 287
CURSORPOS1			  NUMBER    002F	 288
CURSORSAVE			  NUMBER    0030	 289
CURSORX				  NUMBER    0037	 296
CURSORY				  NUMBER    0038	 297
CURSOR_OFF			  CODE	    2AE0	1915
CURSOR_ON			  CODE	    2ACE	1895
CY				  BIT	      D7	  95
C_BACKSP			  NUMBER    0008	 165
C_BELL				  NUMBER    0007	 164
C_CR				  NUMBER    000D	 170
C_DEL				  NUMBER    007F	 176
C_ESC				  NUMBER    001B	 175
C_FF				  NUMBER    000C	 169
C_NEWLINE			  NUMBER    000A	 167
C_SI				  NUMBER    000F	 172
C_SO				  NUMBER    000E	 171
C_TAB				  NUMBER    0009	 166
C_TIME				  NUMBER    000A	 162
C_VT				  NUMBER    000B	 168
C_XOFF				  NUMBER    0013	 174
C_XON				  NUMBER    0011	 173
DATABITS			  NUMBER    0014	 272
DECANM				  NUMBER    0002	 236
DECARM				  NUMBER    0008	 242
DECAWM				  NUMBER    0007	 241
DECCKM				  NUMBER    0001	 235
DECCOLM				  NUMBER    0003	 237
DECINLM				  NUMBER    0009	 243
DECOM				  NUMBER    0006	 240
DECSCLM				  NUMBER    0004	 238
DECSCNM				  NUMBER    0005	 239
DEFAULTCOLOR			  NUMBER    0070	 160
DEFCOL				  NUMBER    003D	 302
DNLD_PARM			  NUMBER    0010	 112
DO_CMD_ARG			  CODE	    28CD	1433
DO_CMD_ARG_1			  CODE	    28E3	1449
DO_CMD_ARG_2			  CODE	    28E9	1456
DO_CMD_ARG_3			  CODE	    28F0	1459
DO_CMD_ARG_4			  CODE	    28F5	1461
DO_CR				  CODE	    2484	 801
DO_CSI				  CODE	    2593	 972
DO_CSI_B			  CODE	    25B6	 992

ASEM-51 V1.3                                        Copyright (c) 2002 by W.W. Heinz                                         PAGE 70



SYMBOL				  TYPE     VALUE	LINE
------------------------------------------------------------
DO_CSI_C			  CODE	    25C1	 998
DO_CSI_CC			  CODE	    26C7	1129
DO_CSI_CC1			  CODE	    26CC	1131
DO_CSI_CC2			  CODE	    26CA	1130
DO_CSI_D			  CODE	    25CC	1004
DO_CSI_END			  CODE	    2863	1337
DO_CSI_END1			  CODE	    2788	1226
DO_CSI_G			  CODE	    278B	1228
DO_CSI_G1			  CODE	    2796	1232
DO_CSI_H			  CODE	    25DA	1013
DO_CSI_H1			  CODE	    25DF	1015
DO_CSI_H2			  CODE	    25E2	1016
DO_CSI_HH			  CODE	    27FB	1280
DO_CSI_HH1			  CODE	    280C	1288
DO_CSI_HH2			  CODE	    2811	1290
DO_CSI_HHX			  CODE	    2816	1292
DO_CSI_J			  CODE	    271F	1174
DO_CSI_JA			  CODE	    2724	1176
DO_CSI_JB			  CODE	    2736	1186
DO_CSI_JC			  CODE	    2727	1177
DO_CSI_JD			  CODE	    2747	1195
DO_CSI_K			  CODE	    275E	1207
DO_CSI_KA			  CODE	    2773	1217
DO_CSI_KB			  CODE	    277E	1222
DO_CSI_KEYS			  CODE	    25A1	 979
DO_CSI_L			  CODE	    27A2	1239
DO_CSI_L1			  CODE	    27B6	1247
DO_CSI_L2			  CODE	    27BB	1249
DO_CSI_LL			  CODE	    281A	1296
DO_CSI_LL1			  CODE	    2825	1301
DO_CSI_LL2			  CODE	    282A	1303
DO_CSI_LLX			  CODE	    282F	1305
DO_CSI_M			  CODE	    2608	1038
DO_CSI_MA			  CODE	    2616	1044
DO_CSI_MB			  CODE	    2626	1051
DO_CSI_MC			  CODE	    2618	1045
DO_CSI_MD			  CODE	    2623	1050
DO_CSI_ME			  CODE	    262A	1053
DO_CSI_MF			  CODE	    262D	1054
DO_CSI_MG			  CODE	    263C	1063
DO_CSI_MH			  CODE	    2643	1066
DO_CSI_MM			  CODE	    27CB	1258
DO_CSI_MM1			  CODE	    27DF	1266
DO_CSI_MM2			  CODE	    27E6	1269
DO_CSI_MX			  CODE	    2654	1075
DO_CSI_MX1			  CODE	    2659	1077
DO_CSI_MX2			  CODE	    2666	1083
DO_CSI_MX3			  CODE	    2671	1088
DO_CSI_N			  CODE	    2675	1092
DO_CSI_N1			  CODE	    267F	1096
DO_CSI_N6			  CODE	    268B	1102
DO_CSI_P			  CODE	    2833	1309
DO_CSI_P1			  CODE	    284F	1324
DO_CSI_P2			  CODE	    283B	1312
DO_CSI_Q			  CODE	    2864	1356
DO_CSI_QUES			  CODE	    2757	1203

ASEM-51 V1.3                                        Copyright (c) 2002 by W.W. Heinz                                         PAGE 71



SYMBOL				  TYPE     VALUE	LINE
------------------------------------------------------------
DO_CSI_Q_END			  CODE	    28B0	1391
DO_CSI_Q_H			  CODE	    2872	1362
DO_CSI_Q_H1			  CODE	    2883	1370
DO_CSI_Q_H2			  CODE	    2888	1372
DO_CSI_Q_HX			  CODE	    2890	1375
DO_CSI_Q_L			  CODE	    2894	1379
DO_CSI_Q_L1			  CODE	    28A0	1384
DO_CSI_Q_L2			  CODE	    28A5	1386
DO_CSI_Q_LX			  CODE	    28AD	1389
DO_CSI_R			  CODE	    26D7	1138
DO_CSI_RA			  CODE	    26E6	1144
DO_CSI_RB			  CODE	    26F8	1151
DO_CSI_RC			  CODE	    270F	1164
DO_CSI_RD			  CODE	    271C	1171
DO_CSI_RE			  CODE	    270C	1161
DO_CSI_S			  CODE	    25F2	1026
DO_CSI_U			  CODE	    25FC	1032
DO_ESC				  CODE	    2530	 912
DO_ESC_7			  CODE	    2540	 922
DO_ESC_8			  CODE	    254A	 927
DO_ESC_C			  CODE	    257B	 954
DO_ESC_CSI			  CODE	    2539	 918
DO_ESC_D			  CODE	    2556	 932
DO_ESC_EX			  CODE	    2592	 967
DO_ESC_H			  CODE	    2581	 957
DO_ESC_HA			  CODE	    2566	 942
DO_ESC_HASH			  CODE	    28B5	1404
DO_ESC_HASH_END			  CODE	    28C0	1410
DO_ESC_LBR			  CODE	    256D	 946
DO_ESC_LBRACK			  CODE	    28C1	1421
DO_ESC_LB_1			  CODE	    28CA	1426
DO_ESC_M			  CODE	    255E	 937
DO_ESC_Q			  CODE	    28B1	1397
DO_ESC_RBR			  CODE	    2574	 950
DO_ESC_RBRACK			  CODE	    28C1	1417
DO_ESC_Z			  CODE	    258D	 964
DO_IDLE				  CODE	    2436	 754
DO_IDLE_BELL			  CODE	    2442	 763
DO_IDLE_BS			  CODE	    2446	 766
DO_IDLE_CR			  CODE	    2481	 800
DO_IDLE_DEL			  CODE	    2436	 756
DO_IDLE_END			  CODE	    24AD	 824
DO_IDLE_ESC			  CODE	    248E	 806
DO_IDLE_FF			  CODE	    24A8	 821
DO_IDLE_NL			  CODE	    2476	 794
DO_IDLE_PRE			  CODE	    243D	 760
DO_IDLE_SI			  CODE	    249D	 814
DO_IDLE_SO			  CODE	    2497	 810
DO_IDLE_TAB			  CODE	    244D	 770
DO_IDLE_TAB1			  CODE	    246A	 785
DO_IDLE_TAB2			  CODE	    2470	 788
DO_IDLE_TAB3			  CODE	    2453	 772
DO_IDLE_VT			  CODE	    24A3	 818
DO_NEWLINE			  CODE	    2479	 795
DP0H				  DATA	      83	   9
DP0L				  DATA	      82	   8

ASEM-51 V1.3                                        Copyright (c) 2002 by W.W. Heinz                                         PAGE 72



SYMBOL				  TYPE     VALUE	LINE
------------------------------------------------------------
DP1H				  DATA	      85	  11
DP1L				  DATA	      84	  10
DPH				  NUMBER    0083	 115
DPL				  NUMBER    0082	 114
DRAW_CHAR			  CODE	    24AD	 828
DRAW_CHAR_1			  CODE	    2526	 904
DRAW_CURSOR			  CODE	    2AC0	1883
DUMPCNT				  NUMBER    003E	 303
DUMPMODE			  NUMBER    0017	 275
DUMPNIBBLE			  CODE	    23A9	 663
DUMPTERM			  CODE	    2392	 649
DUMPTERM2			  CODE	    23A6	 660
DUMPTEXT			  CODE	    2E04	2426
EA				  BIT	      AF	  66
ES				  BIT	      AC	  64
ESC				  NUMBER    001B	 200
ET0				  BIT	      A9	  61
ET1				  BIT	      AB	  63
ET2				  BIT	      AD	  65
EVENODD				  NUMBER    0015	 273
EX0				  BIT	      A8	  60
EX1				  BIT	      AA	  62
EXEN2				  BIT	      CB	  84
EXF2				  BIT	      CE	  87
EXINT0				  CODE	    2253	 418
EXINT0A				  CODE	    2276	 447
EXINT0B				  CODE	    2260	 437
EXINT0EX			  CODE	    227D	 452
EXTENDED			  NUMBER    00E0	 231
EXTI0				  CODE	    0003	  98
EXTI1				  CODE	    0013	 100
EXT_TABLE			  CODE	    2DD1	2392
EXT_TABLE_IND			  CODE	    2DC1	2375
F0				  BIT	      D5	  93
F1				  NUMBER    0080	 210
F10				  NUMBER    0089	 219
F11				  NUMBER    008A	 220
F12				  NUMBER    008B	 221
F2				  NUMBER    0081	 211
F3				  NUMBER    0082	 212
F4				  NUMBER    0083	 213
F5				  NUMBER    0084	 214
F6				  NUMBER    0085	 215
F7				  NUMBER    0086	 216
F8				  NUMBER    0087	 217
F9				  NUMBER    0088	 218
FILL_LINES			  CODE	    2A8E	1841
FILL_SCREEN			  CODE	    2A81	1831
FLAGS				  NUMBER    0020	 251
FLAGS1				  NUMBER    0021	 259
FLAGS2				  NUMBER    0022	 267
FREE0				  NUMBER    004A	 307
FREE1				  NUMBER    004B	 308
FREE2				  NUMBER    004C	 309
FREE3				  NUMBER    004D	 310
FREE4				  NUMBER    004E	 311

ASEM-51 V1.3                                        Copyright (c) 2002 by W.W. Heinz                                         PAGE 73



SYMBOL				  TYPE     VALUE	LINE
------------------------------------------------------------
FREE5				  NUMBER    004F	 312
GETBAUD				  CODE	    2DDE	2408
GETBDTXT			  CODE	    2DE8	2418
GETBIT				  CODE	    29D7	1670
GETBITTAB			  CODE	    29DB	1674
GETREPORT			  CODE	    26BA	1124
GETSTATUS			  CODE	    2E81	2495
GREEN				  NUMBER    0002	 153
HEIGHT				  NUMBER    0018	 137
HEX2DEZ				  CODE	    2AF6	1935
IE				  DATA	      A8	  26
IE0				  BIT	      89	  40
IE1				  BIT	      8B	  42
INIT				  CODE	    229A	 500
INIT6845			  CODE	    2B17	1968
INIT_2				  CODE	    22B2	 525
INIT_LOOP			  CODE	    22B2	 513
INSERT				  NUMBER    0013	 271
INT0				  BIT	      B2	  69
INT1				  BIT	      B3	  70
INVERSE				  NUMBER    0003	 255
IP				  DATA	      B8	  28
IRM				  NUMBER    0004	 244
ISDIGIT				  CODE	    296F	1566
ISDIGIT1			  CODE	    2972	1567
ISDIGIT2			  CODE	    2976	1570
ISDIGIT3			  CODE	    2979	1571
ISPARM				  CODE	    2963	1555
ISPARM1				  CODE	    296D	1560
ISPARMEX			  CODE	    296C	1559
IT0				  BIT	      88	  39
IT1				  BIT	      8A	  41
KEYALTGR			  CODE	    2C5A	2287
KEYALTGR1			  CODE	    2C6A	2293
KEYALTGR2			  CODE	    2C5F	2289
KEYAVAIL			  NUMBER    0008	 260
KEYBREAK			  CODE	    2BFD	2239
KEYCHECKBRK			  CODE	    2C24	2261
KEYCHECKBRK1			  CODE	    2C2E	2265
KEYDECODE			  CODE	    2BF5	2230
KEYEXIT				  CODE	    2C7B	2308
KEYEXITOK			  CODE	    2C77	2301
KEYGETALTGR			  CODE	    2DB3	2359
KEYGETALTGRIND			  CODE	    2DA8	2345
KEYGETEXT			  CODE	    2DCE	2389
KEYGETEXTIND			  CODE	    2DBE	2372
KEYGETNOSHIFT			  CODE	    2C7E	2312
KEYGETSHIFT			  CODE	    2D13	2328
KEYMAKE				  CODE	    2C6E	2296
KEYMAKEEXT			  CODE	    2C3D	2274
KEYMAKEEXT1			  CODE	    2C56	2284
KEYMAKEEXT2			  CODE	    2C44	2277
KEYMAKEEXT3			  CODE	    2C54	2283
KEYNORMAL			  CODE	    2C33	2269
KEYRXALTGR			  NUMBER    000C	 264
KEYRXBREAK			  NUMBER    000A	 262

ASEM-51 V1.3                                        Copyright (c) 2002 by W.W. Heinz                                         PAGE 74



SYMBOL				  TYPE     VALUE	LINE
------------------------------------------------------------
KEYRXCNT			  NUMBER    003A	 299
KEYRXEXTENDED			  NUMBER    0009	 261
KEYRXSHIFT			  NUMBER    000B	 263
KEYRXSTRG			  NUMBER    000D	 265
KEYRXVAL			  NUMBER    003B	 300
KEYSHIFT			  CODE	    2C05	2244
KEYSHIFT1			  CODE	    2C0C	2247
KEYSHIFT2			  CODE	    2C11	2249
KEYSTRG				  CODE	    2C18	2254
LASTCHAR			  NUMBER    0001	 253
LCHARTMP			  NUMBER    0002	 254
LF				  NUMBER    000A	 199
LNM				  NUMBER    0014	 245
LOOP_CIN			  CODE	    233A	 598
MAGENTA				  NUMBER    0005	 156
MAIN_COUT			  CODE	    2309	 574
MAIN_COUT1			  CODE	    2323	 586
MAIN_COUT2			  CODE	    2325	 588
MAIN_COUT3			  CODE	    2318	 581
MAIN_F12			  CODE	    22FA	 566
MAIN_F6				  CODE	    22C3	 537
MAIN_F6A			  CODE	    22CD	 542
MAIN_F7				  CODE	    22D4	 547
MAIN_F7A			  CODE	    22DE	 551
MAIN_F8				  CODE	    22E7	 557
MAIN_F8A			  CODE	    22F1	 561
MAIN_LOOP			  CODE	    22B7	 531
MAIN_LOOP1			  CODE	    234C	 606
MAIN_SERIN			  CODE	    2333	 594
MAIN_STATUS			  CODE	    2349	 605
MISO				  BIT	      96	  50
MONSTART			  NUMBER    0000	 116
MOSI				  BIT	      95	  49
MOVE_CURSOR			  CODE	    2ABD	1882
NARGS				  NUMBER    0025	 278
NEWLINE				  CODE	    2B9F	2124
NEWLINEMODE			  NUMBER    0012	 270
OLDSTATUS			  NUMBER    003C	 301
ORIGIN				  NUMBER    0011	 269
OV				  BIT	      D2	  90
P				  BIT	      D0	  89
P0				  DATA	      80	   6
P1				  DATA	      90	  20
P2				  DATA	      A0	  23
P3				  DATA	      B0	  27
PCON				  DATA	      87	  12
PHEX				  CODE	    2BD6	2173
PHEX1				  CODE	    2BD9	2177
PHEX16				  CODE	    2BE8	2187
PHEX8				  CODE	    2BD6	2174
PHEX_B				  CODE	    2BD8	2176
PRINT				  CODE	    29ED	1685
PRINT1				  CODE	    29F2	1689
PRTBAUD				  CODE	    2E27	2448
PRTSTATUS			  CODE	    2E0A	2430
PRTSTATUS1			  CODE	    2E0F	2432

ASEM-51 V1.3                                        Copyright (c) 2002 by W.W. Heinz                                         PAGE 75



SYMBOL				  TYPE     VALUE	LINE
------------------------------------------------------------
PRTSTATUS2			  CODE	    2E4F	2470
PRTSTATUS3			  CODE	    2E56	2473
PRTSTATUS4			  CODE	    2E5D	2476
PRTSTATUS5			  CODE	    2E64	2479
PRTSTATUS5A			  CODE	    2E6F	2483
PRTSTATUS5B			  CODE	    2E77	2487
PRTSTATUS5C			  CODE	    2E6A	2481
PRTSTATUS6			  CODE	    2E46	2466
PRTSTATUS7			  CODE	    2E42	2464
PRTSTATUSEX			  CODE	    2E80	2493
PS				  BIT	      BC	  79
PSW				  DATA	      D0	  35
PSW_INIT			  NUMBER    0000	 111
PT0				  BIT	      B9	  76
PT1				  BIT	      BB	  78
PT2				  BIT	      BD	  80
PX0				  BIT	      B8	  75
PX1				  BIT	      BA	  77
RB8				  BIT	      9A	  54
RCAP2H				  DATA	      CB	  32
RCAP2L				  DATA	      CA	  31
RCLK				  BIT	      CD	  86
RD				  BIT	      B7	  74
RED				  NUMBER    0001	 152
REN				  BIT	      9C	  56
REPORTDA			  CODE	    26C0	1127
REPORTOK			  CODE	    26BC	1126
RESET				  CODE	    0000	  97
RESETTABU			  CODE	    29AD	1634
RESETTABU1			  CODE	    29B1	1636
RETSTATE			  NUMBER    0023	 277
RI				  BIT	      98	  52
RS0				  BIT	      D3	  91
RS1				  BIT	      D4	  92
RXD				  BIT	      B0	  67
SBUF				  DATA	      99	  22
SCK				  BIT	      97	  51
SCON				  DATA	      98	  21
SCROLL				  CODE	    29F8	1710
SCROLL_DOWN_1			  CODE	    2A25	1746
SCROLL_DOWN_2			  CODE	    2A33	1756
SCROLL_DOWN_3			  CODE	    2A3B	1761
SCROLL_DOWN_4			  CODE	    2A23	1744
SCROLL_DOWN_5			  CODE	    2A45	1772
SCROLL_DOWN_6			  CODE	    2A42	1769
SCROLL_R4			  CODE	    29FE	1714
SCROLL_UP			  CODE	    2A4A	1779
SCROLL_UP_1			  CODE	    2A67	1798
SCROLL_UP_2			  CODE	    2A69	1801
SCROLL_UP_3			  CODE	    2A7A	1814
SCROLL_UP_4			  CODE	    2A77	1811
SCURSORX			  NUMBER    002B	 284
SCURSORY			  NUMBER    002C	 285
SENDPOS				  CODE	    26AE	1117
SERBUF				  NUMBER    0080	 316
SERBUSY				  NUMBER    0005	 257

ASEM-51 V1.3                                        Copyright (c) 2002 by W.W. Heinz                                         PAGE 76



SYMBOL				  TYPE     VALUE	LINE
------------------------------------------------------------
SERCOUNT			  NUMBER    0036	 295
SEREND				  NUMBER    0035	 294
SERINT				  CODE	    2203	 350
SERINT1				  CODE	    2225	 372
SERINTEX			  CODE	    222D	 378
SERINTRI			  CODE	    220B	 355
SERLIM				  NUMBER    0040	 317
SERSTART			  NUMBER    0034	 293
SETBAUD				  CODE	    234E	 609
SETREGS				  CODE	    2B27	1978
SINT				  CODE	    0023	 102
SM0				  BIT	      9F	  59
SM1				  BIT	      9E	  58
SM2				  BIT	      9D	  57
SP				  DATA	      81	   7
SPACE				  CODE	    2B95	2118
SPECIAL				  NUMBER    0000	 252
STACK				  NUMBER    0050	 113
START				  CODE	    2282	 475
STATE				  NUMBER    0033	 292
STATUS				  CODE	    2E84	2500
ST_CMD_ARG			  NUMBER    000A	 144
ST_COLUMN			  NUMBER    0014	 149
ST_CSI				  NUMBER    0004	 141
ST_CSI_Q			  NUMBER    000E	 146
ST_ESC				  NUMBER    0002	 140
ST_ESC_HASH			  NUMBER    0008	 143
ST_ESC_LBRACK			  NUMBER    000C	 145
ST_ESC_Q			  NUMBER    0006	 142
ST_ESC_RBRACK			  NUMBER    0010	 147
ST_IDLE				  NUMBER    0000	 139
ST_ROW				  NUMBER    0012	 148
SYDATA				  CODE	    2B42	2036
T0				  BIT	      B4	  71
T0CNT				  NUMBER    0039	 298
T1				  BIT	      B5	  72
T2				  BIT	      90	  47
T2CON				  DATA	      C8	  29
T2EX				  BIT	      91	  48
T2MOD				  DATA	      C9	  30
TABU				  NUMBER    0009	 198
TABUTAB				  NUMBER    0040	 305
TAB_SET_R0_R1			  CODE	    29C7	1657
TB8				  BIT	      9B	  55
TCLK				  BIT	      CC	  85
TCON				  DATA	      88	  13
TERMMODE			  NUMBER    0016	 274
TERM_RESET			  CODE	    297A	1578
TESTSCREEN			  CODE	    2B6F	2086
TESTSCREEN1			  CODE	    2B78	2091
TESTSCREEN2			  CODE	    2B85	2103
TESTSCREEN3			  CODE	    2B74	2089
TESTSCREEN4			  CODE	    2B89	2106
TF0				  BIT	      8D	  44
TF1				  BIT	      8F	  46
TF2				  BIT	      CF	  88

ASEM-51 V1.3                                        Copyright (c) 2002 by W.W. Heinz                                         PAGE 77



SYMBOL				  TYPE     VALUE	LINE
------------------------------------------------------------
TH0				  DATA	      8C	  17
TH1				  DATA	      8D	  18
TH2				  DATA	      CD	  34
TI				  BIT	      99	  53
TIMER0				  CODE	    000B	  99
TIMER0INT			  CODE	    2236	 392
TIMER0INT_EX			  CODE	    2252	 408
TIMER1				  CODE	    001B	 101
TIMER2				  CODE	    002B	 103
TL0				  DATA	      8A	  15
TL1				  DATA	      8B	  16
TL2				  DATA	      CC	  33
TMOD				  DATA	      89	  14
TOP				  NUMBER    0031	 290
TR0				  BIT	      8C	  43
TR1				  BIT	      8E	  45
TR2				  BIT	      CA	  83
TURQUOISE			  NUMBER    0006	 157
TXD				  BIT	      B1	  68
VARLEN				  NUMBER    0030	 247
VARS				  NUMBER    0020	 249
VECTOR				  NUMBER    2000	 110
VT100_FONT			  CODE	    3000	2505
VT102BASE			  NUMBER    2000	 134
WDTRST				  DATA	      A6	  25
WHITE				  NUMBER    0007	 158
WIDTH				  NUMBER    0050	 136
WR				  BIT	      B6	  73
WRAP				  NUMBER    0010	 268
XONOFF				  NUMBER    0004	 256
YELLOW				  NUMBER    0003	 154
