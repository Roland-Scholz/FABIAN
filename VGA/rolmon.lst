
ASEM-51 V1.3                                         Copyright (c) 2002 by W.W. Heinz                                         PAGE 1





       MCS-51 Family Macro Assembler   A S E M - 5 1   V 1.3
       =====================================================



	Source File:	C:\github\FABIAN\VGA\rolmon.a51
	Object File:	C:\github\FABIAN\VGA\rolmon.hex
	List File:	C:\github\FABIAN\VGA\rolmon.lst



 Line  I  Addr  Code            Source

    1:						$NOMOD51
    2:						$INCLUDE (89S52.MCU)
    3: 1			;   AT89S52 processor definition file
    4: 1			;   =================================
    5: 1
    6: 1	N	 80	P0	DATA	080H
    7: 1	N	 81	SP	DATA	081H
    8: 1	N	 82	DP0L	DATA	082H
    9: 1	N	 83	DP0H	DATA	083H
   10: 1	N	 84	DP1L	DATA	084H
   11: 1	N	 85	DP1H	DATA	085H
   12: 1	N	 87	PCON	DATA	087H
   13: 1	N	 88	TCON	DATA	088H
   14: 1	N	 89	TMOD	DATA	089H
   15: 1	N	 8A	TL0	DATA	08AH
   16: 1	N	 8B	TL1	DATA	08BH
   17: 1	N	 8C	TH0	DATA	08CH
   18: 1	N	 8D	TH1	DATA	08DH
   19: 1	N	 8E	AUXR	DATA	08EH
   20: 1	N	 90	P1	DATA	090H
   21: 1	N	 98	SCON	DATA	098H
   22: 1	N	 99	SBUF	DATA	099H
   23: 1	N	 A0	P2	DATA	0A0H
   24: 1	N	 A2	AUXR1	DATA	0A2H
   25: 1	N	 A6	WDTRST	DATA	0A6H
   26: 1	N	 A8	IE	DATA	0A8H
   27: 1	N	 B0	P3	DATA	0B0H
   28: 1	N	 B8	IP	DATA	0B8H
   29: 1	N	 C8	T2CON	DATA	0C8H
   30: 1	N	 C9	T2MOD	DATA	0C9H
   31: 1	N	 CA	RCAP2L	DATA	0CAH
   32: 1	N	 CB	RCAP2H	DATA	0CBH
   33: 1	N	 CC	TL2	DATA	0CCH
   34: 1	N	 CD	TH2	DATA	0CDH
   35: 1	N	 D0	PSW	DATA	0D0H
   36: 1	N	 E0	ACC	DATA	0E0H
   37: 1	N	 F0	B	DATA	0F0H
   38: 1
   39: 1	N	 88	IT0	BIT	088H
   40: 1	N	 89	IE0	BIT	089H
   41: 1	N	 8A	IT1	BIT	08AH
   42: 1	N	 8B	IE1	BIT	08BH
   43: 1	N	 8C	TR0	BIT	08CH

ASEM-51 V1.3                                         Copyright (c) 2002 by W.W. Heinz                                         PAGE 2



 Line  I  Addr  Code            Source

   44: 1	N	 8D	TF0	BIT	08DH
   45: 1	N	 8E	TR1	BIT	08EH
   46: 1	N	 8F	TF1	BIT	08FH
   47: 1	N	 90	T2	BIT	090H
   48: 1	N	 91	T2EX	BIT	091H
   49: 1	N	 95	MOSI	BIT	095H
   50: 1	N	 96	MISO	BIT	096H
   51: 1	N	 97	SCK	BIT	097H
   52: 1	N	 98	RI	BIT	098H
   53: 1	N	 99	TI	BIT	099H
   54: 1	N	 9A	RB8	BIT	09AH
   55: 1	N	 9B	TB8	BIT	09BH
   56: 1	N	 9C	REN	BIT	09CH
   57: 1	N	 9D	SM2	BIT	09DH
   58: 1	N	 9E	SM1	BIT	09EH
   59: 1	N	 9F	SM0	BIT	09FH
   60: 1	N	 A8	EX0	BIT	0A8H
   61: 1	N	 A9	ET0	BIT	0A9H
   62: 1	N	 AA	EX1	BIT	0AAH
   63: 1	N	 AB	ET1	BIT	0ABH
   64: 1	N	 AC	ES	BIT	0ACH
   65: 1	N	 AD	ET2	BIT	0ADH
   66: 1	N	 AF	EA	BIT	0AFH
   67: 1	N	 B0	RXD	BIT	0B0H
   68: 1	N	 B1	TXD	BIT	0B1H
   69: 1	N	 B2	INT0	BIT	0B2H
   70: 1	N	 B3	INT1	BIT	0B3H
   71: 1	N	 B4	T0	BIT	0B4H
   72: 1	N	 B5	T1	BIT	0B5H
   73: 1	N	 B6	WR	BIT	0B6H
   74: 1	N	 B7	RD	BIT	0B7H
   75: 1	N	 B8	PX0	BIT	0B8H
   76: 1	N	 B9	PT0	BIT	0B9H
   77: 1	N	 BA	PX1	BIT	0BAH
   78: 1	N	 BB	PT1	BIT	0BBH
   79: 1	N	 BC	PS	BIT	0BCH
   80: 1	N	 BD	PT2	BIT	0BDH
   81: 1	N	 C8	CPRL2	BIT	0C8H
   82: 1	N	 C9	CT2	BIT	0C9H
   83: 1	N	 CA	TR2	BIT	0CAH
   84: 1	N	 CB	EXEN2	BIT	0CBH
   85: 1	N	 CC	TCLK	BIT	0CCH
   86: 1	N	 CD	RCLK	BIT	0CDH
   87: 1	N	 CE	EXF2	BIT	0CEH
   88: 1	N	 CF	TF2	BIT	0CFH
   89: 1	N	 D0	P	BIT	0D0H
   90: 1	N	 D2	OV	BIT	0D2H
   91: 1	N	 D3	RS0	BIT	0D3H
   92: 1	N	 D4	RS1	BIT	0D4H
   93: 1	N	 D5	F0	BIT	0D5H
   94: 1	N	 D6	AC	BIT	0D6H
   95: 1	N	 D7	CY	BIT	0D7H
   96: 1
   97: 1	N      0000	RESET	CODE	000H
   98: 1	N      0003	EXTI0	CODE	003H
   99: 1	N      000B	TIMER0	CODE	00BH

ASEM-51 V1.3                                         Copyright (c) 2002 by W.W. Heinz                                         PAGE 3



 Line  I  Addr  Code            Source

  100: 1	N      0013	EXTI1	CODE	013H
  101: 1	N      001B	TIMER1	CODE	01BH
  102: 1	N      0023	SINT	CODE	023H
  103: 1	N      002B	TIMER2	CODE	02BH
  104:
  105:				;===============================================
  106:				; adjust base for RAM or ROM version
  107:				; RAM: 02000h
  108:				; ROM: 00000h
  109:				;===============================================
  110:		N      0000	base		equ	00000h
  111:
  112:		N      0000	vector		equ	base
  113:		N      0000	psw_init	equ	0		;value for psw (which reg bank to use)
  114:		N      0010	dnld_parm	equ 	10h		;block of 16 bytes for download
  115:		N      0050	stack		equ	50h		;location of the stack
  116:		D      0082	dpl		equ	dp0l
  117:		D      0083	dph		equ	dp0h
  118:
  119:		N      0000			org	base
  120:	  0000	02 00 2F			ljmp	poweron		;reset vector
  121:
  122:		N      0003			org	base+3
  123:	  0003	02 00 03			ljmp	vector+3	;ext int0 vector
  124:
  125:	  0006			r6r7todptr:
  126:	  0006	8E 82				mov	dpl, r6
  127:	  0008	8F 83				mov	dph, r7
  128:	  000A	22				ret
  129:
  130:		N      000B			org	base+11
  131:	  000B	02 00 0B			ljmp	vector+11	;timer0 vector
  132:
  133:	  000E			dptrtor6r7:
  134:	  000E	AE 82				mov	r6, dpl
  135:	  0010	AF 83				mov	r7, dph
  136:	  0012	22				ret
  137:
  138:		N      0013			org	base+19
  139:	  0013	02 00 13			ljmp	vector+19	;ext int1 vector
  140:
  141:	  0016	74 2D		dash:		mov	a, #'-'		;seems kinda trivial, but each time
  142:	  0018	21 0A				ajmp	moncout		;this appears in code, it takes 4
  143:	  001A	00				nop			;bytes, but an acall takes only 2
  144:
  145:		N      001B			org	base+27
  146:	  001B	02 00 1B			ljmp	vector+27	;timer1 vector
  147:
  148:	  001E	31 0A		cout_sp:	acall	moncout
  149:	  0020	21 08				ajmp	monspace
  150:	  0022	00				nop
  151:
  152:		N      0023			org	base+35
  153:	  0023	02 00 23			ljmp	vector+35	;uart vector
  154:
  155:	  0026	11 16		dash_sp:	acall	dash

ASEM-51 V1.3                                         Copyright (c) 2002 by W.W. Heinz                                         PAGE 4



 Line  I  Addr  Code            Source

  156:	  0028	21 08				ajmp	monspace
  157:	  002A	00				nop
  158:
  159:		N      002B			org	base+43
  160:	  002B	02 00 2B			ljmp	vector+43	;timer2 vector (8052)
  161:
  162:				;---------------------------------------------------------
  163:				;first the hardware has to get initialized.
  164:				;---------------------------------------------------------
  165:	  002E			intr_return:
  166:	  002E	32				reti
  167:
  168:				;---------------------------------------------------------
  169:				;poweron execution starts here
  170:				;---------------------------------------------------------
  171:	  002F			poweron:
  172:	  002F	E4				clr	a
  173:	  0030	F5 A8				mov	ie, a		;all interrupts off
  174:	  0032	F5 B8				mov	ip, a
  175:						;clear any interrupt status, just in case the user put
  176:						;"ljmp 0" inside their interrupt service code.
  177:	  0034	11 2E				acall	intr_return
  178:	  0036	11 2E				acall	intr_return
  179:	  0038	F4				cpl	a
  180:	  0039	F5 80				mov	p0, a
  181:	  003B	F5 90				mov	p1, a
  182:	  003D	F5 A0				mov	p2, a
  183:	  003F	F5 B0				mov	p3, a
  184:	  0041	F5 8B				mov	tl1, a
  185:	  0043	F5 8D				mov	th1, a
  186:	  0045	75 89 21			mov	tmod, #021h	;set timer #1 for 8 bit auto-reload
  187:	  0048	75 87 80			mov	pcon, #080h	;configure built-in uart
  188:	  004B	75 98 52			mov	scon, #052h
  189:	  004E	D2 8E				setb	tr1		;start the baud rate timer
  190:
  191:	  0050	41 00				ajmp	base + 200h	;start program
  192:
  193:	  0052	E4		monstart:	clr	a
  194:	  0053	F5 A8				mov	ie, a		;all interrupts off
  195:	  0055	F5 B8				mov	ip, a
  196:	  0057	F5 A2				mov	auxr1, a
  197:	  0059	F8				mov	r0, a
  198:	  005A	F9				mov	r1, a
  199:	  005B	75 D0 00			mov	psw, #psw_init
  200:	  005E	75 81 50			mov	sp, #stack
  201:	  0061	11 2E				acall	intr_return
  202:	  0063	11 2E				acall	intr_return
  203:
  204:	  0065	75 89 21			mov	tmod, #021h	;set timer #1 for 8 bit auto-reload
  205:	  0068	75 87 80			mov	pcon, #080h	;configure built-in uart
  206:	  006B	75 98 52			mov	scon, #052h
  207:	  006E	D2 8E				setb	tr1		;start the baud rate timer
  208:
  209:	  0070	D8 FE		monwait:	djnz	r0, monwait
  210:	  0072	D9 FC				djnz	r1, monwait
  211:

ASEM-51 V1.3                                         Copyright (c) 2002 by W.W. Heinz                                         PAGE 5



 Line  I  Addr  Code            Source

  212:	  0074	90 01 52			mov	dptr, #minitext
  213:	  0077	12 01 1F			call	monpstr
  214:	  007A	90 02 00			mov	dptr, #base + 0200h
  215:
  216:	  007D	31 12		monmain:	acall	monnewline
  217:	  007F	12 01 45			call	monphex16
  218:	  0082	74 3E				mov	a, #'>'
  219:	  0084	31 0A				acall	moncout
  220:	  0086	11 FE				acall	moncin
  221:	  0088	B4 64 02			cjne	a, #'d', monmain1
  222:	  008B	11 A0				acall	download
  223:	  008D	B4 67 02	monmain1:	cjne	a, #'g', monmain2
  224:	  0090	11 BB				acall	goto
  225:	  0092	B4 68 02	monmain2:	cjne	a, #'h', monmain3
  226:	  0095	11 BD				acall	dump
  227:	  0097	B4 6E 02	monmain3:	cjne	a, #'n', monmain9
  228:	  009A	11 D8				acall	newaddr
  229:	  009C	31 0A		monmain9:	acall	moncout
  230:	  009E	80 DD				sjmp	monmain
  231:
  232:				;---------------------------------------------------------
  233:				;download routine
  234:				;---------------------------------------------------------
  235:	  00A0	11 FE		download:	acall	moncin
  236:	  00A2	B4 3A FB			cjne	a, #':', download
  237:	  00A5	11 E2				acall	gethexbyte
  238:	  00A7	F8				mov	r0, a
  239:	  00A8	11 D8				acall	newaddr
  240:	  00AA	11 E2				acall	gethexbyte
  241:	  00AC	B4 01 04			cjne	a, #1, downloop
  242:	  00AF	11 E2				acall	gethexbyte
  243:	  00B1	E4				clr	a
  244:	  00B2	22				ret
  245:
  246:	  00B3	11 E2		downloop:	acall	gethexbyte
  247:	  00B5	F0				movx	@dptr, a
  248:	  00B6	A3				inc	dptr
  249:	  00B7	D8 FA				djnz	r0, downloop
  250:	  00B9	01 A0				ajmp	download
  251:
  252:				;---------------------------------------------------------
  253:				;goto routine
  254:				;---------------------------------------------------------
  255:	  00BB	E4		goto:		clr	a
  256:	  00BC	73				jmp	@a+dptr
  257:				;---------------------------------------------------------
  258:				;dump routine
  259:				;---------------------------------------------------------
  260:	  00BD	78 10		dump:		mov	r0, #16
  261:	  00BF	31 12				acall	monnewline
  262:
  263:	  00C1	12 01 45	dumpline:	call	monphex16
  264:	  00C4	31 06				acall	dspace
  265:	  00C6	79 10				mov	r1, #16
  266:	  00C8	E4		dumpline1:	clr	a
  267:	  00C9	93				movc	a, @a+dptr

ASEM-51 V1.3                                         Copyright (c) 2002 by W.W. Heinz                                         PAGE 6



 Line  I  Addr  Code            Source

  268:	  00CA	A3				inc	dptr
  269:	  00CB	12 01 33			call	monphex
  270:	  00CE	31 08				acall	monspace
  271:	  00D0	D9 F6				djnz	r1, dumpline1
  272:	  00D2	31 12				acall	monnewline
  273:
  274:	  00D4	D8 EB				djnz	r0, dumpline
  275:	  00D6	E4				clr	a
  276:	  00D7	22				ret
  277:				;---------------------------------------------------------
  278:				;newaddr routine
  279:				;---------------------------------------------------------
  280:	  00D8	11 E2		newaddr:	acall	gethexbyte
  281:	  00DA	F5 83				mov	dph, a
  282:	  00DC	11 E2				acall	gethexbyte
  283:	  00DE	F5 82				mov	dpl, a
  284:	  00E0	E4				clr	a
  285:	  00E1	22				ret
  286:
  287:				;---------------------------------------------------------
  288:				;helper
  289:				;---------------------------------------------------------
  290:	  00E2	11 EA		gethexbyte:	acall	gethex
  291:	  00E4	C4				swap	a
  292:	  00E5	FF				mov	r7, a
  293:	  00E6	11 EA				acall	gethex
  294:	  00E8	4F				orl	a, r7
  295:	  00E9	22				ret
  296:
  297:	  00EA	11 FE		gethex:		acall	moncin
  298:	  00EC	B4 61 00			cjne	a, #'a', $+3
  299:	  00EF	40 02				jc	gethex1
  300:	  00F1	94 20				subb	a, #32
  301:	  00F3	C3		gethex1:	clr	c
  302:	  00F4	94 30				subb	a, #'0'
  303:	  00F6	B4 0A 00			cjne	a, #10, $+3
  304:	  00F9	40 02				jc	gethex2
  305:	  00FB	94 07				subb	a, #'A' - '9' - 1
  306:	  00FD	22		gethex2:	ret
  307:
  308:				;---------------------------------------------------------;
  309:				;							  ;
  310:				;	       Subroutines for serial I/O		  ;
  311:				;							  ;
  312:				;---------------------------------------------------------;
  313:
  314:
  315:	  00FE	30 98 FD	moncin:		jnb	ri, moncin
  316:	  0101	C2 98				clr	ri
  317:	  0103	E5 99				mov	a, sbuf
  318:	  0105	22				ret
  319:
  320:	  0106	31 08		dspace:		acall	monspace
  321:	  0108	74 20		monspace:	mov	a, #' '
  322:	  010A	30 99 FD	moncout:	jnb	ti, moncout
  323:	  010D	C2 99				clr	ti		;clr ti before the mov to sbuf!

ASEM-51 V1.3                                         Copyright (c) 2002 by W.W. Heinz                                         PAGE 7



 Line  I  Addr  Code            Source

  324:	  010F	F5 99				mov	sbuf, a
  325:	  0111	22				ret
  326:
  327:				;clearing ti before reading sbuf takes care of the case where
  328:				;interrupts may be enabled... if an interrupt were to happen
  329:				;between those two instructions, the serial port will just
  330:				;wait a while, but in the other order and the character could
  331:				;finish transmitting (during the interrupt routine) and then
  332:				;ti would be cleared and never set again by the hardware, causing
  333:				;the next call to cout to hang forever!
  334:
  335:	  0112	C0 E0		monnewline:	push	acc		;print one newline
  336:	  0114	74 0D				mov	a, #13
  337:	  0116	31 0A				acall	moncout
  338:	  0118	74 0A				mov	a, #10
  339:	  011A	31 0A				acall	moncout
  340:	  011C	D0 E0				pop	acc
  341:	  011E	22				ret
  342:
  343:				;a not so well documented feature of pstr is that you can print
  344:				;multiple consecutive strings without needing to reload dptr
  345:				;(which takes 3 bytes of code!)... this is useful for inserting
  346:				;numbers or spaces between strings.
  347:
  348:	  011F	C0 E0		monpstr:	push	acc
  349:	  0121	E4		monpstr1:	clr	a
  350:	  0122	93				movc	a, @a+dptr
  351:	  0123	A3				inc	dptr
  352:	  0124	60 0A				jz	monpstr2
  353:	  0126	A2 E7				mov	c, acc.7
  354:	  0128	54 7F				anl	a, #07Fh
  355:	  012A	31 0A				call	moncout
  356:	  012C	40 02				jc	monpstr2
  357:	  012E	80 F1				sjmp	monpstr1
  358:	  0130	D0 E0		monpstr2:	pop	acc
  359:	  0132	22				ret
  360:
  361:				; Highly code efficient resursive call phex contributed
  362:				; by Alexander B. Alexandrov <abalex@cbr.spb.ru>
  363:
  364:	  0133	31 35		monphex:	acall	monphex_b
  365:	  0135	C4		monphex_b:	swap	a		;SWAP A will be twice => A unchanged
  366:	  0136	C0 E0		monphex1:	push	acc
  367:	  0138	54 0F				anl	a, #15
  368:	  013A	24 90				add	a, #90h	; acc is 0x9X, where X is hex digit
  369:	  013C	D4				da	a		; if A to F, C=1 and lower four bits are 0..5
  370:	  013D	34 40				addc	a, #40h
  371:	  013F	D4				da	a
  372:	  0140	31 0A				call	moncout
  373:	  0142	D0 E0				pop	acc
  374:	  0144	22				ret
  375:
  376:	  0145			monphex16:
  377:	  0145	C0 E0				push	acc
  378:	  0147	E5 83				mov	a, dph
  379:	  0149	31 33				call	monphex

ASEM-51 V1.3                                         Copyright (c) 2002 by W.W. Heinz                                         PAGE 8



 Line  I  Addr  Code            Source

  380:	  014B	E5 82				mov	a, dpl
  381:	  014D	31 33				call	monphex
  382:	  014F	D0 E0				pop	acc
  383:	  0151	22				ret
  384:
  385:	  0152	0D 0A 2A 2A	minitext:	db	13, 10, "*** Mini-Mon", 13, 10
	  0156	2A 20 4D 69
	  015A	6E 69 2D 4D
	  015E	6F 6E 0D 0A
  386:	  0162	64 20 2D 20			db	"d - download", 13, 10
	  0166	64 6F 77 6E
	  016A	6C 6F 61 64
	  016E	0D 0A
  387:	  0170	67 20 2D 20			db	"g - goto", 13, 10
	  0174	67 6F 74 6F
	  0178	0D 0A
  388:	  017A	68 20 2D 20			db	"h - dump ext mem", 13, 10
	  017E	64 75 6D 70
	  0182	20 65 78 74
	  0186	20 6D 65 6D
	  018A	0D 0A
  389:	  018C	6E 20 2D 20			db	"n - new address", 13, 10+080h
	  0190	6E 65 77 20
	  0194	61 64 64 72
	  0198	65 73 73 0D
	  019C	8A
  390:
  391:						$include (vt102.a51)
  392: 1			;===============================================
  393: 1			; AT89S52 code for emulating a
  394: 1			; - VT102  terminal
  395: 1			; - ADM-3A terminal
  396: 1			; - DUMP   hex-dump terminal
  397: 1			;
  398: 1			; 2023-24 Roland Scholz (rolandscholz@gmx.de)
  399: 1			; no warranties
  400: 1			; do whatever you want with this code
  401: 1			; assembled with M-IDE Studio for MCS-51
  402: 1			;===============================================
  403: 1
  404: 1			;		$NOMOD51
  405: 1			;		$INCLUDE (89S52.MCU)
  406: 1
  407: 1	N      0000	vt102base	equ	base
  408: 1
  409: 1	N      0050	WIDTH		equ	80
  410: 1	N      0018	HEIGHT		equ	24
  411: 1
  412: 1	N      0000	ST_IDLE		equ	0
  413: 1	N      0002	ST_ESC		equ	2
  414: 1	N      0004	ST_CSI		equ	4
  415: 1	N      0006	ST_ESC_Q	equ	6
  416: 1	N      0008	ST_ESC_HASH	equ	8
  417: 1	N      000A	ST_CMD_ARG	equ	10
  418: 1	N      000C	ST_ESC_LBRACK	equ	12
  419: 1	N      000E	ST_CSI_Q	equ	14

ASEM-51 V1.3                                         Copyright (c) 2002 by W.W. Heinz                                         PAGE 9



 Line  I  Addr  Code            Source

  420: 1	N      0010	ST_ESC_RBRACK	equ	16
  421: 1	N      0012	ST_ROW		equ	18
  422: 1	N      0014	ST_COLUMN	equ	20
  423: 1
  424: 1	N      0000	BLACK		equ	0
  425: 1	N      0001	RED		equ	1
  426: 1	N      0002	GREEN		equ	2
  427: 1	N      0003	YELLOW		equ	3
  428: 1	N      0004	BLUE		equ	4
  429: 1	N      0005	MAGENTA		equ	5
  430: 1	N      0006	TURQUOISE	equ	6
  431: 1	N      0007	WHITE		equ	7
  432: 1
  433: 1	N      0070	DEFAULTCOLOR	equ	WHITE SHL 4 + BLACK
  434: 1
  435: 1	N      000A	C_TIME		equ	10
  436: 1
  437: 1	N      0007	C_BELL		equ	7
  438: 1	N      0008	C_BACKSP	equ	8
  439: 1	N      0009	C_TAB		equ	9
  440: 1	N      000A	C_NEWLINE	equ	10
  441: 1	N      000B	C_VT		equ	11
  442: 1	N      000C	C_FF		equ	12
  443: 1	N      000D	C_CR		equ	13
  444: 1	N      000E	C_SO		equ	14
  445: 1	N      000F	C_SI		equ	15
  446: 1	N      0011	C_XON		equ	17
  447: 1	N      0013	C_XOFF		equ	19
  448: 1	N      001B	C_ESC		equ	27
  449: 1	N      007F	C_DEL		equ	07fh
  450: 1
  451: 1	N      0007	CTRLG		equ	7
  452: 1	N      0008	CTRLH		equ	8
  453: 1	N      0009	CTRLI		equ	9
  454: 1	N      000A	CTRLJ		equ	10
  455: 1	N      000B	CTRLK		equ	11
  456: 1	N      000C	CTRLL		equ	12
  457: 1	N      000D	CTRLM		equ	13
  458: 1	N      001A	CTRLZ		equ	26
  459: 1	N      001E	CTRLLT		equ	30
  460: 1	N      001F	CTRLGT		equ	31
  461: 1
  462: 1	N      001C	CCHM		equ	01Ch	;move cursor home
  463: 1	N      001D	CCBT		equ	01Dh	;move cursor to bottom
  464: 1	N      001E	CCLM		equ	01Eh	;move cursor to left margin
  465: 1	N      001F	CCRM		equ	01Fh	;move cursor to right margin
  466: 1
  467: 1							;SUPERF equ 0
  468: 1
  469: 1	N      0001	CLS		equ	001h	;clear screen
  470: 1	N      0008	BACK		equ	008h	;backspace
  471: 1	N      0009	TABU		equ	009h	;tabulator
  472: 1	N      000A	LF		equ	00Ah	;$9B	;end of line (RETURN)
  473: 1	N      001B	ESC		equ	01Bh	;escape key
  474: 1	N      001C	CCUP		equ	01Ch	;cursor up
  475: 1	N      001D	CCDN		equ	01Dh	;cursor down

ASEM-51 V1.3                                        Copyright (c) 2002 by W.W. Heinz                                         PAGE 10



 Line  I  Addr  Code            Source

  476: 1	N      001E	CCLF		equ	01Eh	;cursor left
  477: 1	N      001F	CCRT		equ	01Fh	;cursor right
  478: 1	N      0020	CSPACE		equ	020h	;space
  479: 1	N      009D	CILN		equ	09Dh	;insert line
  480: 1	N      00FE	CDCH		equ	0FEh	;delete character
  481: 1	N      00FF	CICH		equ	0FFh	;insert character
  482: 1
  483: 1	N      0080	F1		equ	080h	;key code for F1
  484: 1	N      0081	F2		equ	081h	;key code for F2
  485: 1	N      0082	F3		equ	082h	;key code for F3
  486: 1	N      0083	F4		equ	083h	;key code for F4
  487: 1	N      0084	F5		equ	084h	;key code for F5
  488: 1	N      0085	F6		equ	085h	;key code for F6
  489: 1	N      0086	F7		equ	086h	;key code for F7
  490: 1	N      0087	F8		equ	087h	;key code for F8
  491: 1	N      0088	F9		equ	088h	;key code for F9
  492: 1	N      0089	F10		equ	089h	;key code for F10
  493: 1	N      008A	F11		equ	08ah	;key code for F11
  494: 1	N      008B	F12		equ	08bh	;key code for F12
  495: 1
  496: 1			;	special key scan-codes
  497: 1	N      0011	ALTGR		equ	011h	;extended!
  498: 1	N      0011	ALR		equ	011h
  499: 1	N      0012	CLSHIFT		equ	012h
  500: 1	N      0014	CLSTRG		equ	014h
  501: 1	N      0059	CRSHIFT		equ	059h
  502: 1	N      0058	CCAPS		equ	058h
  503: 1
  504: 1	N      00E0	EXTENDED	equ	0e0h
  505: 1	N      00F0	BREAK		equ	0f0h
  506: 1
  507: 1					;	0	;Error (ignored)
  508: 1	N      0001	DECCKM		equ	1	;Cursor key
  509: 1	N      0002	DECANM		equ	2	;ANSI/VT52
  510: 1	N      0003	DECCOLM		equ	3	;Column
  511: 1	N      0004	DECSCLM		equ	4	;Scrolling
  512: 1	N      0005	DECSCNM		equ	5	;Screen
  513: 1	N      0006	DECOM		equ	6	;Origin
  514: 1	N      0007	DECAWM		equ	7	;Auto wrap
  515: 1	N      0008	DECARM		equ	8	;Auto repeating
  516: 1	N      0009	DECINLM		equ	9	;Interlace
  517: 1	N      0004	IRM		equ	4	;Insert Replace mode
  518: 1	N      0014	LNM		equ	20	;new line mode
  519: 1
  520: 1	N      0030	VARLEN		equ	48
  521: 1
  522: 1	N      0020	VARS		equ	020h
  523: 1
  524: 1	N      0020	flags		equ	020h
  525: 1	B      0000	special		equ	flags.0
  526: 1	B      0001	lastchar	equ	flags.1
  527: 1	B      0002	lchartmp	equ	flags.2
  528: 1	B      0003	inverse		equ	flags.3
  529: 1	B      0004	xonoff		equ	flags.4
  530: 1	B      0005	serbusy		equ	flags.5
  531: 1

ASEM-51 V1.3                                        Copyright (c) 2002 by W.W. Heinz                                         PAGE 11



 Line  I  Addr  Code            Source

  532: 1	N      0021	flags1		equ	021h
  533: 1	B      0008	keyavail	equ	flags1.0
  534: 1	B      0009	keyrxextended	equ	flags1.1
  535: 1	B      000A	keyrxbreak	equ	flags1.2
  536: 1	B      000B	keyrxshift	equ	flags1.3
  537: 1	B      000C	keyrxaltgr	equ	flags1.4
  538: 1	B      000D	keyrxstrg	equ	flags1.5
  539: 1
  540: 1	N      0022	flags2		equ	022h
  541: 1	B      0010	wrap		equ	flags2.0
  542: 1	B      0011	origin		equ	flags2.1
  543: 1	B      0012	newlinemode	equ	flags2.2
  544: 1	B      0013	insert		equ	flags2.3
  545: 1	B      0014	databits	equ	flags2.4
  546: 1	B      0015	evenodd		equ	flags2.5
  547: 1	B      0016	termmode	equ	flags2.6
  548: 1	B      0017	dumpmode	equ	flags2.7
  549: 1
  550: 1	N      0023	retstate	equ	023h
  551: 1	N      0025	nargs		equ	025h
  552: 1	N      0026	arg0		equ	026h
  553: 1	N      0027	arg1		equ	027h
  554: 1	N      0028	arg2		equ	028h
  555: 1	N      0029	arg3		equ	029h
  556: 1	N      002A	baudidx		equ	02ah
  557: 1	N      002B	scursorx	equ	02bh
  558: 1	N      002C	scursory	equ	02ch
  559: 1	N      002D	color		equ	02dh
  560: 1	N      002E	cursorpos	equ	02eh
  561: 1	N      002F	cursorpos1	equ	02fh
  562: 1	N      0030	cursorsave	equ	030h
  563: 1	N      0031	top		equ	031h
  564: 1	N      0032	bottom		equ	032h
  565: 1	N      0033	state		equ	033h
  566: 1	N      0034	serstart	equ	034h
  567: 1	N      0035	serend		equ	035h
  568: 1	N      0036	sercount	equ	036h
  569: 1	N      0037	cursorx		equ	037h
  570: 1	N      0038	cursory		equ	038h
  571: 1	N      0039	t0cnt		equ	039h
  572: 1	N      003A	keyrxcnt	equ	03ah
  573: 1	N      003B	keyrxval	equ	03bh
  574: 1	N      003C	oldstatus	equ	03ch
  575: 1	N      003D	defcol		equ	03dh
  576: 1	N      003E	dumpcnt		equ	03eh
  577: 1
  578: 1	N      0040	tabutab		equ	040h		;10-bytes tabulator
  579: 1
  580: 1	N      004A	free0		equ	04ah
  581: 1	N      004B	free1		equ	04bh
  582: 1	N      004C	free2		equ	04ch
  583: 1	N      004D	free3		equ	04dh
  584: 1	N      004E	free4		equ	04eh
  585: 1	N      004F	free5		equ	04fh
  586: 1
  587: 1			;stack @ 50h

ASEM-51 V1.3                                        Copyright (c) 2002 by W.W. Heinz                                         PAGE 12



 Line  I  Addr  Code            Source

  588: 1
  589: 1	N      0080	serbuf		equ	080h
  590: 1	N      0040	serlim		equ	64
  591: 1
  592: 1			;===============================================
  593: 1			; Interrupt vector table
  594: 1			;
  595: 1			;===============================================
  596: 1			;		org	vt102base
  597: 1			;		ajmp	start
  598: 1
  599: 1	N      0003			org	vt102base + 3		;ext int0 vector
  600: 1  0003	41 53				ajmp	exint0			;PS/2 keyboard
  601: 1
  602: 1	N      000B			org	vt102base + 11		;timer0 vector
  603: 1  000B	41 36				ajmp	timer0int		;cursor blink
  604: 1
  605: 1	N      0013			org	vt102base + 19		;ext int1 vector
  606: 1									;not used
  607: 1
  608: 1	N      001B			org	vt102base + 27		;timer1 vector
  609: 1									;not used
  610: 1
  611: 1	N      0023			org	vt102base + 35		;uart vector
  612: 1  0023	41 03				ajmp	serint
  613: 1
  614: 1	N      002B			org	vt102base + 43		;timer2 vector (8052)
  615: 1									;not used
  616: 1
  617: 1			;
  618: 1			; leave space for a mini-monitor
  619: 1			;
  620: 1	N      0200			org	vt102base + 200h
  621: 1  0200	02 02 82			jmp	start
  622: 1
  623: 1  0203	30 99 05	serint:		jnb	ti, serintri		;ti active?
  624: 1  0206	C2 05				clr	serbusy
  625: 1  0208	C2 99				clr	ti
  626: 1  020A	32				reti
  627: 1
  628: 1  020B	C0 D0		serintri:	push	psw
  629: 1  020D	C0 E0				push	acc
  630: 1  020F	C0 00				push	ar0
  631: 1
  632: 1  0211	E5 35				mov	a, serend
  633: 1  0213	04				inc	a
  634: 1  0214	D2 E7				setb	acc.7
  635: 1  0216	F5 35				mov	serend, a
  636: 1  0218	F8				mov	r0, a
  637: 1  0219	A6 99				mov	@r0, sbuf
  638: 1
  639: 1  021B	20 04 0F			jb	xonoff, serintex	;XON/XOFF already active?
  640: 1  021E	C3				clr	c			;no compute number auf bytes in buffer
  641: 1  021F	95 34				subb	a, serstart
  642: 1  0221	50 02				jnc	serint1
  643: 1  0223	F4				cpl	a

ASEM-51 V1.3                                        Copyright (c) 2002 by W.W. Heinz                                         PAGE 13



 Line  I  Addr  Code            Source

  644: 1  0224	04				inc	a
  645: 1  0225	B4 40 05	serint1:	cjne	a, #serlim, serintex
  646: 1					;jc	serintex
  647: 1  0228	D2 04				setb	xonoff
  648: 1
  649: 1  022A	75 99 13			mov	SBUF, #C_XOFF
  650: 1
  651: 1  022D	D0 00		serintex:	pop	ar0
  652: 1  022F	D0 E0				pop	acc
  653: 1  0231	D0 D0				pop	psw
  654: 1  0233	C2 98				clr	ri			;no, receive int
  655: 1  0235	32				reti
  656: 1
  657: 1
  658: 1
  659: 1
  660: 1
  661: 1
  662: 1			;===============================================
  663: 1			; Timer 0 Interrupt 0
  664: 1			;===============================================
  665: 1  0236	D5 39 19	timer0int:	djnz	t0cnt, timer0int_ex
  666: 1  0239	75 39 0A			mov	t0cnt, #C_TIME
  667: 1  023C	C0 D0				push	psw
  668: 1  023E	C0 E0				push	acc
  669: 1  0240	C0 00				push	ar0
  670: 1
  671: 1  0242	85 2F A0			mov	p2, cursorpos+1
  672: 1  0245	A8 2E				mov	r0, cursorpos
  673: 1  0247	E2				movx	a, @r0
  674: 1  0248	E5 90				mov	a, p1
  675: 1  024A	F4				cpl	a
  676: 1  024B	F2				movx	@r0, a
  677: 1
  678: 1  024C	D0 00				pop	ar0
  679: 1  024E	D0 E0				pop	acc
  680: 1  0250	D0 D0				pop	psw
  681: 1  0252	32		timer0int_ex:	reti
  682: 1
  683: 1
  684: 1
  685: 1			;===============================================
  686: 1			; External Interrupt 0 (falling edge)
  687: 1			; collect bits sent from keyboard
  688: 1			; lsb first
  689: 1			; 8E1, start-bit (low), 8 data-bits, even-parity, stop-bit (high)
  690: 1			;===============================================
  691: 1  0253	C0 D0		exint0:		push	psw
  692: 1  0255	C0 E0				push	acc
  693: 1
  694: 1  0257	E5 3A				mov	a, keyrxcnt
  695: 1			;		mov	dptr, #8000h
  696: 1			;		clr	c
  697: 1			;		rlc	a
  698: 1			;		add	a, dp0l
  699: 1			;		mov	dp0l, a

ASEM-51 V1.3                                        Copyright (c) 2002 by W.W. Heinz                                         PAGE 14



 Line  I  Addr  Code            Source

  700: 1			;		clr	a
  701: 1			;		mov	a, #'0'
  702: 1			;		mov	c, t0
  703: 1			;		mov	acc.0, c
  704: 1			;		movx	@dptr, a
  705: 1
  706: 1  0259	E5 3A				mov	a, keyrxcnt
  707: 1  025B	70 03				jnz	exint0b			;first bit?
  708: 1  025D	20 B4 1D			jb	t0, exint0ex		;not zero, no startbit
  709: 1
  710: 1  0260	04		exint0b:	inc	a
  711: 1  0261	F5 3A				mov	keyrxcnt, a
  712: 1  0263	B4 0A 00			cjne	a, #10, $+3
  713: 1  0266	40 0E				jc	exint0a			;< 10, collect bits
  714: 1  0268	B4 0B 12			cjne	a, #11, exint0ex	;skip parity-bit
  715: 1  026B	75 3A 00			mov	keyrxcnt, #0
  716: 1  026E	30 B4 0C			jnb	t0, exint0ex		;no stop bit?
  717: 1  0271	12 0B F5			call	keydecode
  718: 1  0274	80 07				sjmp 	exint0ex
  719: 1
  720: 1  0276	E5 3B		exint0a:	mov	a, keyrxval
  721: 1  0278	A2 B4				mov	c, t0			;shift in bit of t0
  722: 1  027A	13				rrc	a
  723: 1  027B	F5 3B				mov	keyrxval, a
  724: 1
  725: 1  027D	D0 E0		exint0ex:	pop	acc
  726: 1  027F	D0 D0				pop	psw
  727: 1  0281	32				reti
  728: 1
  729: 1
  730: 1
  731: 1			;LOCAT		equ	02100h
  732: 1			;
  733: 1			;		org	LOCAT
  734: 1			;
  735: 1			;		ORG    LOCAT
  736: 1			;		DB     0A5H,0E5H,0E0H,0A5H	;SIGNITURE BYTES
  737: 1			;		DB     35,0,0,0			;ID (35=PROG), id (253=startup)
  738: 1			;		DB     0,0,0,0			;PROMPT CODE VECTOR
  739: 1			;		DB     0,0,0,0			;RESERVED
  740: 1			;		DB     0,0,0,0			;RESERVED
  741: 1			;		DB     0,0,0,0			;RESERVED
  742: 1			;		DB     0,0,0,0			;USER DEFINED
  743: 1			;		DB     255,255,255,255		;LENGTH AND CHECKSUM (255=UNUSED)
  744: 1			;		DB     "VT100",0		;MAX 31 CHARACTERS, PLUS THE ZERO
  745: 1
  746: 1			;		ORG    LOCAT+64			;EXECUTABLE CODE BEGINS HERE
  747: 1
  748: 1  0282			start:
  749: 1
  750: 1  0282	75 81 50			mov	sp, #stack		;set stack
  751: 1									;1  1  0  1	0    1    1   1
  752: 1  0285	75 B0 D7			mov	p3, #0d7h		;RD WR T1 T0	INT1 INT0 TXD RXD
  753: 1			;		clr	T0
  754: 1			;		clr	T1			;E 6845 = low
  755: 1			;		clr	INT0			;charset 0

ASEM-51 V1.3                                        Copyright (c) 2002 by W.W. Heinz                                         PAGE 15



 Line  I  Addr  Code            Source

  756: 1			;		clr	INT1			;screen 0
  757: 1  0288	E4				clr	a
  758: 1  0289	F5 A2				mov	AUXR1, a
  759: 1  028B	F5 A8				mov	ie, a
  760: 1
  761: 1
  762: 1			;		setb	PS			;make PS high priority
  763: 1									;enbale all, serial, timer0, extint0
  764: 1  028D	75 A8 93			mov	ie, #093h		;ea - ET2 ES  ET1 EX1 ET0 EX0
  765: 1  0290	D2 88				setb	it0			;set int0 to falling edge
  766: 1
  767: 1
  768: 1  0292	12 09 7A			call	term_reset
  769: 1
  770: 1  0295	74 11				mov	a, #C_XON
  771: 1  0297	12 0B A9			call	cout
  772: 1
  773: 1  029A	12 0B 17	init:		call	init6845
  774: 1  029D	12 0B 56			call	copyFont
  775: 1  02A0	12 0B 6F			call	testScreen
  776: 1
  777: 1  02A3	90 80 00			mov	dptr, #8000h
  778: 1  02A6	E0				movx	a, @dptr
  779: 1  02A7	E5 90				mov	a, p1
  780: 1  02A9	14				dec	a
  781: 1  02AA	60 06				jz	init_loop
  782: 1  02AC	90 00 00			mov	dptr, #0h
  783: 1  02AF	E0				movx	a, @dptr
  784: 1  02B0	80 E8				sjmp	init
  785: 1
  786: 1  02B2			init_loop:
  787: 1			;		call	cin
  788: 1			;		cjne	a, #'x', init_1
  789: 1			;		sjmp	init_2
  790: 1
  791: 1			;init_1:		cjne	a, #'y', init_loop
  792: 1
  793: 1			;loop_test:	call	cin
  794: 1			;		call	cout
  795: 1			;		sjmp	loop_test
  796: 1
  797: 1
  798: 1  02B2	D2 8C		init_2:		setb	tr0				;start timer0
  799: 1  02B4	12 09 7A			call	term_reset
  800: 1
  801: 1			;		mov	dptr, #msg1
  802: 1			;		call	print
  803: 1
  804: 1  02B7	30 08 79	main_loop:	jnb	keyavail, main_serin		;key available?
  805: 1  02BA	C2 08				clr	keyavail			;clear key available
  806: 1  02BC	E5 3B				mov	a, keyrxval
  807: 1
  808: 1  02BE	B4 84 02			cjne	a, #F5, main_F6			;F5 ?
  809: 1  02C1	41 B2				ajmp	init_2				;reset terminal
  810: 1  02C3	B4 85 0E	main_F6:	cjne	a, #F6, main_F7			;F6 ?
  811: 1  02C6	E5 2A				mov	a, baudidx			;switch baud

ASEM-51 V1.3                                        Copyright (c) 2002 by W.W. Heinz                                         PAGE 16



 Line  I  Addr  Code            Source

  812: 1  02C8	04				inc	a
  813: 1  02C9	B4 05 01			cjne	a, #5, main_F6a
  814: 1  02CC	E4				clr	a
  815: 1  02CD	F5 2A		main_F6a:	mov	baudidx, a
  816: 1  02CF	12 03 4E			call	setbaud
  817: 1  02D2	80 75				sjmp	main_status
  818: 1
  819: 1
  820: 1  02D4	B4 86 10	main_F7:	cjne	a, #F7, main_F8			;F7 8/7 data bits, even/odd
  821: 1  02D7	20 14 04			jb	databits, main_F7a
  822: 1  02DA	D2 14				setb	databits
  823: 1  02DC	80 6B				sjmp	main_status
  824: 1  02DE	B2 15		main_F7a:	cpl	evenodd
  825: 1  02E0	20 15 66			jb	evenodd, main_status
  826: 1  02E3	C2 14				clr	databits
  827: 1  02E5	80 62				sjmp	main_status
  828: 1
  829: 1
  830: 1  02E7	B4 87 10	main_F8:	cjne	a, #F8, main_F12		;F8 terminal mode VT102 / ADM-3A
  831: 1  02EA	20 16 04			jb	termmode, main_F8a
  832: 1  02ED	D2 16				setb	termmode
  833: 1  02EF	80 58				sjmp	main_status
  834: 1  02F1	B2 17		main_F8a:	cpl	dumpmode
  835: 1  02F3	20 17 53			jb	dumpmode, main_status
  836: 1  02F6	B2 16				cpl	termmode
  837: 1  02F8	80 4F				sjmp	main_status
  838: 1
  839: 1  02FA	B4 8B 0C	main_F12:	cjne	a, #F12, main_cout		;F12 cycle color
  840: 1  02FD	E5 3D				mov	a, defcol
  841: 1  02FF	24 10				add	a, #16
  842: 1  0301	54 7F				anl	a, #07fh
  843: 1  0303	F5 3D				mov	defcol, a
  844: 1  0305	F5 2D				mov	color, a
  845: 1  0307	80 AE				sjmp	main_loop
  846: 1
  847: 1  0309	30 16 0C	main_cout:	jnb	termmode, main_cout3		;ADM-3A to uppercase?
  848: 1  030C	B4 61 00			cjne	a, #'a', $+3			;< 'a'
  849: 1  030F	40 07				jc	main_cout3
  850: 1  0311	B4 7B 00			cjne	a, #'z'+1, $+3			;<= z?
  851: 1  0314	50 02				jnc	main_cout3
  852: 1  0316	94 1F				subb	a, #31				;=32, carry set
  853: 1
  854: 1  0318	30 14 0A	main_cout3:	jnb	databits, main_cout2		;8 databits, just output
  855: 1  031B	54 7F				anl	a, #07fh
  856: 1  031D	A2 D0				mov	c, P
  857: 1  031F	30 15 01			jnb	evenodd, main_cout1
  858: 1  0322	B3				cpl	c
  859: 1  0323	92 E7		main_cout1:	mov	acc.7, c
  860: 1
  861: 1  0325	12 0B A9	main_cout2:	call	cout				;send out over serial
  862: 1  0328	B4 0D 08			cjne	a, #C_CR, main_serin		;CR sent?
  863: 1  032B	30 12 05			jnb	newlinemode, main_serin
  864: 1  032E	74 0A				mov	a, #C_NEWLINE			;send LF, too
  865: 1  0330	12 0B A9			call	cout
  866: 1
  867: 1  0333	E5 34		main_serin:	mov	a, serstart			;serin available?

ASEM-51 V1.3                                        Copyright (c) 2002 by W.W. Heinz                                         PAGE 17



 Line  I  Addr  Code            Source

  868: 1  0335	B5 35 02			cjne	a, serend, loop_cin
  869: 1  0338	41 B7				ajmp	main_loop			;no serin available
  870: 1
  871: 1  033A	12 0B B1	loop_cin:	call	cin				;read from serial
  872: 1  033D	12 03 5A			call	ansiout				;output to terminal's CRT
  873: 1
  874: 1  0340	E5 22				mov	a, flags2			;have flags changed?
  875: 1  0342	65 3C				xrl	a, oldstatus
  876: 1  0344	60 06				jz	main_loop1			;no
  877: 1  0346	85 22 3C			mov	oldstatus, flags2
  878: 1  0349	12 0E 0A	main_status:	call	prtstatus			;print status-line
  879: 1  034C	41 B7		main_loop1:	ajmp	main_loop
  880: 1
  881: 1
  882: 1  034E	12 0D DE	setbaud:	call	getbaud
  883: 1  0351	C2 8E				clr	tr1
  884: 1  0353	F5 8D				mov	TH1, a
  885: 1  0355	F5 8B				mov	TL1, a
  886: 1  0357	D2 8E				setb	tr1
  887: 1  0359	22				ret
  888: 1			;===============================================
  889: 1			; ansiout: dispatch vt102 or ADM-3A or DUMPMDOE
  890: 1			;===============================================
  891: 1  035A	30 14 02	ansiout:	jnb	databits, ansiout3		;8-bit?
  892: 1  035D	54 7F				anl	a, #07fh			;mask out bit 7
  893: 1  035F	FF		ansiout3:	mov	r7, a				;save acc in r7
  894: 1
  895: 1  0360	A2 01				mov	C, lastchar
  896: 1  0362	92 02				mov	lchartmp, C
  897: 1  0364	C2 01				clr	lastchar
  898: 1
  899: 1  0366	E4				clr	a
  900: 1  0367	F8				mov	r0, a				;x-offset
  901: 1  0368	F9				mov	r1, a				;y-offset
  902: 1  0369	FA				mov	r2, a				;scrolling, 0 = no
  903: 1
  904: 1  036A	20 17 25			jb	dumpmode, dumpterm
  905: 1  036D	20 16 4A			jb	termmode, adm3a			;switch to ADM-3A
  906: 1
  907: 1  0370	E5 33				mov	a, state
  908: 1			;		jz	do_idle				;speed up
  909: 1  0372	24 0C				add	a, #ansi_tab-ansiout1+1		;fetch low-byte
  910: 1  0374	83				movc	a, @a+pc
  911: 1  0375	C0 E0		ansiout1:	push	acc				;2
  912: 1  0377	E5 33				mov	a, state			;2
  913: 1  0379	24 04				add	a, #ansi_tab-ansiout2		;2
  914: 1  037B	83				movc	a, @a+pc			;1 fetch, high-byte
  915: 1  037C	C0 E0		ansiout2:	push	acc				;2
  916: 1  037E	EF				mov	a, r7				;1
  917: 1  037F	22				ret					;1
  918: 1
  919: 1  0380	04 36 05 30	ansi_tab:	dw	do_idle, do_esc, do_csi, do_esc_q, do_esc_hash, do_cmd_arg, do_esc_lbrack, d
       1  0384	05 93 08 B1	o_csi_q
       1  0388	08 B5 08 CD
       1  038C	08 C1 08 64
  920: 1  0390	08 C1				dw	do_esc_rbrack

ASEM-51 V1.3                                        Copyright (c) 2002 by W.W. Heinz                                         PAGE 18



 Line  I  Addr  Code            Source

  921: 1
  922: 1  0392	EF		dumpterm:	mov	a, r7
  923: 1  0393	71 A9				acall	dumpnibble
  924: 1  0395	71 A9				acall	dumpnibble
  925: 1  0397	7F 20				mov	r7, #' '
  926: 1  0399	91 AD				acall	draw_char
  927: 1  039B	E5 3E				mov	a, dumpcnt
  928: 1  039D	04				inc	a
  929: 1  039E	B4 10 05			cjne	a, #16, dumpterm2
  930: 1  03A1	78 00				mov	r0, #0
  931: 1  03A3	91 79				acall	do_newline
  932: 1  03A5	E4				clr	a
  933: 1  03A6	F5 3E		dumpterm2:	mov	dumpcnt, a
  934: 1  03A8	22				ret
  935: 1
  936: 1  03A9	C4		dumpnibble:	swap	a				;SWAP A will be twice => A unchanged
  937: 1  03AA	C0 E0				push	acc
  938: 1  03AC	54 0F				anl	a, #15
  939: 1  03AE	24 90				add	a, #90h				; acc is 0x9X, where X is hex digit
  940: 1  03B0	D4				da	a				; if A to F, C=1 and lower four bits are 0..
       1			5
  941: 1  03B1	34 40				addc	a, #40h
  942: 1  03B3	D4				da	a
  943: 1  03B4	FF				mov	r7, a
  944: 1  03B5	91 AD				acall	draw_char
  945: 1  03B7	D0 E0				pop	acc
  946: 1  03B9	22				ret
  947: 1
  948: 1
  949: 1			;===============================================
  950: 1			; ADM-3A code
  951: 1			;===============================================
  952: 1  03BA	E5 33		adm3a:		mov	a, state
  953: 1  03BC	B4 00 3E			cjne	a, #ST_IDLE, adm_esc		;not in IDLE state?
  954: 1
  955: 1			;===============================================
  956: 1			; state ADM_IDLE
  957: 1			;===============================================
  958: 1  03BF	BF 20 00			cjne	r7, #32, $+3			;<32, do CTRL-codes
  959: 1  03C2	40 02				jc	adm_ctrl_g
  960: 1  03C4	81 AD				ajmp	draw_char
  961: 1
  962: 1  03C6	BF 07 02	adm_ctrl_g:	cjne	r7, #CTRLG, adm_ctrl_h
  963: 1  03C9	81 45				ajmp	do_idle_bell+3			;bell
  964: 1  03CB	BF 08 02	adm_ctrl_h:	cjne	r7, #CTRLH, adm_ctrl_i
  965: 1  03CE	81 49				ajmp	do_idle_bs+3			;back space
  966: 1  03D0	BF 09 02	adm_ctrl_i:	cjne	r7, #CTRLI, adm_ctrl_j
  967: 1  03D3	81 50				ajmp	do_idle_tab+3			;tab
  968: 1  03D5	BF 0A 02	adm_ctrl_j:	cjne	r7, #CTRLJ, adm_ctrl_k
  969: 1  03D8	81 79				ajmp	do_idle_nl+3			;newline
  970: 1  03DA	BF 0B 02	adm_ctrl_k:	cjne	r7, #CTRLK, adm_ctrl_l
  971: 1  03DD	A1 61				ajmp	do_esc_M+3			;cursor up
  972: 1  03DF	BF 0C 02	adm_ctrl_l:	cjne	r7, #CTRLL, adm_ctrl_m
  973: 1  03E2	A1 C4				ajmp	do_csi_C+3			;cursor right
  974: 1  03E4	BF 0D 02	adm_ctrl_m:	cjne	r7, #CTRLM, adm_ctrl_z
  975: 1  03E7	81 84				ajmp	do_idle_cr+3			;carriage return

ASEM-51 V1.3                                        Copyright (c) 2002 by W.W. Heinz                                         PAGE 19



 Line  I  Addr  Code            Source

  976: 1  03E9	BF 1A 05	adm_ctrl_z:	cjne	r7, #CTRLZ, adm_ctrl_esc
  977: 1  03EC	12 0A 7F	adm_ctrl_z1:	call	clear_screen			;clr-home
  978: 1  03EF	E1 0F				ajmp	do_csi_rc
  979: 1  03F1	BF 1B 03	adm_ctrl_esc:	cjne	r7, #ESC, adm_ctrl_lt
  980: 1  03F4	75 33 02			mov	state, #ST_ESC			;ESC
  981: 1  03F7	BF 1E 02	adm_ctrl_lt:	cjne	r7, #CTRLLT, adm_ctrl_gr
  982: 1  03FA	E1 0F				ajmp	do_csi_rc			;CTRL-< (home)
  983: 1  03FC			adm_ctrl_gr:	;cjne	r7, #CTRLGT, adm_ctrl_draw
  984: 1  03FC	22				ret					;CTRL-> (direct)
  985: 1
  986: 1
  987: 1			;===============================================
  988: 1			; state ADM_ESC
  989: 1			;===============================================
  990: 1  03FD	B4 02 1F	adm_esc:	cjne	a, #ST_ESC, adm_row		;ESC = <row> <col>?
  991: 1  0400	75 33 00			mov	state, #ST_IDLE
  992: 1  0403	BF 2A 02			cjne	r7, #'*', adm_esc_7
  993: 1  0406	61 EC				ajmp	adm_ctrl_z1			;clr-home
  994: 1  0408	BF 37 02	adm_esc_7:	cjne	r7, #'7', adm_esc_eq
  995: 1  040B	D2 03				setb	inverse				;inverse
  996: 1  040D	BF 3D 03	adm_esc_eq:	cjne	r7, #'=', adm_esc_lbr
  997: 1  0410	75 33 12			mov	state, #ST_ROW
  998: 1  0413	BF 28 02	adm_esc_lbr:	cjne	r7, #'(', adm_esc_esc
  999: 1  0416	C2 03				clr	inverse
 1000: 1  0418	BF 1B 03	adm_esc_esc:	cjne	r7, #C_ESC, adm_esc_ex
 1001: 1  041B	02 00 52			ljmp	monstart
 1002: 1  041E	22		adm_esc_ex:	ret
 1003: 1
 1004: 1			;===============================================
 1005: 1			; state ADM_ROW
 1006: 1			;===============================================
 1007: 1  041F	B4 12 09	adm_row:	cjne	a, #ST_ROW, adm_column
 1008: 1  0422	75 33 14			mov	state, #ST_COLUMN
 1009: 1  0425	EF				mov	a, r7
 1010: 1  0426	94 20				subb	a, #32				;carry clear!
 1011: 1  0428	F5 38				mov	cursory, a
 1012: 1  042A	22				ret
 1013: 1
 1014: 1			;===============================================
 1015: 1			; state ADM_COLUMN
 1016: 1			;===============================================
 1017: 1  042B	75 33 00	adm_column:	mov	state, #ST_IDLE
 1018: 1  042E	EF				mov	a, r7
 1019: 1  042F	94 20				subb	a, #32				;carry clear! R7 > ST_ROW
 1020: 1  0431	F5 37				mov	cursorx, a
 1021: 1  0433	02 09 0C			jmp	ansi_move
 1022: 1
 1023: 1
 1024: 1			;===============================================
 1025: 1			; state VT102-IDLE
 1026: 1			;===============================================
 1027: 1  0436			do_idle:
 1028: 1
 1029: 1  0436	BF 7F 04	do_idle_del:	cjne	r7, #C_DEL, do_idle_pre
 1030: 1  0439	18				dec	r0
 1031: 1  043A	02 09 0C			jmp	ansi_move

ASEM-51 V1.3                                        Copyright (c) 2002 by W.W. Heinz                                         PAGE 20



 Line  I  Addr  Code            Source

 1032: 1
 1033: 1  043D	BF 20 00	do_idle_pre:	cjne	r7, #32, $+3			;speed up
 1034: 1  0440	50 6B				jnc	draw_char
 1035: 1
 1036: 1  0442	BF 07 01	do_idle_bell:	cjne	r7, #C_BELL, do_idle_bs
 1037: 1  0445	22				ret					;no bell yet
 1038: 1
 1039: 1  0446	BF 08 04	do_idle_bs:	cjne	r7, #C_BACKSP, do_idle_tab	;backspace
 1040: 1  0449	18				dec	r0
 1041: 1  044A	02 09 0C			jmp	ansi_move
 1042: 1
 1043: 1  044D	BF 09 26	do_idle_tab:	cjne	r7, #C_TAB, do_idle_nl		;tabulator
 1044: 1  0450	12 09 C7			call	tab_set_r0_r1
 1045: 1  0453	E4		do_idle_tab3:	clr	a
 1046: 1  0454	09				inc	r1
 1047: 1  0455	05 37				inc	cursorx
 1048: 1  0457	B9 08 10			cjne	r1, #8, do_idle_tab1
 1049: 1  045A	08				inc	r0
 1050: 1  045B	F9				mov	r1, a
 1051: 1  045C	B8 4A 0B			cjne	r0, #tabutab+10, do_idle_tab1
 1052: 1  045F	F8				mov	r0, a
 1053: 1  0460	F5 37				mov	cursorx, a
 1054: 1  0462	09				inc	r1
 1055: 1  0463	0A				inc	r2				;scroll on
 1056: 1  0464	12 09 0C			call	ansi_move
 1057: 1  0467	12 09 C7			call	tab_set_r0_r1
 1058: 1  046A	12 09 D7	do_idle_tab1:	call	getbit
 1059: 1  046D	56				anl	a, @r0
 1060: 1  046E	60 E3				jz	do_idle_tab3			;bit not found
 1061: 1  0470	E4		do_idle_tab2:	clr	a
 1062: 1  0471	F8				mov	r0, a
 1063: 1  0472	F9				mov	r1, a
 1064: 1  0473	02 09 0C			jmp	ansi_move
 1065: 1
 1066: 1
 1067: 1  0476	BF 0A 08	do_idle_nl:	cjne	r7, #C_NEWLINE, do_idle_cr
 1068: 1  0479	75 37 00	do_newline:	mov	cursorx, #0
 1069: 1  047C	09				inc	r1
 1070: 1  047D	0A				inc	r2
 1071: 1  047E	02 09 0C			jmp	ansi_move
 1072: 1
 1073: 1  0481	BF 0D 0A	do_idle_cr:	cjne	r7, #C_CR, do_idle_esc
 1074: 1  0484	75 37 00	do_cr:		mov	cursorx, #0
 1075: 1  0487	12 09 0C			call	ansi_move
 1076: 1  048A	20 12 EC			jb	newlinemode, do_newline		;per default, CR
 1077: 1  048D	22				ret
 1078: 1
 1079: 1  048E	BF 1B 06	do_idle_esc:	cjne	r7, #C_ESC, do_idle_so
 1080: 1  0491	75 33 02			mov	state, #ST_ESC
 1081: 1  0494	02 09 E3			jmp	clearargs
 1082: 1
 1083: 1  0497	BF 0E 03	do_idle_so:	cjne	r7, #C_SO, do_idle_si
 1084: 1  049A	D2 00				setb	special
 1085: 1  049C	22				ret
 1086: 1
 1087: 1  049D	BF 0F 03	do_idle_si:	cjne	r7, #C_SI, do_idle_vt

ASEM-51 V1.3                                        Copyright (c) 2002 by W.W. Heinz                                         PAGE 21



 Line  I  Addr  Code            Source

 1088: 1  04A0	C2 00				clr	special
 1089: 1  04A2	22				ret
 1090: 1
 1091: 1  04A3	BF 0B 02	do_idle_vt:	cjne	r7, #C_VT, do_idle_ff
 1092: 1  04A6	80 D1				sjmp	do_newline
 1093: 1
 1094: 1  04A8	BF 0C 02	do_idle_ff:	cjne	r7, #C_FF, do_idle_end
 1095: 1  04AB	80 CC				sjmp	do_newline
 1096: 1
 1097: 1  04AD			do_idle_end:	;ajmp	draw_char
 1098: 1
 1099: 1
 1100: 1
 1101: 1  04AD	C0 07		draw_char:	push	ar7				;save r7 (received byte)
 1102: 1  04AF	12 0A E0			call	cursor_off			;reset + disable cursor
 1103: 1
 1104: 1  04B2	0A				inc	r2				;with scroll
 1105: 1  04B3	30 02 05			jnb	lchartmp, char_out		;last char in line?
 1106: 1  04B6	30 10 02			jnb	wrap, char_out			;wrap turned on?
 1107: 1  04B9	91 79				call	do_newline
 1108: 1
 1109: 1			;===============================================
 1110: 1			; draws a char in ACC at cursor position
 1111: 1			;===============================================
 1112: 1  04BB	12 0B 03	char_out:	call	comp_dptr
 1113: 1
 1114: 1  04BE	D0 01				pop	ar1
 1115: 1
 1116: 1  04C0	30 00 0E			jnb	special, char_out_3	;special not set?
 1117: 1  04C3	B9 60 00			cjne	r1, #060h, $+3
 1118: 1  04C6	40 09				jc	char_out_3		;<60h, do nothing
 1119: 1  04C8	B9 7F 00			cjne	r1, #07fh, $+3
 1120: 1  04CB	50 04				jnc	char_out_3		;>=7fh, do nothing
 1121: 1  04CD	E9				mov	a, r1
 1122: 1  04CE	94 5E				subb	a, #5eh			;carry set! subtract 5fh
 1123: 1  04D0	F9				mov	r1, a
 1124: 1  04D1	30 13 3D	char_out_3:	jnb	insert, char_out_4	;insert mode?
 1125: 1
 1126: 1  04D4	C3				clr	c
 1127: 1  04D5	74 4F				mov	a, #WIDTH-1
 1128: 1  04D7	95 37				subb	a, cursorx
 1129: 1  04D9	33				rlc	a			;* 2
 1130: 1  04DA	60 35				jz	char_out_4
 1131: 1  04DC	F8				mov	r0, a			;R0: number of chars to copy in
 1132: 1  04DD	04				inc	a
 1133: 1
 1134: 1  04DE	25 84				add	a, dp1l			;add r0, to dptr1 (destination)
 1135: 1  04E0	F5 84				mov	dp1l, a
 1136: 1  04E2	E5 85				mov	a, dp1h
 1137: 1  04E4	34 00				addc	a, #0
 1138: 1  04E6	F5 85				mov	dp1h, a
 1139: 1
 1140: 1  04E8	E5 84				mov	a, dp1l			;dptr0 = dptr1 - 2 (source)
 1141: 1  04EA	94 02				subb	a, #2
 1142: 1  04EC	F5 82				mov	dp0l, a
 1143: 1  04EE	E5 85				mov	a, dp1h

ASEM-51 V1.3                                        Copyright (c) 2002 by W.W. Heinz                                         PAGE 22



 Line  I  Addr  Code            Source

 1144: 1  04F0	94 00				subb	a, #0
 1145: 1  04F2	F5 83				mov	dp0h, a
 1146: 1
 1147: 1  04F4	E0		char_out_2:	movx	a, @dptr		;copy r0 bytes from right to left
 1148: 1  04F5	05 A2				inc	auxr1
 1149: 1  04F7	E5 90				mov	a, p1
 1150: 1  04F9	F0				movx	@dptr, a
 1151: 1  04FA	05 A2				inc	auxr1
 1152: 1  04FC	E5 82				mov	a, dp0l
 1153: 1  04FE	70 02				jnz	char_out_2a
 1154: 1  0500	15 83				dec	dp0h
 1155: 1  0502	15 82		char_out_2a:	dec	dp0l
 1156: 1  0504	E5 84				mov	a, dp1l
 1157: 1  0506	70 02				jnz	char_out_2b
 1158: 1  0508	15 85				dec	dp1h
 1159: 1  050A	15 84		char_out_2b:	dec	dp1l
 1160: 1  050C	D8 E6				djnz	r0, char_out_2
 1161: 1  050E	12 0B 03			call	comp_dptr
 1162: 1
 1163: 1  0511	E9		char_out_4:	mov	a, r1
 1164: 1  0512	05 A2				inc	auxr1
 1165: 1  0514	F0				movx	@dptr, a
 1166: 1  0515	A3				inc	dptr
 1167: 1  0516	E5 2D				mov	a, color
 1168: 1  0518	30 03 01			jnb	inverse, char_out_1
 1169: 1  051B	C4				swap	a
 1170: 1  051C	F0		char_out_1:	movx	@dptr, a
 1171: 1  051D	05 A2				inc	auxr1
 1172: 1
 1173: 1  051F	E5 37				mov	a, cursorx
 1174: 1  0521	B4 4F 02			cjne	a, #WIDTH-1, draw_char_1
 1175: 1  0524	D2 01				setb	lastchar
 1176: 1
 1177: 1  0526	78 01		draw_char_1:	mov	r0, #1
 1178: 1  0528	79 00				mov	r1, #0
 1179: 1  052A	12 0A C0			call	draw_cursor
 1180: 1  052D	02 09 0C			jmp	ansi_move
 1181: 1
 1182: 1			;===============================================
 1183: 1			; state ESC
 1184: 1			;===============================================
 1185: 1  0530	75 33 00	do_esc:		mov	state, #ST_IDLE
 1186: 1  0533	B4 1B 03			cjne	a, #C_ESC, do_esc_csi	;2x ESC? return to monitor
 1187: 1			;		call	dump_vars
 1188: 1			;		call	cin
 1189: 1  0536	02 00 52			ljmp	monstart
 1190: 1
 1191: 1  0539	B4 5B 04	do_esc_csi:	cjne	a, #'[', do_esc_7	;switch to CSI state
 1192: 1  053C	75 33 04			mov	state, #ST_CSI
 1193: 1  053F	22				ret
 1194: 1
 1195: 1  0540	B4 37 07	do_esc_7:	cjne	a, #'7', do_esc_8	;save cursor
 1196: 1  0543	85 37 2B			mov	scursorx, cursorx
 1197: 1  0546	85 38 2C			mov	scursory, cursory
 1198: 1  0549	22				ret
 1199: 1

ASEM-51 V1.3                                        Copyright (c) 2002 by W.W. Heinz                                         PAGE 23



 Line  I  Addr  Code            Source

 1200: 1  054A	B4 38 09	do_esc_8:	cjne	a, #'8', do_esc_D	;restore cursor
 1201: 1  054D	85 2B 37			mov	cursorx, scursorx
 1202: 1  0550	85 2C 38			mov	cursory, scursory
 1203: 1  0553	02 0A BD			jmp	move_cursor
 1204: 1
 1205: 1  0556	B4 44 05	do_esc_D:	cjne	a, #'D', do_esc_M	;move cursor down and scroll
 1206: 1  0559	0A				inc	r2			;with scrolling
 1207: 1  055A	74 42				mov	a, #'B'
 1208: 1  055C	A1 A1				ajmp	do_csi_keys		;do cursor down
 1209: 1
 1210: 1  055E	B4 4D 05	do_esc_M:	cjne	a, #'M', do_esc_ha	;move cursor up and scroll
 1211: 1  0561	0A				inc	r2			;with scrolling
 1212: 1  0562	74 41				mov	a, #'A'
 1213: 1  0564	A1 A1				ajmp	do_csi_keys		;do cursor up
 1214: 1
 1215: 1  0566	B4 23 04	do_esc_ha:	cjne	a, #'#', do_esc_lbr
 1216: 1  0569	75 33 08			mov	state, #ST_ESC_HASH
 1217: 1  056C	22				ret
 1218: 1
 1219: 1  056D	B4 28 04	do_esc_lbr:	cjne	a, #'(', do_esc_rbr
 1220: 1  0570	75 33 0C			mov	state, #ST_ESC_LBRACK
 1221: 1  0573	22				ret
 1222: 1
 1223: 1  0574	B4 29 04	do_esc_rbr:	cjne	a, #')', do_esc_c
 1224: 1  0577	75 33 10			mov	state, #ST_ESC_RBRACK
 1225: 1  057A	22				ret
 1226: 1
 1227: 1  057B	B4 63 03	do_esc_c:	cjne	a, #'c', do_esc_H
 1228: 1  057E	02 09 7A			jmp	term_reset
 1229: 1
 1230: 1  0581	B4 48 09	do_esc_H:	cjne	a, #'H', do_esc_Z
 1231: 1  0584	12 09 C7			call	tab_set_r0_r1
 1232: 1  0587	12 09 D7			call	getbit
 1233: 1  058A	46				orl	a, @r0
 1234: 1  058B	F6				mov	@r0, a
 1235: 1  058C	22				ret
 1236: 1
 1237: 1  058D	B4 5A 02	do_esc_Z:	cjne	a, #'Z', do_esc_ex
 1238: 1  0590	C1 CA				ajmp	do_csi_cc2
 1239: 1
 1240: 1  0592	22		do_esc_ex:	ret
 1241: 1
 1242: 1			;===============================================
 1243: 1			; state CSI
 1244: 1			;===============================================
 1245: 1  0593			do_csi:
 1246: 1  0593	12 09 63			call	isparm			;is parameter?
 1247: 1  0596	50 09				jnc	do_csi_keys		;no
 1248: 1  0598	85 33 23			mov	retstate, state
 1249: 1  059B	75 33 0A			mov	state, #ST_CMD_ARG
 1250: 1  059E	02 08 CD			jmp	do_cmd_arg
 1251: 1
 1252: 1  05A1	78 00		do_csi_keys:	mov	r0, #0			;x (column)
 1253: 1  05A3	79 00				mov	r1, #0			;y (row
 1254: 1  05A5	75 33 00			mov	state, #ST_IDLE
 1255: 1

ASEM-51 V1.3                                        Copyright (c) 2002 by W.W. Heinz                                         PAGE 24



 Line  I  Addr  Code            Source

 1256: 1  05A8	B4 41 0B			cjne	a, #'A', do_csi_B	;cursor up
 1257: 1  05AB	12 08 F8			call	args_gr_zero
 1258: 1  05AE	E5 26				mov	a, arg0
 1259: 1  05B0	F4				cpl	a
 1260: 1  05B1	04				inc	a
 1261: 1  05B2	F9				mov	r1, a
 1262: 1  05B3	02 09 0C			jmp	ansi_move
 1263: 1
 1264: 1
 1265: 1  05B6	B4 42 08	do_csi_B: 	cjne	a, #'B', do_csi_C	;cursor down
 1266: 1  05B9	12 08 F8			call	args_gr_zero
 1267: 1  05BC	A9 26				mov	r1, arg0
 1268: 1  05BE	02 09 0C			jmp	ansi_move
 1269: 1
 1270: 1
 1271: 1  05C1	B4 43 08	do_csi_C:	cjne	a, #'C', do_csi_D	;cursor right
 1272: 1  05C4	12 08 F8			call	args_gr_zero
 1273: 1  05C7	A8 26				mov	r0, arg0
 1274: 1  05C9	02 09 0C			jmp	ansi_move
 1275: 1
 1276: 1
 1277: 1  05CC	B4 44 0B	do_csi_D:	cjne	a, #'D', do_csi_H 	;cursor left
 1278: 1  05CF	12 08 F8			call	args_gr_zero
 1279: 1  05D2	E5 26				mov	a, arg0
 1280: 1  05D4	F4				cpl	a
 1281: 1  05D5	04				inc	a
 1282: 1  05D6	F8				mov	r0, a
 1283: 1  05D7	02 09 0C			jmp	ansi_move
 1284: 1
 1285: 1
 1286: 1  05DA	B4 48 02	do_csi_H:	cjne	a, #'H', do_csi_H1	;position cursor
 1287: 1  05DD	80 03				sjmp	do_csi_H2
 1288: 1  05DF	B4 66 10	do_csi_H1:	cjne	a, #'f', do_csi_s
 1289: 1  05E2	12 08 F8	do_csi_H2:	call	args_gr_zero
 1290: 1  05E5	E5 26				mov	a, arg0
 1291: 1  05E7	14				dec	a
 1292: 1  05E8	F5 38				mov	cursory, a
 1293: 1  05EA	E5 27				mov	a, arg1
 1294: 1  05EC	14				dec	a
 1295: 1  05ED	F5 37				mov	cursorx, a
 1296: 1  05EF	02 09 0C			jmp	ansi_move
 1297: 1
 1298: 1
 1299: 1  05F2	B4 73 07	do_csi_s:	cjne	a, #'s', do_csi_u	;save cursor
 1300: 1  05F5	85 37 2B			mov	scursorx, cursorx
 1301: 1  05F8	85 38 2C			mov	scursory, cursory
 1302: 1  05FB	22				ret
 1303: 1
 1304: 1
 1305: 1  05FC	B4 75 09	do_csi_u:	cjne	a, #'u', do_csi_m	;restore cursor
 1306: 1  05FF	85 2B 37			mov	cursorx, scursorx
 1307: 1  0602	85 2C 38			mov	cursory, scursory
 1308: 1  0605	02 09 0C			jmp	ansi_move
 1309: 1
 1310: 1
 1311: 1  0608	B4 6D 6A	do_csi_m:	cjne	a, #'m', do_csi_n	;color handling

ASEM-51 V1.3                                        Copyright (c) 2002 by W.W. Heinz                                         PAGE 25



 Line  I  Addr  Code            Source

 1312: 1  060B	A9 25				mov	r1, nargs
 1313: 1  060D	B9 00 06			cjne	r1, #0, do_csi_ma	;no args, reset
 1314: 1  0610	85 3D 2D			mov	color, defcol
 1315: 1  0613	C2 03				clr	inverse
 1316: 1  0615	22				ret
 1317: 1  0616	78 26		do_csi_ma:	mov	r0, #arg0
 1318: 1  0618	E6		do_csi_mc:	mov	a, @r0
 1319: 1  0619	B4 00 07			cjne	a, #0, do_csi_md	;if arg = 0, all attrs off
 1320: 1  061C	85 3D 2D			mov	color, defcol
 1321: 1  061F	C2 03				clr	inverse
 1322: 1  0621	C1 71				ajmp	do_csi_mx3		;loop nargs
 1323: 1  0623	B4 1E 00	do_csi_md:	cjne	a, #30, do_csi_mb
 1324: 1  0626	50 02		do_csi_mb:	jnc	do_csi_me		;arg >= 30
 1325: 1  0628	80 2A				sjmp	do_csi_mx		;loop nargs
 1326: 1  062A	B4 26 00	do_csi_me:	cjne	a, #38, do_csi_mf
 1327: 1  062D	50 42		do_csi_mf:	jnc	do_csi_mx3		;>= 38	loop nargs
 1328: 1  062F	94 1D				subb	a, #29			; - 30 (carry set!)
 1329: 1  0631	C4				swap	a
 1330: 1  0632	FA				mov	r2, a
 1331: 1  0633	E5 2D				mov	a, color
 1332: 1  0635	54 0F				anl	a, #0fh
 1333: 1  0637	4A				orl	a, r2
 1334: 1  0638	F5 2D				mov	color, a
 1335: 1  063A	C1 71				ajmp	do_csi_mx3		;loop nargs
 1336: 1  063C	B4 28 00	do_csi_mg:	cjne	a, #40, $+3
 1337: 1  063F	50 02				jnc	do_csi_mh		;>= 40
 1338: 1  0641	C1 54				ajmp	do_csi_mx		;loop nargs
 1339: 1  0643	B4 30 00	do_csi_mh:	cjne	a, #48, $+3
 1340: 1  0646	50 0C				jnc	do_csi_mx		;>= 48 loop
 1341: 1  0648	94 27				subb	a, #39			;- 40 (carry set!)
 1342: 1  064A	FA				mov	r2, a
 1343: 1  064B	F5 2D				mov	color, a
 1344: 1  064D	54 F0				anl	a, #0f0h
 1345: 1  064F	4A				orl	a, r2
 1346: 1  0650	F5 2D				mov	color, a
 1347: 1  0652	C1 71				ajmp	do_csi_mx3		;loop nargs
 1348: 1  0654	B4 07 02	do_csi_mx:	cjne	a, #7, do_csi_mx1	;inverse
 1349: 1  0657	D2 03				setb	inverse
 1350: 1  0659	B4 01 0A	do_csi_mx1:	cjne	a, #1, do_csi_mx2	;bold
 1351: 1  065C	E5 2D				mov	a, color
 1352: 1  065E	54 0F				anl	a, #0fh
 1353: 1  0660	44 30				orl	a, #YELLOW SHL 4
 1354: 1  0662	F5 2D				mov	color, a
 1355: 1  0664	80 0B				sjmp	do_csi_mx3
 1356: 1  0666	B4 05 08	do_csi_mx2:	cjne	a, #5, do_csi_mx3
 1357: 1  0669	E5 2D				mov	a, color		;underline
 1358: 1  066B	54 0F				anl	a, #0fh
 1359: 1  066D	44 10				orl	a, #RED SHL 4
 1360: 1  066F	F5 2D				mov	color, a
 1361: 1  0671	08		do_csi_mx3:	inc	r0
 1362: 1  0672	D9 A4				djnz	r1, do_csi_mc
 1363: 1  0674	22				ret
 1364: 1
 1365: 1  0675	B4 6E 4F	do_csi_n:	cjne	a, #'n', do_csi_cc	;terminal status report
 1366: 1  0678	E5 26				mov	a, arg0
 1367: 1  067A	B4 05 0E			cjne	a, #5, do_csi_n6

ASEM-51 V1.3                                        Copyright (c) 2002 by W.W. Heinz                                         PAGE 26



 Line  I  Addr  Code            Source

 1368: 1  067D	78 01				mov	r0, #1			;always OK: "ESC [ 0 n"
 1369: 1  067F	E8		do_csi_n1:	mov	a, r0
 1370: 1  0680	12 06 BA			call	getreport
 1371: 1  0683	12 0B A9			call	cout
 1372: 1  0686	08				inc	r0
 1373: 1  0687	B8 05 F5			cjne	r0, #5, do_csi_n1
 1374: 1  068A	22				ret
 1375: 1  068B	B4 06 39	do_csi_n6:	cjne	a, #6, do_csi_cc	;report cursor position
 1376: 1  068E	74 1B				mov	a, #ESC
 1377: 1  0690	12 0B A9			call	cout
 1378: 1  0693	74 5B				mov	a, #'['
 1379: 1  0695	12 0B A9			call	cout
 1380: 1  0698	E5 38				mov	a, cursory
 1381: 1  069A	95 31				subb	a, top
 1382: 1  069C	12 06 AE			call	sendpos
 1383: 1  069F	74 3B				mov	a, #';'
 1384: 1  06A1	12 0B A9			call	cout
 1385: 1  06A4	E5 37				mov	a, cursorx
 1386: 1  06A6	12 06 AE			call	sendpos
 1387: 1  06A9	74 52				mov	a, #'R'
 1388: 1  06AB	02 0B A9			jmp	cout
 1389: 1
 1390: 1  06AE	04		sendpos:	inc	a
 1391: 1  06AF	12 0A F6			call	hex2dez
 1392: 1  06B2	E8				mov	a, r0
 1393: 1  06B3	12 0B A9			call	cout
 1394: 1  06B6	E9				mov	a, r1
 1395: 1  06B7	02 0B A9			jmp	cout
 1396: 1
 1397: 1  06BA	83		getreport:	movc	a, @a+pc
 1398: 1  06BB	22				ret
 1399: 1  06BC	1B 5B 30 6E	reportok:	db	ESC, "[0n"		;terminal OK
 1400: 1  06C0	1B 5B 3F 31	reportda:	db	ESC, "[?1;0c"		;device attributes (VT100, no options)
       1  06C4	3B 30 63
 1401: 1
 1402: 1  06C7	B4 63 0D	do_csi_cc:	cjne	a, #'c', do_csi_r
 1403: 1  06CA	78 05		do_csi_cc2:	mov	r0, #5			;reportda
 1404: 1  06CC	E8		do_csi_cc1:	mov	a, r0
 1405: 1  06CD	D1 BA				call	getreport
 1406: 1  06CF	12 0B A9			call	cout
 1407: 1  06D2	08				inc	r0
 1408: 1  06D3	B8 0C F6			cjne	r0, #5+7, do_csi_cc1
 1409: 1  06D6	22				ret
 1410: 1
 1411: 1  06D7	B4 72 45	do_csi_r:	cjne	a, #'r', do_csi_J	;set scroll margins
 1412: 1  06DA	E5 25				mov	a, nargs
 1413: 1  06DC	70 08				jnz	do_csi_ra		;nargs > 0
 1414: 1  06DE	75 31 00			mov	top, #0
 1415: 1  06E1	75 32 17			mov	bottom, #HEIGHT-1
 1416: 1  06E4	80 29				sjmp	do_csi_rc
 1417: 1  06E6	12 08 F8	do_csi_ra:	call	args_gr_zero
 1418: 1  06E9	B4 02 00			cjne	a, #2, $+3
 1419: 1  06EC	50 0A				jnc	do_csi_rb		;>= 2 args
 1420: 1  06EE	85 26 31			mov	top, arg0
 1421: 1  06F1	15 31				dec	top
 1422: 1  06F3	75 32 17			mov	bottom, #HEIGHT-1

ASEM-51 V1.3                                        Copyright (c) 2002 by W.W. Heinz                                         PAGE 27



 Line  I  Addr  Code            Source

 1423: 1  06F6	80 17				sjmp	do_csi_rc
 1424: 1  06F8	E5 26		do_csi_rb:	mov	a, arg0
 1425: 1  06FA	95 27				subb	a, arg1			;carry clear!
 1426: 1  06FC	50 21				jnc	do_csi_J		; a >= b
 1427: 1  06FE	85 26 31			mov	top, arg0
 1428: 1  0701	15 31				dec	top
 1429: 1
 1430: 1  0703	E5 27				mov	a, arg1
 1431: 1  0705	B4 19 00			cjne	a, #HEIGHT+1, $+3
 1432: 1  0708	40 02				jc	do_csi_re
 1433: 1  070A	74 18				mov	a, #HEIGHT
 1434: 1  070C	14		do_csi_re:	dec	a
 1435: 1  070D	F5 32				mov	bottom, a
 1436: 1
 1437: 1  070F	E4		do_csi_rc:	clr	a			;cursor home
 1438: 1  0710	F8				mov	r0, a
 1439: 1  0711	F9				mov	r1, a
 1440: 1  0712	F5 37				mov	cursorx, a
 1441: 1  0714	F5 38				mov	cursory, a
 1442: 1  0716	30 11 03			jnb	origin, do_csi_rd
 1443: 1  0719	85 31 38			mov	cursory, top
 1444: 1  071C	02 09 0C	do_csi_rd:	jmp	ansi_move
 1445: 1
 1446: 1
 1447: 1  071F	B4 4A 35	do_csi_J:	cjne	a, #'J', do_csi_ques		;ED  Erase In Display
 1448: 1  0722	A8 26				mov	r0, arg0
 1449: 1  0724	B8 00 0F	do_csi_Ja:	cjne	r0, #0, do_csi_Jb
 1450: 1  0727	A8 38		do_csi_Jc:	mov	r0, cursory			;Erase from the active position to the end o
       1			f the screen, inclusive (default)
 1451: 1  0729	79 17				mov	r1, #HEIGHT-1			;y from cursory to HEIGHT-1
 1452: 1  072B	AA 37				mov	r2, cursorx			;start position x
 1453: 1  072D	74 50				mov	a, #WIDTH			;chars to erase first line
 1454: 1  072F	9A				subb	a, r2
 1455: 1  0730	FB				mov	r3, a
 1456: 1  0731	7D 50				mov	r5, #WIDTH			;chars to erase last line
 1457: 1  0733	02 0A 8C			jmp	clear_lines
 1458: 1
 1459: 1  0736	B8 01 0E	do_csi_Jb:	cjne	r0, #1, do_csi_Jd
 1460: 1  0739	78 00				mov	r0, #0				;Erase from start of the screen to the activ
       1			e position, inclusive
 1461: 1  073B	A9 38				mov	r1, cursory
 1462: 1  073D	7A 00				mov	r2, #0
 1463: 1  073F	7B 50				mov	r3, #WIDTH			;chars to erase first line
 1464: 1  0741	AD 37				mov	r5, cursorx
 1465: 1  0743	0D				inc	r5				;chars to erase last line
 1466: 1  0744	02 0A 8C			jmp	clear_lines
 1467: 1
 1468: 1  0747	B8 02 0D	do_csi_Jd:	cjne	r0, #2, do_csi_ques
 1469: 1  074A	78 00				mov	r0, #0				;Erase all of the display  all lines are er
       1			ased and the cursor does not move.
 1470: 1  074C	79 17				mov	r1, #HEIGHT-1
 1471: 1  074E	7A 00				mov	r2, #0
 1472: 1  0750	7B 50				mov	r3, #WIDTH			;chars to erase first line
 1473: 1  0752	7D 50				mov	r5, #WIDTH			;chars to erase first line
 1474: 1  0754	02 0A 8C			jmp	clear_lines
 1475: 1

ASEM-51 V1.3                                        Copyright (c) 2002 by W.W. Heinz                                         PAGE 28



 Line  I  Addr  Code            Source

 1476: 1  0757	B4 3F 04	do_csi_ques:	cjne	a, #'?', do_csi_K
 1477: 1  075A	75 33 0E			mov	state, #ST_CSI_Q
 1478: 1  075D	22				ret
 1479: 1
 1480: 1  075E	B4 4B 2A	do_csi_K:	cjne	a, #'K', do_csi_g
 1481: 1  0761	A8 38				mov	r0, cursory
 1482: 1  0763	A9 38				mov	r1, cursory
 1483: 1  0765	E5 26				mov	a, arg0
 1484: 1  0767	B4 00 09			cjne	a, #0, do_csi_Ka		;Erase from the active position to the end o
       1			f the line, inclusive (default)
 1485: 1  076A	AA 37				mov	r2, cursorx
 1486: 1  076C	74 50				mov	a, #WIDTH
 1487: 1  076E	9A				subb	a, r2
 1488: 1  076F	FD				mov	r5, a
 1489: 1  0770	02 0A 8C			jmp	clear_lines
 1490: 1  0773	B4 01 08	do_csi_Ka:	cjne	a, #1, do_csi_Kb		;Erase from the start of the screen to the a
       1			ctive position, inclusive
 1491: 1  0776	7A 00				mov	r2, #0
 1492: 1  0778	AD 37				mov	r5, cursorx
 1493: 1  077A	0D				inc	r5
 1494: 1  077B	02 0A 8C			jmp	clear_lines
 1495: 1  077E	B4 02 07	do_csi_Kb:	cjne	a, #2, do_csi_end1		;Erase all of the line, inclusive
 1496: 1  0781	7A 00				mov	r2, #0
 1497: 1  0783	7D 50				mov	r5, #WIDTH
 1498: 1  0785	02 0A 8C			jmp	clear_lines
 1499: 1  0788	02 08 63	do_csi_end1:	jmp	do_csi_end
 1500: 1
 1501: 1  078B	B4 67 14	do_csi_g:	cjne	a, #'g', do_csi_L
 1502: 1  078E	E5 26				mov	a, arg0
 1503: 1  0790	B4 03 03			cjne	a, #3, do_csi_g1
 1504: 1  0793	02 09 BB			jmp	cleartabu			;clear all tabs
 1505: 1  0796	12 09 C7	do_csi_g1:	call	tab_set_r0_r1
 1506: 1  0799	12 09 D7			call	getbit
 1507: 1  079C	F4				cpl	a
 1508: 1  079D	56				anl	a, @r0
 1509: 1  079E	F6				mov	@r0, a
 1510: 1  079F	02 08 63			jmp	do_csi_end
 1511: 1
 1512: 1  07A2	B4 4C 26	do_csi_L:	cjne	a, #'L', do_csi_MM		;insert line
 1513: 1  07A5	12 08 F8			call	args_gr_zero
 1514: 1  07A8	E5 38				mov	a, cursory			;check if within bounds
 1515: 1  07AA	B5 31 00			cjne	a, top, $+3
 1516: 1  07AD	40 D9				jc	do_csi_end1
 1517: 1  07AF	B5 32 00			cjne	a, bottom, $+3
 1518: 1  07B2	80 02				sjmp	do_csi_L1
 1519: 1  07B4	50 D2				jnc	do_csi_end1
 1520: 1  07B6	12 0A E0	do_csi_L1:	call	cursor_off
 1521: 1  07B9	A8 26				mov	r0, arg0
 1522: 1  07BB	7B FF		do_csi_L2:	mov	r3, #-1
 1523: 1  07BD	C3				clr	c
 1524: 1  07BE	E5 32				mov	a, bottom
 1525: 1  07C0	95 38				subb	a, cursory
 1526: 1  07C2	FC				mov	r4, a
 1527: 1  07C3	12 09 FE			call	scroll_r4
 1528: 1  07C6	D8 F3				djnz	r0, do_csi_L2
 1529: 1  07C8	02 0A CE			jmp	cursor_on

ASEM-51 V1.3                                        Copyright (c) 2002 by W.W. Heinz                                         PAGE 29



 Line  I  Addr  Code            Source

 1530: 1
 1531: 1  07CB	B4 4D 2D	do_csi_MM:	cjne	a, #'M', do_csi_hh		;delete line
 1532: 1  07CE	12 08 F8			call	args_gr_zero
 1533: 1  07D1	E5 38				mov	a, cursory			;check if within bounds
 1534: 1  07D3	B5 31 00			cjne	a, top, $+3
 1535: 1  07D6	40 B0				jc	do_csi_end1
 1536: 1  07D8	B5 32 00			cjne	a, bottom, $+3
 1537: 1  07DB	80 02				sjmp	do_csi_MM1
 1538: 1  07DD	50 A9				jnc	do_csi_end1
 1539: 1  07DF	12 0A E0	do_csi_MM1:	call	cursor_off
 1540: 1  07E2	A8 26				mov	r0, arg0
 1541: 1  07E4	C0 31				push	top
 1542: 1  07E6	7B 01		do_csi_MM2:	mov	r3, #1
 1543: 1  07E8	C3				clr	c
 1544: 1  07E9	E5 32				mov	a, bottom
 1545: 1  07EB	95 38				subb	a, cursory
 1546: 1  07ED	FC				mov	r4, a
 1547: 1  07EE	85 38 31			mov	top, cursory
 1548: 1  07F1	12 09 FE			call	scroll_r4
 1549: 1  07F4	D8 F0				djnz	r0, do_csi_MM2
 1550: 1  07F6	D0 31				pop	top
 1551: 1  07F8	02 0A CE			jmp	cursor_on
 1552: 1
 1553: 1  07FB	75 33 00	do_csi_hh:	mov	state, #ST_IDLE			;h set NEWLINE / INSERT
 1554: 1  07FE	85 22 3C			mov	oldstatus, flags2
 1555: 1
 1556: 1  0801	B4 68 16			cjne	a, #'h', do_csi_ll		;set mode
 1557: 1  0804	78 26				mov	r0, #arg0
 1558: 1  0806	A9 25				mov	r1, nargs
 1559: 1  0808	B9 00 01			cjne	r1, #0, do_csi_hh1		;>= 1 arg
 1560: 1  080B	22				ret
 1561: 1  080C	B6 14 02	do_csi_hh1:	cjne	@r0, #LNM, do_csi_hh2
 1562: 1  080F	D2 12				setb	newlinemode			;set newlinemode
 1563: 1  0811	B6 04 02	do_csi_hh2:	cjne	@r0, #IRM, do_csi_hhx
 1564: 1  0814	D2 13				setb	insert				;set insert mode
 1565: 1  0816	08		do_csi_hhx:	inc	r0
 1566: 1  0817	D9 F3				djnz	r1, do_csi_hh1
 1567: 1  0819	22				ret
 1568: 1
 1569: 1  081A	B4 6C 16	do_csi_ll:	cjne	a, #'l', do_csi_P		;h reset NEWLINE / INSERT
 1570: 1  081D	78 26				mov	r0, #arg0
 1571: 1  081F	A9 25				mov	r1, nargs
 1572: 1  0821	B9 00 01			cjne	r1, #0, do_csi_ll1
 1573: 1  0824	22				ret
 1574: 1  0825	B6 14 02	do_csi_ll1:	cjne	@r0, #LNM, do_csi_ll2
 1575: 1  0828	C2 12				clr	newlinemode			;clear newlinemode
 1576: 1  082A	B6 04 02	do_csi_ll2:	cjne	@r0, #IRM, do_csi_llx
 1577: 1  082D	C2 13				clr	insert				;clear insert mode
 1578: 1  082F	08		do_csi_llx:	inc	r0
 1579: 1  0830	D9 F3				djnz	r1, do_csi_ll1
 1580: 1  0832	22				ret
 1581: 1
 1582: 1  0833	B4 50 2D	do_csi_P:	cjne	a, #'P', do_csi_end		;Delete Character (DCH)
 1583: 1  0836	12 08 F8			call	args_gr_zero
 1584: 1  0839	A9 26				mov	r1, arg0
 1585: 1  083B	C3		do_csi_P2:	clr	c

ASEM-51 V1.3                                        Copyright (c) 2002 by W.W. Heinz                                         PAGE 30



 Line  I  Addr  Code            Source

 1586: 1  083C	74 4F				mov	a, #WIDTH-1
 1587: 1  083E	95 37				subb	a, cursorx
 1588: 1  0840	60 21				jz	do_csi_end			;nothing to do
 1589: 1  0842	23				rl	a
 1590: 1  0843	F8				mov	r0, a
 1591: 1  0844	12 0B 03			call	comp_dptr			;compute dptr1
 1592: 1  0847	85 84 82			mov	dp0l, dp1l			;copy to dptr0
 1593: 1  084A	85 85 83			mov	dp0h, dp1h
 1594: 1  084D	A3				inc	dptr				;
 1595: 1  084E	A3				inc	dptr				;dptr0 = dptr1 + 2
 1596: 1
 1597: 1  084F	E0		do_csi_P1:	movx	a, @dptr
 1598: 1  0850	E5 90				mov	a, P1
 1599: 1  0852	A3				inc	dptr
 1600: 1  0853	05 A2				inc	auxr1
 1601: 1  0855	F0				movx	@dptr, a
 1602: 1  0856	A3				inc	dptr
 1603: 1  0857	05 A2				inc	auxr1
 1604: 1  0859	D8 F4				djnz	r0, do_csi_P1
 1605: 1  085B	05 A2				inc	auxr1
 1606: 1  085D	E4				clr	a
 1607: 1  085E	F0				movx	@dptr, a
 1608: 1  085F	05 A2				inc	auxr1
 1609: 1  0861	D9 D8				djnz	r1, do_csi_P2
 1610: 1  0863	22		do_csi_end:	ret
 1611: 1
 1612: 1			;		mov	a, r0
 1613: 1			;		call	phex
 1614: 1			;		mov	a, dp0h
 1615: 1			;		call	phex
 1616: 1			;		mov	a, dp0l
 1617: 1			;		call	phex
 1618: 1			;		call	space
 1619: 1			;		mov	a, dp1h
 1620: 1			;		call	phex
 1621: 1			;		mov	a, dp1l
 1622: 1			;		call	phex
 1623: 1			;		call	space
 1624: 1			;		call	space
 1625: 1
 1626: 1			;===============================================
 1627: 1			; state CSI_questionmark "ESC [ ?"
 1628: 1			;===============================================
 1629: 1  0864	12 09 63	do_csi_q:	call	isparm				;is parameter?
 1630: 1  0867	50 09				jnc	do_csi_q_h			;no
 1631: 1  0869	85 33 23			mov	retstate, state
 1632: 1  086C	75 33 0A			mov	state, #ST_CMD_ARG
 1633: 1  086F	02 08 CD			jmp	do_cmd_arg
 1634: 1
 1635: 1  0872	75 33 00	do_csi_q_h:	mov	state, #ST_IDLE
 1636: 1  0875	85 22 3C			mov	oldstatus, flags2
 1637: 1
 1638: 1  0878	B4 68 19			cjne	a, #'h', do_csi_q_l		;set mode
 1639: 1  087B	78 26				mov	r0, #arg0
 1640: 1  087D	A9 25				mov	r1, nargs
 1641: 1  087F	B9 00 01			cjne	r1, #0, do_csi_q_h1		;>= 1 arg

ASEM-51 V1.3                                        Copyright (c) 2002 by W.W. Heinz                                         PAGE 31



 Line  I  Addr  Code            Source

 1642: 1  0882	22				ret
 1643: 1  0883	B6 07 02	do_csi_q_h1:	cjne	@r0, #DECAWM, do_csi_q_h2	;set auto wrap
 1644: 1  0886	D2 10				setb	wrap
 1645: 1  0888	B6 06 05	do_csi_q_h2:	cjne	@r0, #DECOM, do_csi_q_hx	;set origin
 1646: 1  088B	D2 11				setb	origin
 1647: 1  088D	02 07 0F			jmp	do_csi_rc			;position cursor home
 1648: 1  0890	08		do_csi_q_hx:	inc	r0
 1649: 1  0891	D9 F0				djnz	r1, do_csi_q_h1
 1650: 1  0893	22				ret
 1651: 1
 1652: 1  0894	B4 6C 19	do_csi_q_l:	cjne	a, #'l', do_csi_q_end		;reset mode
 1653: 1  0897	78 26				mov	r0, #arg0
 1654: 1  0899	A9 25				mov	r1, nargs
 1655: 1  089B	B9 00 02			cjne	r1, #0, do_csi_q_l1
 1656: 1  089E	80 C3				sjmp	do_csi_end
 1657: 1  08A0	B6 07 02	do_csi_q_l1:	cjne	@r0, #DECAWM, do_csi_q_l2	;reset auto wrap
 1658: 1  08A3	C2 10				clr	wrap
 1659: 1  08A5	B6 06 05	do_csi_q_l2:	cjne	@r0, #DECOM, do_csi_q_lx	;reset origin
 1660: 1  08A8	C2 11				clr	origin
 1661: 1  08AA	02 07 0F			jmp	do_csi_rc			;position cursor home
 1662: 1  08AD	08		do_csi_q_lx:	inc	r0
 1663: 1  08AE	D9 F0				djnz	r1, do_csi_q_l1
 1664: 1  08B0	22		do_csi_q_end:	ret
 1665: 1
 1666: 1
 1667: 1			;===============================================
 1668: 1			; state ESC_questionmark "ESC ?"
 1669: 1			;===============================================
 1670: 1  08B1			do_esc_q:
 1671: 1  08B1	75 33 00			mov	state, #ST_IDLE
 1672: 1  08B4	22				ret
 1673: 1
 1674: 1			;===============================================
 1675: 1			; state ESC_hash "ESC #"
 1676: 1			;===============================================
 1677: 1  08B5	75 33 00	do_esc_hash:	mov	state, #ST_IDLE
 1678: 1
 1679: 1  08B8	B4 38 05			cjne	a, #'8', do_esc_hash_end
 1680: 1  08BB	7C 45				mov	r4, #'E'
 1681: 1  08BD	02 0A 81			jmp	fill_screen
 1682: 1
 1683: 1  08C0			do_esc_hash_end:
 1684: 1  08C0	22				ret
 1685: 1
 1686: 1
 1687: 1			;===============================================
 1688: 1			; state ESC right-bracket "ESC )"
 1689: 1			;===============================================
 1690: 1  08C1			do_esc_rbrack:
 1691: 1			;===============================================
 1692: 1			; state ESC left-bracket "ESC ("
 1693: 1			;===============================================
 1694: 1  08C1	75 33 00	do_esc_lbrack:	mov	state, #ST_IDLE
 1695: 1
 1696: 1  08C4	B4 30 03			cjne	a, #'0', do_esc_lb_1
 1697: 1  08C7	D2 00				setb	special

ASEM-51 V1.3                                        Copyright (c) 2002 by W.W. Heinz                                         PAGE 32



 Line  I  Addr  Code            Source

 1698: 1  08C9	22				ret
 1699: 1  08CA	C2 00		do_esc_lb_1:	clr	special
 1700: 1  08CC	22				ret
 1701: 1
 1702: 1
 1703: 1			;===============================================
 1704: 1			; state command arg
 1705: 1			;===============================================
 1706: 1  08CD			do_cmd_arg:
 1707: 1  08CD	F9				mov	r1, a			;save a
 1708: 1  08CE	74 26				mov	a, #arg0		;pointer to vars
 1709: 1  08D0	25 25				add	a, nargs
 1710: 1  08D2	F8				mov	r0, a
 1711: 1  08D3	E9				mov	a, r1
 1712: 1  08D4	12 09 6F			call	isdigit
 1713: 1  08D7	50 0A				jnc	do_cmd_arg_1		;no digit
 1714: 1			;		inc	argcnt
 1715: 1  08D9	E6				mov	a, @r0
 1716: 1  08DA	75 F0 0A			mov	b, #10
 1717: 1  08DD	A4				mul	ab
 1718: 1  08DE	29				add	a, r1
 1719: 1  08DF	94 30				subb	a, #'0'
 1720: 1  08E1	F6				mov	@r0, a
 1721: 1  08E2	22				ret
 1722: 1  08E3	B4 3B 03	do_cmd_arg_1:	cjne	a, #';', do_cmd_arg_2
 1723: 1  08E6	05 25				inc	nargs
 1724: 1			;		mov	a, argcnt
 1725: 1			;		jnz	do_cmd_arg_3
 1726: 1			;		mov	@r0, #1
 1727: 1			;do_cmd_arg_3:	mov	argcnt, #0
 1728: 1  08E8	22				ret
 1729: 1  08E9	B4 1B 04	do_cmd_arg_2:	cjne	a, #C_ESC, do_cmd_arg_3
 1730: 1  08EC	75 33 02			mov	state, #ST_ESC
 1731: 1  08EF	22				ret
 1732: 1  08F0	05 25		do_cmd_arg_3:	inc	nargs
 1733: 1  08F2	85 23 33			mov	state, retstate
 1734: 1  08F5			do_cmd_arg_4:	;mov	retstate, #0
 1735: 1  08F5	02 03 5A			jmp	ansiout
 1736: 1
 1737: 1
 1738: 1			;
 1739: 1			; set arg0-3 to one if zero
 1740: 1			;
 1741: 1  08F8	C0 00		args_gr_zero:	push	ar0
 1742: 1  08FA	C0 01				push	ar1
 1743: 1  08FC	78 26				mov	r0, #arg0
 1744: 1  08FE	79 04				mov	r1, #4
 1745: 1  0900	B6 00 01	args_gr_zero_2:	cjne	@r0, #0, args_gr_zero_1
 1746: 1  0903	06				inc	@r0
 1747: 1  0904	08		args_gr_zero_1:	inc	r0
 1748: 1  0905	D9 F9				djnz	r1, args_gr_zero_2
 1749: 1  0907	D0 01				pop	ar1
 1750: 1  0909	D0 00				pop	ar0
 1751: 1  090B	22				ret
 1752: 1
 1753: 1			; r0: x - offset

ASEM-51 V1.3                                        Copyright (c) 2002 by W.W. Heinz                                         PAGE 33



 Line  I  Addr  Code            Source

 1754: 1			; r1: y - offset
 1755: 1			; r2: 0: without scroll, 1: with scroll
 1756: 1			; r3: scroll occured
 1757: 1			; r4: 0 = within bounds, 1 = out of bounds
 1758: 1  090C			ansi_move:
 1759: 1					;call	cursor_off
 1760: 1
 1761: 1  090C	7B 00				mov	r3, #0			;no scroll
 1762: 1  090E	AC 31				mov	r4, top
 1763: 1  0910	AD 32				mov	r5, bottom
 1764: 1
 1765: 1			;
 1766: 1			; check new x-posiion
 1767: 1			;
 1768: 1  0912	E8				mov	a, r0
 1769: 1  0913	25 37				add	a, cursorx		;< 0?
 1770: 1  0915	30 E7 01			jnb	acc.7, ansi_move_x1	;no, check width
 1771: 1  0918	E4				clr	a
 1772: 1  0919	B4 50 00	ansi_move_x1:	cjne	a, #WIDTH, $+3		;>= WIDTH ?
 1773: 1  091C	40 02				jc	ansi_move_x3		;< WIDTH
 1774: 1  091E	74 4F				mov	a, #WIDTH-1		;=WIDTH, set to WIDTH-1
 1775: 1  0920	F5 37		ansi_move_x3:	mov	cursorx, a
 1776: 1
 1777: 1			;
 1778: 1			; check if within margins
 1779: 1			;
 1780: 1  0922	20 11 13			jb	origin, ansi_move_y	;if origin, no out-of-margins
 1781: 1  0925	E5 38				mov	a, cursory		;check margins
 1782: 1  0927	B5 31 00			cjne	a, top, $+3
 1783: 1  092A	40 07				jc	ansi_move_m1		;< top!
 1784: 1  092C	B5 32 02			cjne	a, bottom, $+5
 1785: 1  092F	80 07				sjmp	ansi_move_y		;= bottom
 1786: 1  0931	40 05				jc	ansi_move_y		;< bottom
 1787: 1  0933	E4		ansi_move_m1:	clr	a
 1788: 1  0934	FA				mov	r2, a			;no scroll
 1789: 1  0935	FC				mov	r4, a
 1790: 1  0936	7D 17				mov	r5, #HEIGHT-1
 1791: 1
 1792: 1			;
 1793: 1			; check y-position
 1794: 1			;
 1795: 1  0938	E9		ansi_move_y:	mov	a, r1
 1796: 1  0939	25 38				add	a, cursory		;
 1797: 1  093B	20 E7 05			jb	acc.7, ansi_move_y2	;< 0
 1798: 1  093E	B5 04 00			cjne	a, ar4, $+3		;
 1799: 1  0941	50 04				jnc	ansi_move_y1		;>= top
 1800: 1  0943	C3		ansi_move_y2:	clr	c
 1801: 1  0944	9C				subb	a, r4
 1802: 1  0945	FB				mov	r3, a
 1803: 1  0946	EC				mov	a, r4			;< top, set to top
 1804: 1
 1805: 1  0947	B5 05 02	ansi_move_y1:	cjne	a, ar5, $+5		;= bottom ?
 1806: 1  094A	80 05				sjmp	ansi_move_y3		;yes
 1807: 1  094C	40 03				jc	ansi_move_y3		;< bottom?
 1808: 1  094E	9D				subb	a, r5			;no, >bottom
 1809: 1  094F	FB				mov	r3, a

ASEM-51 V1.3                                        Copyright (c) 2002 by W.W. Heinz                                         PAGE 34



 Line  I  Addr  Code            Source

 1810: 1  0950	ED				mov	a, r5			;set to bottom
 1811: 1  0951	F5 38		ansi_move_y3:	mov	cursory, a
 1812: 1  0953	12 0A E0			call	cursor_off
 1813: 1
 1814: 1  0956	EA				mov	a, r2			;is scrolling enabled ?
 1815: 1  0957	60 06				jz	ansi_move_ex		;no, exit
 1816: 1  0959	EB				mov	a, r3			;did scrolling occur?
 1817: 1  095A	60 03				jz	ansi_move_ex		;no, exit
 1818: 1
 1819: 1  095C	12 09 F8			call	scroll
 1820: 1
 1821: 1  095F	12 0A C0	ansi_move_ex:	call	draw_cursor
 1822: 1  0962	22				ret
 1823: 1
 1824: 1			;ansi_line_left:
 1825: 1					;call	phex
 1826: 1			;		ret
 1827: 1
 1828: 1  0963	12 09 6F	isparm:		call	isdigit
 1829: 1  0966	40 04				jc	isparmex
 1830: 1  0968	B4 3B 02			cjne	a, #';', isparm1
 1831: 1  096B	D3				setb	c
 1832: 1  096C	22		isparmex:	ret
 1833: 1  096D	C3		isparm1:	clr	c
 1834: 1  096E	22				ret
 1835: 1			;
 1836: 1			; is acc beteen '0' and '9'?
 1837: 1			; if so, return carry clear, set otherwise
 1838: 1			;
 1839: 1  096F	B4 30 00	isdigit:	cjne	a, #'0', isdigit1
 1840: 1  0972	50 02		isdigit1:	jnc	isdigit2		;>= '0'
 1841: 1  0974	B3				cpl	c
 1842: 1  0975	22				ret				;carry set
 1843: 1  0976	B4 3A 00	isdigit2:	cjne	a, #'9'+1, isdigit3
 1844: 1  0979	22		isdigit3:	ret				;= '9' carry clear
 1845: 1
 1846: 1
 1847: 1
 1848: 1			;===============================================
 1849: 1			; reset terminal
 1850: 1			;===============================================
 1851: 1  097A	C2 AF		term_reset:	clr	ea
 1852: 1  097C	12 09 A3			call	clear_vars
 1853: 1  097F	75 3D 70			mov	defcol, #DEFAULTCOLOR
 1854: 1  0982	85 3D 2D			mov	color, defcol
 1855: 1  0985	75 32 17			mov	bottom, #HEIGHT-1
 1856: 1  0988	75 34 80			mov	serstart, #serbuf
 1857: 1  098B	75 35 80			mov	serend, #serbuf
 1858: 1  098E	75 39 0A			mov	t0cnt, #C_TIME
 1859: 1
 1860: 1			;		inc	baudidx
 1861: 1			;		setb	databits
 1862: 1			;		setb	evenodd
 1863: 1			;		setb	termmode
 1864: 1
 1865: 1  0991	12 03 4E			call	setbaud

ASEM-51 V1.3                                        Copyright (c) 2002 by W.W. Heinz                                         PAGE 35



 Line  I  Addr  Code            Source

 1866: 1  0994	12 09 AD			call	resettabu
 1867: 1  0997	12 0A 7F			call	clear_screen
 1868: 1  099A	D2 AF				setb	ea
 1869: 1
 1870: 1  099C	12 0E 0A			call	prtstatus
 1871: 1  099F	12 0A C0			call	draw_cursor
 1872: 1  09A2	22				ret
 1873: 1
 1874: 1			;
 1875: 1			; clear VARLEN vars from "state" on
 1876: 1			;
 1877: 1  09A3			clear_vars:
 1878: 1			;		mov	r0, #080h
 1879: 1			;clear_v2:	mov	@r0, #0aah
 1880: 1			;		inc	r0
 1881: 1			;		cjne	r0, #0, clear_v2
 1882: 1
 1883: 1  09A3	78 20				mov	r0, #VARS	;clear term-vars
 1884: 1  09A5	79 30				mov	r1, #VARLEN
 1885: 1  09A7	76 00		clear_v1:	mov	@r0, #0
 1886: 1  09A9	08				inc	r0
 1887: 1  09AA	D9 FB				djnz	r1, clear_v1
 1888: 1  09AC	22				ret
 1889: 1
 1890: 1			;dump_vars:	mov	r0, #0
 1891: 1			;dump_vars2:	mov	r1, #16
 1892: 1			;		mov	a, r0
 1893: 1			;		acall	phex
 1894: 1			;		acall	space
 1895: 1			;		mov	a, #':'
 1896: 1			;		acall	cout
 1897: 1			;		acall	space
 1898: 1			;dump_vars1:	mov	a, @r0
 1899: 1			;		acall	phex
 1900: 1			;		acall	space
 1901: 1			;		inc	r0
 1902: 1			;		djnz	r1, dump_vars1
 1903: 1			;		acall	newline
 1904: 1			;		cjne	r0, #0, dump_vars2
 1905: 1			;		ret
 1906: 1
 1907: 1  09AD	78 40		resettabu:	mov	r0, #tabutab
 1908: 1  09AF	79 0A				mov	r1, #10
 1909: 1  09B1	76 80		resettabu1:	mov	@r0, #128
 1910: 1  09B3	08				inc	r0
 1911: 1  09B4	D9 FB				djnz	r1, resettabu1
 1912: 1  09B6	89 40				mov	tabutab, r1	;R1 = 0
 1913: 1  09B8	05 49				inc	tabutab+9	;128 + 1 = 129
 1914: 1  09BA	22				ret
 1915: 1
 1916: 1
 1917: 1  09BB	78 40		cleartabu:	mov	r0, #tabutab
 1918: 1  09BD	79 0A				mov	r1, #10
 1919: 1  09BF	76 00		cleartabu1:	mov	@r0, #0
 1920: 1  09C1	08				inc	r0
 1921: 1  09C2	D9 FB				djnz	r1, cleartabu1

ASEM-51 V1.3                                        Copyright (c) 2002 by W.W. Heinz                                         PAGE 36



 Line  I  Addr  Code            Source

 1922: 1  09C4	05 49				inc	tabutab+9	;tabutab+9 = 1
 1923: 1  09C6	22				ret
 1924: 1
 1925: 1			;
 1926: 1			; compute
 1927: 1			; r0 = cursorx / 8 (byte holding tab-info) + tabutab
 1928: 1			; r1 = cursorx AND 7 (bi tposition within byte)
 1929: 1			;
 1930: 1  09C7	E5 37		tab_set_r0_r1:	mov	a, cursorx
 1931: 1  09C9	03				rr	a
 1932: 1  09CA	03				rr	a
 1933: 1  09CB	03				rr	a
 1934: 1  09CC	54 0F				anl	a, #0fh
 1935: 1  09CE	24 40				add	a, #tabutab
 1936: 1  09D0	F8				mov	r0, a				;address byte
 1937: 1  09D1	E5 37				mov	a, cursorx
 1938: 1  09D3	54 07				anl	a, #7
 1939: 1  09D5	F9				mov	r1, a
 1940: 1  09D6	22				ret
 1941: 1
 1942: 1
 1943: 1  09D7	E9		getbit:		mov	a, r1
 1944: 1  09D8	04				inc	a
 1945: 1  09D9	83				movc	a, @a+pc
 1946: 1  09DA	22				ret
 1947: 1  09DB	80 40 20 10	getbittab:	db	128, 64, 32, 16, 8, 4, 2, 1
       1  09DF	08 04 02 01
 1948: 1
 1949: 1
 1950: 1  09E3	78 25		clearargs:	mov	r0, #nargs
 1951: 1  09E5	79 05				mov	r1, #5
 1952: 1  09E7	76 00		clearargs1:	mov	@r0, #0
 1953: 1  09E9	08				inc	r0
 1954: 1  09EA	D9 FB				djnz	r1, clearargs1
 1955: 1  09EC	22				ret
 1956: 1
 1957: 1
 1958: 1  09ED	E4		print:		clr	a
 1959: 1  09EE	93				movc	a, @a+dptr
 1960: 1  09EF	70 01				jnz	print1
 1961: 1  09F1	22				ret
 1962: 1  09F2	12 03 5A	print1:		call	ansiout
 1963: 1  09F5	A3				inc	dptr
 1964: 1  09F6	80 F5				sjmp	print
 1965: 1
 1966: 1			;msg1:		db	C_ESC, "[J", C_ESC, "[5;5H", 0
 1967: 1			;msg4:		db	C_ESC,"[5;65H", C_ESC,"[31mH", C_ESC,"[32mello ", C_ESC, "[mWorld", C_ESC, "
       1			[AJ", C_ESC, "[23;65Ha", C_ESC, "[H"
 1968: 1			;msg2:		db	"Hello world!", C_NEWLINE,0
 1969: 1			;msg3:		db	C_ESC, "[5C", C_ESC, "[7D", 0
 1970: 1
 1971: 1			;===============================================
 1972: 1			; pyhsical routines
 1973: 1			;===============================================
 1974: 1
 1975: 1			;===============================================

ASEM-51 V1.3                                        Copyright (c) 2002 by W.W. Heinz                                         PAGE 37



 Line  I  Addr  Code            Source

 1976: 1			; scrolls one line up or down
 1977: 1			; clear first or last line
 1978: 1			; r3 positive (0-127) scroll-up, scroll-down otherwise
 1979: 1			; r4 numbers of lines to scroll
 1980: 1			; ----------------------------------------------
 1981: 1			; r5 used for x-count
 1982: 1			;===============================================
 1983: 1  09F8	C3		scroll:		clr	c
 1984: 1  09F9	E5 32				mov	a, bottom
 1985: 1  09FB	95 31				subb	a, top
 1986: 1  09FD	FC				mov	r4, a			;number of lines to scroll
 1987: 1  09FE			scroll_r4:
 1988: 1  09FE	BB 80 00			cjne	r3, #128, $+3
 1989: 1  0A01	40 47				jc	scroll_up		;<128, positive, scroll up
 1990: 1
 1991: 1  0A03	E5 32				mov	a, bottom
 1992: 1  0A05	14				dec	a
 1993: 1  0A06	75 F0 A0			mov	b, #WIDTH*2
 1994: 1  0A09	A4				mul	ab
 1995: 1  0A0A	24 9F				add	a, #(WIDTH*2)-1
 1996: 1  0A0C	F5 82				mov	dp0l, a
 1997: 1  0A0E	E5 F0				mov	a, b
 1998: 1  0A10	34 80				addc 	a, #80h
 1999: 1  0A12	F5 83				mov	dp0h, a
 2000: 1
 2001: 1  0A14	E5 82				mov	a, dp0l
 2002: 1  0A16	24 A0				add	a, #WIDTH*2
 2003: 1  0A18	F5 84				mov	dp1l, a
 2004: 1  0A1A	E5 83				mov	a, dp0h
 2005: 1  0A1C	34 00				addc	a, #0
 2006: 1  0A1E	F5 85				mov	dp1h, a
 2007: 1
 2008: 1			;		call	phex16
 2009: 1			;		mov	a, dp1h
 2010: 1			;		call	phex
 2011: 1			;		mov	a, dp1l
 2012: 1			;		call	phex
 2013: 1			;		jmp	cursor_on
 2014: 1
 2015: 1  0A20	EC				mov	a, r4
 2016: 1  0A21	60 1F				jz	scroll_down_6
 2017: 1  0A23			scroll_down_4:
 2018: 1  0A23	7D A0				mov	r5, #WIDTH*2
 2019: 1  0A25			scroll_down_1:
 2020: 1  0A25	E0				movx	a, @dptr
 2021: 1  0A26	E5 90				mov	a, P1
 2022: 1  0A28	05 A2				inc	auxr1
 2023: 1  0A2A	F0				movx	@dptr, a
 2024: 1  0A2B	05 A2				inc	auxr1
 2025: 1
 2026: 1  0A2D	E5 82				mov	a, dp0l
 2027: 1  0A2F	70 02				jnz	scroll_down_2
 2028: 1  0A31	15 83				dec	dp0h
 2029: 1  0A33	15 82		scroll_down_2:	dec	dp0l
 2030: 1
 2031: 1  0A35	E5 84				mov	a, dp1l

ASEM-51 V1.3                                        Copyright (c) 2002 by W.W. Heinz                                         PAGE 38



 Line  I  Addr  Code            Source

 2032: 1  0A37	70 02				jnz	scroll_down_3
 2033: 1  0A39	15 85				dec	dp1h
 2034: 1  0A3B	15 84		scroll_down_3:	dec	dp1l
 2035: 1
 2036: 1  0A3D	DD E6				djnz	r5, scroll_down_1
 2037: 1  0A3F	DC E2				djnz	r4, scroll_down_4
 2038: 1
 2039: 1  0A41	A3				inc	dptr
 2040: 1
 2041: 1					;call	phex16
 2042: 1  0A42			scroll_down_6:
 2043: 1  0A42	7D A0				mov	r5, #WIDTH*2
 2044: 1  0A44	E4				clr	a
 2045: 1  0A45	F0		scroll_down_5:	movx	@dptr, a
 2046: 1  0A46	A3				inc	dptr
 2047: 1  0A47	DD FC				djnz	r5, scroll_down_5
 2048: 1
 2049: 1					;ajmp	cursor_on		;reactivate cursor
 2050: 1  0A49	22				ret
 2051: 1
 2052: 1  0A4A			scroll_up:
 2053: 1  0A4A	E5 31				mov	a, top			;dp0 = topline
 2054: 1  0A4C	75 F0 A0			mov	b, #WIDTH * 2		;dp1 = topline + 1
 2055: 1  0A4F	A4				mul	ab
 2056: 1  0A50	F5 82				mov	dp0l, a
 2057: 1  0A52	E5 F0				mov	a, b
 2058: 1  0A54	34 80				addc	a, #80h
 2059: 1  0A56	F5 83				mov	dp0h, a
 2060: 1
 2061: 1  0A58	E5 82				mov	a, dp0l
 2062: 1  0A5A	24 A0				add	a, #WIDTH * 2
 2063: 1  0A5C	F5 84				mov	dp1l, a
 2064: 1  0A5E	E5 83				mov	a, dp0h
 2065: 1  0A60	34 00				addc	a, #0
 2066: 1  0A62	F5 85				mov	dp1h, a
 2067: 1
 2068: 1  0A64	EC				mov	a, r4
 2069: 1  0A65	60 10				jz	scroll_up_4
 2070: 1
 2071: 1  0A67			scroll_up_1:
 2072: 1  0A67	7D A0				mov	r5, #WIDTH * 2
 2073: 1
 2074: 1  0A69	05 A2		scroll_up_2:	inc	auxr1			;copy from line n+1 to line n
 2075: 1  0A6B	E0				movx	a, @dptr
 2076: 1  0A6C	A3				inc	dptr
 2077: 1  0A6D	E5 90				mov	a, P1
 2078: 1  0A6F	05 A2				inc	auxr1
 2079: 1  0A71	F0				movx	@dptr, a
 2080: 1  0A72	A3				inc	dptr
 2081: 1  0A73	DD F4				djnz	r5, scroll_up_2
 2082: 1  0A75	DC F0				djnz	r4, scroll_up_1
 2083: 1
 2084: 1  0A77			scroll_up_4:
 2085: 1  0A77	7D A0				mov	r5, #WIDTH * 2		;clear last line
 2086: 1  0A79	E4				clr	a
 2087: 1  0A7A	F0		scroll_up_3:	movx	@dptr, a

ASEM-51 V1.3                                        Copyright (c) 2002 by W.W. Heinz                                         PAGE 39



 Line  I  Addr  Code            Source

 2088: 1  0A7B	A3				inc	dptr
 2089: 1  0A7C	DD FC				djnz	r5, scroll_up_3
 2090: 1
 2091: 1  0A7E	22				ret
 2092: 1					;ajmp	cursor_on		;restore cursor
 2093: 1
 2094: 1
 2095: 1			;
 2096: 1			; r0: top line
 2097: 1			; r1: bottom line
 2098: 1			; r2: start position first line
 2099: 1			; r3: chars to fill first line
 2100: 1			; r4: value filled with
 2101: 1			; r5; chars to fill last line
 2102: 1			;
 2103: 1  0A7F	7C 00		clear_screen:	mov	r4, #0
 2104: 1  0A81	E4		fill_screen:	clr	a
 2105: 1  0A82	F8				mov	r0, a
 2106: 1  0A83	79 17				mov	r1, #HEIGHT-1
 2107: 1  0A85	FA				mov	r2, a
 2108: 1  0A86	7B 50				mov	r3, #WIDTH
 2109: 1  0A88	7D 50				mov	r5, #WIDTH
 2110: 1  0A8A	80 02				sjmp	fill_lines
 2111: 1
 2112: 1  0A8C			clear_lines:
 2113: 1  0A8C	7C 00				mov	r4, #0				;fill with zero
 2114: 1  0A8E			fill_lines:
 2115: 1  0A8E	EA				mov	a, r2				;r2 = r2 * 2
 2116: 1  0A8F	23				rl	a
 2117: 1  0A90	FA				mov	r2, a
 2118: 1
 2119: 1  0A91	E9				mov	a, r1				;r1 = r1 - r0 + 1
 2120: 1  0A92	C3				clr	c
 2121: 1  0A93	98				subb	a, r0
 2122: 1  0A94	04				inc	a
 2123: 1  0A95	F9				mov	r1, a				;line count in r1
 2124: 1
 2125: 1  0A96	E8				mov	a, r0				;compute start-position from r0 und r2
 2126: 1  0A97	75 F0 A0			mov	b, #WIDTH * 2
 2127: 1  0A9A	A4				mul	ab
 2128: 1  0A9B	2A				add	a, r2
 2129: 1  0A9C	F5 84				mov	dp1l, a
 2130: 1  0A9E	E5 F0				mov	a, b
 2131: 1  0AA0	34 80				addc	a, #80h
 2132: 1  0AA2	F5 85				mov	dp1h, a
 2133: 1
 2134: 1  0AA4	05 A2				inc	auxr1				;switch to dptr1
 2135: 1  0AA6	A8 03				mov	r0, ar3				;chars to fill first line
 2136: 1
 2137: 1  0AA8	B9 01 02	clear_lines2:	cjne 	r1, #1, clear_lines1		;last line?
 2138: 1  0AAB	A8 05				mov	r0, ar5				;chars to fill last line
 2139: 1  0AAD	EC		clear_lines1:	mov	a, r4
 2140: 1  0AAE	F0				movx	@dptr, a
 2141: 1  0AAF	A3				inc	dptr
 2142: 1  0AB0	74 70				mov	a, #70h
 2143: 1  0AB2	F0				movx	@dptr, a

ASEM-51 V1.3                                        Copyright (c) 2002 by W.W. Heinz                                         PAGE 40



 Line  I  Addr  Code            Source

 2144: 1  0AB3	A3				inc	dptr
 2145: 1  0AB4	D8 F7				djnz	r0, clear_lines1
 2146: 1  0AB6	78 50				mov	r0, #WIDTH
 2147: 1  0AB8	D9 EE				djnz	r1, clear_lines2
 2148: 1  0ABA	05 A2				inc	auxr1
 2149: 1  0ABC	22				ret
 2150: 1
 2151: 1
 2152: 1			;===============================================
 2153: 1			; move cursor
 2154: 1			;===============================================
 2155: 1  0ABD	12 0A E0	move_cursor:	call	cursor_off			;restore color under cursor
 2156: 1  0AC0	12 0B 03	draw_cursor:	call	comp_dptr			;compute new address
 2157: 1  0AC3	05 A2				inc	auxr1				;increase by 1 for color
 2158: 1  0AC5	A3				inc	dptr
 2159: 1  0AC6	05 A2				inc	auxr1
 2160: 1  0AC8	85 84 2E			mov	cursorpos, dp1l			;store in cursorpos/+1
 2161: 1  0ACB	85 85 2F			mov	cursorpos+1, dp1h
 2162: 1
 2163: 1			;		ajmp	cursor_on			;save color under cursor
 2164: 1			;
 2165: 1			; save color under new cursor position in cursorsave
 2166: 1			; enable interrupt
 2167: 1			;
 2168: 1  0ACE			cursor_on:	;mov	a, cursorpos+1
 2169: 1					;call	phex
 2170: 1					;mov	a, cursorpos
 2171: 1					;call	phex
 2172: 1
 2173: 1  0ACE	85 2E 84			mov	dp1l, cursorpos
 2174: 1  0AD1	85 2F 85			mov	dp1h, cursorpos+1
 2175: 1  0AD4	05 A2				inc	auxr1
 2176: 1  0AD6	E0				movx	a, @dptr
 2177: 1  0AD7	E5 90				mov	a, P1
 2178: 1  0AD9	F5 30				mov	cursorsave, a
 2179: 1  0ADB	05 A2				inc	auxr1
 2180: 1  0ADD	D2 8C				setb	tr0				;enable timer
 2181: 1  0ADF	22				ret
 2182: 1
 2183: 1			;
 2184: 1			; clear timer0 interrupt
 2185: 1			; restore color under cursor
 2186: 1			; reset t0cnt
 2187: 1			;
 2188: 1  0AE0	C2 8C		cursor_off:	clr	tr0				;stop timer
 2189: 1
 2190: 1			;		mov	a, cursorpos+1
 2191: 1			;		call	phex
 2192: 1			;		mov	a, cursorpos
 2193: 1			;		call	phex
 2194: 1
 2195: 1  0AE2	85 2E 84			mov	dp1l, cursorpos
 2196: 1  0AE5	85 2F 85			mov	dp1h, cursorpos+1
 2197: 1  0AE8	05 A2				inc	auxr1
 2198: 1  0AEA	E5 30				mov	a, cursorsave
 2199: 1  0AEC	F0				movx	@dptr, a

ASEM-51 V1.3                                        Copyright (c) 2002 by W.W. Heinz                                         PAGE 41



 Line  I  Addr  Code            Source

 2200: 1  0AED	05 A2				inc	auxr1
 2201: 1  0AEF	75 8C 80			mov	TH0, #128
 2202: 1  0AF2	75 39 01			mov	t0cnt, #1
 2203: 1  0AF5	22				ret
 2204: 1
 2205: 1			;
 2206: 1			; converts accu	into two digits in R0, R1 (high, low)
 2207: 1			;
 2208: 1  0AF6	75 F0 0A	hex2dez:	mov	b, #10
 2209: 1  0AF9	84				div	ab
 2210: 1  0AFA	24 30				add	a, #'0'
 2211: 1  0AFC	F8				mov	r0, a
 2212: 1  0AFD	E5 F0				mov	a, b
 2213: 1  0AFF	24 30				add	a, #'0'
 2214: 1  0B01	F9				mov	r1, a
 2215: 1  0B02	22				ret
 2216: 1
 2217: 1			;
 2218: 1			; compute dp1 cursor screen address
 2219: 1			; dp1l/h = cursorx * 2 + cursory * WIDTH * 2 + 0x8000
 2220: 1			;
 2221: 1  0B03			comp_dptr:
 2222: 1  0B03	E5 37				mov	a, cursorx
 2223: 1  0B05	23				rl	a
 2224: 1  0B06	FF				mov	r7, a
 2225: 1
 2226: 1  0B07	E5 38				mov	a, cursory
 2227: 1  0B09	75 F0 A0			mov	b, #WIDTH * 2
 2228: 1  0B0C	A4				mul	ab
 2229: 1
 2230: 1  0B0D	2F				add	a, r7
 2231: 1  0B0E	F5 84				mov	dp1l, a
 2232: 1  0B10	E5 F0				mov	a, b
 2233: 1  0B12	34 80				addc	a, #80h
 2234: 1  0B14	F5 85				mov	dp1h, a
 2235: 1  0B16	22				ret
 2236: 1
 2237: 1					$INCLUDE (io.a51)
 2238: 2			;
 2239: 2			;
 2240: 2			;
 2241: 2  0B17			init6845:
 2242: 2  0B17	90 00 00			mov	dptr, #0		;enable ADR + DAT
 2243: 2  0B1A	E0				movx	a, @dptr
 2244: 2
 2245: 2  0B1B	90 80 00			mov	DPTR, #08000h
 2246: 2  0B1E	05 A2				inc	AUXR1
 2247: 2  0B20	90 0B 42			mov	DPTR, #SYDATA
 2248: 2  0B23	05 A2				inc	AUXR1
 2249: 2  0B25	78 00				mov	R0, #0
 2250: 2
 2251: 2  0B27			setregs:
 2252: 2			;		call	PHEX
 2253: 2			;		call	SPACE
 2254: 2
 2255: 2  0B27	E8				mov	A, R0			;send address

ASEM-51 V1.3                                        Copyright (c) 2002 by W.W. Heinz                                         PAGE 42



 Line  I  Addr  Code            Source

 2256: 2			;		call	PHEX
 2257: 2  0B28	F0				movx	@DPTR,A			;address register
 2258: 2  0B29	D2 B5				setb	T1			;clock high
 2259: 2  0B2B	C2 B5				clr	T1			;clock low
 2260: 2  0B2D	A3				inc	DPTR			;data reg
 2261: 2
 2262: 2  0B2E	05 A2				inc	AUXR1			;data pointer
 2263: 2  0B30	93				movc	A, @A+DPTR
 2264: 2			;		call	PHEX
 2265: 2  0B31	05 A2				inc	AUXR1			;address pointer
 2266: 2  0B33	F0				movx	@DPTR, A		;send data
 2267: 2  0B34	D2 B5				setb	T1			;clock high
 2268: 2  0B36	C2 B5				clr	T1			;clock low
 2269: 2
 2270: 2			;		call	SPACE
 2271: 2  0B38	A3				inc	DPTR
 2272: 2  0B39	08				inc	R0
 2273: 2  0B3A	B8 0F EA			cjne	R0, #15, setregs
 2274: 2
 2275: 2  0B3D	90 00 00			mov	dptr, #0		;enable ADR + DAT
 2276: 2  0B40	E0				movx	a, @dptr
 2277: 2
 2278: 2			;		call	newline
 2279: 2			;		call	CIN
 2280: 2			;
 2281: 2			;		setb	INT0
 2282: 2			;		call	CIN
 2283: 2  0B41	22				ret
 2284: 2
 2285: 2			;
 2286: 2			; 25,333 Mhz / 8 = 3,166 Mhz
 2287: 2			;
 2288: 2			; 31468 HZ = 31,77 uS
 2289: 2			;
 2290: 2			; 25,333 Mhz / 8 / 31468 ~ 	100 chars Horizontal Total
 2291: 2			;				  2 chars Fornt Porch
 2292: 2			;				  6 chars Back Porch
 2293: 2			;				 80 chars Horizontal Visible
 2294: 2			;				 12 chars Sync Pulse
 2295: 2			;Scanline part	Pixels	Time [s]
 2296: 2			;Visible area	640	25.422045680238
 2297: 2			;Front porch	16	0.63555114200596
 2298: 2			;Sync pulse	96	3.8133068520357
 2299: 2			;Back porch	48	1.9066534260179
 2300: 2			;Whole line	800	31.777557100298
 2301: 2
 2302: 2			;Frame part	Lines	Time [ms]
 2303: 2			;Visible area	400	12.711022840119
 2304: 2			;Front porch	12	0.38133068520357
 2305: 2			;Sync pulse	2	0.063555114200596
 2306: 2			;Back porch	35	1.1122144985104
 2307: 2			;Whole frame	449	14.268123138034
 2308: 2			;
 2309: 2  0B42	64		SYDATA:		DB	100		;R0 Horizontal Total - 1
 2310: 2  0B43	50				DB	80		;R1 Horizontal Displayed
 2311: 2  0B44	54				DB	84		;R2 Horizontal Sync Position

ASEM-51 V1.3                                        Copyright (c) 2002 by W.W. Heinz                                         PAGE 43



 Line  I  Addr  Code            Source

 2312: 2  0B45	0C				DB	0ch		;R3 VSYNC & HSYNC width
 2313: 2  0B46	1C				DB	28		;R4 Vertical total - 1			;27	32
 2314: 2  0B47	05				DB	5		;R5 Vertical Adjust
 2315: 2  0B48	19				DB	25		;R6 Vertical Displayed			;25	30
 2316: 2  0B49	1B				DB	27		;R7 Vertical Sync Position		;25	32
 2317: 2  0B4A	00				DB	00h		;R8 Mode Control
 2318: 2  0B4B	0F				DB	15		;R9 Scan Lines - 1 (character lines)
 2319: 2  0B4C	00				DB	0		;R10 Cursor Start
 2320: 2  0B4D	00				DB	0		;R11 Cursor End
 2321: 2  0B4E	00				DB	000h		;R12 Display Start High
 2322: 2  0B4F	00				DB	000h		;R13 Display Start Low
 2323: 2  0B50	00				DB	0		;R14 Cursor Pos High
 2324: 2  0B51	00				DB	0		;R15 Cursor Pos Low
 2325: 2  0B52	00				DB	0		;R16 Light Pen High
 2326: 2  0B53	00				DB	0		;R17 Light Pen Low
 2327: 2  0B54	00				DB	0		;R18 Update Address Reg High
 2328: 2  0B55	00				DB	0		;R19 Update Address Reg Low
 2329: 2								;R31 Dummy Register
 2330: 2			;
 2331: 2			;
 2332: 2			;
 2333: 2  0B56			copyFont:
 2334: 2  0B56	90 10 00			mov	DPTR, #vt100_font
 2335: 2  0B59	05 A2				inc	AUXR1
 2336: 2  0B5B	90 A0 00			mov	DPTR, #(8000h+2000h) ;+4000h+1000h
 2337: 2  0B5E	05 A2				inc	AUXR1
 2338: 2
 2339: 2  0B60	E4		copyFont1:	clr	A
 2340: 2  0B61	93				movc	A, @A+DPTR
 2341: 2  0B62	A3				inc	DPTR
 2342: 2  0B63	05 A2				inc	AUXR1
 2343: 2  0B65	F0				movx	@DPTR, A
 2344: 2  0B66	A3				inc	DPTR
 2345: 2  0B67	05 A2				inc	AUXR1
 2346: 2
 2347: 2  0B69	E5 83				mov	A, DP0H
 2348: 2					;call	PHEX
 2349: 2  0B6B	B4 80 F2			cjne	A, #80h, copyFont1
 2350: 2
 2351: 2			;		mov	A, AUXR1
 2352: 2			;		call	PHEX
 2353: 2			;		call	newline
 2354: 2  0B6E	22				ret
 2355: 2
 2356: 2			;
 2357: 2			;
 2358: 2			;
 2359: 2  0B6F	90 80 00	testScreen:	mov	DPTR, #8000h
 2360: 2  0B72	78 15				mov	R0, #21
 2361: 2
 2362: 2  0B74	79 50		testScreen3:	mov	R1, #80
 2363: 2  0B76	7A 01				mov	R2, #1
 2364: 2  0B78	EA		testScreen1:	mov	A, R2
 2365: 2  0B79	F0				movx	@DPTR, A
 2366: 2  0B7A	A3				inc	DPTR
 2367: 2  0B7B	74 70				mov	A, #70h

ASEM-51 V1.3                                        Copyright (c) 2002 by W.W. Heinz                                         PAGE 44



 Line  I  Addr  Code            Source

 2368: 2					;anl	A, #3
 2369: 2					;orl	A, #0f0h
 2370: 2					;inc	A
 2371: 2  0B7D	F0				movx	@DPTR, A
 2372: 2  0B7E	A3				inc	DPTR
 2373: 2  0B7F	0A				inc	R2
 2374: 2  0B80	BA 3A 02			cjne	R2, #'9'+1, testScreen2
 2375: 2  0B83	7A 30				mov	R2, #'0'
 2376: 2  0B85	D9 F1		testScreen2:	djnz	R1, testScreen1
 2377: 2  0B87	D8 EB				djnz	R0, testScreen3
 2378: 2
 2379: 2  0B89	E8		testScreen4:	mov	a, r0
 2380: 2  0B8A	F0				movx	@dptr, a
 2381: 2  0B8B	A3				inc	dptr
 2382: 2  0B8C	74 60				mov	a, #60h
 2383: 2  0B8E	F0				movx	@dptr, a
 2384: 2  0B8F	A3				inc	dptr
 2385: 2  0B90	08				inc	r0
 2386: 2  0B91	B8 00 F5			cjne	r0, #0, testScreen4
 2387: 2  0B94	22				ret
 2388: 2			;
 2389: 2			;
 2390: 2			;
 2391: 2  0B95	C0 E0		space:		push	acc
 2392: 2  0B97	74 20				mov	a, #' '
 2393: 2  0B99	12 0B A9			call	cout
 2394: 2  0B9C	D0 E0				pop	acc
 2395: 2  0B9E	22				ret
 2396: 2
 2397: 2  0B9F	C0 E0		newline:	push	acc
 2398: 2  0BA1	74 0A				mov	a, #0ah
 2399: 2  0BA3	12 0B A9			call	cout
 2400: 2  0BA6	D0 E0				pop	acc
 2401: 2  0BA8	22				ret
 2402: 2
 2403: 2
 2404: 2  0BA9	20 05 FD	cout:		jb	serbusy, cout
 2405: 2  0BAC	D2 05				setb	serbusy
 2406: 2  0BAE	F5 99				mov	sbuf, a
 2407: 2  0BB0	22				ret
 2408: 2
 2409: 2
 2410: 2  0BB1	C0 00		cin:		push	ar0
 2411: 2  0BB3	C0 01				push	ar1
 2412: 2  0BB5	E5 34		cin_2:		mov	a, serstart
 2413: 2  0BB7	A9 35				mov	r1, serend
 2414: 2  0BB9	B5 01 02			cjne	a, ar1, cin_1
 2415: 2  0BBC	80 F7				sjmp	cin_2
 2416: 2
 2417: 2  0BBE			cin_1:		;clr	ES			;no serial interrupt
 2418: 2  0BBE	04				inc	a
 2419: 2  0BBF	D2 E7				setb	acc.7
 2420: 2  0BC1	F8				mov	r0, a
 2421: 2  0BC2	F5 34				mov	serstart, a
 2422: 2
 2423: 2  0BC4	30 04 09			jnb	xonoff, cin_3		;XON/XOFF active?

ASEM-51 V1.3                                        Copyright (c) 2002 by W.W. Heinz                                         PAGE 45



 Line  I  Addr  Code            Source

 2424: 2  0BC7	B5 01 06			cjne	a, ar1, cin_3
 2425: 2
 2426: 2  0BCA			cin_4:		;setb	ES
 2427: 2  0BCA	74 11				mov	a, #C_XON		;yes, send XON
 2428: 2  0BCC	71 A9				acall	cout
 2429: 2  0BCE	C2 04				clr	xonoff
 2430: 2
 2431: 2  0BD0			cin_3:		;setb	ES
 2432: 2  0BD0	E6				mov	a, @r0
 2433: 2  0BD1	D0 01				pop	ar1
 2434: 2  0BD3	D0 00				pop	ar0
 2435: 2  0BD5	22				ret
 2436: 2
 2437: 2
 2438: 2			;cin_x:		jnb	ri, cin
 2439: 2			;		clr	ri
 2440: 2			;		mov	a, sbuf
 2441: 2			;		ret
 2442: 2
 2443: 2			; Highly code efficient resursive call phex contributed
 2444: 2			; by Alexander B. Alexandrov <abalex@cbr.spb.ru>
 2445: 2
 2446: 2  0BD6			phex:
 2447: 2  0BD6			phex8:
 2448: 2  0BD6	71 D8				acall	phex_b
 2449: 2  0BD8	C4		phex_b:		swap	a		;SWAP A will be twice => A unchanged
 2450: 2  0BD9	C0 E0		phex1:		push	acc
 2451: 2  0BDB	54 0F				anl	a, #15
 2452: 2  0BDD	24 90				add	a, #90h	; acc is 0x9X, where X is hex digit
 2453: 2  0BDF	D4				da	a		; if A to F, C=1 and lower four bits are 0..5
 2454: 2  0BE0	34 40				addc	a, #40h
 2455: 2  0BE2	D4				da	a
 2456: 2  0BE3	71 A9				call	cout
 2457: 2  0BE5	D0 E0				pop	acc
 2458: 2  0BE7	22				ret
 2459: 2
 2460: 2  0BE8			phex16:
 2461: 2  0BE8	C0 E0				push	acc
 2462: 2  0BEA	E5 83				mov	a, dph
 2463: 2  0BEC	71 D6				call	phex
 2464: 2  0BEE	E5 82				mov	a, dpl
 2465: 2  0BF0	71 D6				call	phex
 2466: 2  0BF2	D0 E0				pop	acc
 2467: 2  0BF4	22				ret
 2468: 2
 2469: 2			;a not so well documented feature of pstr is that you can print
 2470: 2			;multiple consecutive strings without needing to reload dptr
 2471: 2			;(which takes 3 bytes of code!)... this is useful for inserting
 2472: 2			;numbers or spaces between strings.
 2473: 2
 2474: 2			;pstr:		push	acc
 2475: 2			;pstr1:		clr	a
 2476: 2			;		movc	a, @a+dptr
 2477: 2			;		inc	dptr
 2478: 2			;		jz	pstr2
 2479: 2			;		mov	c, acc.7

ASEM-51 V1.3                                        Copyright (c) 2002 by W.W. Heinz                                         PAGE 46



 Line  I  Addr  Code            Source

 2480: 2			;		anl	a, 7Fh
 2481: 2			;		call	cout
 2482: 2			;		jc	pstr2
 2483: 2			;		sjmp	pstr1
 2484: 2			;pstr2:		pop	acc
 2485: 2			;		ret
 2486: 2
 2487: 2			;converts the ascii code in Acc to uppercase, if it is lowercase
 2488: 2
 2489: 2			; Code efficient (saves 6 byes) upper contributed
 2490: 2			; by Alexander B. Alexandrov <abalex@cbr.spb.ru>
 2491: 2
 2492: 2			;upper:
 2493: 2			;		cjne	a, #97, upper2
 2494: 2			;upper2:		jc	upper4		;end if acc < 97
 2495: 2			;		cjne	a, #123, upper3
 2496: 2			;upper3:		jnc	upper4		;end if acc >= 123
 2497: 2			;		add	a, #224		;convert to uppercase
 2498: 2			;upper4:		ret
 2499: 1
 2500: 1			;===============================================
 2501: 1			; decode scancode
 2502: 1			;===============================================
 2503: 1  0BF5			keydecode:
 2504: 1			;		mov	a, keyrxval
 2505: 1			;		call	phex
 2506: 1
 2507: 1  0BF5	74 E0				mov	a, #EXTENDED			;extended?
 2508: 1  0BF7	B5 3B 03			cjne	a, keyrxval, keybreak
 2509: 1  0BFA	D2 09				setb	keyrxextended			;set extended flag
 2510: 1  0BFC	22				ret
 2511: 1
 2512: 1  0BFD	74 F0		keybreak:	mov	a, #BREAK			;break?
 2513: 1  0BFF	B5 3B 03			cjne	a, keyrxval, keyshift
 2514: 1  0C02	D2 0A				setb	keyrxbreak
 2515: 1  0C04	22				ret
 2516: 1
 2517: 1  0C05	74 12		keyshift:	mov	a, #CLSHIFT			;left-shift?
 2518: 1  0C07	B5 3B 02			cjne	a, keyrxval, keyshift1
 2519: 1  0C0A	80 05				sjmp	keyshift2
 2520: 1  0C0C	74 59		keyshift1:	mov	a, #CRSHIFT			;right shift?
 2521: 1  0C0E	B5 3B 07			cjne	a, keyrxval, keyStrg
 2522: 1  0C11	A2 0A		keyshift2:	mov	c, keyrxbreak
 2523: 1  0C13	B3				cpl	c
 2524: 1  0C14	92 0B				mov	keyrxshift, c
 2525: 1  0C16	80 16				sjmp	keyCheckBrk1
 2526: 1
 2527: 1  0C18	74 14		keyStrg:	mov	a, #CLSTRG
 2528: 1  0C1A	B5 3B 07			cjne	a, keyrxval, keyCheckBrk
 2529: 1  0C1D	A2 0A				mov	c, keyrxbreak
 2530: 1  0C1F	B3				cpl	c
 2531: 1  0C20	92 0D				mov	keyrxstrg, c
 2532: 1  0C22	80 0A				sjmp	keyCheckBrk1
 2533: 1
 2534: 1  0C24	30 0A 0C	keyCheckBrk:	jnb	keyrxbreak, keynormal		;break active?
 2535: 1  0C27	74 11				mov	a, #ALTGR			;ALT-GR?

ASEM-51 V1.3                                        Copyright (c) 2002 by W.W. Heinz                                         PAGE 47



 Line  I  Addr  Code            Source

 2536: 1  0C29	B5 3B 02			cjne	a, keyrxval, keyCheckBrk1
 2537: 1  0C2C	C2 0C				clr	keyrxaltgr			;clear ALT-GR
 2538: 1  0C2E	C2 0A		keyCheckBrk1:	clr	keyrxbreak
 2539: 1  0C30	C2 09				clr	keyrxextended
 2540: 1  0C32	22				ret
 2541: 1
 2542: 1  0C33	C0 00		keynormal:	push	ar0
 2543: 1  0C35	30 0B 05			jnb	keyrxshift, keyMakeExt
 2544: 1  0C38	12 0D 13			call	keygetshift
 2545: 1  0C3B	80 3A				sjmp	keyExitOK
 2546: 1
 2547: 1  0C3D	30 09 1A	keyMakeExt:	jnb	keyrxextended, keyAltGr
 2548: 1  0C40	C2 09				clr	keyrxextended			;clear extended
 2549: 1  0C42	78 0D				mov	r0, #13
 2550: 1  0C44	12 0D BE	keyMakeExt2:	call	keygetextind
 2551: 1  0C47	B5 3B 0C			cjne	a, keyrxval, keyMakeExt1	;found?
 2552: 1  0C4A	12 0D CE			call	keygetext
 2553: 1  0C4D	B4 11 04			cjne	a, #ALTGR, keyMakeExt3		;ALTGR-pressed?
 2554: 1  0C50	D2 0C				setb	keyrxaltgr			;set ALTGR-flag
 2555: 1  0C52	80 27				sjmp	keyExit
 2556: 1  0C54	80 21		keyMakeExt3:	sjmp	keyExitOK
 2557: 1  0C56	D8 EC		keyMakeExt1:	djnz	r0, keyMakeExt2
 2558: 1  0C58	80 21				sjmp	keyExit
 2559: 1
 2560: 1  0C5A	30 0C 11	keyAltGr:	jnb	keyrxaltgr, keyMake		;AltGR pressed?
 2561: 1  0C5D	78 08				mov	r0, #8
 2562: 1  0C5F	12 0D A8	keyAltGr2:	call	keygetaltgrind
 2563: 1  0C62	B5 3B 05			cjne	a, keyrxval, keyAltGr1		;found?
 2564: 1  0C65	12 0D B3			call	keygetaltgr
 2565: 1  0C68	80 0D				sjmp	keyExitOK
 2566: 1  0C6A	D8 F3		keyAltGr1:	djnz	r0, keyAltGr2
 2567: 1  0C6C	80 0D				sjmp	keyExit
 2568: 1
 2569: 1  0C6E	12 0C 7E	keyMake:	call	keygetnoshift
 2570: 1  0C71	30 0D 03			jnb	keyrxstrg, keyExitOK
 2571: 1  0C74	C3				clr	c
 2572: 1  0C75	94 60				subb	a, #96
 2573: 1
 2574: 1  0C77	F5 3B		keyExitOK:	mov	keyrxval, a
 2575: 1  0C79	D2 08				setb	keyavail
 2576: 1
 2577: 1			;		mov	p2, #High(08000h + 24*160 + 77*2)
 2578: 1			;		mov	r0, #Low(08000h + 24*160 + 77*2);
 2579: 1			;		movx	@r0, a
 2580: 1
 2581: 1  0C7B	D0 00		keyExit:	pop	ar0
 2582: 1  0C7D	22				ret
 2583: 1
 2584: 1
 2585: 1  0C7E	E5 3B		keygetnoshift:	mov	a, keyrxval
 2586: 1  0C80	04				inc	a
 2587: 1  0C81	83				movc	a, @a+pc
 2588: 1  0C82	22				ret
 2589: 1  0C83			CHARTABLE_NOSHIFT:
 2590: 1			;		 	 00   01   02   03   04   05   06   07   08   09   0A   0B   0C   0D   0E
       1			0F

ASEM-51 V1.3                                        Copyright (c) 2002 by W.W. Heinz                                         PAGE 48



 Line  I  Addr  Code            Source

 2591: 1  0C83	00 88 00 84			db	  0,  F9,   0,  F5,  F3,  F1,  F2, F12,   0, F10,  F8,  F6,  F4,TABU, '^',
       1  0C87	82 80 81 8B	 0	; 00
       1  0C8B	00 89 87 85
       1  0C8F	83 09 5E 00
 2592: 1  0C93	00 00 00 00			db     	  0,   0,   0,   0,   0, 'q', '1',   0,   0,   0, 'y', 's', 'a', 'w', '2',
       1  0C97	00 71 31 00	 0	; 10
       1  0C9B	00 00 79 73
       1  0C9F	61 77 32 00
 2593: 1  0CA3	00 63 78 64			db	  0, 'c', 'x', 'd', 'e', '4', '3',   0,   0, ' ', 'v', 'f', 't', 'r', '5',
       1  0CA7	65 34 33 00	 0	; 20
       1  0CAB	00 20 76 66
       1  0CAF	74 72 35 00
 2594: 1  0CB3	00 6E 62 68			db	  0, 'n', 'b', 'h', 'g', 'z', '6',   0,   0,   0, 'm', 'j', 'u', '7', '8',
       1  0CB7	67 7A 36 00	 0	; 30
       1  0CBB	00 00 6D 6A
       1  0CBF	75 37 38 00
 2595: 1  0CC3	00 2C 6B 69			db	  0, ',', 'k', 'i', 'o', '0', '9',   0,   0, '.', '-', 'l', 246, 'p', 223,
       1  0CC7	6F 30 39 00	 0	; 40 	5c = \, 223 = 
       1  0CCB	00 2E 2D 6C
       1  0CCF	F6 70 DF 00
 2596: 1  0CD3	00 00 E4 58			db	  0,   0, 228,  'X',252, 180,   0,   0,   0,   0,C_CR, '+',   0, '#',   0,
       1  0CD7	FC B4 00 00	 0	; 50
       1  0CDB	00 00 0D 2B
       1  0CDF	00 23 00 00
 2597: 1  0CE3	00 3C 00 00			db	  0, '<',   0,   0,   0,   0,C_DEL,  0,   0, '1',   0, '4', '7',   0,   0,
       1  0CE7	00 00 7F 00	 0	; 60
       1  0CEB	00 31 00 34
       1  0CEF	37 00 00 00
 2598: 1  0CF3	30 2E 32 35			db	 '0', '.', '2', '5', '6', '8',ESC,   0, F11, '+', '3', '-', '*', '9', CLS,
       1  0CF7	36 38 1B 00	 0	; 70
       1  0CFB	8A 2B 33 2D
       1  0CFF	2A 39 01 00
 2599: 1  0D03	00 00 00 86			db	  0,   0,   0,  F7,   0,   0,   0,   0,   0,   0,   0,   0,   0,   0,   0,
       1  0D07	00 00 00 00	 0	; 80
       1  0D0B	00 00 00 00
       1  0D0F	00 00 00 00
 2600: 1
 2601: 1  0D13	E5 3B		keygetshift:	mov	a, keyrxval
 2602: 1  0D15	04				inc	a
 2603: 1  0D16	83				movc	a, @a+pc
 2604: 1  0D17	22				ret
 2605: 1  0D18			CHARTABLE_SHIFT:
 2606: 1			;		 	 00   01   02   03   04   05   06   07   08   09   0A   0B   0C   0D   0E
       1			0F
 2607: 1  0D18	00 09 00 05			db	  0,   9,   0,   5,   3,   1,   2,  12,   0,  10,   8,   6,   4,TABU,0B0h,
       1  0D1C	03 01 02 0C	 0	; 00
       1  0D20	00 0A 08 06
       1  0D24	04 09 B0 00
 2608: 1  0D28	00 00 00 00			db        0,   0,   0,   0,   0, 'Q', '!',   0,   0,   0, 'Y', 'S', 'A', 'W', '"',
       1  0D2C	00 51 21 00	 0	; 10
       1  0D30	00 00 59 53
       1  0D34	41 57 22 00
 2609: 1  0D38	00 43 58 44			db	  0, 'C', 'X', 'D', 'E', '$', 167,   0,   0, ' ', 'V', 'F', 'T', 'R', '%',
       1  0D3C	45 24 A7 00	 0	; 20 	167=
       1  0D40	00 20 56 46
       1  0D44	54 52 25 00

ASEM-51 V1.3                                        Copyright (c) 2002 by W.W. Heinz                                         PAGE 49



 Line  I  Addr  Code            Source

 2610: 1  0D48	00 4E 42 48			db	  0, 'N', 'B', 'H', 'G', 'Z', '&',   0,   0,   0, 'M', 'J', 'U', '/', '(',
       1  0D4C	47 5A 26 00	 0	; 30
       1  0D50	00 00 4D 4A
       1  0D54	55 2F 28 00
 2611: 1  0D58	00 3B 4B 49			db	  0, ';', 'K', 'I', 'O', '=', ')',   0,   0, ':', '_', 'L', 214, 'P', '?',
       1  0D5C	4F 3D 29 00	 0	; 40
       1  0D60	00 3A 5F 4C
       1  0D64	D6 50 3F 00
 2612: 1  0D68	00 00 C4 00			db	  0,   0, 196,   0, 220, '`',   0,   0,   0,   0,  LF, '*',   0,027h,   0,
       1  0D6C	DC 60 00 00	 0	; 50
       1  0D70	00 00 0A 2A
       1  0D74	00 27 00 00
 2613: 1  0D78	00 3E 00 00			db	  0, '>',   0,   0,   0,   0,CDCH,   0,   0, '1',   0, CCLF, '7',   0,  0,
       1  0D7C	00 00 FE 00	 0	; 60
       1  0D80	00 31 00 1E
       1  0D84	37 00 00 00
 2614: 1  0D88	30 2E 1D 35			db	'0', '.', CCDN, '5', CCRT, CCUP,  0,   0,  11, '+', '3', '-', '*', '9', 0,
       1  0D8C	1F 1C 00 00	 0  ; 70
       1  0D90	0B 2B 33 2D
       1  0D94	2A 39 00 00
 2615: 1  0D98	00 00 00 07			db	  0,   0,   0,   7,   0,   0,   0,   0,   0,   0,   0,   0,   0,  0,    0,
       1  0D9C	00 00 00 00	 0	; 80
       1  0DA0	00 00 00 00
       1  0DA4	00 00 00 00
 2616: 1
 2617: 1
 2618: 1  0DA8	E8		keygetaltgrind:	mov	a, r0
 2619: 1  0DA9	83				movc	a, @a+pc
 2620: 1  0DAA	22				ret
 2621: 1  0DAB			ALTGR_TABLE_IND:
 2622: 1  0DAB	15				db	015h	; q = @
 2623: 1  0DAC	61				db	061h	; <> = |
 2624: 1  0DAD	5B				db	05Bh	; *+ = ~
 2625: 1  0DAE	4E				db	04Eh	; ? = \
 2626: 1  0DAF	3E				db	03Eh	; 8( = [
 2627: 1  0DB0	46				db	046h	; 9) = ]
 2628: 1  0DB1	3D				db	03Dh	; 7/ = {
 2629: 1  0DB2	45				db	045h	; 0= = }
 2630: 1
 2631: 1
 2632: 1  0DB3	E8		keygetaltgr:	mov	a, r0
 2633: 1  0DB4	83				movc	a, @a+pc
 2634: 1  0DB5	22				ret
 2635: 1  0DB6	40		ALTGR_TABLE:	db	'@'
 2636: 1  0DB7	7C				db	'|'
 2637: 1  0DB8	7E				db	'~'
 2638: 1  0DB9	5C				db	05Ch
 2639: 1  0DBA	5B				db	'['
 2640: 1  0DBB	5D				db	']'
 2641: 1  0DBC	7B				db	'{'
 2642: 1  0DBD	7D				db	'}'
 2643: 1
 2644: 1
 2645: 1  0DBE	E8		keygetextind:	mov	a, r0
 2646: 1  0DBF	83				movc	a, @a+pc
 2647: 1  0DC0	22				ret

ASEM-51 V1.3                                        Copyright (c) 2002 by W.W. Heinz                                         PAGE 50



 Line  I  Addr  Code            Source

 2648: 1  0DC1	11		EXT_TABLE_IND:	db	ALTGR
 2649: 1  0DC2	4A				db	04Ah	; /
 2650: 1  0DC3	5A				db	05Ah	; ENTER
 2651: 1  0DC4	69				db	069h	; END
 2652: 1  0DC5	6B				db	06Bh	; LEFT
 2653: 1  0DC6	6C				db	06Ch	; HOME
 2654: 1  0DC7	70				db	070h	; INS
 2655: 1  0DC8	71				db	071h	; DEL
 2656: 1  0DC9	72				db	072h	; DOWN
 2657: 1  0DCA	74				db	074h	; RIGHT
 2658: 1  0DCB	75				db	075h	; Up
 2659: 1  0DCC	7A				db	07Ah	; PAGE DOWN
 2660: 1  0DCD	7D				db	07Dh	; PAGE UP
 2661: 1
 2662: 1  0DCE	E8		keygetext:	mov	a, r0
 2663: 1  0DCF	83				movc	a, @a+pc
 2664: 1  0DD0	22				ret
 2665: 1  0DD1	11		EXT_TABLE:	db	ALTGR
 2666: 1  0DD2	2F				db	'/'	; NumPad division symbol
 2667: 1  0DD3	0D				db	C_CR	; ENTER
 2668: 1  0DD4	1D				db	CCBT	; cursor bottom with SuperFlag
 2669: 1  0DD5	13				db	19	; cursor left	CTRL-S
 2670: 1  0DD6	1C				db	CCHM	; cursor home with SuperFLag
 2671: 1  0DD7	16				db	22	; insert	CTRL-V
 2672: 1  0DD8	07				db	7	; delete	CTRL-G
 2673: 1  0DD9	18				db	24	; cursor down	CTRL-X
 2674: 1  0DDA	04				db	4	; cursor right	CTRL-D
 2675: 1  0DDB	05				db	5	; cursor up	CTRL-E
 2676: 1  0DDC	03				db	3	; pagedown CTRL-C
 2677: 1  0DDD	12				db	18	; pageup CTRL-R
 2678: 1			;
 2679: 1			;
 2680: 1			;
 2681: 1  0DDE	E5 2A		getbaud:	mov	a, baudidx
 2682: 1  0DE0	04				inc	a
 2683: 1  0DE1	83				movc	a, @a+pc
 2684: 1  0DE2	22				ret
 2685: 1  0DE3	FF				db	0ffh	;115200
 2686: 1  0DE4	F4				db	0f4h	;9600
 2687: 1  0DE5	FA				db	0fah	;19200
 2688: 1  0DE6	FD				db	0fdh	;38400
 2689: 1  0DE7	FE				db	0feh	;57600
 2690: 1
 2691: 1  0DE8	83		getbdtxt:	movc	a, @a+pc
 2692: 1  0DE9	22				ret
 2693: 1  0DEA	31 31 35 32			db	"1152"
 2694: 1  0DEE	20 20 39 36			db	"  96"
 2695: 1  0DF2	20 31 39 32			db	" 192"
 2696: 1  0DF6	20 33 38 34			db	" 384"
 2697: 1  0DFA	20 35 37 36			db	" 576"
 2698: 1  0DFE	41 44 4D 2D	adm3atext:	db	"ADM-3A"
       1  0E02	33 41
 2699: 1  0E04	44 55 4D 50	dumptext:	db	"DUMP  "
       1  0E08	20 20
 2700: 1
 2701: 1			;

ASEM-51 V1.3                                        Copyright (c) 2002 by W.W. Heinz                                         PAGE 51



 Line  I  Addr  Code            Source

 2702: 1			;
 2703: 1  0E0A	90 8F 00	prtstatus:	mov	dptr, #08000h + 24 * WIDTH * 2
 2704: 1  0E0D	78 01				mov	r0, #1
 2705: 1  0E0F	12 0E 81	prtstatus1:	call	getstatus			;get status line
 2706: 1  0E12	F0				movx	@dptr, a
 2707: 1  0E13	A3				inc	dptr
 2708: 1  0E14	74 06				mov	a, #TURQUOISE			;color turquoise
 2709: 1  0E16	F0				movx	@dptr, a
 2710: 1  0E17	A3				inc	dptr
 2711: 1  0E18	08				inc	r0
 2712: 1  0E19	B8 51 F3			cjne	r0, #81, prtstatus1
 2713: 1
 2714: 1  0E1C	90 8F 0E			mov	dptr, #08000h + 24 * WIDTH * 2 + 7 * 2
 2715: 1  0E1F	E5 2A				mov	a, baudidx
 2716: 1  0E21	23				rl	a				;mul2
 2717: 1  0E22	23				rl	a				;mul4
 2718: 1  0E23	04				inc	a
 2719: 1  0E24	F8				mov	r0, a
 2720: 1  0E25	79 00				mov	r1, #0
 2721: 1  0E27	B1 E8		prtbaud:	call	getbdtxt
 2722: 1  0E29	F0				movx	@dptr, a
 2723: 1  0E2A	A3				inc	dptr
 2724: 1  0E2B	A3				inc	dptr
 2725: 1  0E2C	08				inc	r0
 2726: 1  0E2D	E8				mov	a, r0
 2727: 1  0E2E	09				inc	r1
 2728: 1  0E2F	B9 04 F5			cjne	r1, #4, prtbaud
 2729: 1
 2730: 1  0E32	30 14 11			jnb	databits, prtstatus6		;print 7 data bits
 2731: 1  0E35	74 37				mov	a, #'7'
 2732: 1  0E37	90 8F 1C			mov	dptr, #08000h + 24 * WIDTH * 2 + 14 * 2
 2733: 1  0E3A	F0				movx	@dptr, a
 2734: 1  0E3B	74 45				mov	a, #'E'
 2735: 1  0E3D	30 15 02			jnb	evenodd, prtstatus7
 2736: 1  0E40	74 4F				mov	a, #'O'
 2737: 1  0E42	90 8F 1E	prtstatus7:	mov	dptr, #08000h + 24 * WIDTH * 2 + 15 * 2
 2738: 1  0E45	F0				movx	@dptr, a
 2739: 1  0E46	74 FB		prtstatus6:	mov	a, #251				;Haken
 2740: 1  0E48	30 12 04			jnb	newlinemode, prtstatus2
 2741: 1  0E4B	90 8F 38			mov	dptr, #08000h + 24 * WIDTH * 2 + 28 * 2
 2742: 1  0E4E	F0				movx	@dptr, a
 2743: 1  0E4F	30 13 04	prtstatus2:	jnb	insert	, prtstatus3
 2744: 1  0E52	90 8F 50			mov	dptr, #08000h + 24 * WIDTH * 2 + 40 * 2
 2745: 1  0E55	F0				movx	@dptr, a
 2746: 1  0E56	30 11 04	prtstatus3:	jnb	origin, prtstatus4
 2747: 1  0E59	90 8F 68			mov	dptr, #08000h + 24 * WIDTH * 2 + 52 * 2
 2748: 1  0E5C	F0				movx	@dptr, a
 2749: 1  0E5D	30 10 04	prtstatus4:	jnb	wrap, prtstatus5
 2750: 1  0E60	90 8F 7C			mov	dptr, #08000h + 24 * WIDTH * 2 + 62 * 2
 2751: 1  0E63	F0				movx	@dptr, a
 2752: 1  0E64	20 17 03	prtstatus5:	jb	dumpmode, prtstatus5c
 2753: 1  0E67	30 16 16			jnb	termmode, prtstatusex
 2754: 1  0E6A	90 8F 8A	prtstatus5c:	mov	dptr, #08000h + 24 * WIDTH * 2 + 69 * 2
 2755: 1  0E6D	78 00				mov	r0, #0
 2756: 1  0E6F	E8		prtstatus5a:	mov	a, r0
 2757: 1  0E70	24 15				add	a, #adm3atext-getbdtxt-1

ASEM-51 V1.3                                        Copyright (c) 2002 by W.W. Heinz                                         PAGE 52



 Line  I  Addr  Code            Source

 2758: 1  0E72	30 17 02			jnb	dumpmode, prtstatus5b
 2759: 1  0E75	24 06				add	a, #6
 2760: 1  0E77	B1 E8		prtstatus5b:	acall	getbdtxt
 2761: 1  0E79	F0				movx	@dptr, a
 2762: 1  0E7A	A3				inc	dptr
 2763: 1  0E7B	A3				inc	dptr
 2764: 1  0E7C	08				inc	r0
 2765: 1  0E7D	B8 06 EF			cjne	r0, #6, prtstatus5a
 2766: 1  0E80	22		prtstatusex:	ret
 2767: 1
 2768: 1  0E81	E8		getstatus:	mov	a, r0
 2769: 1  0E82	83				movc	a, @a + pc
 2770: 1  0E83	22				ret
 2771: 1			;			"0         1         2         3         4         5         6         7
       1			     "
 2772: 1			;			"012345678901234567890123456789012345678901234567890123456789012345678901234
       1			56789
 2773: 1  0E84	7C 42 61 75	status:		db	"|Baud: xxxx00 8N | Newline: - | Insert: - | Origin: - | Wrap: - |    VT102
       1  0E88	64 3A 20 78	    |"
       1  0E8C	78 78 78 30
       1  0E90	30 20 38 4E
       1  0E94	20 7C 20 4E
       1  0E98	65 77 6C 69
       1  0E9C	6E 65 3A 20
       1  0EA0	2D 20 7C 20
       1  0EA4	49 6E 73 65
       1  0EA8	72 74 3A 20
       1  0EAC	2D 20 7C 20
       1  0EB0	4F 72 69 67
       1  0EB4	69 6E 3A 20
       1  0EB8	2D 20 7C 20
       1  0EBC	57 72 61 70
       1  0EC0	3A 20 2D 20
       1  0EC4	7C 20 20 20
       1  0EC8	20 56 54 31
       1  0ECC	30 32 20 20
       1  0ED0	20 20 20 7C
 2774: 1
 2775: 1			;vt100_font	equ	base + 1000h
 2776: 1					$include (vt100_font.a51)
 2777: 2	N      1000			org	base + 1000h
 2778: 2  1000			vt100_font:
 2779: 2  1000	00 00 00 00			db	000h, 000h, 000h, 000h, 000h, 000h, 000h, 000h, 000h, 000h, 000h, 000h
       2  1004	00 00 00 00
       2  1008	00 00 00 00
 2780: 2  100C	00 00 00 00			db	000h, 000h, 000h, 000h, 000h, 000h, 000h, 000h, 010h, 038h, 07Ch, 0FEh
       2  1010	00 00 00 00
       2  1014	10 38 7C FE
 2781: 2  1018	7C 38 10 00			db	07Ch, 038h, 010h, 000h, 000h, 000h, 000h, 000h, 055h, 0AAh, 055h, 0AAh
       2  101C	00 00 00 00
       2  1020	55 AA 55 AA
 2782: 2  1024	55 AA 55 AA			db	055h, 0AAh, 055h, 0AAh, 055h, 0AAh, 055h, 0AAh, 055h, 0AAh, 055h, 0AAh
       2  1028	55 AA 55 AA
       2  102C	55 AA 55 AA
 2783: 2  1030	00 88 88 88			db	000h, 088h, 088h, 088h, 0F8h, 088h, 088h, 088h, 000h, 03Eh, 008h, 008h
       2  1034	F8 88 88 88

ASEM-51 V1.3                                        Copyright (c) 2002 by W.W. Heinz                                         PAGE 53



 Line  I  Addr  Code            Source

       2  1038	00 3E 08 08
 2784: 2  103C	08 08 08 00			db	008h, 008h, 008h, 000h, 000h, 0F0h, 080h, 080h, 0E0h, 080h, 080h, 080h
       2  1040	00 F0 80 80
       2  1044	E0 80 80 80
 2785: 2  1048	1E 10 10 1C			db	01Eh, 010h, 010h, 01Ch, 010h, 010h, 010h, 000h, 000h, 070h, 080h, 080h
       2  104C	10 10 10 00
       2  1050	00 70 80 80
 2786: 2  1054	80 80 70 00			db	080h, 080h, 070h, 000h, 01Eh, 012h, 012h, 01Ch, 018h, 014h, 012h, 000h
       2  1058	1E 12 12 1C
       2  105C	18 14 12 00
 2787: 2  1060	00 80 80 80			db	000h, 080h, 080h, 080h, 080h, 080h, 0F0h, 000h, 01Eh, 010h, 010h, 01Ch
       2  1064	80 80 F0 00
       2  1068	1E 10 10 1C
 2788: 2  106C	10 10 10 00			db	010h, 010h, 010h, 000h, 000h, 038h, 06Ch, 06Ch, 038h, 000h, 000h, 000h
       2  1070	00 38 6C 6C
       2  1074	38 00 00 00
 2789: 2  1078	00 00 00 00			db	000h, 000h, 000h, 000h, 000h, 000h, 000h, 000h, 000h, 000h, 000h, 000h
       2  107C	00 00 00 00
       2  1080	00 00 00 00
 2790: 2  1084	18 18 7E 18			db	018h, 018h, 07Eh, 018h, 018h, 000h, 000h, 0FFh, 000h, 000h, 000h, 000h
       2  1088	18 00 00 FF
       2  108C	00 00 00 00
 2791: 2  1090	00 88 C8 A8			db	000h, 088h, 0C8h, 0A8h, 0A8h, 098h, 088h, 000h, 010h, 010h, 010h, 010h
       2  1094	A8 98 88 00
       2  1098	10 10 10 10
 2792: 2  109C	10 10 1E 00			db	010h, 010h, 01Eh, 000h, 000h, 088h, 088h, 088h, 050h, 050h, 050h, 020h
       2  10A0	00 88 88 88
       2  10A4	50 50 50 20
 2793: 2  10A8	00 3E 08 08			db	000h, 03Eh, 008h, 008h, 008h, 008h, 008h, 000h, 018h, 018h, 018h, 018h
       2  10AC	08 08 08 00
       2  10B0	18 18 18 18
 2794: 2  10B4	18 18 18 F8			db	018h, 018h, 018h, 0F8h, 000h, 000h, 000h, 000h, 000h, 000h, 000h, 000h
       2  10B8	00 00 00 00
       2  10BC	00 00 00 00
 2795: 2  10C0	00 00 00 00			db	000h, 000h, 000h, 000h, 000h, 000h, 000h, 0F8h, 018h, 018h, 018h, 018h
       2  10C4	00 00 00 F8
       2  10C8	18 18 18 18
 2796: 2  10CC	18 18 18 18			db	018h, 018h, 018h, 018h, 000h, 000h, 000h, 000h, 000h, 000h, 000h, 01Fh
       2  10D0	00 00 00 00
       2  10D4	00 00 00 1F
 2797: 2  10D8	18 18 18 18			db	018h, 018h, 018h, 018h, 018h, 018h, 018h, 018h, 018h, 018h, 018h, 018h
       2  10DC	18 18 18 18
       2  10E0	18 18 18 18
 2798: 2  10E4	18 18 18 1F			db	018h, 018h, 018h, 01Fh, 000h, 000h, 000h, 000h, 000h, 000h, 000h, 000h
       2  10E8	00 00 00 00
       2  10EC	00 00 00 00
 2799: 2  10F0	18 18 18 18			db	018h, 018h, 018h, 018h, 018h, 018h, 018h, 0FFh, 018h, 018h, 018h, 018h
       2  10F4	18 18 18 FF
       2  10F8	18 18 18 18
 2800: 2  10FC	18 18 18 18			db	018h, 018h, 018h, 018h, 0FFh, 000h, 000h, 000h, 000h, 000h, 000h, 000h
       2  1100	FF 00 00 00
       2  1104	00 00 00 00
 2801: 2  1108	00 00 00 00			db	000h, 000h, 000h, 000h, 000h, 000h, 000h, 000h, 000h, 000h, 000h, 0FFh
       2  110C	00 00 00 00
       2  1110	00 00 00 FF
 2802: 2  1114	00 00 00 00			db	000h, 000h, 000h, 000h, 000h, 000h, 000h, 000h, 000h, 000h, 000h, 000h

ASEM-51 V1.3                                        Copyright (c) 2002 by W.W. Heinz                                         PAGE 54



 Line  I  Addr  Code            Source

       2  1118	00 00 00 00
       2  111C	00 00 00 00
 2803: 2  1120	00 00 00 00			db	000h, 000h, 000h, 000h, 000h, 000h, 000h, 0FFh, 000h, 000h, 000h, 000h
       2  1124	00 00 00 FF
       2  1128	00 00 00 00
 2804: 2  112C	00 00 00 00			db	000h, 000h, 000h, 000h, 000h, 000h, 000h, 000h, 000h, 000h, 000h, 000h
       2  1130	00 00 00 00
       2  1134	00 00 00 00
 2805: 2  1138	00 00 00 FF			db	000h, 000h, 000h, 0FFh, 000h, 000h, 000h, 000h, 000h, 000h, 000h, 000h
       2  113C	00 00 00 00
       2  1140	00 00 00 00
 2806: 2  1144	00 00 00 00			db	000h, 000h, 000h, 000h, 000h, 000h, 000h, 000h, 000h, 000h, 0FFh, 000h
       2  1148	00 00 00 00
       2  114C	00 00 FF 00
 2807: 2  1150	18 18 18 18			db	018h, 018h, 018h, 018h, 018h, 018h, 018h, 01Fh, 018h, 018h, 018h, 018h
       2  1154	18 18 18 1F
       2  1158	18 18 18 18
 2808: 2  115C	18 18 18 18			db	018h, 018h, 018h, 018h, 018h, 018h, 018h, 018h, 018h, 018h, 018h, 0F8h
       2  1160	18 18 18 18
       2  1164	18 18 18 F8
 2809: 2  1168	18 18 18 18			db	018h, 018h, 018h, 018h, 018h, 018h, 018h, 018h, 018h, 018h, 018h, 018h
       2  116C	18 18 18 18
       2  1170	18 18 18 18
 2810: 2  1174	18 18 18 FF			db	018h, 018h, 018h, 0FFh, 000h, 000h, 000h, 000h, 000h, 000h, 000h, 000h
       2  1178	00 00 00 00
       2  117C	00 00 00 00
 2811: 2  1180	00 00 00 00			db	000h, 000h, 000h, 000h, 000h, 000h, 000h, 0FFh, 018h, 018h, 018h, 018h
       2  1184	00 00 00 FF
       2  1188	18 18 18 18
 2812: 2  118C	18 18 18 18			db	018h, 018h, 018h, 018h, 018h, 018h, 018h, 018h, 018h, 018h, 018h, 018h
       2  1190	18 18 18 18
       2  1194	18 18 18 18
 2813: 2  1198	18 18 18 18			db	018h, 018h, 018h, 018h, 018h, 018h, 018h, 018h, 000h, 000h, 000h, 00Ch
       2  119C	18 18 18 18
       2  11A0	00 00 00 0C
 2814: 2  11A4	18 30 60 30			db	018h, 030h, 060h, 030h, 018h, 00Ch, 000h, 07Eh, 000h, 000h, 000h, 000h
       2  11A8	18 0C 00 7E
       2  11AC	00 00 00 00
 2815: 2  11B0	00 00 00 30			db	000h, 000h, 000h, 030h, 018h, 00Ch, 006h, 00Ch, 018h, 030h, 000h, 07Eh
       2  11B4	18 0C 06 0C
       2  11B8	18 30 00 7E
 2816: 2  11BC	00 00 00 00			db	000h, 000h, 000h, 000h, 000h, 000h, 000h, 000h, 0FEh, 06Ch, 06Ch, 06Ch
       2  11C0	00 00 00 00
       2  11C4	FE 6C 6C 6C
 2817: 2  11C8	6C 6C 6C 6C			db	06Ch, 06Ch, 06Ch, 06Ch, 000h, 000h, 000h, 000h, 000h, 000h, 000h, 002h
       2  11CC	00 00 00 00
       2  11D0	00 00 00 02
 2818: 2  11D4	04 7E 08 10			db	004h, 07Eh, 008h, 010h, 07Eh, 020h, 040h, 000h, 000h, 000h, 000h, 000h
       2  11D8	7E 20 40 00
       2  11DC	00 00 00 00
 2819: 2  11E0	00 38 6C 64			db	000h, 038h, 06Ch, 064h, 060h, 0F0h, 060h, 060h, 060h, 060h, 0E6h, 0FCh
       2  11E4	60 F0 60 60
       2  11E8	60 60 E6 FC
 2820: 2  11EC	00 00 00 00			db	000h, 000h, 000h, 000h, 000h, 000h, 000h, 000h, 000h, 000h, 000h, 018h
       2  11F0	00 00 00 00
       2  11F4	00 00 00 18

ASEM-51 V1.3                                        Copyright (c) 2002 by W.W. Heinz                                         PAGE 55



 Line  I  Addr  Code            Source

 2821: 2  11F8	18 00 00 00			db	018h, 000h, 000h, 000h, 000h, 000h, 000h, 000h, 000h, 000h, 000h, 000h
       2  11FC	00 00 00 00
       2  1200	00 00 00 00
 2822: 2  1204	00 00 00 00			db	000h, 000h, 000h, 000h, 000h, 000h, 000h, 000h, 000h, 000h, 000h, 000h
       2  1208	00 00 00 00
       2  120C	00 00 00 00
 2823: 2  1210	00 00 18 3C			db	000h, 000h, 018h, 03Ch, 03Ch, 03Ch, 018h, 018h, 018h, 000h, 018h, 018h
       2  1214	3C 3C 18 18
       2  1218	18 00 18 18
 2824: 2  121C	00 00 00 00			db	000h, 000h, 000h, 000h, 000h, 066h, 066h, 066h, 024h, 000h, 000h, 000h
       2  1220	00 66 66 66
       2  1224	24 00 00 00
 2825: 2  1228	00 00 00 00			db	000h, 000h, 000h, 000h, 000h, 000h, 000h, 000h, 000h, 000h, 000h, 06Ch
       2  122C	00 00 00 00
       2  1230	00 00 00 6C
 2826: 2  1234	6C FE 6C 6C			db	06Ch, 0FEh, 06Ch, 06Ch, 06Ch, 0FEh, 06Ch, 06Ch, 000h, 000h, 000h, 000h
       2  1238	6C FE 6C 6C
       2  123C	00 00 00 00
 2827: 2  1240	18 18 7C C6			db	018h, 018h, 07Ch, 0C6h, 0C2h, 0C0h, 07Ch, 006h, 006h, 086h, 0C6h, 07Ch
       2  1244	C2 C0 7C 06
       2  1248	06 86 C6 7C
 2828: 2  124C	18 18 00 00			db	018h, 018h, 000h, 000h, 000h, 000h, 000h, 000h, 0C2h, 0C6h, 00Ch, 018h
       2  1250	00 00 00 00
       2  1254	C2 C6 0C 18
 2829: 2  1258	30 60 C6 86			db	030h, 060h, 0C6h, 086h, 000h, 000h, 000h, 000h, 000h, 000h, 038h, 06Ch
       2  125C	00 00 00 00
       2  1260	00 00 38 6C
 2830: 2  1264	6C 38 76 DC			db	06Ch, 038h, 076h, 0DCh, 0CCh, 0CCh, 0CCh, 076h, 000h, 000h, 000h, 000h
       2  1268	CC CC CC 76
       2  126C	00 00 00 00
 2831: 2  1270	00 30 30 30			db	000h, 030h, 030h, 030h, 060h, 000h, 000h, 000h, 000h, 000h, 000h, 000h
       2  1274	60 00 00 00
       2  1278	00 00 00 00
 2832: 2  127C	00 00 00 00			db	000h, 000h, 000h, 000h, 000h, 000h, 00Ch, 018h, 030h, 030h, 030h, 030h
       2  1280	00 00 0C 18
       2  1284	30 30 30 30
 2833: 2  1288	30 30 18 0C			db	030h, 030h, 018h, 00Ch, 000h, 000h, 000h, 000h, 000h, 000h, 030h, 018h
       2  128C	00 00 00 00
       2  1290	00 00 30 18
 2834: 2  1294	0C 0C 0C 0C			db	00Ch, 00Ch, 00Ch, 00Ch, 00Ch, 00Ch, 018h, 030h, 000h, 000h, 000h, 000h
       2  1298	0C 0C 18 30
       2  129C	00 00 00 00
 2835: 2  12A0	00 00 00 00			db	000h, 000h, 000h, 000h, 000h, 066h, 03Ch, 0FFh, 03Ch, 066h, 000h, 000h
       2  12A4	00 66 3C FF
       2  12A8	3C 66 00 00
 2836: 2  12AC	00 00 00 00			db	000h, 000h, 000h, 000h, 000h, 000h, 000h, 000h, 000h, 018h, 018h, 07Eh
       2  12B0	00 00 00 00
       2  12B4	00 18 18 7E
 2837: 2  12B8	18 18 00 00			db	018h, 018h, 000h, 000h, 000h, 000h, 000h, 000h, 000h, 000h, 000h, 000h
       2  12BC	00 00 00 00
       2  12C0	00 00 00 00
 2838: 2  12C4	00 00 00 00			db	000h, 000h, 000h, 000h, 000h, 018h, 018h, 018h, 030h, 000h, 000h, 000h
       2  12C8	00 18 18 18
       2  12CC	30 00 00 00
 2839: 2  12D0	00 00 00 00			db	000h, 000h, 000h, 000h, 000h, 000h, 000h, 0FEh, 000h, 000h, 000h, 000h
       2  12D4	00 00 00 FE

ASEM-51 V1.3                                        Copyright (c) 2002 by W.W. Heinz                                         PAGE 56



 Line  I  Addr  Code            Source

       2  12D8	00 00 00 00
 2840: 2  12DC	00 00 00 00			db	000h, 000h, 000h, 000h, 000h, 000h, 000h, 000h, 000h, 000h, 000h, 000h
       2  12E0	00 00 00 00
       2  12E4	00 00 00 00
 2841: 2  12E8	00 00 18 18			db	000h, 000h, 018h, 018h, 000h, 000h, 000h, 000h, 000h, 000h, 000h, 000h
       2  12EC	00 00 00 00
       2  12F0	00 00 00 00
 2842: 2  12F4	02 06 0C 18			db	002h, 006h, 00Ch, 018h, 030h, 060h, 0C0h, 080h, 000h, 000h, 000h, 000h
       2  12F8	30 60 C0 80
       2  12FC	00 00 00 00
 2843: 2  1300	00 00 38 6C			db	000h, 000h, 038h, 06Ch, 0C6h, 0C6h, 0D6h, 0D6h, 0C6h, 0C6h, 06Ch, 038h
       2  1304	C6 C6 D6 D6
       2  1308	C6 C6 6C 38
 2844: 2  130C	00 00 00 00			db	000h, 000h, 000h, 000h, 000h, 000h, 018h, 038h, 078h, 018h, 018h, 018h
       2  1310	00 00 18 38
       2  1314	78 18 18 18
 2845: 2  1318	18 18 18 7E			db	018h, 018h, 018h, 07Eh, 000h, 000h, 000h, 000h, 000h, 000h, 07Ch, 0C6h
       2  131C	00 00 00 00
       2  1320	00 00 7C C6
 2846: 2  1324	06 0C 18 30			db	006h, 00Ch, 018h, 030h, 060h, 0C0h, 0C6h, 0FEh, 000h, 000h, 000h, 000h
       2  1328	60 C0 C6 FE
       2  132C	00 00 00 00
 2847: 2  1330	00 00 7C C6			db	000h, 000h, 07Ch, 0C6h, 006h, 006h, 03Ch, 006h, 006h, 006h, 0C6h, 07Ch
       2  1334	06 06 3C 06
       2  1338	06 06 C6 7C
 2848: 2  133C	00 00 00 00			db	000h, 000h, 000h, 000h, 000h, 000h, 00Ch, 01Ch, 03Ch, 06Ch, 0CCh, 0FEh
       2  1340	00 00 0C 1C
       2  1344	3C 6C CC FE
 2849: 2  1348	0C 0C 0C 1E			db	00Ch, 00Ch, 00Ch, 01Eh, 000h, 000h, 000h, 000h, 000h, 000h, 0FEh, 0C0h
       2  134C	00 00 00 00
       2  1350	00 00 FE C0
 2850: 2  1354	C0 C0 FC 06			db	0C0h, 0C0h, 0FCh, 006h, 006h, 006h, 0C6h, 07Ch, 000h, 000h, 000h, 000h
       2  1358	06 06 C6 7C
       2  135C	00 00 00 00
 2851: 2  1360	00 00 38 60			db	000h, 000h, 038h, 060h, 0C0h, 0C0h, 0FCh, 0C6h, 0C6h, 0C6h, 0C6h, 07Ch
       2  1364	C0 C0 FC C6
       2  1368	C6 C6 C6 7C
 2852: 2  136C	00 00 00 00			db	000h, 000h, 000h, 000h, 000h, 000h, 0FEh, 0C6h, 006h, 006h, 00Ch, 018h
       2  1370	00 00 FE C6
       2  1374	06 06 0C 18
 2853: 2  1378	30 30 30 30			db	030h, 030h, 030h, 030h, 000h, 000h, 000h, 000h, 000h, 000h, 07Ch, 0C6h
       2  137C	00 00 00 00
       2  1380	00 00 7C C6
 2854: 2  1384	C6 C6 7C C6			db	0C6h, 0C6h, 07Ch, 0C6h, 0C6h, 0C6h, 0C6h, 07Ch, 000h, 000h, 000h, 000h
       2  1388	C6 C6 C6 7C
       2  138C	00 00 00 00
 2855: 2  1390	00 00 7C C6			db	000h, 000h, 07Ch, 0C6h, 0C6h, 0C6h, 07Eh, 006h, 006h, 006h, 00Ch, 078h
       2  1394	C6 C6 7E 06
       2  1398	06 06 0C 78
 2856: 2  139C	00 00 00 00			db	000h, 000h, 000h, 000h, 000h, 000h, 000h, 000h, 018h, 018h, 000h, 000h
       2  13A0	00 00 00 00
       2  13A4	18 18 00 00
 2857: 2  13A8	00 18 18 00			db	000h, 018h, 018h, 000h, 000h, 000h, 000h, 000h, 000h, 000h, 000h, 000h
       2  13AC	00 00 00 00
       2  13B0	00 00 00 00
 2858: 2  13B4	18 18 00 00			db	018h, 018h, 000h, 000h, 000h, 018h, 018h, 030h, 000h, 000h, 000h, 000h

ASEM-51 V1.3                                        Copyright (c) 2002 by W.W. Heinz                                         PAGE 57



 Line  I  Addr  Code            Source

       2  13B8	00 18 18 30
       2  13BC	00 00 00 00
 2859: 2  13C0	00 00 00 06			db	000h, 000h, 000h, 006h, 00Ch, 018h, 030h, 060h, 030h, 018h, 00Ch, 006h
       2  13C4	0C 18 30 60
       2  13C8	30 18 0C 06
 2860: 2  13CC	00 00 00 00			db	000h, 000h, 000h, 000h, 000h, 000h, 000h, 000h, 000h, 07Eh, 000h, 000h
       2  13D0	00 00 00 00
       2  13D4	00 7E 00 00
 2861: 2  13D8	7E 00 00 00			db	07Eh, 000h, 000h, 000h, 000h, 000h, 000h, 000h, 000h, 000h, 000h, 060h
       2  13DC	00 00 00 00
       2  13E0	00 00 00 60
 2862: 2  13E4	30 18 0C 06			db	030h, 018h, 00Ch, 006h, 00Ch, 018h, 030h, 060h, 000h, 000h, 000h, 000h
       2  13E8	0C 18 30 60
       2  13EC	00 00 00 00
 2863: 2  13F0	00 00 7C C6			db	000h, 000h, 07Ch, 0C6h, 0C6h, 00Ch, 018h, 018h, 018h, 000h, 018h, 018h
       2  13F4	C6 0C 18 18
       2  13F8	18 00 18 18
 2864: 2  13FC	00 00 00 00			db	000h, 000h, 000h, 000h, 000h, 000h, 000h, 07Ch, 0C6h, 0C6h, 0DEh, 0DEh
       2  1400	00 00 00 7C
       2  1404	C6 C6 DE DE
 2865: 2  1408	DE DC C0 7C			db	0DEh, 0DCh, 0C0h, 07Ch, 000h, 000h, 000h, 000h, 000h, 000h, 010h, 038h
       2  140C	00 00 00 00
       2  1410	00 00 10 38
 2866: 2  1414	6C C6 C6 FE			db	06Ch, 0C6h, 0C6h, 0FEh, 0C6h, 0C6h, 0C6h, 0C6h, 000h, 000h, 000h, 000h
       2  1418	C6 C6 C6 C6
       2  141C	00 00 00 00
 2867: 2  1420	00 00 FC 66			db	000h, 000h, 0FCh, 066h, 066h, 066h, 07Ch, 066h, 066h, 066h, 066h, 0FCh
       2  1424	66 66 7C 66
       2  1428	66 66 66 FC
 2868: 2  142C	00 00 00 00			db	000h, 000h, 000h, 000h, 000h, 000h, 03Ch, 066h, 0C2h, 0C0h, 0C0h, 0C0h
       2  1430	00 00 3C 66
       2  1434	C2 C0 C0 C0
 2869: 2  1438	C0 C2 66 3C			db	0C0h, 0C2h, 066h, 03Ch, 000h, 000h, 000h, 000h, 000h, 000h, 0F8h, 06Ch
       2  143C	00 00 00 00
       2  1440	00 00 F8 6C
 2870: 2  1444	66 66 66 66			db	066h, 066h, 066h, 066h, 066h, 066h, 06Ch, 0F8h, 000h, 000h, 000h, 000h
       2  1448	66 66 6C F8
       2  144C	00 00 00 00
 2871: 2  1450	00 00 FE 66			db	000h, 000h, 0FEh, 066h, 062h, 068h, 078h, 068h, 060h, 062h, 066h, 0FEh
       2  1454	62 68 78 68
       2  1458	60 62 66 FE
 2872: 2  145C	00 00 00 00			db	000h, 000h, 000h, 000h, 000h, 000h, 0FEh, 066h, 062h, 068h, 078h, 068h
       2  1460	00 00 FE 66
       2  1464	62 68 78 68
 2873: 2  1468	60 60 60 F0			db	060h, 060h, 060h, 0F0h, 000h, 000h, 000h, 000h, 000h, 000h, 03Ch, 066h
       2  146C	00 00 00 00
       2  1470	00 00 3C 66
 2874: 2  1474	C2 C0 C0 DE			db	0C2h, 0C0h, 0C0h, 0DEh, 0C6h, 0C6h, 066h, 03Ah, 000h, 000h, 000h, 000h
       2  1478	C6 C6 66 3A
       2  147C	00 00 00 00
 2875: 2  1480	00 00 C6 C6			db	000h, 000h, 0C6h, 0C6h, 0C6h, 0C6h, 0FEh, 0C6h, 0C6h, 0C6h, 0C6h, 0C6h
       2  1484	C6 C6 FE C6
       2  1488	C6 C6 C6 C6
 2876: 2  148C	00 00 00 00			db	000h, 000h, 000h, 000h, 000h, 000h, 03Ch, 018h, 018h, 018h, 018h, 018h
       2  1490	00 00 3C 18
       2  1494	18 18 18 18

ASEM-51 V1.3                                        Copyright (c) 2002 by W.W. Heinz                                         PAGE 58



 Line  I  Addr  Code            Source

 2877: 2  1498	18 18 18 3C			db	018h, 018h, 018h, 03Ch, 000h, 000h, 000h, 000h, 000h, 000h, 01Eh, 00Ch
       2  149C	00 00 00 00
       2  14A0	00 00 1E 0C
 2878: 2  14A4	0C 0C 0C 0C			db	00Ch, 00Ch, 00Ch, 00Ch, 0CCh, 0CCh, 0CCh, 078h, 000h, 000h, 000h, 000h
       2  14A8	CC CC CC 78
       2  14AC	00 00 00 00
 2879: 2  14B0	00 00 E6 66			db	000h, 000h, 0E6h, 066h, 066h, 06Ch, 078h, 078h, 06Ch, 066h, 066h, 0E6h
       2  14B4	66 6C 78 78
       2  14B8	6C 66 66 E6
 2880: 2  14BC	00 00 00 00			db	000h, 000h, 000h, 000h, 000h, 000h, 0F0h, 060h, 060h, 060h, 060h, 060h
       2  14C0	00 00 F0 60
       2  14C4	60 60 60 60
 2881: 2  14C8	60 62 66 FE			db	060h, 062h, 066h, 0FEh, 000h, 000h, 000h, 000h, 000h, 000h, 0C6h, 0EEh
       2  14CC	00 00 00 00
       2  14D0	00 00 C6 EE
 2882: 2  14D4	FE FE D6 C6			db	0FEh, 0FEh, 0D6h, 0C6h, 0C6h, 0C6h, 0C6h, 0C6h, 000h, 000h, 000h, 000h
       2  14D8	C6 C6 C6 C6
       2  14DC	00 00 00 00
 2883: 2  14E0	00 00 C6 E6			db	000h, 000h, 0C6h, 0E6h, 0F6h, 0FEh, 0DEh, 0CEh, 0C6h, 0C6h, 0C6h, 0C6h
       2  14E4	F6 FE DE CE
       2  14E8	C6 C6 C6 C6
 2884: 2  14EC	00 00 00 00			db	000h, 000h, 000h, 000h, 000h, 000h, 07Ch, 0C6h, 0C6h, 0C6h, 0C6h, 0C6h
       2  14F0	00 00 7C C6
       2  14F4	C6 C6 C6 C6
 2885: 2  14F8	C6 C6 C6 7C			db	0C6h, 0C6h, 0C6h, 07Ch, 000h, 000h, 000h, 000h, 000h, 000h, 0FCh, 066h
       2  14FC	00 00 00 00
       2  1500	00 00 FC 66
 2886: 2  1504	66 66 7C 60			db	066h, 066h, 07Ch, 060h, 060h, 060h, 060h, 0F0h, 000h, 000h, 000h, 000h
       2  1508	60 60 60 F0
       2  150C	00 00 00 00
 2887: 2  1510	00 00 7C C6			db	000h, 000h, 07Ch, 0C6h, 0C6h, 0C6h, 0C6h, 0C6h, 0C6h, 0D6h, 0DEh, 07Ch
       2  1514	C6 C6 C6 C6
       2  1518	C6 D6 DE 7C
 2888: 2  151C	0C 0E 00 00			db	00Ch, 00Eh, 000h, 000h, 000h, 000h, 0FCh, 066h, 066h, 066h, 07Ch, 06Ch
       2  1520	00 00 FC 66
       2  1524	66 66 7C 6C
 2889: 2  1528	66 66 66 E6			db	066h, 066h, 066h, 0E6h, 000h, 000h, 000h, 000h, 000h, 000h, 07Ch, 0C6h
       2  152C	00 00 00 00
       2  1530	00 00 7C C6
 2890: 2  1534	C6 60 38 0C			db	0C6h, 060h, 038h, 00Ch, 006h, 0C6h, 0C6h, 07Ch, 000h, 000h, 000h, 000h
       2  1538	06 C6 C6 7C
       2  153C	00 00 00 00
 2891: 2  1540	00 00 7E 7E			db	000h, 000h, 07Eh, 07Eh, 05Ah, 018h, 018h, 018h, 018h, 018h, 018h, 03Ch
       2  1544	5A 18 18 18
       2  1548	18 18 18 3C
 2892: 2  154C	00 00 00 00			db	000h, 000h, 000h, 000h, 000h, 000h, 0C6h, 0C6h, 0C6h, 0C6h, 0C6h, 0C6h
       2  1550	00 00 C6 C6
       2  1554	C6 C6 C6 C6
 2893: 2  1558	C6 C6 C6 7C			db	0C6h, 0C6h, 0C6h, 07Ch, 000h, 000h, 000h, 000h, 000h, 000h, 0C6h, 0C6h
       2  155C	00 00 00 00
       2  1560	00 00 C6 C6
 2894: 2  1564	C6 C6 C6 C6			db	0C6h, 0C6h, 0C6h, 0C6h, 0C6h, 06Ch, 038h, 010h, 000h, 000h, 000h, 000h
       2  1568	C6 6C 38 10
       2  156C	00 00 00 00
 2895: 2  1570	00 00 C6 C6			db	000h, 000h, 0C6h, 0C6h, 0C6h, 0C6h, 0D6h, 0D6h, 0D6h, 0FEh, 0EEh, 06Ch
       2  1574	C6 C6 D6 D6

ASEM-51 V1.3                                        Copyright (c) 2002 by W.W. Heinz                                         PAGE 59



 Line  I  Addr  Code            Source

       2  1578	D6 FE EE 6C
 2896: 2  157C	00 00 00 00			db	000h, 000h, 000h, 000h, 000h, 000h, 0C6h, 0C6h, 06Ch, 07Ch, 038h, 038h
       2  1580	00 00 C6 C6
       2  1584	6C 7C 38 38
 2897: 2  1588	7C 6C C6 C6			db	07Ch, 06Ch, 0C6h, 0C6h, 000h, 000h, 000h, 000h, 000h, 000h, 066h, 066h
       2  158C	00 00 00 00
       2  1590	00 00 66 66
 2898: 2  1594	66 66 3C 18			db	066h, 066h, 03Ch, 018h, 018h, 018h, 018h, 03Ch, 000h, 000h, 000h, 000h
       2  1598	18 18 18 3C
       2  159C	00 00 00 00
 2899: 2  15A0	00 00 FE C6			db	000h, 000h, 0FEh, 0C6h, 086h, 00Ch, 018h, 030h, 060h, 0C2h, 0C6h, 0FEh
       2  15A4	86 0C 18 30
       2  15A8	60 C2 C6 FE
 2900: 2  15AC	00 00 00 00			db	000h, 000h, 000h, 000h, 000h, 000h, 03Ch, 030h, 030h, 030h, 030h, 030h
       2  15B0	00 00 3C 30
       2  15B4	30 30 30 30
 2901: 2  15B8	30 30 30 3C			db	030h, 030h, 030h, 03Ch, 000h, 000h, 000h, 000h, 000h, 000h, 000h, 080h
       2  15BC	00 00 00 00
       2  15C0	00 00 00 80
 2902: 2  15C4	C0 E0 70 38			db	0C0h, 0E0h, 070h, 038h, 01Ch, 00Eh, 006h, 002h, 000h, 000h, 000h, 000h
       2  15C8	1C 0E 06 02
       2  15CC	00 00 00 00
 2903: 2  15D0	00 00 3C 0C			db	000h, 000h, 03Ch, 00Ch, 00Ch, 00Ch, 00Ch, 00Ch, 00Ch, 00Ch, 00Ch, 03Ch
       2  15D4	0C 0C 0C 0C
       2  15D8	0C 0C 0C 3C
 2904: 2  15DC	00 00 00 00			db	000h, 000h, 000h, 000h, 010h, 038h, 06Ch, 0C6h, 000h, 000h, 000h, 000h
       2  15E0	10 38 6C C6
       2  15E4	00 00 00 00
 2905: 2  15E8	00 00 00 00			db	000h, 000h, 000h, 000h, 000h, 000h, 000h, 000h, 000h, 000h, 000h, 000h
       2  15EC	00 00 00 00
       2  15F0	00 00 00 00
 2906: 2  15F4	00 00 00 00			db	000h, 000h, 000h, 000h, 000h, 000h, 000h, 000h, 000h, 0FFh, 000h, 000h
       2  15F8	00 00 00 00
       2  15FC	00 FF 00 00
 2907: 2  1600	30 30 18 00			db	030h, 030h, 018h, 000h, 000h, 000h, 000h, 000h, 000h, 000h, 000h, 000h
       2  1604	00 00 00 00
       2  1608	00 00 00 00
 2908: 2  160C	00 00 00 00			db	000h, 000h, 000h, 000h, 000h, 000h, 000h, 000h, 000h, 078h, 00Ch, 07Ch
       2  1610	00 00 00 00
       2  1614	00 78 0C 7C
 2909: 2  1618	CC CC CC 76			db	0CCh, 0CCh, 0CCh, 076h, 000h, 000h, 000h, 000h, 000h, 000h, 0E0h, 060h
       2  161C	00 00 00 00
       2  1620	00 00 E0 60
 2910: 2  1624	60 78 6C 66			db	060h, 078h, 06Ch, 066h, 066h, 066h, 066h, 07Ch, 000h, 000h, 000h, 000h
       2  1628	66 66 66 7C
       2  162C	00 00 00 00
 2911: 2  1630	00 00 00 00			db	000h, 000h, 000h, 000h, 000h, 07Ch, 0C6h, 0C0h, 0C0h, 0C0h, 0C6h, 07Ch
       2  1634	00 7C C6 C0
       2  1638	C0 C0 C6 7C
 2912: 2  163C	00 00 00 00			db	000h, 000h, 000h, 000h, 000h, 000h, 01Ch, 00Ch, 00Ch, 03Ch, 06Ch, 0CCh
       2  1640	00 00 1C 0C
       2  1644	0C 3C 6C CC
 2913: 2  1648	CC CC CC 76			db	0CCh, 0CCh, 0CCh, 076h, 000h, 000h, 000h, 000h, 000h, 000h, 000h, 000h
       2  164C	00 00 00 00
       2  1650	00 00 00 00
 2914: 2  1654	00 7C C6 FE			db	000h, 07Ch, 0C6h, 0FEh, 0C0h, 0C0h, 0C6h, 07Ch, 000h, 000h, 000h, 000h

ASEM-51 V1.3                                        Copyright (c) 2002 by W.W. Heinz                                         PAGE 60



 Line  I  Addr  Code            Source

       2  1658	C0 C0 C6 7C
       2  165C	00 00 00 00
 2915: 2  1660	00 00 38 6C			db	000h, 000h, 038h, 06Ch, 064h, 060h, 0F0h, 060h, 060h, 060h, 060h, 0F0h
       2  1664	64 60 F0 60
       2  1668	60 60 60 F0
 2916: 2  166C	00 00 00 00			db	000h, 000h, 000h, 000h, 000h, 000h, 000h, 000h, 000h, 076h, 0CCh, 0CCh
       2  1670	00 00 00 00
       2  1674	00 76 CC CC
 2917: 2  1678	CC CC CC 7C			db	0CCh, 0CCh, 0CCh, 07Ch, 00Ch, 0CCh, 078h, 000h, 000h, 000h, 0E0h, 060h
       2  167C	0C CC 78 00
       2  1680	00 00 E0 60
 2918: 2  1684	60 6C 76 66			db	060h, 06Ch, 076h, 066h, 066h, 066h, 066h, 0E6h, 000h, 000h, 000h, 000h
       2  1688	66 66 66 E6
       2  168C	00 00 00 00
 2919: 2  1690	00 00 18 18			db	000h, 000h, 018h, 018h, 000h, 038h, 018h, 018h, 018h, 018h, 018h, 03Ch
       2  1694	00 38 18 18
       2  1698	18 18 18 3C
 2920: 2  169C	00 00 00 00			db	000h, 000h, 000h, 000h, 000h, 000h, 006h, 006h, 000h, 00Eh, 006h, 006h
       2  16A0	00 00 06 06
       2  16A4	00 0E 06 06
 2921: 2  16A8	06 06 06 06			db	006h, 006h, 006h, 006h, 066h, 066h, 03Ch, 000h, 000h, 000h, 0E0h, 060h
       2  16AC	66 66 3C 00
       2  16B0	00 00 E0 60
 2922: 2  16B4	60 66 6C 78			db	060h, 066h, 06Ch, 078h, 078h, 06Ch, 066h, 0E6h, 000h, 000h, 000h, 000h
       2  16B8	78 6C 66 E6
       2  16BC	00 00 00 00
 2923: 2  16C0	00 00 38 18			db	000h, 000h, 038h, 018h, 018h, 018h, 018h, 018h, 018h, 018h, 018h, 03Ch
       2  16C4	18 18 18 18
       2  16C8	18 18 18 3C
 2924: 2  16CC	00 00 00 00			db	000h, 000h, 000h, 000h, 000h, 000h, 000h, 000h, 000h, 0ECh, 0FEh, 0D6h
       2  16D0	00 00 00 00
       2  16D4	00 EC FE D6
 2925: 2  16D8	D6 D6 D6 C6			db	0D6h, 0D6h, 0D6h, 0C6h, 000h, 000h, 000h, 000h, 000h, 000h, 000h, 000h
       2  16DC	00 00 00 00
       2  16E0	00 00 00 00
 2926: 2  16E4	00 DC 66 66			db	000h, 0DCh, 066h, 066h, 066h, 066h, 066h, 066h, 000h, 000h, 000h, 000h
       2  16E8	66 66 66 66
       2  16EC	00 00 00 00
 2927: 2  16F0	00 00 00 00			db	000h, 000h, 000h, 000h, 000h, 07Ch, 0C6h, 0C6h, 0C6h, 0C6h, 0C6h, 07Ch
       2  16F4	00 7C C6 C6
       2  16F8	C6 C6 C6 7C
 2928: 2  16FC	00 00 00 00			db	000h, 000h, 000h, 000h, 000h, 000h, 000h, 000h, 000h, 0DCh, 066h, 066h
       2  1700	00 00 00 00
       2  1704	00 DC 66 66
 2929: 2  1708	66 66 66 7C			db	066h, 066h, 066h, 07Ch, 060h, 060h, 0F0h, 000h, 000h, 000h, 000h, 000h
       2  170C	60 60 F0 00
       2  1710	00 00 00 00
 2930: 2  1714	00 76 CC CC			db	000h, 076h, 0CCh, 0CCh, 0CCh, 0CCh, 0CCh, 07Ch, 00Ch, 00Ch, 01Eh, 000h
       2  1718	CC CC CC 7C
       2  171C	0C 0C 1E 00
 2931: 2  1720	00 00 00 00			db	000h, 000h, 000h, 000h, 000h, 0DCh, 076h, 066h, 060h, 060h, 060h, 0F0h
       2  1724	00 DC 76 66
       2  1728	60 60 60 F0
 2932: 2  172C	00 00 00 00			db	000h, 000h, 000h, 000h, 000h, 000h, 000h, 000h, 000h, 07Ch, 0C6h, 060h
       2  1730	00 00 00 00
       2  1734	00 7C C6 60

ASEM-51 V1.3                                        Copyright (c) 2002 by W.W. Heinz                                         PAGE 61



 Line  I  Addr  Code            Source

 2933: 2  1738	38 0C C6 7C			db	038h, 00Ch, 0C6h, 07Ch, 000h, 000h, 000h, 000h, 000h, 000h, 010h, 030h
       2  173C	00 00 00 00
       2  1740	00 00 10 30
 2934: 2  1744	30 FC 30 30			db	030h, 0FCh, 030h, 030h, 030h, 030h, 036h, 01Ch, 000h, 000h, 000h, 000h
       2  1748	30 30 36 1C
       2  174C	00 00 00 00
 2935: 2  1750	00 00 00 00			db	000h, 000h, 000h, 000h, 000h, 0CCh, 0CCh, 0CCh, 0CCh, 0CCh, 0CCh, 076h
       2  1754	00 CC CC CC
       2  1758	CC CC CC 76
 2936: 2  175C	00 00 00 00			db	000h, 000h, 000h, 000h, 000h, 000h, 000h, 000h, 000h, 066h, 066h, 066h
       2  1760	00 00 00 00
       2  1764	00 66 66 66
 2937: 2  1768	66 66 3C 18			db	066h, 066h, 03Ch, 018h, 000h, 000h, 000h, 000h, 000h, 000h, 000h, 000h
       2  176C	00 00 00 00
       2  1770	00 00 00 00
 2938: 2  1774	00 C6 C6 D6			db	000h, 0C6h, 0C6h, 0D6h, 0D6h, 0D6h, 0FEh, 06Ch, 000h, 000h, 000h, 000h
       2  1778	D6 D6 FE 6C
       2  177C	00 00 00 00
 2939: 2  1780	00 00 00 00			db	000h, 000h, 000h, 000h, 000h, 0C6h, 06Ch, 038h, 038h, 038h, 06Ch, 0C6h
       2  1784	00 C6 6C 38
       2  1788	38 38 6C C6
 2940: 2  178C	00 00 00 00			db	000h, 000h, 000h, 000h, 000h, 000h, 000h, 000h, 000h, 0C6h, 0C6h, 0C6h
       2  1790	00 00 00 00
       2  1794	00 C6 C6 C6
 2941: 2  1798	C6 C6 C6 7E			db	0C6h, 0C6h, 0C6h, 07Eh, 006h, 00Ch, 0F8h, 000h, 000h, 000h, 000h, 000h
       2  179C	06 0C F8 00
       2  17A0	00 00 00 00
 2942: 2  17A4	00 FE CC 18			db	000h, 0FEh, 0CCh, 018h, 030h, 060h, 0C6h, 0FEh, 000h, 000h, 000h, 000h
       2  17A8	30 60 C6 FE
       2  17AC	00 00 00 00
 2943: 2  17B0	00 00 0E 18			db	000h, 000h, 00Eh, 018h, 018h, 018h, 070h, 018h, 018h, 018h, 018h, 00Eh
       2  17B4	18 18 70 18
       2  17B8	18 18 18 0E
 2944: 2  17BC	00 00 00 00			db	000h, 000h, 000h, 000h, 000h, 000h, 018h, 018h, 018h, 018h, 000h, 018h
       2  17C0	00 00 18 18
       2  17C4	18 18 00 18
 2945: 2  17C8	18 18 18 18			db	018h, 018h, 018h, 018h, 000h, 000h, 000h, 000h, 000h, 000h, 070h, 018h
       2  17CC	00 00 00 00
       2  17D0	00 00 70 18
 2946: 2  17D4	18 18 0E 18			db	018h, 018h, 00Eh, 018h, 018h, 018h, 018h, 070h, 000h, 000h, 000h, 000h
       2  17D8	18 18 18 70
       2  17DC	00 00 00 00
 2947: 2  17E0	00 00 76 DC			db	000h, 000h, 076h, 0DCh, 000h, 000h, 000h, 000h, 000h, 000h, 000h, 000h
       2  17E4	00 00 00 00
       2  17E8	00 00 00 00
 2948: 2  17EC	00 00 00 00			db	000h, 000h, 000h, 000h, 000h, 000h, 000h, 000h, 010h, 038h, 06Ch, 0C6h
       2  17F0	00 00 00 00
       2  17F4	10 38 6C C6
 2949: 2  17F8	C6 C6 FE 00			db	0C6h, 0C6h, 0FEh, 000h, 000h, 000h, 000h, 000h, 000h, 000h, 03Ch, 066h
       2  17FC	00 00 00 00
       2  1800	00 00 3C 66
 2950: 2  1804	C2 C0 C0 C0			db	0C2h, 0C0h, 0C0h, 0C0h, 0C2h, 066h, 03Ch, 00Ch, 006h, 07Ch, 000h, 000h
       2  1808	C2 66 3C 0C
       2  180C	06 7C 00 00
 2951: 2  1810	00 00 CC 00			db	000h, 000h, 0CCh, 000h, 000h, 0CCh, 0CCh, 0CCh, 0CCh, 0CCh, 0CCh, 076h
       2  1814	00 CC CC CC

ASEM-51 V1.3                                        Copyright (c) 2002 by W.W. Heinz                                         PAGE 62



 Line  I  Addr  Code            Source

       2  1818	CC CC CC 76
 2952: 2  181C	00 00 00 00			db	000h, 000h, 000h, 000h, 000h, 00Ch, 018h, 030h, 000h, 07Ch, 0C6h, 0FEh
       2  1820	00 0C 18 30
       2  1824	00 7C C6 FE
 2953: 2  1828	C0 C0 C6 7C			db	0C0h, 0C0h, 0C6h, 07Ch, 000h, 000h, 000h, 000h, 000h, 010h, 038h, 06Ch
       2  182C	00 00 00 00
       2  1830	00 10 38 6C
 2954: 2  1834	00 78 0C 7C			db	000h, 078h, 00Ch, 07Ch, 0CCh, 0CCh, 0CCh, 076h, 000h, 000h, 000h, 000h
       2  1838	CC CC CC 76
       2  183C	00 00 00 00
 2955: 2  1840	00 00 CC 00			db	000h, 000h, 0CCh, 000h, 000h, 078h, 00Ch, 07Ch, 0CCh, 0CCh, 0CCh, 076h
       2  1844	00 78 0C 7C
       2  1848	CC CC CC 76
 2956: 2  184C	00 00 00 00			db	000h, 000h, 000h, 000h, 000h, 060h, 030h, 018h, 000h, 078h, 00Ch, 07Ch
       2  1850	00 60 30 18
       2  1854	00 78 0C 7C
 2957: 2  1858	CC CC CC 76			db	0CCh, 0CCh, 0CCh, 076h, 000h, 000h, 000h, 000h, 000h, 038h, 06Ch, 038h
       2  185C	00 00 00 00
       2  1860	00 38 6C 38
 2958: 2  1864	00 78 0C 7C			db	000h, 078h, 00Ch, 07Ch, 0CCh, 0CCh, 0CCh, 076h, 000h, 000h, 000h, 000h
       2  1868	CC CC CC 76
       2  186C	00 00 00 00
 2959: 2  1870	00 00 00 00			db	000h, 000h, 000h, 000h, 03Ch, 066h, 060h, 060h, 066h, 03Ch, 00Ch, 006h
       2  1874	3C 66 60 60
       2  1878	66 3C 0C 06
 2960: 2  187C	3C 00 00 00			db	03Ch, 000h, 000h, 000h, 000h, 010h, 038h, 06Ch, 000h, 07Ch, 0C6h, 0FEh
       2  1880	00 10 38 6C
       2  1884	00 7C C6 FE
 2961: 2  1888	C0 C0 C6 7C			db	0C0h, 0C0h, 0C6h, 07Ch, 000h, 000h, 000h, 000h, 000h, 000h, 0C6h, 000h
       2  188C	00 00 00 00
       2  1890	00 00 C6 00
 2962: 2  1894	00 7C C6 FE			db	000h, 07Ch, 0C6h, 0FEh, 0C0h, 0C0h, 0C6h, 07Ch, 000h, 000h, 000h, 000h
       2  1898	C0 C0 C6 7C
       2  189C	00 00 00 00
 2963: 2  18A0	00 60 30 18			db	000h, 060h, 030h, 018h, 000h, 07Ch, 0C6h, 0FEh, 0C0h, 0C0h, 0C6h, 07Ch
       2  18A4	00 7C C6 FE
       2  18A8	C0 C0 C6 7C
 2964: 2  18AC	00 00 00 00			db	000h, 000h, 000h, 000h, 000h, 000h, 066h, 000h, 000h, 038h, 018h, 018h
       2  18B0	00 00 66 00
       2  18B4	00 38 18 18
 2965: 2  18B8	18 18 18 3C			db	018h, 018h, 018h, 03Ch, 000h, 000h, 000h, 000h, 000h, 018h, 03Ch, 066h
       2  18BC	00 00 00 00
       2  18C0	00 18 3C 66
 2966: 2  18C4	00 38 18 18			db	000h, 038h, 018h, 018h, 018h, 018h, 018h, 03Ch, 000h, 000h, 000h, 000h
       2  18C8	18 18 18 3C
       2  18CC	00 00 00 00
 2967: 2  18D0	00 60 30 18			db	000h, 060h, 030h, 018h, 000h, 038h, 018h, 018h, 018h, 018h, 018h, 03Ch
       2  18D4	00 38 18 18
       2  18D8	18 18 18 3C
 2968: 2  18DC	00 00 00 00			db	000h, 000h, 000h, 000h, 000h, 0C6h, 000h, 010h, 038h, 06Ch, 0C6h, 0C6h
       2  18E0	00 C6 00 10
       2  18E4	38 6C C6 C6
 2969: 2  18E8	FE C6 C6 C6			db	0FEh, 0C6h, 0C6h, 0C6h, 000h, 000h, 000h, 000h, 038h, 06Ch, 038h, 000h
       2  18EC	00 00 00 00
       2  18F0	38 6C 38 00
 2970: 2  18F4	38 6C C6 C6			db	038h, 06Ch, 0C6h, 0C6h, 0FEh, 0C6h, 0C6h, 0C6h, 000h, 000h, 000h, 000h

ASEM-51 V1.3                                        Copyright (c) 2002 by W.W. Heinz                                         PAGE 63



 Line  I  Addr  Code            Source

       2  18F8	FE C6 C6 C6
       2  18FC	00 00 00 00
 2971: 2  1900	18 30 60 00			db	018h, 030h, 060h, 000h, 0FEh, 066h, 060h, 07Ch, 060h, 060h, 066h, 0FEh
       2  1904	FE 66 60 7C
       2  1908	60 60 66 FE
 2972: 2  190C	00 00 00 00			db	000h, 000h, 000h, 000h, 000h, 000h, 000h, 000h, 000h, 0CCh, 076h, 036h
       2  1910	00 00 00 00
       2  1914	00 CC 76 36
 2973: 2  1918	7E D8 D8 6E			db	07Eh, 0D8h, 0D8h, 06Eh, 000h, 000h, 000h, 000h, 000h, 000h, 03Eh, 06Ch
       2  191C	00 00 00 00
       2  1920	00 00 3E 6C
 2974: 2  1924	CC CC FE CC			db	0CCh, 0CCh, 0FEh, 0CCh, 0CCh, 0CCh, 0CCh, 0CEh, 000h, 000h, 000h, 000h
       2  1928	CC CC CC CE
       2  192C	00 00 00 00
 2975: 2  1930	00 10 38 6C			db	000h, 010h, 038h, 06Ch, 000h, 07Ch, 0C6h, 0C6h, 0C6h, 0C6h, 0C6h, 07Ch
       2  1934	00 7C C6 C6
       2  1938	C6 C6 C6 7C
 2976: 2  193C	00 00 00 00			db	000h, 000h, 000h, 000h, 000h, 000h, 0C6h, 000h, 000h, 07Ch, 0C6h, 0C6h
       2  1940	00 00 C6 00
       2  1944	00 7C C6 C6
 2977: 2  1948	C6 C6 C6 7C			db	0C6h, 0C6h, 0C6h, 07Ch, 000h, 000h, 000h, 000h, 000h, 060h, 030h, 018h
       2  194C	00 00 00 00
       2  1950	00 60 30 18
 2978: 2  1954	00 7C C6 C6			db	000h, 07Ch, 0C6h, 0C6h, 0C6h, 0C6h, 0C6h, 07Ch, 000h, 000h, 000h, 000h
       2  1958	C6 C6 C6 7C
       2  195C	00 00 00 00
 2979: 2  1960	00 30 78 CC			db	000h, 030h, 078h, 0CCh, 000h, 0CCh, 0CCh, 0CCh, 0CCh, 0CCh, 0CCh, 076h
       2  1964	00 CC CC CC
       2  1968	CC CC CC 76
 2980: 2  196C	00 00 00 00			db	000h, 000h, 000h, 000h, 000h, 060h, 030h, 018h, 000h, 0CCh, 0CCh, 0CCh
       2  1970	00 60 30 18
       2  1974	00 CC CC CC
 2981: 2  1978	CC CC CC 76			db	0CCh, 0CCh, 0CCh, 076h, 000h, 000h, 000h, 000h, 000h, 000h, 0C6h, 000h
       2  197C	00 00 00 00
       2  1980	00 00 C6 00
 2982: 2  1984	00 C6 C6 C6			db	000h, 0C6h, 0C6h, 0C6h, 0C6h, 0C6h, 0C6h, 07Eh, 006h, 00Ch, 078h, 000h
       2  1988	C6 C6 C6 7E
       2  198C	06 0C 78 00
 2983: 2  1990	00 C6 00 7C			db	000h, 0C6h, 000h, 07Ch, 0C6h, 0C6h, 0C6h, 0C6h, 0C6h, 0C6h, 0C6h, 07Ch
       2  1994	C6 C6 C6 C6
       2  1998	C6 C6 C6 7C
 2984: 2  199C	00 00 00 00			db	000h, 000h, 000h, 000h, 000h, 0C6h, 000h, 0C6h, 0C6h, 0C6h, 0C6h, 0C6h
       2  19A0	00 C6 00 C6
       2  19A4	C6 C6 C6 C6
 2985: 2  19A8	C6 C6 C6 7C			db	0C6h, 0C6h, 0C6h, 07Ch, 000h, 000h, 000h, 000h, 000h, 018h, 018h, 03Ch
       2  19AC	00 00 00 00
       2  19B0	00 18 18 3C
 2986: 2  19B4	66 60 60 60			db	066h, 060h, 060h, 060h, 066h, 03Ch, 018h, 018h, 000h, 000h, 000h, 000h
       2  19B8	66 3C 18 18
       2  19BC	00 00 00 00
 2987: 2  19C0	00 38 6C 64			db	000h, 038h, 06Ch, 064h, 060h, 0F0h, 060h, 060h, 060h, 060h, 0E6h, 0FCh
       2  19C4	60 F0 60 60
       2  19C8	60 60 E6 FC
 2988: 2  19CC	00 00 00 00			db	000h, 000h, 000h, 000h, 000h, 000h, 066h, 066h, 03Ch, 018h, 07Eh, 018h
       2  19D0	00 00 66 66
       2  19D4	3C 18 7E 18

ASEM-51 V1.3                                        Copyright (c) 2002 by W.W. Heinz                                         PAGE 64



 Line  I  Addr  Code            Source

 2989: 2  19D8	7E 18 18 18			db	07Eh, 018h, 018h, 018h, 000h, 000h, 000h, 000h, 000h, 0F8h, 0CCh, 0CCh
       2  19DC	00 00 00 00
       2  19E0	00 F8 CC CC
 2990: 2  19E4	F8 C4 CC DE			db	0F8h, 0C4h, 0CCh, 0DEh, 0CCh, 0CCh, 0CCh, 0C6h, 000h, 000h, 000h, 000h
       2  19E8	CC CC CC C6
       2  19EC	00 00 00 00
 2991: 2  19F0	00 0E 1B 18			db	000h, 00Eh, 01Bh, 018h, 018h, 018h, 07Eh, 018h, 018h, 018h, 018h, 018h
       2  19F4	18 18 7E 18
       2  19F8	18 18 18 18
 2992: 2  19FC	D8 70 00 00			db	0D8h, 070h, 000h, 000h, 000h, 018h, 030h, 060h, 000h, 078h, 00Ch, 07Ch
       2  1A00	00 18 30 60
       2  1A04	00 78 0C 7C
 2993: 2  1A08	CC CC CC 76			db	0CCh, 0CCh, 0CCh, 076h, 000h, 000h, 000h, 000h, 000h, 00Ch, 018h, 030h
       2  1A0C	00 00 00 00
       2  1A10	00 0C 18 30
 2994: 2  1A14	00 38 18 18			db	000h, 038h, 018h, 018h, 018h, 018h, 018h, 03Ch, 000h, 000h, 000h, 000h
       2  1A18	18 18 18 3C
       2  1A1C	00 00 00 00
 2995: 2  1A20	00 18 30 60			db	000h, 018h, 030h, 060h, 000h, 07Ch, 0C6h, 0C6h, 0C6h, 0C6h, 0C6h, 07Ch
       2  1A24	00 7C C6 C6
       2  1A28	C6 C6 C6 7C
 2996: 2  1A2C	00 00 00 00			db	000h, 000h, 000h, 000h, 000h, 018h, 030h, 060h, 000h, 0CCh, 0CCh, 0CCh
       2  1A30	00 18 30 60
       2  1A34	00 CC CC CC
 2997: 2  1A38	CC CC CC 76			db	0CCh, 0CCh, 0CCh, 076h, 000h, 000h, 000h, 000h, 000h, 000h, 076h, 0DCh
       2  1A3C	00 00 00 00
       2  1A40	00 00 76 DC
 2998: 2  1A44	00 DC 66 66			db	000h, 0DCh, 066h, 066h, 066h, 066h, 066h, 066h, 000h, 000h, 000h, 000h
       2  1A48	66 66 66 66
       2  1A4C	00 00 00 00
 2999: 2  1A50	76 DC 00 C6			db	076h, 0DCh, 000h, 0C6h, 0E6h, 0F6h, 0FEh, 0DEh, 0CEh, 0C6h, 0C6h, 0C6h
       2  1A54	E6 F6 FE DE
       2  1A58	CE C6 C6 C6
 3000: 2  1A5C	00 00 00 00			db	000h, 000h, 000h, 000h, 000h, 03Ch, 06Ch, 06Ch, 03Eh, 000h, 07Eh, 000h
       2  1A60	00 3C 6C 6C
       2  1A64	3E 00 7E 00
 3001: 2  1A68	00 00 00 00			db	000h, 000h, 000h, 000h, 000h, 000h, 000h, 000h, 000h, 038h, 06Ch, 06Ch
       2  1A6C	00 00 00 00
       2  1A70	00 38 6C 6C
 3002: 2  1A74	38 00 7C 00			db	038h, 000h, 07Ch, 000h, 000h, 000h, 000h, 000h, 000h, 000h, 000h, 000h
       2  1A78	00 00 00 00
       2  1A7C	00 00 00 00
 3003: 2  1A80	00 00 30 30			db	000h, 000h, 030h, 030h, 000h, 030h, 030h, 060h, 0C0h, 0C6h, 0C6h, 07Ch
       2  1A84	00 30 30 60
       2  1A88	C0 C6 C6 7C
 3004: 2  1A8C	00 00 00 00			db	000h, 000h, 000h, 000h, 000h, 000h, 000h, 000h, 000h, 000h, 0FEh, 0C0h
       2  1A90	00 00 00 00
       2  1A94	00 00 FE C0
 3005: 2  1A98	C0 C0 C0 00			db	0C0h, 0C0h, 0C0h, 000h, 000h, 000h, 000h, 000h, 000h, 000h, 000h, 000h
       2  1A9C	00 00 00 00
       2  1AA0	00 00 00 00
 3006: 2  1AA4	00 00 FE 06			db	000h, 000h, 0FEh, 006h, 006h, 006h, 006h, 000h, 000h, 000h, 000h, 000h
       2  1AA8	06 06 06 00
       2  1AAC	00 00 00 00
 3007: 2  1AB0	00 C0 C0 C2			db	000h, 0C0h, 0C0h, 0C2h, 0C6h, 0CCh, 018h, 030h, 060h, 0DCh, 086h, 00Ch
       2  1AB4	C6 CC 18 30

ASEM-51 V1.3                                        Copyright (c) 2002 by W.W. Heinz                                         PAGE 65



 Line  I  Addr  Code            Source

       2  1AB8	60 DC 86 0C
 3008: 2  1ABC	18 3E 00 00			db	018h, 03Eh, 000h, 000h, 000h, 0C0h, 0C0h, 0C2h, 0C6h, 0CCh, 018h, 030h
       2  1AC0	00 C0 C0 C2
       2  1AC4	C6 CC 18 30
 3009: 2  1AC8	66 CE 9E 3E			db	066h, 0CEh, 09Eh, 03Eh, 006h, 006h, 000h, 000h, 000h, 000h, 018h, 018h
       2  1ACC	06 06 00 00
       2  1AD0	00 00 18 18
 3010: 2  1AD4	00 18 18 18			db	000h, 018h, 018h, 018h, 03Ch, 03Ch, 03Ch, 018h, 000h, 000h, 000h, 000h
       2  1AD8	3C 3C 3C 18
       2  1ADC	00 00 00 00
 3011: 2  1AE0	00 00 00 00			db	000h, 000h, 000h, 000h, 000h, 036h, 06Ch, 0D8h, 06Ch, 036h, 000h, 000h
       2  1AE4	00 36 6C D8
       2  1AE8	6C 36 00 00
 3012: 2  1AEC	00 00 00 00			db	000h, 000h, 000h, 000h, 000h, 000h, 000h, 000h, 000h, 0D8h, 06Ch, 036h
       2  1AF0	00 00 00 00
       2  1AF4	00 D8 6C 36
 3013: 2  1AF8	6C D8 00 00			db	06Ch, 0D8h, 000h, 000h, 000h, 000h, 000h, 000h, 011h, 044h, 011h, 044h
       2  1AFC	00 00 00 00
       2  1B00	11 44 11 44
 3014: 2  1B04	11 44 11 44			db	011h, 044h, 011h, 044h, 011h, 044h, 011h, 044h, 011h, 044h, 011h, 044h
       2  1B08	11 44 11 44
       2  1B0C	11 44 11 44
 3015: 2  1B10	55 AA 55 AA			db	055h, 0AAh, 055h, 0AAh, 055h, 0AAh, 055h, 0AAh, 055h, 0AAh, 055h, 0AAh
       2  1B14	55 AA 55 AA
       2  1B18	55 AA 55 AA
 3016: 2  1B1C	55 AA 55 AA			db	055h, 0AAh, 055h, 0AAh, 0DDh, 077h, 0DDh, 077h, 0DDh, 077h, 0DDh, 077h
       2  1B20	DD 77 DD 77
       2  1B24	DD 77 DD 77
 3017: 2  1B28	DD 77 DD 77			db	0DDh, 077h, 0DDh, 077h, 0DDh, 077h, 0DDh, 077h, 018h, 018h, 018h, 018h
       2  1B2C	DD 77 DD 77
       2  1B30	18 18 18 18
 3018: 2  1B34	18 18 18 18			db	018h, 018h, 018h, 018h, 018h, 018h, 018h, 018h, 018h, 018h, 018h, 018h
       2  1B38	18 18 18 18
       2  1B3C	18 18 18 18
 3019: 2  1B40	18 18 18 18			db	018h, 018h, 018h, 018h, 018h, 018h, 018h, 0F8h, 018h, 018h, 018h, 018h
       2  1B44	18 18 18 F8
       2  1B48	18 18 18 18
 3020: 2  1B4C	18 18 18 18			db	018h, 018h, 018h, 018h, 018h, 018h, 018h, 018h, 018h, 0F8h, 018h, 0F8h
       2  1B50	18 18 18 18
       2  1B54	18 F8 18 F8
 3021: 2  1B58	18 18 18 18			db	018h, 018h, 018h, 018h, 018h, 018h, 018h, 018h, 036h, 036h, 036h, 036h
       2  1B5C	18 18 18 18
       2  1B60	36 36 36 36
 3022: 2  1B64	36 36 36 F6			db	036h, 036h, 036h, 0F6h, 036h, 036h, 036h, 036h, 036h, 036h, 036h, 036h
       2  1B68	36 36 36 36
       2  1B6C	36 36 36 36
 3023: 2  1B70	00 00 00 00			db	000h, 000h, 000h, 000h, 000h, 000h, 000h, 0FEh, 036h, 036h, 036h, 036h
       2  1B74	00 00 00 FE
       2  1B78	36 36 36 36
 3024: 2  1B7C	36 36 36 36			db	036h, 036h, 036h, 036h, 000h, 000h, 000h, 000h, 000h, 0F8h, 018h, 0F8h
       2  1B80	00 00 00 00
       2  1B84	00 F8 18 F8
 3025: 2  1B88	18 18 18 18			db	018h, 018h, 018h, 018h, 018h, 018h, 018h, 018h, 036h, 036h, 036h, 036h
       2  1B8C	18 18 18 18
       2  1B90	36 36 36 36
 3026: 2  1B94	36 F6 06 F6			db	036h, 0F6h, 006h, 0F6h, 036h, 036h, 036h, 036h, 036h, 036h, 036h, 036h

ASEM-51 V1.3                                        Copyright (c) 2002 by W.W. Heinz                                         PAGE 66



 Line  I  Addr  Code            Source

       2  1B98	36 36 36 36
       2  1B9C	36 36 36 36
 3027: 2  1BA0	36 36 36 36			db	036h, 036h, 036h, 036h, 036h, 036h, 036h, 036h, 036h, 036h, 036h, 036h
       2  1BA4	36 36 36 36
       2  1BA8	36 36 36 36
 3028: 2  1BAC	36 36 36 36			db	036h, 036h, 036h, 036h, 000h, 000h, 000h, 000h, 000h, 0FEh, 006h, 0F6h
       2  1BB0	00 00 00 00
       2  1BB4	00 FE 06 F6
 3029: 2  1BB8	36 36 36 36			db	036h, 036h, 036h, 036h, 036h, 036h, 036h, 036h, 036h, 036h, 036h, 036h
       2  1BBC	36 36 36 36
       2  1BC0	36 36 36 36
 3030: 2  1BC4	36 F6 06 FE			db	036h, 0F6h, 006h, 0FEh, 000h, 000h, 000h, 000h, 000h, 000h, 000h, 000h
       2  1BC8	00 00 00 00
       2  1BCC	00 00 00 00
 3031: 2  1BD0	36 36 36 36			db	036h, 036h, 036h, 036h, 036h, 036h, 036h, 0FEh, 000h, 000h, 000h, 000h
       2  1BD4	36 36 36 FE
       2  1BD8	00 00 00 00
 3032: 2  1BDC	00 00 00 00			db	000h, 000h, 000h, 000h, 018h, 018h, 018h, 018h, 018h, 0F8h, 018h, 0F8h
       2  1BE0	18 18 18 18
       2  1BE4	18 F8 18 F8
 3033: 2  1BE8	00 00 00 00			db	000h, 000h, 000h, 000h, 000h, 000h, 000h, 000h, 000h, 000h, 000h, 000h
       2  1BEC	00 00 00 00
       2  1BF0	00 00 00 00
 3034: 2  1BF4	00 00 00 F8			db	000h, 000h, 000h, 0F8h, 018h, 018h, 018h, 018h, 018h, 018h, 018h, 018h
       2  1BF8	18 18 18 18
       2  1BFC	18 18 18 18
 3035: 2  1C00	18 18 18 18			db	018h, 018h, 018h, 018h, 018h, 018h, 018h, 01Fh, 000h, 000h, 000h, 000h
       2  1C04	18 18 18 1F
       2  1C08	00 00 00 00
 3036: 2  1C0C	00 00 00 00			db	000h, 000h, 000h, 000h, 018h, 018h, 018h, 018h, 018h, 018h, 018h, 0FFh
       2  1C10	18 18 18 18
       2  1C14	18 18 18 FF
 3037: 2  1C18	00 00 00 00			db	000h, 000h, 000h, 000h, 000h, 000h, 000h, 000h, 000h, 000h, 000h, 000h
       2  1C1C	00 00 00 00
       2  1C20	00 00 00 00
 3038: 2  1C24	00 00 00 FF			db	000h, 000h, 000h, 0FFh, 018h, 018h, 018h, 018h, 018h, 018h, 018h, 018h
       2  1C28	18 18 18 18
       2  1C2C	18 18 18 18
 3039: 2  1C30	18 18 18 18			db	018h, 018h, 018h, 018h, 018h, 018h, 018h, 01Fh, 018h, 018h, 018h, 018h
       2  1C34	18 18 18 1F
       2  1C38	18 18 18 18
 3040: 2  1C3C	18 18 18 18			db	018h, 018h, 018h, 018h, 000h, 000h, 000h, 000h, 000h, 000h, 000h, 0FFh
       2  1C40	00 00 00 00
       2  1C44	00 00 00 FF
 3041: 2  1C48	00 00 00 00			db	000h, 000h, 000h, 000h, 000h, 000h, 000h, 000h, 018h, 018h, 018h, 018h
       2  1C4C	00 00 00 00
       2  1C50	18 18 18 18
 3042: 2  1C54	18 18 18 FF			db	018h, 018h, 018h, 0FFh, 018h, 018h, 018h, 018h, 018h, 018h, 018h, 018h
       2  1C58	18 18 18 18
       2  1C5C	18 18 18 18
 3043: 2  1C60	18 18 18 18			db	018h, 018h, 018h, 018h, 018h, 01Fh, 018h, 01Fh, 018h, 018h, 018h, 018h
       2  1C64	18 1F 18 1F
       2  1C68	18 18 18 18
 3044: 2  1C6C	18 18 18 18			db	018h, 018h, 018h, 018h, 036h, 036h, 036h, 036h, 036h, 036h, 036h, 037h
       2  1C70	36 36 36 36
       2  1C74	36 36 36 37

ASEM-51 V1.3                                        Copyright (c) 2002 by W.W. Heinz                                         PAGE 67



 Line  I  Addr  Code            Source

 3045: 2  1C78	36 36 36 36			db	036h, 036h, 036h, 036h, 036h, 036h, 036h, 036h, 036h, 036h, 036h, 036h
       2  1C7C	36 36 36 36
       2  1C80	36 36 36 36
 3046: 2  1C84	36 37 30 3F			db	036h, 037h, 030h, 03Fh, 000h, 000h, 000h, 000h, 000h, 000h, 000h, 000h
       2  1C88	00 00 00 00
       2  1C8C	00 00 00 00
 3047: 2  1C90	00 00 00 00			db	000h, 000h, 000h, 000h, 000h, 03Fh, 030h, 037h, 036h, 036h, 036h, 036h
       2  1C94	00 3F 30 37
       2  1C98	36 36 36 36
 3048: 2  1C9C	36 36 36 36			db	036h, 036h, 036h, 036h, 036h, 036h, 036h, 036h, 036h, 0F7h, 000h, 0FFh
       2  1CA0	36 36 36 36
       2  1CA4	36 F7 00 FF
 3049: 2  1CA8	00 00 00 00			db	000h, 000h, 000h, 000h, 000h, 000h, 000h, 000h, 000h, 000h, 000h, 000h
       2  1CAC	00 00 00 00
       2  1CB0	00 00 00 00
 3050: 2  1CB4	00 FF 00 F7			db	000h, 0FFh, 000h, 0F7h, 036h, 036h, 036h, 036h, 036h, 036h, 036h, 036h
       2  1CB8	36 36 36 36
       2  1CBC	36 36 36 36
 3051: 2  1CC0	36 36 36 36			db	036h, 036h, 036h, 036h, 036h, 037h, 030h, 037h, 036h, 036h, 036h, 036h
       2  1CC4	36 37 30 37
       2  1CC8	36 36 36 36
 3052: 2  1CCC	36 36 36 36			db	036h, 036h, 036h, 036h, 000h, 000h, 000h, 000h, 000h, 0FFh, 000h, 0FFh
       2  1CD0	00 00 00 00
       2  1CD4	00 FF 00 FF
 3053: 2  1CD8	00 00 00 00			db	000h, 000h, 000h, 000h, 000h, 000h, 000h, 000h, 036h, 036h, 036h, 036h
       2  1CDC	00 00 00 00
       2  1CE0	36 36 36 36
 3054: 2  1CE4	36 F7 00 F7			db	036h, 0F7h, 000h, 0F7h, 036h, 036h, 036h, 036h, 036h, 036h, 036h, 036h
       2  1CE8	36 36 36 36
       2  1CEC	36 36 36 36
 3055: 2  1CF0	18 18 18 18			db	018h, 018h, 018h, 018h, 018h, 0FFh, 000h, 0FFh, 000h, 000h, 000h, 000h
       2  1CF4	18 FF 00 FF
       2  1CF8	00 00 00 00
 3056: 2  1CFC	00 00 00 00			db	000h, 000h, 000h, 000h, 036h, 036h, 036h, 036h, 036h, 036h, 036h, 0FFh
       2  1D00	36 36 36 36
       2  1D04	36 36 36 FF
 3057: 2  1D08	00 00 00 00			db	000h, 000h, 000h, 000h, 000h, 000h, 000h, 000h, 000h, 000h, 000h, 000h
       2  1D0C	00 00 00 00
       2  1D10	00 00 00 00
 3058: 2  1D14	00 FF 00 FF			db	000h, 0FFh, 000h, 0FFh, 018h, 018h, 018h, 018h, 018h, 018h, 018h, 018h
       2  1D18	18 18 18 18
       2  1D1C	18 18 18 18
 3059: 2  1D20	00 00 00 00			db	000h, 000h, 000h, 000h, 000h, 000h, 000h, 0FFh, 036h, 036h, 036h, 036h
       2  1D24	00 00 00 FF
       2  1D28	36 36 36 36
 3060: 2  1D2C	36 36 36 36			db	036h, 036h, 036h, 036h, 036h, 036h, 036h, 036h, 036h, 036h, 036h, 03Fh
       2  1D30	36 36 36 36
       2  1D34	36 36 36 3F
 3061: 2  1D38	00 00 00 00			db	000h, 000h, 000h, 000h, 000h, 000h, 000h, 000h, 018h, 018h, 018h, 018h
       2  1D3C	00 00 00 00
       2  1D40	18 18 18 18
 3062: 2  1D44	18 1F 18 1F			db	018h, 01Fh, 018h, 01Fh, 000h, 000h, 000h, 000h, 000h, 000h, 000h, 000h
       2  1D48	00 00 00 00
       2  1D4C	00 00 00 00
 3063: 2  1D50	00 00 00 00			db	000h, 000h, 000h, 000h, 000h, 01Fh, 018h, 01Fh, 018h, 018h, 018h, 018h
       2  1D54	00 1F 18 1F

ASEM-51 V1.3                                        Copyright (c) 2002 by W.W. Heinz                                         PAGE 68



 Line  I  Addr  Code            Source

       2  1D58	18 18 18 18
 3064: 2  1D5C	18 18 18 18			db	018h, 018h, 018h, 018h, 000h, 000h, 000h, 000h, 000h, 000h, 000h, 03Fh
       2  1D60	00 00 00 00
       2  1D64	00 00 00 3F
 3065: 2  1D68	36 36 36 36			db	036h, 036h, 036h, 036h, 036h, 036h, 036h, 036h, 036h, 036h, 036h, 036h
       2  1D6C	36 36 36 36
       2  1D70	36 36 36 36
 3066: 2  1D74	36 36 36 FF			db	036h, 036h, 036h, 0FFh, 036h, 036h, 036h, 036h, 036h, 036h, 036h, 036h
       2  1D78	36 36 36 36
       2  1D7C	36 36 36 36
 3067: 2  1D80	18 18 18 18			db	018h, 018h, 018h, 018h, 018h, 0FFh, 018h, 0FFh, 018h, 018h, 018h, 018h
       2  1D84	18 FF 18 FF
       2  1D88	18 18 18 18
 3068: 2  1D8C	18 18 18 18			db	018h, 018h, 018h, 018h, 018h, 018h, 018h, 018h, 018h, 018h, 018h, 0F8h
       2  1D90	18 18 18 18
       2  1D94	18 18 18 F8
 3069: 2  1D98	00 00 00 00			db	000h, 000h, 000h, 000h, 000h, 000h, 000h, 000h, 000h, 000h, 000h, 000h
       2  1D9C	00 00 00 00
       2  1DA0	00 00 00 00
 3070: 2  1DA4	00 00 00 1F			db	000h, 000h, 000h, 01Fh, 018h, 018h, 018h, 018h, 018h, 018h, 018h, 018h
       2  1DA8	18 18 18 18
       2  1DAC	18 18 18 18
 3071: 2  1DB0	FF FF FF FF			db	0FFh, 0FFh, 0FFh, 0FFh, 0FFh, 0FFh, 0FFh, 0FFh, 0FFh, 0FFh, 0FFh, 0FFh
       2  1DB4	FF FF FF FF
       2  1DB8	FF FF FF FF
 3072: 2  1DBC	FF FF FF FF			db	0FFh, 0FFh, 0FFh, 0FFh, 000h, 000h, 000h, 000h, 000h, 000h, 000h, 0FFh
       2  1DC0	00 00 00 00
       2  1DC4	00 00 00 FF
 3073: 2  1DC8	FF FF FF FF			db	0FFh, 0FFh, 0FFh, 0FFh, 0FFh, 0FFh, 0FFh, 0FFh, 0F0h, 0F0h, 0F0h, 0F0h
       2  1DCC	FF FF FF FF
       2  1DD0	F0 F0 F0 F0
 3074: 2  1DD4	F0 F0 F0 F0			db	0F0h, 0F0h, 0F0h, 0F0h, 0F0h, 0F0h, 0F0h, 0F0h, 0F0h, 0F0h, 0F0h, 0F0h
       2  1DD8	F0 F0 F0 F0
       2  1DDC	F0 F0 F0 F0
 3075: 2  1DE0	0F 0F 0F 0F			db	00Fh, 00Fh, 00Fh, 00Fh, 00Fh, 00Fh, 00Fh, 00Fh, 00Fh, 00Fh, 00Fh, 00Fh
       2  1DE4	0F 0F 0F 0F
       2  1DE8	0F 0F 0F 0F
 3076: 2  1DEC	0F 0F 0F 0F			db	00Fh, 00Fh, 00Fh, 00Fh, 0FFh, 0FFh, 0FFh, 0FFh, 0FFh, 0FFh, 0FFh, 000h
       2  1DF0	FF FF FF FF
       2  1DF4	FF FF FF 00
 3077: 2  1DF8	00 00 00 00			db	000h, 000h, 000h, 000h, 000h, 000h, 000h, 000h, 000h, 000h, 000h, 000h
       2  1DFC	00 00 00 00
       2  1E00	00 00 00 00
 3078: 2  1E04	00 76 DC D8			db	000h, 076h, 0DCh, 0D8h, 0D8h, 0D8h, 0DCh, 076h, 000h, 000h, 000h, 000h
       2  1E08	D8 D8 DC 76
       2  1E0C	00 00 00 00
 3079: 2  1E10	00 00 78 CC			db	000h, 000h, 078h, 0CCh, 0CCh, 0CCh, 0D8h, 0CCh, 0C6h, 0C6h, 0C6h, 0CCh
       2  1E14	CC CC D8 CC
       2  1E18	C6 C6 C6 CC
 3080: 2  1E1C	00 00 00 00			db	000h, 000h, 000h, 000h, 000h, 000h, 0FEh, 0C6h, 0C6h, 0C0h, 0C0h, 0C0h
       2  1E20	00 00 FE C6
       2  1E24	C6 C0 C0 C0
 3081: 2  1E28	C0 C0 C0 C0			db	0C0h, 0C0h, 0C0h, 0C0h, 000h, 000h, 000h, 000h, 000h, 000h, 000h, 000h
       2  1E2C	00 00 00 00
       2  1E30	00 00 00 00
 3082: 2  1E34	FE 6C 6C 6C			db	0FEh, 06Ch, 06Ch, 06Ch, 06Ch, 06Ch, 06Ch, 06Ch, 000h, 000h, 000h, 000h

ASEM-51 V1.3                                        Copyright (c) 2002 by W.W. Heinz                                         PAGE 69



 Line  I  Addr  Code            Source

       2  1E38	6C 6C 6C 6C
       2  1E3C	00 00 00 00
 3083: 2  1E40	00 00 00 FE			db	000h, 000h, 000h, 0FEh, 0C6h, 060h, 030h, 018h, 030h, 060h, 0C6h, 0FEh
       2  1E44	C6 60 30 18
       2  1E48	30 60 C6 FE
 3084: 2  1E4C	00 00 00 00			db	000h, 000h, 000h, 000h, 000h, 000h, 000h, 000h, 000h, 07Eh, 0D8h, 0D8h
       2  1E50	00 00 00 00
       2  1E54	00 7E D8 D8
 3085: 2  1E58	D8 D8 D8 70			db	0D8h, 0D8h, 0D8h, 070h, 000h, 000h, 000h, 000h, 000h, 000h, 000h, 000h
       2  1E5C	00 00 00 00
       2  1E60	00 00 00 00
 3086: 2  1E64	66 66 66 66			db	066h, 066h, 066h, 066h, 066h, 07Ch, 060h, 060h, 0C0h, 000h, 000h, 000h
       2  1E68	66 7C 60 60
       2  1E6C	C0 00 00 00
 3087: 2  1E70	00 00 00 00			db	000h, 000h, 000h, 000h, 076h, 0DCh, 018h, 018h, 018h, 018h, 018h, 018h
       2  1E74	76 DC 18 18
       2  1E78	18 18 18 18
 3088: 2  1E7C	00 00 00 00			db	000h, 000h, 000h, 000h, 000h, 000h, 000h, 07Eh, 018h, 03Ch, 066h, 066h
       2  1E80	00 00 00 7E
       2  1E84	18 3C 66 66
 3089: 2  1E88	66 3C 18 7E			db	066h, 03Ch, 018h, 07Eh, 000h, 000h, 000h, 000h, 000h, 000h, 000h, 038h
       2  1E8C	00 00 00 00
       2  1E90	00 00 00 38
 3090: 2  1E94	6C C6 C6 FE			db	06Ch, 0C6h, 0C6h, 0FEh, 0C6h, 0C6h, 06Ch, 038h, 000h, 000h, 000h, 000h
       2  1E98	C6 C6 6C 38
       2  1E9C	00 00 00 00
 3091: 2  1EA0	00 00 38 6C			db	000h, 000h, 038h, 06Ch, 0C6h, 0C6h, 0C6h, 06Ch, 06Ch, 06Ch, 06Ch, 0EEh
       2  1EA4	C6 C6 C6 6C
       2  1EA8	6C 6C 6C EE
 3092: 2  1EAC	00 00 00 00			db	000h, 000h, 000h, 000h, 000h, 000h, 01Eh, 030h, 018h, 00Ch, 03Eh, 066h
       2  1EB0	00 00 1E 30
       2  1EB4	18 0C 3E 66
 3093: 2  1EB8	66 66 66 3C			db	066h, 066h, 066h, 03Ch, 000h, 000h, 000h, 000h, 000h, 000h, 000h, 000h
       2  1EBC	00 00 00 00
       2  1EC0	00 00 00 00
 3094: 2  1EC4	00 7E DB DB			db	000h, 07Eh, 0DBh, 0DBh, 0DBh, 07Eh, 000h, 000h, 000h, 000h, 000h, 000h
       2  1EC8	DB 7E 00 00
       2  1ECC	00 00 00 00
 3095: 2  1ED0	00 00 00 03			db	000h, 000h, 000h, 003h, 006h, 07Eh, 0DBh, 0DBh, 0F3h, 07Eh, 060h, 0C0h
       2  1ED4	06 7E DB DB
       2  1ED8	F3 7E 60 C0
 3096: 2  1EDC	00 00 00 00			db	000h, 000h, 000h, 000h, 000h, 000h, 01Ch, 030h, 060h, 060h, 07Ch, 060h
       2  1EE0	00 00 1C 30
       2  1EE4	60 60 7C 60
 3097: 2  1EE8	60 60 30 1C			db	060h, 060h, 030h, 01Ch, 000h, 000h, 000h, 000h, 000h, 000h, 000h, 07Ch
       2  1EEC	00 00 00 00
       2  1EF0	00 00 00 7C
 3098: 2  1EF4	C6 C6 C6 C6			db	0C6h, 0C6h, 0C6h, 0C6h, 0C6h, 0C6h, 0C6h, 0C6h, 000h, 000h, 000h, 000h
       2  1EF8	C6 C6 C6 C6
       2  1EFC	00 00 00 00
 3099: 2  1F00	00 00 00 00			db	000h, 000h, 000h, 000h, 0FEh, 000h, 000h, 0FEh, 000h, 000h, 0FEh, 000h
       2  1F04	FE 00 00 FE
       2  1F08	00 00 FE 00
 3100: 2  1F0C	00 00 00 00			db	000h, 000h, 000h, 000h, 000h, 000h, 000h, 000h, 018h, 018h, 07Eh, 018h
       2  1F10	00 00 00 00
       2  1F14	18 18 7E 18

ASEM-51 V1.3                                        Copyright (c) 2002 by W.W. Heinz                                         PAGE 70



 Line  I  Addr  Code            Source

 3101: 2  1F18	18 00 00 FF			db	018h, 000h, 000h, 0FFh, 000h, 000h, 000h, 000h, 000h, 000h, 000h, 030h
       2  1F1C	00 00 00 00
       2  1F20	00 00 00 30
 3102: 2  1F24	18 0C 06 0C			db	018h, 00Ch, 006h, 00Ch, 018h, 030h, 000h, 07Eh, 000h, 000h, 000h, 000h
       2  1F28	18 30 00 7E
       2  1F2C	00 00 00 00
 3103: 2  1F30	00 00 00 0C			db	000h, 000h, 000h, 00Ch, 018h, 030h, 060h, 030h, 018h, 00Ch, 000h, 07Eh
       2  1F34	18 30 60 30
       2  1F38	18 0C 00 7E
 3104: 2  1F3C	00 00 00 00			db	000h, 000h, 000h, 000h, 000h, 000h, 00Eh, 01Bh, 01Bh, 018h, 018h, 018h
       2  1F40	00 00 0E 1B
       2  1F44	1B 18 18 18
 3105: 2  1F48	18 18 18 18			db	018h, 018h, 018h, 018h, 018h, 018h, 018h, 018h, 018h, 018h, 018h, 018h
       2  1F4C	18 18 18 18
       2  1F50	18 18 18 18
 3106: 2  1F54	18 18 18 18			db	018h, 018h, 018h, 018h, 0D8h, 0D8h, 0D8h, 070h, 000h, 000h, 000h, 000h
       2  1F58	D8 D8 D8 70
       2  1F5C	00 00 00 00
 3107: 2  1F60	00 00 00 00			db	000h, 000h, 000h, 000h, 018h, 018h, 000h, 07Eh, 000h, 018h, 018h, 000h
       2  1F64	18 18 00 7E
       2  1F68	00 18 18 00
 3108: 2  1F6C	00 00 00 00			db	000h, 000h, 000h, 000h, 000h, 000h, 000h, 000h, 000h, 076h, 0DCh, 000h
       2  1F70	00 00 00 00
       2  1F74	00 76 DC 00
 3109: 2  1F78	76 DC 00 00			db	076h, 0DCh, 000h, 000h, 000h, 000h, 000h, 000h, 000h, 038h, 06Ch, 06Ch
       2  1F7C	00 00 00 00
       2  1F80	00 38 6C 6C
 3110: 2  1F84	38 00 00 00			db	038h, 000h, 000h, 000h, 000h, 000h, 000h, 000h, 000h, 000h, 000h, 000h
       2  1F88	00 00 00 00
       2  1F8C	00 00 00 00
 3111: 2  1F90	00 00 00 00			db	000h, 000h, 000h, 000h, 000h, 000h, 000h, 018h, 018h, 000h, 000h, 000h
       2  1F94	00 00 00 18
       2  1F98	18 00 00 00
 3112: 2  1F9C	00 00 00 00			db	000h, 000h, 000h, 000h, 000h, 000h, 000h, 000h, 000h, 000h, 000h, 000h
       2  1FA0	00 00 00 00
       2  1FA4	00 00 00 00
 3113: 2  1FA8	18 00 00 00			db	018h, 000h, 000h, 000h, 000h, 000h, 000h, 000h, 000h, 00Fh, 00Ch, 00Ch
       2  1FAC	00 00 00 00
       2  1FB0	00 0F 0C 0C
 3114: 2  1FB4	0C 0C 0C EC			db	00Ch, 00Ch, 00Ch, 0ECh, 06Ch, 06Ch, 03Ch, 01Ch, 000h, 000h, 000h, 000h
       2  1FB8	6C 6C 3C 1C
       2  1FBC	00 00 00 00
 3115: 2  1FC0	00 D8 6C 6C			db	000h, 0D8h, 06Ch, 06Ch, 06Ch, 06Ch, 06Ch, 000h, 000h, 000h, 000h, 000h
       2  1FC4	6C 6C 6C 00
       2  1FC8	00 00 00 00
 3116: 2  1FCC	00 00 00 00			db	000h, 000h, 000h, 000h, 000h, 070h, 0D8h, 030h, 060h, 0C8h, 0F8h, 000h
       2  1FD0	00 70 D8 30
       2  1FD4	60 C8 F8 00
 3117: 2  1FD8	00 00 00 00			db	000h, 000h, 000h, 000h, 000h, 000h, 000h, 000h, 000h, 000h, 000h, 000h
       2  1FDC	00 00 00 00
       2  1FE0	00 00 00 00
 3118: 2  1FE4	7C 7C 7C 7C			db	07Ch, 07Ch, 07Ch, 07Ch, 07Ch, 07Ch, 07Ch, 000h, 000h, 000h, 000h, 000h
       2  1FE8	7C 7C 7C 00
       2  1FEC	00 00 00 00
 3119: 2  1FF0	00 00 00 00			db	000h, 000h, 000h, 000h, 000h, 000h, 000h, 000h, 000h, 000h, 000h, 000h
       2  1FF4	00 00 00 00

ASEM-51 V1.3                                        Copyright (c) 2002 by W.W. Heinz                                         PAGE 71



 Line  I  Addr  Code            Source

       2  1FF8	00 00 00 00
 3120: 2  1FFC	00 00 00 00			db	000h, 000h, 000h, 000h
 3121: 1			;		end
 3122:				;		$include (vt100_font.a51)
 3123:						END





                     register banks used:  0

                     no errors




ASEM-51 V1.3                                        Copyright (c) 2002 by W.W. Heinz                                         PAGE 72





	       L I S T   O F   S Y M B O L S
	       =============================


SYMBOL				  TYPE     VALUE	LINE
------------------------------------------------------------
??ASEM_51			  NUMBER    8051
??VERSION			  NUMBER    0130
AC				  BIT	      D6	  94
ACC				  DATA	      E0	  36
ADM3A				  CODE	    03BA	 952
ADM3ATEXT			  CODE	    0DFE	2698
ADM_COLUMN			  CODE	    042B	1017
ADM_CTRL_ESC			  CODE	    03F1	 979
ADM_CTRL_G			  CODE	    03C6	 962
ADM_CTRL_GR			  CODE	    03FC	 983
ADM_CTRL_H			  CODE	    03CB	 964
ADM_CTRL_I			  CODE	    03D0	 966
ADM_CTRL_J			  CODE	    03D5	 968
ADM_CTRL_K			  CODE	    03DA	 970
ADM_CTRL_L			  CODE	    03DF	 972
ADM_CTRL_LT			  CODE	    03F7	 981
ADM_CTRL_M			  CODE	    03E4	 974
ADM_CTRL_Z			  CODE	    03E9	 976
ADM_CTRL_Z1			  CODE	    03EC	 977
ADM_ESC				  CODE	    03FD	 990
ADM_ESC_7			  CODE	    0408	 994
ADM_ESC_EQ			  CODE	    040D	 996
ADM_ESC_ESC			  CODE	    0418	1000
ADM_ESC_EX			  CODE	    041E	1002
ADM_ESC_LBR			  CODE	    0413	 998
ADM_ROW				  CODE	    041F	1007
ALR				  NUMBER    0011	 498
ALTGR				  NUMBER    0011	 497
ALTGR_TABLE			  CODE	    0DB6	2635
ALTGR_TABLE_IND			  CODE	    0DAB	2621
ANSIOUT				  CODE	    035A	 891
ANSIOUT1			  CODE	    0375	 911
ANSIOUT2			  CODE	    037C	 915
ANSIOUT3			  CODE	    035F	 893
ANSI_MOVE			  CODE	    090C	1758
ANSI_MOVE_EX			  CODE	    095F	1821
ANSI_MOVE_M1			  CODE	    0933	1787
ANSI_MOVE_X1			  CODE	    0919	1772
ANSI_MOVE_X3			  CODE	    0920	1775
ANSI_MOVE_Y			  CODE	    0938	1795
ANSI_MOVE_Y1			  CODE	    0947	1805
ANSI_MOVE_Y2			  CODE	    0943	1800
ANSI_MOVE_Y3			  CODE	    0951	1811
ANSI_TAB			  CODE	    0380	 919
ARG0				  NUMBER    0026	 552
ARG1				  NUMBER    0027	 553
ARG2				  NUMBER    0028	 554
ARG3				  NUMBER    0029	 555
ARGS_GR_ZERO			  CODE	    08F8	1741
ARGS_GR_ZERO_1			  CODE	    0904	1747

ASEM-51 V1.3                                        Copyright (c) 2002 by W.W. Heinz                                         PAGE 73



SYMBOL				  TYPE     VALUE	LINE
------------------------------------------------------------
ARGS_GR_ZERO_2			  CODE	    0900	1745
AUXR				  DATA	      8E	  19
AUXR1				  DATA	      A2	  24
B				  DATA	      F0	  37
BACK				  NUMBER    0008	 470
BASE				  NUMBER    0000	 110
BAUDIDX				  NUMBER    002A	 556
BLACK				  NUMBER    0000	 424
BLUE				  NUMBER    0004	 428
BOTTOM				  NUMBER    0032	 564
BREAK				  NUMBER    00F0	 505
CCAPS				  NUMBER    0058	 502
CCBT				  NUMBER    001D	 463
CCDN				  NUMBER    001D	 475
CCHM				  NUMBER    001C	 462
CCLF				  NUMBER    001E	 476
CCLM				  NUMBER    001E	 464
CCRM				  NUMBER    001F	 465
CCRT				  NUMBER    001F	 477
CCUP				  NUMBER    001C	 474
CDCH				  NUMBER    00FE	 480
CHARTABLE_NOSHIFT		  CODE	    0C83	2589
CHARTABLE_SHIFT			  CODE	    0D18	2605
CHAR_OUT			  CODE	    04BB	1112
CHAR_OUT_1			  CODE	    051C	1170
CHAR_OUT_2			  CODE	    04F4	1147
CHAR_OUT_2A			  CODE	    0502	1155
CHAR_OUT_2B			  CODE	    050A	1159
CHAR_OUT_3			  CODE	    04D1	1124
CHAR_OUT_4			  CODE	    0511	1163
CICH				  NUMBER    00FF	 481
CILN				  NUMBER    009D	 479
CIN				  CODE	    0BB1	2410
CIN_1				  CODE	    0BBE	2417
CIN_2				  CODE	    0BB5	2412
CIN_3				  CODE	    0BD0	2431
CIN_4				  CODE	    0BCA	2426
CLEARARGS			  CODE	    09E3	1950
CLEARARGS1			  CODE	    09E7	1952
CLEARTABU			  CODE	    09BB	1917
CLEARTABU1			  CODE	    09BF	1919
CLEAR_LINES			  CODE	    0A8C	2112
CLEAR_LINES1			  CODE	    0AAD	2139
CLEAR_LINES2			  CODE	    0AA8	2137
CLEAR_SCREEN			  CODE	    0A7F	2103
CLEAR_V1			  CODE	    09A7	1885
CLEAR_VARS			  CODE	    09A3	1877
CLS				  NUMBER    0001	 469
CLSHIFT				  NUMBER    0012	 499
CLSTRG				  NUMBER    0014	 500
COLOR				  NUMBER    002D	 559
COMP_DPTR			  CODE	    0B03	2221
COPYFONT			  CODE	    0B56	2333
COPYFONT1			  CODE	    0B60	2339
COUT				  CODE	    0BA9	2404
COUT_SP				  CODE	    001E	 148

ASEM-51 V1.3                                        Copyright (c) 2002 by W.W. Heinz                                         PAGE 74



SYMBOL				  TYPE     VALUE	LINE
------------------------------------------------------------
CPRL2				  BIT	      C8	  81
CRSHIFT				  NUMBER    0059	 501
CSPACE				  NUMBER    0020	 478
CT2				  BIT	      C9	  82
CTRLG				  NUMBER    0007	 451
CTRLGT				  NUMBER    001F	 460
CTRLH				  NUMBER    0008	 452
CTRLI				  NUMBER    0009	 453
CTRLJ				  NUMBER    000A	 454
CTRLK				  NUMBER    000B	 455
CTRLL				  NUMBER    000C	 456
CTRLLT				  NUMBER    001E	 459
CTRLM				  NUMBER    000D	 457
CTRLZ				  NUMBER    001A	 458
CURSORPOS			  NUMBER    002E	 560
CURSORPOS1			  NUMBER    002F	 561
CURSORSAVE			  NUMBER    0030	 562
CURSORX				  NUMBER    0037	 569
CURSORY				  NUMBER    0038	 570
CURSOR_OFF			  CODE	    0AE0	2188
CURSOR_ON			  CODE	    0ACE	2168
CY				  BIT	      D7	  95
C_BACKSP			  NUMBER    0008	 438
C_BELL				  NUMBER    0007	 437
C_CR				  NUMBER    000D	 443
C_DEL				  NUMBER    007F	 449
C_ESC				  NUMBER    001B	 448
C_FF				  NUMBER    000C	 442
C_NEWLINE			  NUMBER    000A	 440
C_SI				  NUMBER    000F	 445
C_SO				  NUMBER    000E	 444
C_TAB				  NUMBER    0009	 439
C_TIME				  NUMBER    000A	 435
C_VT				  NUMBER    000B	 441
C_XOFF				  NUMBER    0013	 447
C_XON				  NUMBER    0011	 446
DASH				  CODE	    0016	 141
DASH_SP				  CODE	    0026	 155
DATABITS			  NUMBER    0014	 545
DECANM				  NUMBER    0002	 509
DECARM				  NUMBER    0008	 515
DECAWM				  NUMBER    0007	 514
DECCKM				  NUMBER    0001	 508
DECCOLM				  NUMBER    0003	 510
DECINLM				  NUMBER    0009	 516
DECOM				  NUMBER    0006	 513
DECSCLM				  NUMBER    0004	 511
DECSCNM				  NUMBER    0005	 512
DEFAULTCOLOR			  NUMBER    0070	 433
DEFCOL				  NUMBER    003D	 575
DNLD_PARM			  NUMBER    0010	 114
DOWNLOAD			  CODE	    00A0	 235
DOWNLOOP			  CODE	    00B3	 246
DO_CMD_ARG			  CODE	    08CD	1706
DO_CMD_ARG_1			  CODE	    08E3	1722
DO_CMD_ARG_2			  CODE	    08E9	1729

ASEM-51 V1.3                                        Copyright (c) 2002 by W.W. Heinz                                         PAGE 75



SYMBOL				  TYPE     VALUE	LINE
------------------------------------------------------------
DO_CMD_ARG_3			  CODE	    08F0	1732
DO_CMD_ARG_4			  CODE	    08F5	1734
DO_CR				  CODE	    0484	1074
DO_CSI				  CODE	    0593	1245
DO_CSI_B			  CODE	    05B6	1265
DO_CSI_C			  CODE	    05C1	1271
DO_CSI_CC			  CODE	    06C7	1402
DO_CSI_CC1			  CODE	    06CC	1404
DO_CSI_CC2			  CODE	    06CA	1403
DO_CSI_D			  CODE	    05CC	1277
DO_CSI_END			  CODE	    0863	1610
DO_CSI_END1			  CODE	    0788	1499
DO_CSI_G			  CODE	    078B	1501
DO_CSI_G1			  CODE	    0796	1505
DO_CSI_H			  CODE	    05DA	1286
DO_CSI_H1			  CODE	    05DF	1288
DO_CSI_H2			  CODE	    05E2	1289
DO_CSI_HH			  CODE	    07FB	1553
DO_CSI_HH1			  CODE	    080C	1561
DO_CSI_HH2			  CODE	    0811	1563
DO_CSI_HHX			  CODE	    0816	1565
DO_CSI_J			  CODE	    071F	1447
DO_CSI_JA			  CODE	    0724	1449
DO_CSI_JB			  CODE	    0736	1459
DO_CSI_JC			  CODE	    0727	1450
DO_CSI_JD			  CODE	    0747	1468
DO_CSI_K			  CODE	    075E	1480
DO_CSI_KA			  CODE	    0773	1490
DO_CSI_KB			  CODE	    077E	1495
DO_CSI_KEYS			  CODE	    05A1	1252
DO_CSI_L			  CODE	    07A2	1512
DO_CSI_L1			  CODE	    07B6	1520
DO_CSI_L2			  CODE	    07BB	1522
DO_CSI_LL			  CODE	    081A	1569
DO_CSI_LL1			  CODE	    0825	1574
DO_CSI_LL2			  CODE	    082A	1576
DO_CSI_LLX			  CODE	    082F	1578
DO_CSI_M			  CODE	    0608	1311
DO_CSI_MA			  CODE	    0616	1317
DO_CSI_MB			  CODE	    0626	1324
DO_CSI_MC			  CODE	    0618	1318
DO_CSI_MD			  CODE	    0623	1323
DO_CSI_ME			  CODE	    062A	1326
DO_CSI_MF			  CODE	    062D	1327
DO_CSI_MG			  CODE	    063C	1336
DO_CSI_MH			  CODE	    0643	1339
DO_CSI_MM			  CODE	    07CB	1531
DO_CSI_MM1			  CODE	    07DF	1539
DO_CSI_MM2			  CODE	    07E6	1542
DO_CSI_MX			  CODE	    0654	1348
DO_CSI_MX1			  CODE	    0659	1350
DO_CSI_MX2			  CODE	    0666	1356
DO_CSI_MX3			  CODE	    0671	1361
DO_CSI_N			  CODE	    0675	1365
DO_CSI_N1			  CODE	    067F	1369
DO_CSI_N6			  CODE	    068B	1375

ASEM-51 V1.3                                        Copyright (c) 2002 by W.W. Heinz                                         PAGE 76



SYMBOL				  TYPE     VALUE	LINE
------------------------------------------------------------
DO_CSI_P			  CODE	    0833	1582
DO_CSI_P1			  CODE	    084F	1597
DO_CSI_P2			  CODE	    083B	1585
DO_CSI_Q			  CODE	    0864	1629
DO_CSI_QUES			  CODE	    0757	1476
DO_CSI_Q_END			  CODE	    08B0	1664
DO_CSI_Q_H			  CODE	    0872	1635
DO_CSI_Q_H1			  CODE	    0883	1643
DO_CSI_Q_H2			  CODE	    0888	1645
DO_CSI_Q_HX			  CODE	    0890	1648
DO_CSI_Q_L			  CODE	    0894	1652
DO_CSI_Q_L1			  CODE	    08A0	1657
DO_CSI_Q_L2			  CODE	    08A5	1659
DO_CSI_Q_LX			  CODE	    08AD	1662
DO_CSI_R			  CODE	    06D7	1411
DO_CSI_RA			  CODE	    06E6	1417
DO_CSI_RB			  CODE	    06F8	1424
DO_CSI_RC			  CODE	    070F	1437
DO_CSI_RD			  CODE	    071C	1444
DO_CSI_RE			  CODE	    070C	1434
DO_CSI_S			  CODE	    05F2	1299
DO_CSI_U			  CODE	    05FC	1305
DO_ESC				  CODE	    0530	1185
DO_ESC_7			  CODE	    0540	1195
DO_ESC_8			  CODE	    054A	1200
DO_ESC_C			  CODE	    057B	1227
DO_ESC_CSI			  CODE	    0539	1191
DO_ESC_D			  CODE	    0556	1205
DO_ESC_EX			  CODE	    0592	1240
DO_ESC_H			  CODE	    0581	1230
DO_ESC_HA			  CODE	    0566	1215
DO_ESC_HASH			  CODE	    08B5	1677
DO_ESC_HASH_END			  CODE	    08C0	1683
DO_ESC_LBR			  CODE	    056D	1219
DO_ESC_LBRACK			  CODE	    08C1	1694
DO_ESC_LB_1			  CODE	    08CA	1699
DO_ESC_M			  CODE	    055E	1210
DO_ESC_Q			  CODE	    08B1	1670
DO_ESC_RBR			  CODE	    0574	1223
DO_ESC_RBRACK			  CODE	    08C1	1690
DO_ESC_Z			  CODE	    058D	1237
DO_IDLE				  CODE	    0436	1027
DO_IDLE_BELL			  CODE	    0442	1036
DO_IDLE_BS			  CODE	    0446	1039
DO_IDLE_CR			  CODE	    0481	1073
DO_IDLE_DEL			  CODE	    0436	1029
DO_IDLE_END			  CODE	    04AD	1097
DO_IDLE_ESC			  CODE	    048E	1079
DO_IDLE_FF			  CODE	    04A8	1094
DO_IDLE_NL			  CODE	    0476	1067
DO_IDLE_PRE			  CODE	    043D	1033
DO_IDLE_SI			  CODE	    049D	1087
DO_IDLE_SO			  CODE	    0497	1083
DO_IDLE_TAB			  CODE	    044D	1043
DO_IDLE_TAB1			  CODE	    046A	1058
DO_IDLE_TAB2			  CODE	    0470	1061

ASEM-51 V1.3                                        Copyright (c) 2002 by W.W. Heinz                                         PAGE 77



SYMBOL				  TYPE     VALUE	LINE
------------------------------------------------------------
DO_IDLE_TAB3			  CODE	    0453	1045
DO_IDLE_VT			  CODE	    04A3	1091
DO_NEWLINE			  CODE	    0479	1068
DP0H				  DATA	      83	   9
DP0L				  DATA	      82	   8
DP1H				  DATA	      85	  11
DP1L				  DATA	      84	  10
DPH				  NUMBER    0083	 117
DPL				  NUMBER    0082	 116
DPTRTOR6R7			  CODE	    000E	 133
DRAW_CHAR			  CODE	    04AD	1101
DRAW_CHAR_1			  CODE	    0526	1177
DRAW_CURSOR			  CODE	    0AC0	2156
DSPACE				  CODE	    0106	 320
DUMP				  CODE	    00BD	 260
DUMPCNT				  NUMBER    003E	 576
DUMPLINE			  CODE	    00C1	 263
DUMPLINE1			  CODE	    00C8	 266
DUMPMODE			  NUMBER    0017	 548
DUMPNIBBLE			  CODE	    03A9	 936
DUMPTERM			  CODE	    0392	 922
DUMPTERM2			  CODE	    03A6	 933
DUMPTEXT			  CODE	    0E04	2699
EA				  BIT	      AF	  66
ES				  BIT	      AC	  64
ESC				  NUMBER    001B	 473
ET0				  BIT	      A9	  61
ET1				  BIT	      AB	  63
ET2				  BIT	      AD	  65
EVENODD				  NUMBER    0015	 546
EX0				  BIT	      A8	  60
EX1				  BIT	      AA	  62
EXEN2				  BIT	      CB	  84
EXF2				  BIT	      CE	  87
EXINT0				  CODE	    0253	 691
EXINT0A				  CODE	    0276	 720
EXINT0B				  CODE	    0260	 710
EXINT0EX			  CODE	    027D	 725
EXTENDED			  NUMBER    00E0	 504
EXTI0				  CODE	    0003	  98
EXTI1				  CODE	    0013	 100
EXT_TABLE			  CODE	    0DD1	2665
EXT_TABLE_IND			  CODE	    0DC1	2648
F0				  BIT	      D5	  93
F1				  NUMBER    0080	 483
F10				  NUMBER    0089	 492
F11				  NUMBER    008A	 493
F12				  NUMBER    008B	 494
F2				  NUMBER    0081	 484
F3				  NUMBER    0082	 485
F4				  NUMBER    0083	 486
F5				  NUMBER    0084	 487
F6				  NUMBER    0085	 488
F7				  NUMBER    0086	 489
F8				  NUMBER    0087	 490
F9				  NUMBER    0088	 491

ASEM-51 V1.3                                        Copyright (c) 2002 by W.W. Heinz                                         PAGE 78



SYMBOL				  TYPE     VALUE	LINE
------------------------------------------------------------
FILL_LINES			  CODE	    0A8E	2114
FILL_SCREEN			  CODE	    0A81	2104
FLAGS				  NUMBER    0020	 524
FLAGS1				  NUMBER    0021	 532
FLAGS2				  NUMBER    0022	 540
FREE0				  NUMBER    004A	 580
FREE1				  NUMBER    004B	 581
FREE2				  NUMBER    004C	 582
FREE3				  NUMBER    004D	 583
FREE4				  NUMBER    004E	 584
FREE5				  NUMBER    004F	 585
GETBAUD				  CODE	    0DDE	2681
GETBDTXT			  CODE	    0DE8	2691
GETBIT				  CODE	    09D7	1943
GETBITTAB			  CODE	    09DB	1947
GETHEX				  CODE	    00EA	 297
GETHEX1				  CODE	    00F3	 301
GETHEX2				  CODE	    00FD	 306
GETHEXBYTE			  CODE	    00E2	 290
GETREPORT			  CODE	    06BA	1397
GETSTATUS			  CODE	    0E81	2768
GOTO				  CODE	    00BB	 255
GREEN				  NUMBER    0002	 426
HEIGHT				  NUMBER    0018	 410
HEX2DEZ				  CODE	    0AF6	2208
IE				  DATA	      A8	  26
IE0				  BIT	      89	  40
IE1				  BIT	      8B	  42
INIT				  CODE	    029A	 773
INIT6845			  CODE	    0B17	2241
INIT_2				  CODE	    02B2	 798
INIT_LOOP			  CODE	    02B2	 786
INSERT				  NUMBER    0013	 544
INT0				  BIT	      B2	  69
INT1				  BIT	      B3	  70
INTR_RETURN			  CODE	    002E	 165
INVERSE				  NUMBER    0003	 528
IP				  DATA	      B8	  28
IRM				  NUMBER    0004	 517
ISDIGIT				  CODE	    096F	1839
ISDIGIT1			  CODE	    0972	1840
ISDIGIT2			  CODE	    0976	1843
ISDIGIT3			  CODE	    0979	1844
ISPARM				  CODE	    0963	1828
ISPARM1				  CODE	    096D	1833
ISPARMEX			  CODE	    096C	1832
IT0				  BIT	      88	  39
IT1				  BIT	      8A	  41
KEYALTGR			  CODE	    0C5A	2560
KEYALTGR1			  CODE	    0C6A	2566
KEYALTGR2			  CODE	    0C5F	2562
KEYAVAIL			  NUMBER    0008	 533
KEYBREAK			  CODE	    0BFD	2512
KEYCHECKBRK			  CODE	    0C24	2534
KEYCHECKBRK1			  CODE	    0C2E	2538
KEYDECODE			  CODE	    0BF5	2503

ASEM-51 V1.3                                        Copyright (c) 2002 by W.W. Heinz                                         PAGE 79



SYMBOL				  TYPE     VALUE	LINE
------------------------------------------------------------
KEYEXIT				  CODE	    0C7B	2581
KEYEXITOK			  CODE	    0C77	2574
KEYGETALTGR			  CODE	    0DB3	2632
KEYGETALTGRIND			  CODE	    0DA8	2618
KEYGETEXT			  CODE	    0DCE	2662
KEYGETEXTIND			  CODE	    0DBE	2645
KEYGETNOSHIFT			  CODE	    0C7E	2585
KEYGETSHIFT			  CODE	    0D13	2601
KEYMAKE				  CODE	    0C6E	2569
KEYMAKEEXT			  CODE	    0C3D	2547
KEYMAKEEXT1			  CODE	    0C56	2557
KEYMAKEEXT2			  CODE	    0C44	2550
KEYMAKEEXT3			  CODE	    0C54	2556
KEYNORMAL			  CODE	    0C33	2542
KEYRXALTGR			  NUMBER    000C	 537
KEYRXBREAK			  NUMBER    000A	 535
KEYRXCNT			  NUMBER    003A	 572
KEYRXEXTENDED			  NUMBER    0009	 534
KEYRXSHIFT			  NUMBER    000B	 536
KEYRXSTRG			  NUMBER    000D	 538
KEYRXVAL			  NUMBER    003B	 573
KEYSHIFT			  CODE	    0C05	2517
KEYSHIFT1			  CODE	    0C0C	2520
KEYSHIFT2			  CODE	    0C11	2522
KEYSTRG				  CODE	    0C18	2527
LASTCHAR			  NUMBER    0001	 526
LCHARTMP			  NUMBER    0002	 527
LF				  NUMBER    000A	 472
LNM				  NUMBER    0014	 518
LOOP_CIN			  CODE	    033A	 871
MAGENTA				  NUMBER    0005	 429
MAIN_COUT			  CODE	    0309	 847
MAIN_COUT1			  CODE	    0323	 859
MAIN_COUT2			  CODE	    0325	 861
MAIN_COUT3			  CODE	    0318	 854
MAIN_F12			  CODE	    02FA	 839
MAIN_F6				  CODE	    02C3	 810
MAIN_F6A			  CODE	    02CD	 815
MAIN_F7				  CODE	    02D4	 820
MAIN_F7A			  CODE	    02DE	 824
MAIN_F8				  CODE	    02E7	 830
MAIN_F8A			  CODE	    02F1	 834
MAIN_LOOP			  CODE	    02B7	 804
MAIN_LOOP1			  CODE	    034C	 879
MAIN_SERIN			  CODE	    0333	 867
MAIN_STATUS			  CODE	    0349	 878
MINITEXT			  CODE	    0152	 385
MISO				  BIT	      96	  50
MONCIN				  CODE	    00FE	 315
MONCOUT				  CODE	    010A	 322
MONMAIN				  CODE	    007D	 216
MONMAIN1			  CODE	    008D	 223
MONMAIN2			  CODE	    0092	 225
MONMAIN3			  CODE	    0097	 227
MONMAIN9			  CODE	    009C	 229
MONNEWLINE			  CODE	    0112	 335

ASEM-51 V1.3                                        Copyright (c) 2002 by W.W. Heinz                                         PAGE 80



SYMBOL				  TYPE     VALUE	LINE
------------------------------------------------------------
MONPHEX				  CODE	    0133	 364
MONPHEX1			  CODE	    0136	 366
MONPHEX16			  CODE	    0145	 376
MONPHEX_B			  CODE	    0135	 365
MONPSTR				  CODE	    011F	 348
MONPSTR1			  CODE	    0121	 349
MONPSTR2			  CODE	    0130	 358
MONSPACE			  CODE	    0108	 321
MONSTART			  CODE	    0052	 193
MONWAIT				  CODE	    0070	 209
MOSI				  BIT	      95	  49
MOVE_CURSOR			  CODE	    0ABD	2155
NARGS				  NUMBER    0025	 551
NEWADDR				  CODE	    00D8	 280
NEWLINE				  CODE	    0B9F	2397
NEWLINEMODE			  NUMBER    0012	 543
OLDSTATUS			  NUMBER    003C	 574
ORIGIN				  NUMBER    0011	 542
OV				  BIT	      D2	  90
P				  BIT	      D0	  89
P0				  DATA	      80	   6
P1				  DATA	      90	  20
P2				  DATA	      A0	  23
P3				  DATA	      B0	  27
PCON				  DATA	      87	  12
PHEX				  CODE	    0BD6	2446
PHEX1				  CODE	    0BD9	2450
PHEX16				  CODE	    0BE8	2460
PHEX8				  CODE	    0BD6	2447
PHEX_B				  CODE	    0BD8	2449
POWERON				  CODE	    002F	 171
PRINT				  CODE	    09ED	1958
PRINT1				  CODE	    09F2	1962
PRTBAUD				  CODE	    0E27	2721
PRTSTATUS			  CODE	    0E0A	2703
PRTSTATUS1			  CODE	    0E0F	2705
PRTSTATUS2			  CODE	    0E4F	2743
PRTSTATUS3			  CODE	    0E56	2746
PRTSTATUS4			  CODE	    0E5D	2749
PRTSTATUS5			  CODE	    0E64	2752
PRTSTATUS5A			  CODE	    0E6F	2756
PRTSTATUS5B			  CODE	    0E77	2760
PRTSTATUS5C			  CODE	    0E6A	2754
PRTSTATUS6			  CODE	    0E46	2739
PRTSTATUS7			  CODE	    0E42	2737
PRTSTATUSEX			  CODE	    0E80	2766
PS				  BIT	      BC	  79
PSW				  DATA	      D0	  35
PSW_INIT			  NUMBER    0000	 113
PT0				  BIT	      B9	  76
PT1				  BIT	      BB	  78
PT2				  BIT	      BD	  80
PX0				  BIT	      B8	  75
PX1				  BIT	      BA	  77
R6R7TODPTR			  CODE	    0006	 125
RB8				  BIT	      9A	  54

ASEM-51 V1.3                                        Copyright (c) 2002 by W.W. Heinz                                         PAGE 81



SYMBOL				  TYPE     VALUE	LINE
------------------------------------------------------------
RCAP2H				  DATA	      CB	  32
RCAP2L				  DATA	      CA	  31
RCLK				  BIT	      CD	  86
RD				  BIT	      B7	  74
RED				  NUMBER    0001	 425
REN				  BIT	      9C	  56
REPORTDA			  CODE	    06C0	1400
REPORTOK			  CODE	    06BC	1399
RESET				  CODE	    0000	  97
RESETTABU			  CODE	    09AD	1907
RESETTABU1			  CODE	    09B1	1909
RETSTATE			  NUMBER    0023	 550
RI				  BIT	      98	  52
RS0				  BIT	      D3	  91
RS1				  BIT	      D4	  92
RXD				  BIT	      B0	  67
SBUF				  DATA	      99	  22
SCK				  BIT	      97	  51
SCON				  DATA	      98	  21
SCROLL				  CODE	    09F8	1983
SCROLL_DOWN_1			  CODE	    0A25	2019
SCROLL_DOWN_2			  CODE	    0A33	2029
SCROLL_DOWN_3			  CODE	    0A3B	2034
SCROLL_DOWN_4			  CODE	    0A23	2017
SCROLL_DOWN_5			  CODE	    0A45	2045
SCROLL_DOWN_6			  CODE	    0A42	2042
SCROLL_R4			  CODE	    09FE	1987
SCROLL_UP			  CODE	    0A4A	2052
SCROLL_UP_1			  CODE	    0A67	2071
SCROLL_UP_2			  CODE	    0A69	2074
SCROLL_UP_3			  CODE	    0A7A	2087
SCROLL_UP_4			  CODE	    0A77	2084
SCURSORX			  NUMBER    002B	 557
SCURSORY			  NUMBER    002C	 558
SENDPOS				  CODE	    06AE	1390
SERBUF				  NUMBER    0080	 589
SERBUSY				  NUMBER    0005	 530
SERCOUNT			  NUMBER    0036	 568
SEREND				  NUMBER    0035	 567
SERINT				  CODE	    0203	 623
SERINT1				  CODE	    0225	 645
SERINTEX			  CODE	    022D	 651
SERINTRI			  CODE	    020B	 628
SERLIM				  NUMBER    0040	 590
SERSTART			  NUMBER    0034	 566
SETBAUD				  CODE	    034E	 882
SETREGS				  CODE	    0B27	2251
SINT				  CODE	    0023	 102
SM0				  BIT	      9F	  59
SM1				  BIT	      9E	  58
SM2				  BIT	      9D	  57
SP				  DATA	      81	   7
SPACE				  CODE	    0B95	2391
SPECIAL				  NUMBER    0000	 525
STACK				  NUMBER    0050	 115
START				  CODE	    0282	 748

ASEM-51 V1.3                                        Copyright (c) 2002 by W.W. Heinz                                         PAGE 82



SYMBOL				  TYPE     VALUE	LINE
------------------------------------------------------------
STATE				  NUMBER    0033	 565
STATUS				  CODE	    0E84	2773
ST_CMD_ARG			  NUMBER    000A	 417
ST_COLUMN			  NUMBER    0014	 422
ST_CSI				  NUMBER    0004	 414
ST_CSI_Q			  NUMBER    000E	 419
ST_ESC				  NUMBER    0002	 413
ST_ESC_HASH			  NUMBER    0008	 416
ST_ESC_LBRACK			  NUMBER    000C	 418
ST_ESC_Q			  NUMBER    0006	 415
ST_ESC_RBRACK			  NUMBER    0010	 420
ST_IDLE				  NUMBER    0000	 412
ST_ROW				  NUMBER    0012	 421
SYDATA				  CODE	    0B42	2309
T0				  BIT	      B4	  71
T0CNT				  NUMBER    0039	 571
T1				  BIT	      B5	  72
T2				  BIT	      90	  47
T2CON				  DATA	      C8	  29
T2EX				  BIT	      91	  48
T2MOD				  DATA	      C9	  30
TABU				  NUMBER    0009	 471
TABUTAB				  NUMBER    0040	 578
TAB_SET_R0_R1			  CODE	    09C7	1930
TB8				  BIT	      9B	  55
TCLK				  BIT	      CC	  85
TCON				  DATA	      88	  13
TERMMODE			  NUMBER    0016	 547
TERM_RESET			  CODE	    097A	1851
TESTSCREEN			  CODE	    0B6F	2359
TESTSCREEN1			  CODE	    0B78	2364
TESTSCREEN2			  CODE	    0B85	2376
TESTSCREEN3			  CODE	    0B74	2362
TESTSCREEN4			  CODE	    0B89	2379
TF0				  BIT	      8D	  44
TF1				  BIT	      8F	  46
TF2				  BIT	      CF	  88
TH0				  DATA	      8C	  17
TH1				  DATA	      8D	  18
TH2				  DATA	      CD	  34
TI				  BIT	      99	  53
TIMER0				  CODE	    000B	  99
TIMER0INT			  CODE	    0236	 665
TIMER0INT_EX			  CODE	    0252	 681
TIMER1				  CODE	    001B	 101
TIMER2				  CODE	    002B	 103
TL0				  DATA	      8A	  15
TL1				  DATA	      8B	  16
TL2				  DATA	      CC	  33
TMOD				  DATA	      89	  14
TOP				  NUMBER    0031	 563
TR0				  BIT	      8C	  43
TR1				  BIT	      8E	  45
TR2				  BIT	      CA	  83
TURQUOISE			  NUMBER    0006	 430
TXD				  BIT	      B1	  68

ASEM-51 V1.3                                        Copyright (c) 2002 by W.W. Heinz                                         PAGE 83



SYMBOL				  TYPE     VALUE	LINE
------------------------------------------------------------
VARLEN				  NUMBER    0030	 520
VARS				  NUMBER    0020	 522
VECTOR				  NUMBER    0000	 112
VT100_FONT			  CODE	    1000	2778
VT102BASE			  NUMBER    0000	 407
WDTRST				  DATA	      A6	  25
WHITE				  NUMBER    0007	 431
WIDTH				  NUMBER    0050	 409
WR				  BIT	      B6	  73
WRAP				  NUMBER    0010	 541
XONOFF				  NUMBER    0004	 529
YELLOW				  NUMBER    0003	 427
