
ASEM-51 V1.3                                         Copyright (c) 2002 by W.W. Heinz                                         PAGE 1





       MCS-51 Family Macro Assembler   A S E M - 5 1   V 1.3
       =====================================================



	Source File:	C:\github\FABIAN\VGA\rolmon.a51
	Object File:	C:\github\FABIAN\VGA\rolmon.hex
	List File:	C:\github\FABIAN\VGA\rolmon.lst



 Line  I  Addr  Code            Source

    1:						$NOMOD51
    2:						$INCLUDE (89S52.MCU)
    3: 1			;   AT89S52 processor definition file
    4: 1			;   =================================
    5: 1
    6: 1	N	 80	P0	DATA	080H
    7: 1	N	 81	SP	DATA	081H
    8: 1	N	 82	DP0L	DATA	082H
    9: 1	N	 83	DP0H	DATA	083H
   10: 1	N	 84	DP1L	DATA	084H
   11: 1	N	 85	DP1H	DATA	085H
   12: 1	N	 87	PCON	DATA	087H
   13: 1	N	 88	TCON	DATA	088H
   14: 1	N	 89	TMOD	DATA	089H
   15: 1	N	 8A	TL0	DATA	08AH
   16: 1	N	 8B	TL1	DATA	08BH
   17: 1	N	 8C	TH0	DATA	08CH
   18: 1	N	 8D	TH1	DATA	08DH
   19: 1	N	 8E	AUXR	DATA	08EH
   20: 1	N	 90	P1	DATA	090H
   21: 1	N	 98	SCON	DATA	098H
   22: 1	N	 99	SBUF	DATA	099H
   23: 1	N	 A0	P2	DATA	0A0H
   24: 1	N	 A2	AUXR1	DATA	0A2H
   25: 1	N	 A6	WDTRST	DATA	0A6H
   26: 1	N	 A8	IE	DATA	0A8H
   27: 1	N	 B0	P3	DATA	0B0H
   28: 1	N	 B8	IP	DATA	0B8H
   29: 1	N	 C8	T2CON	DATA	0C8H
   30: 1	N	 C9	T2MOD	DATA	0C9H
   31: 1	N	 CA	RCAP2L	DATA	0CAH
   32: 1	N	 CB	RCAP2H	DATA	0CBH
   33: 1	N	 CC	TL2	DATA	0CCH
   34: 1	N	 CD	TH2	DATA	0CDH
   35: 1	N	 D0	PSW	DATA	0D0H
   36: 1	N	 E0	ACC	DATA	0E0H
   37: 1	N	 F0	B	DATA	0F0H
   38: 1
   39: 1	N	 88	IT0	BIT	088H
   40: 1	N	 89	IE0	BIT	089H
   41: 1	N	 8A	IT1	BIT	08AH
   42: 1	N	 8B	IE1	BIT	08BH
   43: 1	N	 8C	TR0	BIT	08CH

ASEM-51 V1.3                                         Copyright (c) 2002 by W.W. Heinz                                         PAGE 2



 Line  I  Addr  Code            Source

   44: 1	N	 8D	TF0	BIT	08DH
   45: 1	N	 8E	TR1	BIT	08EH
   46: 1	N	 8F	TF1	BIT	08FH
   47: 1	N	 90	T2	BIT	090H
   48: 1	N	 91	T2EX	BIT	091H
   49: 1	N	 95	MOSI	BIT	095H
   50: 1	N	 96	MISO	BIT	096H
   51: 1	N	 97	SCK	BIT	097H
   52: 1	N	 98	RI	BIT	098H
   53: 1	N	 99	TI	BIT	099H
   54: 1	N	 9A	RB8	BIT	09AH
   55: 1	N	 9B	TB8	BIT	09BH
   56: 1	N	 9C	REN	BIT	09CH
   57: 1	N	 9D	SM2	BIT	09DH
   58: 1	N	 9E	SM1	BIT	09EH
   59: 1	N	 9F	SM0	BIT	09FH
   60: 1	N	 A8	EX0	BIT	0A8H
   61: 1	N	 A9	ET0	BIT	0A9H
   62: 1	N	 AA	EX1	BIT	0AAH
   63: 1	N	 AB	ET1	BIT	0ABH
   64: 1	N	 AC	ES	BIT	0ACH
   65: 1	N	 AD	ET2	BIT	0ADH
   66: 1	N	 AF	EA	BIT	0AFH
   67: 1	N	 B0	RXD	BIT	0B0H
   68: 1	N	 B1	TXD	BIT	0B1H
   69: 1	N	 B2	INT0	BIT	0B2H
   70: 1	N	 B3	INT1	BIT	0B3H
   71: 1	N	 B4	T0	BIT	0B4H
   72: 1	N	 B5	T1	BIT	0B5H
   73: 1	N	 B6	WR	BIT	0B6H
   74: 1	N	 B7	RD	BIT	0B7H
   75: 1	N	 B8	PX0	BIT	0B8H
   76: 1	N	 B9	PT0	BIT	0B9H
   77: 1	N	 BA	PX1	BIT	0BAH
   78: 1	N	 BB	PT1	BIT	0BBH
   79: 1	N	 BC	PS	BIT	0BCH
   80: 1	N	 BD	PT2	BIT	0BDH
   81: 1	N	 C8	CPRL2	BIT	0C8H
   82: 1	N	 C9	CT2	BIT	0C9H
   83: 1	N	 CA	TR2	BIT	0CAH
   84: 1	N	 CB	EXEN2	BIT	0CBH
   85: 1	N	 CC	TCLK	BIT	0CCH
   86: 1	N	 CD	RCLK	BIT	0CDH
   87: 1	N	 CE	EXF2	BIT	0CEH
   88: 1	N	 CF	TF2	BIT	0CFH
   89: 1	N	 D0	P	BIT	0D0H
   90: 1	N	 D2	OV	BIT	0D2H
   91: 1	N	 D3	RS0	BIT	0D3H
   92: 1	N	 D4	RS1	BIT	0D4H
   93: 1	N	 D5	F0	BIT	0D5H
   94: 1	N	 D6	AC	BIT	0D6H
   95: 1	N	 D7	CY	BIT	0D7H
   96: 1
   97: 1	N      0000	RESET	CODE	000H
   98: 1	N      0003	EXTI0	CODE	003H
   99: 1	N      000B	TIMER0	CODE	00BH

ASEM-51 V1.3                                         Copyright (c) 2002 by W.W. Heinz                                         PAGE 3



 Line  I  Addr  Code            Source

  100: 1	N      0013	EXTI1	CODE	013H
  101: 1	N      001B	TIMER1	CODE	01BH
  102: 1	N      0023	SINT	CODE	023H
  103: 1	N      002B	TIMER2	CODE	02BH
  104:
  105:				;===============================================
  106:				; adjust base for RAM or ROM version
  107:				; RAM: 02000h
  108:				; ROM: 00000h
  109:				;===============================================
  110:		N      0000	base		equ	00000h
  111:
  112:		N      0000	vector		equ	base
  113:		N      0000	psw_init	equ	0		;value for psw (which reg bank to use)
  114:		N      0010	dnld_parm	equ 	10h		;block of 16 bytes for download
  115:		N      0080	stack		equ	80h		;location of the stack
  116:		D      0082	dpl		equ	dp0l
  117:		D      0083	dph		equ	dp0h
  118:
  119:		N      0000			org	base
  120:	  0000	02 00 2F			ljmp	poweron		;reset vector
  121:
  122:		N      0003			org	base+3
  123:	  0003	02 00 03			ljmp	vector+3	;ext int0 vector
  124:
  125:	  0006			r6r7todptr:
  126:	  0006	8E 82				mov	dpl, r6
  127:	  0008	8F 83				mov	dph, r7
  128:	  000A	22				ret
  129:
  130:		N      000B			org	base+11
  131:	  000B	02 00 0B			ljmp	vector+11	;timer0 vector
  132:
  133:	  000E			dptrtor6r7:
  134:	  000E	AE 82				mov	r6, dpl
  135:	  0010	AF 83				mov	r7, dph
  136:	  0012	22				ret
  137:
  138:		N      0013			org	base+19
  139:	  0013	02 00 13			ljmp	vector+19	;ext int1 vector
  140:
  141:	  0016	74 2D		dash:		mov	a, #'-'		;seems kinda trivial, but each time
  142:	  0018	21 0A				ajmp	moncout		;this appears in code, it takes 4
  143:	  001A	00				nop			;bytes, but an acall takes only 2
  144:
  145:		N      001B			org	base+27
  146:	  001B	02 00 1B			ljmp	vector+27	;timer1 vector
  147:
  148:	  001E	31 0A		cout_sp:	acall	moncout
  149:	  0020	21 08				ajmp	monspace
  150:	  0022	00				nop
  151:
  152:		N      0023			org	base+35
  153:	  0023	02 00 23			ljmp	vector+35	;uart vector
  154:
  155:	  0026	11 16		dash_sp:	acall	dash

ASEM-51 V1.3                                         Copyright (c) 2002 by W.W. Heinz                                         PAGE 4



 Line  I  Addr  Code            Source

  156:	  0028	21 08				ajmp	monspace
  157:	  002A	00				nop
  158:
  159:		N      002B			org	base+43
  160:	  002B	02 00 2B			ljmp	vector+43	;timer2 vector (8052)
  161:
  162:				;---------------------------------------------------------
  163:				;first the hardware has to get initialized.
  164:				;---------------------------------------------------------
  165:	  002E			intr_return:
  166:	  002E	32				reti
  167:
  168:				;---------------------------------------------------------
  169:				;poweron execution starts here
  170:				;---------------------------------------------------------
  171:	  002F			poweron:
  172:	  002F	E4				clr	a
  173:	  0030	F5 A8				mov	ie, a		;all interrupts off
  174:	  0032	F5 B8				mov	ip, a
  175:						;clear any interrupt status, just in case the user put
  176:						;"ljmp 0" inside their interrupt service code.
  177:	  0034	11 2E				acall	intr_return
  178:	  0036	11 2E				acall	intr_return
  179:	  0038	F4				cpl	a
  180:	  0039	F5 80				mov	p0, a
  181:	  003B	F5 90				mov	p1, a
  182:	  003D	F5 A0				mov	p2, a
  183:	  003F	F5 B0				mov	p3, a
  184:	  0041	F5 8B				mov	tl1, a
  185:	  0043	F5 8D				mov	th1, a
  186:	  0045	75 89 21			mov	tmod, #021h	;set timer #1 for 8 bit auto-reload
  187:	  0048	75 87 80			mov	pcon, #080h	;configure built-in uart
  188:	  004B	75 98 52			mov	scon, #052h
  189:	  004E	D2 8E				setb	tr1		;start the baud rate timer
  190:
  191:	  0050	41 00				ajmp	base + 200h	;start program
  192:
  193:	  0052	E4		monstart:	clr	a
  194:	  0053	F5 A8				mov	ie, a		;all interrupts off
  195:	  0055	F5 B8				mov	ip, a
  196:	  0057	F5 A2				mov	auxr1, a
  197:	  0059	F8				mov	r0, a
  198:	  005A	F9				mov	r1, a
  199:	  005B	75 D0 00			mov	psw, #psw_init
  200:	  005E	75 81 80			mov	sp, #stack
  201:	  0061	11 2E				acall	intr_return
  202:	  0063	11 2E				acall	intr_return
  203:
  204:	  0065	75 89 21			mov	tmod, #021h	;set timer #1 for 8 bit auto-reload
  205:	  0068	75 87 80			mov	pcon, #080h	;configure built-in uart
  206:	  006B	75 98 52			mov	scon, #052h
  207:	  006E	D2 8E				setb	tr1		;start the baud rate timer
  208:
  209:	  0070	D8 FE		monwait:	djnz	r0, monwait
  210:	  0072	D9 FC				djnz	r1, monwait
  211:

ASEM-51 V1.3                                         Copyright (c) 2002 by W.W. Heinz                                         PAGE 5



 Line  I  Addr  Code            Source

  212:	  0074	90 01 52			mov	dptr, #minitext
  213:	  0077	12 01 1F			call	monpstr
  214:	  007A	90 02 00			mov	dptr, #base + 0200h
  215:
  216:	  007D	31 12		monmain:	acall	monnewline
  217:	  007F	12 01 45			call	monphex16
  218:	  0082	74 3E				mov	a, #'>'
  219:	  0084	31 0A				acall	moncout
  220:	  0086	11 FE				acall	moncin
  221:	  0088	B4 64 02			cjne	a, #'d', monmain1
  222:	  008B	11 A0				acall	download
  223:	  008D	B4 67 02	monmain1:	cjne	a, #'g', monmain2
  224:	  0090	11 BB				acall	goto
  225:	  0092	B4 68 02	monmain2:	cjne	a, #'h', monmain3
  226:	  0095	11 BD				acall	dump
  227:	  0097	B4 6E 02	monmain3:	cjne	a, #'n', monmain9
  228:	  009A	11 D8				acall	newaddr
  229:	  009C	31 0A		monmain9:	acall	moncout
  230:	  009E	80 DD				sjmp	monmain
  231:
  232:				;---------------------------------------------------------
  233:				;download routine
  234:				;---------------------------------------------------------
  235:	  00A0	11 FE		download:	acall	moncin
  236:	  00A2	B4 3A FB			cjne	a, #':', download
  237:	  00A5	11 E2				acall	gethexbyte
  238:	  00A7	F8				mov	r0, a
  239:	  00A8	11 D8				acall	newaddr
  240:	  00AA	11 E2				acall	gethexbyte
  241:	  00AC	B4 01 04			cjne	a, #1, downloop
  242:	  00AF	11 E2				acall	gethexbyte
  243:	  00B1	E4				clr	a
  244:	  00B2	22				ret
  245:
  246:	  00B3	11 E2		downloop:	acall	gethexbyte
  247:	  00B5	F0				movx	@dptr, a
  248:	  00B6	A3				inc	dptr
  249:	  00B7	D8 FA				djnz	r0, downloop
  250:	  00B9	01 A0				ajmp	download
  251:
  252:				;---------------------------------------------------------
  253:				;goto routine
  254:				;---------------------------------------------------------
  255:	  00BB	E4		goto:		clr	a
  256:	  00BC	73				jmp	@a+dptr
  257:				;---------------------------------------------------------
  258:				;dump routine
  259:				;---------------------------------------------------------
  260:	  00BD	78 10		dump:		mov	r0, #16
  261:	  00BF	31 12				acall	monnewline
  262:
  263:	  00C1	12 01 45	dumpline:	call	monphex16
  264:	  00C4	31 06				acall	dspace
  265:	  00C6	79 10				mov	r1, #16
  266:	  00C8	E4		dumpline1:	clr	a
  267:	  00C9	93				movc	a, @a+dptr

ASEM-51 V1.3                                         Copyright (c) 2002 by W.W. Heinz                                         PAGE 6



 Line  I  Addr  Code            Source

  268:	  00CA	A3				inc	dptr
  269:	  00CB	12 01 33			call	monphex
  270:	  00CE	31 08				acall	monspace
  271:	  00D0	D9 F6				djnz	r1, dumpline1
  272:	  00D2	31 12				acall	monnewline
  273:
  274:	  00D4	D8 EB				djnz	r0, dumpline
  275:	  00D6	E4				clr	a
  276:	  00D7	22				ret
  277:				;---------------------------------------------------------
  278:				;newaddr routine
  279:				;---------------------------------------------------------
  280:	  00D8	11 E2		newaddr:	acall	gethexbyte
  281:	  00DA	F5 83				mov	dph, a
  282:	  00DC	11 E2				acall	gethexbyte
  283:	  00DE	F5 82				mov	dpl, a
  284:	  00E0	E4				clr	a
  285:	  00E1	22				ret
  286:
  287:				;---------------------------------------------------------
  288:				;helper
  289:				;---------------------------------------------------------
  290:	  00E2	11 EA		gethexbyte:	acall	gethex
  291:	  00E4	C4				swap	a
  292:	  00E5	FF				mov	r7, a
  293:	  00E6	11 EA				acall	gethex
  294:	  00E8	4F				orl	a, r7
  295:	  00E9	22				ret
  296:
  297:	  00EA	11 FE		gethex:		acall	moncin
  298:	  00EC	B4 61 00			cjne	a, #'a', $+3
  299:	  00EF	40 02				jc	gethex1
  300:	  00F1	94 20				subb	a, #32
  301:	  00F3	C3		gethex1:	clr	c
  302:	  00F4	94 30				subb	a, #'0'
  303:	  00F6	B4 0A 00			cjne	a, #10, $+3
  304:	  00F9	40 02				jc	gethex2
  305:	  00FB	94 07				subb	a, #'A' - '9' - 1
  306:	  00FD	22		gethex2:	ret
  307:
  308:				;---------------------------------------------------------;
  309:				;							  ;
  310:				;	       Subroutines for serial I/O		  ;
  311:				;							  ;
  312:				;---------------------------------------------------------;
  313:
  314:
  315:	  00FE	30 98 FD	moncin:		jnb	ri, moncin
  316:	  0101	C2 98				clr	ri
  317:	  0103	E5 99				mov	a, sbuf
  318:	  0105	22				ret
  319:
  320:	  0106	31 08		dspace:		acall	monspace
  321:	  0108	74 20		monspace:	mov	a, #' '
  322:	  010A	30 99 FD	moncout:	jnb	ti, moncout
  323:	  010D	C2 99				clr	ti		;clr ti before the mov to sbuf!

ASEM-51 V1.3                                         Copyright (c) 2002 by W.W. Heinz                                         PAGE 7



 Line  I  Addr  Code            Source

  324:	  010F	F5 99				mov	sbuf, a
  325:	  0111	22				ret
  326:
  327:				;clearing ti before reading sbuf takes care of the case where
  328:				;interrupts may be enabled... if an interrupt were to happen
  329:				;between those two instructions, the serial port will just
  330:				;wait a while, but in the other order and the character could
  331:				;finish transmitting (during the interrupt routine) and then
  332:				;ti would be cleared and never set again by the hardware, causing
  333:				;the next call to cout to hang forever!
  334:
  335:	  0112	C0 E0		monnewline:	push	acc		;print one newline
  336:	  0114	74 0D				mov	a, #13
  337:	  0116	31 0A				acall	moncout
  338:	  0118	74 0A				mov	a, #10
  339:	  011A	31 0A				acall	moncout
  340:	  011C	D0 E0				pop	acc
  341:	  011E	22				ret
  342:
  343:				;a not so well documented feature of pstr is that you can print
  344:				;multiple consecutive strings without needing to reload dptr
  345:				;(which takes 3 bytes of code!)... this is useful for inserting
  346:				;numbers or spaces between strings.
  347:
  348:	  011F	C0 E0		monpstr:	push	acc
  349:	  0121	E4		monpstr1:	clr	a
  350:	  0122	93				movc	a, @a+dptr
  351:	  0123	A3				inc	dptr
  352:	  0124	60 0A				jz	monpstr2
  353:	  0126	A2 E7				mov	c, acc.7
  354:	  0128	54 7F				anl	a, #07Fh
  355:	  012A	31 0A				call	moncout
  356:	  012C	40 02				jc	monpstr2
  357:	  012E	80 F1				sjmp	monpstr1
  358:	  0130	D0 E0		monpstr2:	pop	acc
  359:	  0132	22				ret
  360:
  361:				; Highly code efficient resursive call phex contributed
  362:				; by Alexander B. Alexandrov <abalex@cbr.spb.ru>
  363:
  364:	  0133	31 35		monphex:	acall	monphex_b
  365:	  0135	C4		monphex_b:	swap	a		;SWAP A will be twice => A unchanged
  366:	  0136	C0 E0		monphex1:	push	acc
  367:	  0138	54 0F				anl	a, #15
  368:	  013A	24 90				add	a, #90h	; acc is 0x9X, where X is hex digit
  369:	  013C	D4				da	a		; if A to F, C=1 and lower four bits are 0..5
  370:	  013D	34 40				addc	a, #40h
  371:	  013F	D4				da	a
  372:	  0140	31 0A				call	moncout
  373:	  0142	D0 E0				pop	acc
  374:	  0144	22				ret
  375:
  376:	  0145			monphex16:
  377:	  0145	C0 E0				push	acc
  378:	  0147	E5 83				mov	a, dph
  379:	  0149	31 33				call	monphex

ASEM-51 V1.3                                         Copyright (c) 2002 by W.W. Heinz                                         PAGE 8



 Line  I  Addr  Code            Source

  380:	  014B	E5 82				mov	a, dpl
  381:	  014D	31 33				call	monphex
  382:	  014F	D0 E0				pop	acc
  383:	  0151	22				ret
  384:
  385:	  0152	0D 0A 2A 2A	minitext:	db	13, 10, "*** Mini-Mon", 13, 10
	  0156	2A 20 4D 69
	  015A	6E 69 2D 4D
	  015E	6F 6E 0D 0A
  386:	  0162	64 20 2D 20			db	"d - download", 13, 10
	  0166	64 6F 77 6E
	  016A	6C 6F 61 64
	  016E	0D 0A
  387:	  0170	67 20 2D 20			db	"g - goto", 13, 10
	  0174	67 6F 74 6F
	  0178	0D 0A
  388:	  017A	68 20 2D 20			db	"h - dump ext mem", 13, 10
	  017E	64 75 6D 70
	  0182	20 65 78 74
	  0186	20 6D 65 6D
	  018A	0D 0A
  389:	  018C	6E 20 2D 20			db	"n - new address", 13, 10+080h
	  0190	6E 65 77 20
	  0194	61 64 64 72
	  0198	65 73 73 0D
	  019C	8A
  390:
  391:						$include (vt102.a51)
  392: 1			;===============================================
  393: 1			; AT89S52 code for emulating a VT102 terminal
  394: 1			; 2023-24 Roland Scholz (rolandscholz@gmx.de)
  395: 1			; no warranties
  396: 1			; do whatever you want with this code
  397: 1			; assembled with M-IDE Studio for MCS-51
  398: 1			;===============================================
  399: 1
  400: 1			;		$NOMOD51
  401: 1			;		$INCLUDE (89S52.MCU)
  402: 1
  403: 1			;base		equ	02000h
  404: 1			;monstart	equ	0h
  405: 1			;stack		equ	080h
  406: 1			;dpl		equ	dp0l
  407: 1			;dph		equ	dp0h
  408: 1
  409: 1
  410: 1	N      0000	vt102base	equ	base
  411: 1
  412: 1			;stack		equ	80h
  413: 1			;dph		equ	DP0H
  414: 1			;dpl		equ	DP0L
  415: 1
  416: 1	N      0050	WIDTH		equ	80
  417: 1	N      0018	HEIGHT		equ	24
  418: 1
  419: 1	N      0000	ST_IDLE		equ	0

ASEM-51 V1.3                                         Copyright (c) 2002 by W.W. Heinz                                         PAGE 9



 Line  I  Addr  Code            Source

  420: 1	N      0002	ST_ESC		equ	2
  421: 1	N      0004	ST_CSI		equ	4
  422: 1	N      0006	ST_ESC_Q	equ	6
  423: 1	N      0008	ST_ESC_HASH	equ	8
  424: 1	N      000A	ST_CMD_ARG	equ	10
  425: 1	N      000C	ST_ESC_LBRACK	equ	12
  426: 1	N      000E	ST_CSI_Q	equ	14
  427: 1	N      0010	ST_ESC_RBRACK	equ	16
  428: 1
  429: 1	N      0000	BLACK		equ	0
  430: 1	N      0001	RED		equ	1
  431: 1	N      0002	GREEN		equ	2
  432: 1	N      0003	YELLOW		equ	3
  433: 1	N      0004	BLUE		equ	4
  434: 1	N      0005	MAGENTA		equ	5
  435: 1	N      0006	TURQUOISE	equ	6
  436: 1	N      0007	WHITE		equ	7
  437: 1
  438: 1	N      0070	DEFAULTCOLOR	equ	WHITE SHL 4 + BLACK
  439: 1
  440: 1	N      000A	C_TIME		equ	10
  441: 1
  442: 1	N      0007	C_BELL		equ	7
  443: 1	N      0008	C_BACKSP	equ	8
  444: 1	N      0009	C_TAB		equ	9
  445: 1	N      000A	C_NEWLINE	equ	10
  446: 1	N      000B	C_VT		equ	11
  447: 1	N      000C	C_FF		equ	12
  448: 1	N      000D	C_CR		equ	13
  449: 1	N      000E	C_SO		equ	14
  450: 1	N      000F	C_SI		equ	15
  451: 1	N      0011	C_XON		equ	17
  452: 1	N      0013	C_XOFF		equ	19
  453: 1	N      001B	C_ESC		equ	27
  454: 1	N      007F	C_DEL		equ	07fh
  455: 1
  456: 1	N      001C	CCHM		equ	01Ch	;move cursor home
  457: 1	N      001D	CCBT		equ	01Dh	;move cursor to bottom
  458: 1	N      001E	CCLM		equ	01Eh	;move cursor to left margin
  459: 1	N      001F	CCRM		equ	01Fh	;move cursor to right margin
  460: 1
  461: 1							;SUPERF equ 0
  462: 1
  463: 1	N      0001	CLS		equ	001h	;clear screen
  464: 1	N      0008	BACK		equ	008h	;backspace
  465: 1	N      0009	TABU		equ	009h	;tabulator
  466: 1	N      000A	LF		equ	00Ah	;$9B	;end of line (RETURN)
  467: 1	N      001B	ESC		equ	01Bh	;escape key
  468: 1	N      001C	CCUP		equ	01Ch	;cursor up
  469: 1	N      001D	CCDN		equ	01Dh	;cursor down
  470: 1	N      001E	CCLF		equ	01Eh	;cursor left
  471: 1	N      001F	CCRT		equ	01Fh	;cursor right
  472: 1	N      0020	CSPACE		equ	020h	;space
  473: 1	N      009D	CILN		equ	09Dh	;insert line
  474: 1	N      00FE	CDCH		equ	0FEh	;delete character
  475: 1	N      00FF	CICH		equ	0FFh	;insert character

ASEM-51 V1.3                                        Copyright (c) 2002 by W.W. Heinz                                         PAGE 10



 Line  I  Addr  Code            Source

  476: 1
  477: 1	N      0080	F1		equ	080h	;key code for F1
  478: 1	N      0081	F2		equ	081h	;key code for F2
  479: 1	N      0082	F3		equ	082h	;key code for F3
  480: 1	N      0083	F4		equ	083h	;key code for F4
  481: 1	N      0084	F5		equ	084h	;key code for F5
  482: 1	N      0085	F6		equ	085h	;key code for F6
  483: 1	N      0086	F7		equ	086h	;key code for F7
  484: 1	N      0087	F8		equ	087h	;key code for F8
  485: 1	N      0088	F9		equ	088h	;key code for F9
  486: 1	N      0089	F10		equ	089h	;key code for F10
  487: 1	N      008A	F11		equ	08ah	;key code for F11
  488: 1	N      008B	F12		equ	08bh	;key code for F12
  489: 1
  490: 1			;	special key scan-codes
  491: 1	N      0011	ALTGR		equ	011h	;extended!
  492: 1	N      0011	ALR		equ	011h
  493: 1	N      0012	CLSHIFT		equ	012h
  494: 1	N      0014	CLSTRG		equ	014h
  495: 1	N      0059	CRSHIFT		equ	059h
  496: 1	N      0058	CCAPS		equ	058h
  497: 1
  498: 1	N      00E0	EXTENDED	equ	0e0h
  499: 1	N      00F0	BREAK		equ	0f0h
  500: 1
  501: 1					;	0	;Error (ignored)
  502: 1	N      0001	DECCKM		equ	1	;Cursor key
  503: 1	N      0002	DECANM		equ	2	;ANSI/VT52
  504: 1	N      0003	DECCOLM		equ	3	;Column
  505: 1	N      0004	DECSCLM		equ	4	;Scrolling
  506: 1	N      0005	DECSCNM		equ	5	;Screen
  507: 1	N      0006	DECOM		equ	6	;Origin
  508: 1	N      0007	DECAWM		equ	7	;Auto wrap
  509: 1	N      0008	DECARM		equ	8	;Auto repeating
  510: 1	N      0009	DECINLM		equ	9	;Interlace
  511: 1	N      0004	IRM		equ	4	;Insert Replace mode
  512: 1	N      0014	LNM		equ	20	;new line mode
  513: 1
  514: 1
  515: 1	N      0020	VARS		equ	020h
  516: 1
  517: 1	N      0020	flags		equ	020h
  518: 1	B      0000	special		equ	flags.0
  519: 1	B      0001	lastchar	equ	flags.1
  520: 1	B      0002	lchartmp	equ	flags.2
  521: 1	B      0003	inverse		equ	flags.3
  522: 1	B      0004	xonoff		equ	flags.4
  523: 1	B      0005	serbusy		equ	flags.5
  524: 1
  525: 1	N      0021	flags1		equ	021h
  526: 1	B      0008	keyavail	equ	flags1.0
  527: 1	B      0009	keyrxextended	equ	flags1.1
  528: 1	B      000A	keyrxbreak	equ	flags1.2
  529: 1	B      000B	keyrxshift	equ	flags1.3
  530: 1	B      000C	keyrxaltgr	equ	flags1.4
  531: 1	B      000D	keyrxstrg	equ	flags1.5

ASEM-51 V1.3                                        Copyright (c) 2002 by W.W. Heinz                                         PAGE 11



 Line  I  Addr  Code            Source

  532: 1
  533: 1	N      0022	flags2		equ	022h
  534: 1	B      0010	wrap		equ	flags2.0
  535: 1	B      0011	origin		equ	flags2.1
  536: 1	B      0012	newlinemode	equ	flags2.2
  537: 1	B      0013	insert		equ	flags2.3
  538: 1	B      0014	databits	equ	flags2.4
  539: 1	B      0015	evenodd		equ	flags2.5
  540: 1
  541: 1	N      0023	retstate	equ	023h
  542: 1	N      0025	nargs		equ	025h
  543: 1	N      0026	arg0		equ	026h
  544: 1	N      0027	arg1		equ	027h
  545: 1	N      0028	arg2		equ	028h
  546: 1	N      0029	arg3		equ	029h
  547: 1	N      002A	baudidx		equ	02ah
  548: 1	N      002B	scursorx	equ	02bh
  549: 1	N      002C	scursory	equ	02ch
  550: 1	N      002D	color		equ	02dh
  551: 1	N      002E	cursorpos	equ	02eh
  552: 1	N      002F	cursorpos1	equ	02fh
  553: 1	N      0030	cursorsave	equ	030h
  554: 1	N      0031	top		equ	031h
  555: 1	N      0032	bottom		equ	032h
  556: 1	N      0033	state		equ	033h
  557: 1	N      0034	serstart	equ	034h
  558: 1	N      0035	serend		equ	035h
  559: 1	N      0036	sercount	equ	036h
  560: 1	N      0037	cursorx		equ	037h
  561: 1	N      0038	cursory		equ	038h
  562: 1	N      0039	t0cnt		equ	039h
  563: 1	N      003A	keyrxcnt	equ	03ah
  564: 1	N      003B	keyrxval	equ	03bh
  565: 1	N      003C	oldstatus	equ	03ch
  566: 1	N      003D	defcol		equ	03dh
  567: 1
  568: 1	N      0040	serbuf		equ	040h
  569: 1
  570: 1	N      0050	tabutab		equ	050h		;10-bytes tabulator
  571: 1
  572: 1	N      005A	free0		equ	05ah
  573: 1	N      005B	free1		equ	05bh
  574: 1	N      005C	free2		equ	05ch
  575: 1	N      005D	free3		equ	05dh
  576: 1	N      005E	free4		equ	05eh
  577: 1	N      005F	free5		equ	05fh
  578: 1
  579: 1	N      0003			org	vt102base + 03h
  580: 1  0003	41 5E				ajmp	exint0
  581: 1
  582: 1	N      000B			org	vt102base + 0bh
  583: 1  000B	41 41				ajmp	timer0int
  584: 1
  585: 1	N      0023			org	vt102base + 023h
  586: 1  0023	41 03				ajmp	serint
  587: 1

ASEM-51 V1.3                                        Copyright (c) 2002 by W.W. Heinz                                         PAGE 12



 Line  I  Addr  Code            Source

  588: 1
  589: 1	N      0200			org	vt102base + 200h
  590: 1  0200	02 02 8D			jmp	start
  591: 1
  592: 1  0203	C0 D0		serint:		push	psw
  593: 1  0205	C0 E0				push	acc
  594: 1  0207	C0 00				push	ar0
  595: 1
  596: 1  0209	30 98 27			jnb	ri, serintti	;ri active?
  597: 1  020C	C2 98				clr	ri		;yes
  598: 1
  599: 1  020E	A8 35				mov	r0, serend
  600: 1  0210	08				inc	r0
  601: 1  0211	B8 50 00			cjne	r0, #serbuf+16, $+3
  602: 1  0214	40 02				jc	serint1
  603: 1  0216	78 40				mov	r0, #serbuf
  604: 1  0218	A6 99		serint1:	mov	@r0, sbuf
  605: 1  021A	88 35				mov	serend, r0
  606: 1  021C	05 36				inc	sercount
  607: 1  021E	E5 36				mov	a, sercount
  608: 1  0220	B4 08 10			cjne	a, #8, serintti
  609: 1  0223	75 99 13			mov	SBUF, #C_XOFF
  610: 1  0226	D2 04				setb	xonoff
  611: 1  0228	E5 8D				mov	a, TH1		;load baudrate
  612: 1  022A	78 50		serint2:	mov	r0, #80
  613: 1  022C	D8 FE				djnz	r0, $
  614: 1  022E	04				inc	a
  615: 1  022F	70 F9				jnz	serint2
  616: 1
  617: 1  0231	C2 99				clr	ti
  618: 1
  619: 1  0233	30 99 04	serintti:	jnb 	ti, serintex
  620: 1  0236	C2 99				clr	ti
  621: 1  0238	C2 05				clr	serbusy
  622: 1
  623: 1  023A	D0 00		serintex:	pop	ar0
  624: 1  023C	D0 E0				pop	acc
  625: 1  023E	D0 D0				pop	psw
  626: 1  0240	32				reti
  627: 1
  628: 1
  629: 1
  630: 1			;===============================================
  631: 1			; Timer 0 Interrupt 0
  632: 1			;===============================================
  633: 1  0241	D5 39 19	timer0int:	djnz	t0cnt, timer0int_ex
  634: 1  0244	75 39 0A			mov	t0cnt, #C_TIME
  635: 1  0247	C0 D0				push	psw
  636: 1  0249	C0 E0				push	acc
  637: 1  024B	C0 00				push	ar0
  638: 1
  639: 1  024D	85 2F A0			mov	p2, cursorpos+1
  640: 1  0250	A8 2E				mov	r0, cursorpos
  641: 1  0252	E2				movx	a, @r0
  642: 1  0253	E5 90				mov	a, p1
  643: 1  0255	F4				cpl	a

ASEM-51 V1.3                                        Copyright (c) 2002 by W.W. Heinz                                         PAGE 13



 Line  I  Addr  Code            Source

  644: 1  0256	F2				movx	@r0, a
  645: 1
  646: 1  0257	D0 00				pop	ar0
  647: 1  0259	D0 E0				pop	acc
  648: 1  025B	D0 D0				pop	psw
  649: 1  025D	32		timer0int_ex:	reti
  650: 1
  651: 1
  652: 1
  653: 1			;===============================================
  654: 1			; External Interrupt 0 (falling edge)
  655: 1			; collect bits sent from keyboard
  656: 1			; lsb first
  657: 1			; 8E1, start-bit (low), 8 data-bits, even-parity, stop-bit (high)
  658: 1			;===============================================
  659: 1  025E	C0 D0		exint0:		push	psw
  660: 1  0260	C0 E0				push	acc
  661: 1
  662: 1  0262	E5 3A				mov	a, keyrxcnt
  663: 1			;		mov	dptr, #8000h
  664: 1			;		clr	c
  665: 1			;		rlc	a
  666: 1			;		add	a, dp0l
  667: 1			;		mov	dp0l, a
  668: 1			;		clr	a
  669: 1			;		mov	a, #'0'
  670: 1			;		mov	c, t0
  671: 1			;		mov	acc.0, c
  672: 1			;		movx	@dptr, a
  673: 1
  674: 1  0264	E5 3A				mov	a, keyrxcnt
  675: 1  0266	70 03				jnz	exint0b			;first bit?
  676: 1  0268	20 B4 1D			jb	t0, exint0ex		;not zero, no startbit
  677: 1
  678: 1  026B	04		exint0b:	inc	a
  679: 1  026C	F5 3A				mov	keyrxcnt, a
  680: 1  026E	B4 0A 00			cjne	a, #10, $+3
  681: 1  0271	40 0E				jc	exint0a			;< 10, collect bits
  682: 1  0273	B4 0B 12			cjne	a, #11, exint0ex	;skip parity-bit
  683: 1  0276	75 3A 00			mov	keyrxcnt, #0
  684: 1  0279	30 B4 0C			jnb	t0, exint0ex		;no stop bit?
  685: 1  027C	12 0B 3B			call	keydecode
  686: 1  027F	80 07				sjmp 	exint0ex
  687: 1
  688: 1  0281	E5 3B		exint0a:	mov	a, keyrxval
  689: 1  0283	A2 B4				mov	c, t0			;shift in bit of t0
  690: 1  0285	13				rrc	a
  691: 1  0286	F5 3B				mov	keyrxval, a
  692: 1
  693: 1  0288	D0 E0		exint0ex:	pop	acc
  694: 1  028A	D0 D0				pop	psw
  695: 1  028C	32				reti
  696: 1
  697: 1
  698: 1
  699: 1			;LOCAT		equ	02100h

ASEM-51 V1.3                                        Copyright (c) 2002 by W.W. Heinz                                         PAGE 14



 Line  I  Addr  Code            Source

  700: 1			;
  701: 1			;		org	LOCAT
  702: 1			;
  703: 1			;		ORG    LOCAT
  704: 1			;		DB     0A5H,0E5H,0E0H,0A5H	;SIGNITURE BYTES
  705: 1			;		DB     35,0,0,0			;ID (35=PROG), id (253=startup)
  706: 1			;		DB     0,0,0,0			;PROMPT CODE VECTOR
  707: 1			;		DB     0,0,0,0			;RESERVED
  708: 1			;		DB     0,0,0,0			;RESERVED
  709: 1			;		DB     0,0,0,0			;RESERVED
  710: 1			;		DB     0,0,0,0			;USER DEFINED
  711: 1			;		DB     255,255,255,255		;LENGTH AND CHECKSUM (255=UNUSED)
  712: 1			;		DB     "VT100",0		;MAX 31 CHARACTERS, PLUS THE ZERO
  713: 1
  714: 1			;		ORG    LOCAT+64			;EXECUTABLE CODE BEGINS HERE
  715: 1
  716: 1  028D			start:
  717: 1  028D	75 81 80			mov	sp, #stack		;set stack
  718: 1									;1  1  0  1	0    1    1   1
  719: 1  0290	75 B0 D7			mov	p3, #0d7h		;RD WR T1 T0	INT1 INT0 TXD RXD
  720: 1			;		clr	T0
  721: 1			;		clr	T1			;E 6845 = low
  722: 1			;		clr	INT0			;charset 0
  723: 1			;		clr	INT1			;screen 0
  724: 1  0293	E4				clr	a
  725: 1  0294	F5 A2				mov	AUXR1, a
  726: 1  0296	F5 A8				mov	ie, a
  727: 1
  728: 1
  729: 1			;		setb	PS			;make PS high priority
  730: 1									;enbale all, serial, timer0, extint0
  731: 1  0298	75 A8 93			mov	ie, #093h		;ea - ET2 ES  ET1 EX1 ET0 EX0
  732: 1  029B	D2 88				setb	it0			;set int0 to falling edge
  733: 1
  734: 1
  735: 1  029D	12 08 B2			call	term_reset
  736: 1
  737: 1  02A0	74 11				mov	a, #C_XON
  738: 1  02A2	12 0A E1			call	cout
  739: 1
  740: 1  02A5	12 0A 4F	init:		call	init6845
  741: 1  02A8	12 0A 8E			call	copyFont
  742: 1  02AB	12 0A A7			call	testScreen
  743: 1
  744: 1  02AE	90 80 00			mov	dptr, #8000h
  745: 1  02B1	E0				movx	a, @dptr
  746: 1  02B2	E5 90				mov	a, p1
  747: 1  02B4	14				dec	a
  748: 1  02B5	60 06				jz	init_loop
  749: 1  02B7	90 00 00			mov	dptr, #0h
  750: 1  02BA	E0				movx	a, @dptr
  751: 1  02BB	80 E8				sjmp	init
  752: 1
  753: 1  02BD			init_loop:
  754: 1			;		call	cin
  755: 1			;		cjne	a, #'x', init_1

ASEM-51 V1.3                                        Copyright (c) 2002 by W.W. Heinz                                         PAGE 15



 Line  I  Addr  Code            Source

  756: 1			;		sjmp	init_2
  757: 1
  758: 1			;init_1:		cjne	a, #'y', init_loop
  759: 1
  760: 1			;loop_test:	call	cin
  761: 1			;		call	cout
  762: 1			;		sjmp	loop_test
  763: 1
  764: 1
  765: 1  02BD	D2 8C		init_2:		setb	tr0				;start timer0
  766: 1  02BF	12 08 B2			call	term_reset
  767: 1
  768: 1			;		mov	dptr, #msg1
  769: 1			;		call	print
  770: 1
  771: 1  02C2	30 08 52	main_loop:	jnb	keyavail, main_serin		;key available?
  772: 1  02C5	C2 08				clr	keyavail			;clear key available
  773: 1  02C7	E5 3B				mov	a, keyrxval
  774: 1
  775: 1  02C9	B4 84 02			cjne	a, #F5, main_F6			;F5 ?
  776: 1  02CC	41 BD				ajmp	init_2				;reset terminal
  777: 1  02CE	B4 85 0E	main_F6:	cjne	a, #F6, main_F7			;F6 ?
  778: 1  02D1	E5 2A				mov	a, baudidx			;switch baud
  779: 1  02D3	04				inc	a
  780: 1  02D4	B4 05 01			cjne	a, #5, main_F6a
  781: 1  02D7	E4				clr	a
  782: 1  02D8	F5 2A		main_F6a:	mov	baudidx, a
  783: 1  02DA	12 03 32			call	setbaud
  784: 1  02DD	80 4E				sjmp	main_status
  785: 1
  786: 1  02DF	B4 86 0C	main_F7:	cjne	a, #F7, main_F8			;F7 ? cycle color
  787: 1  02E2	E5 3D				mov	a, defcol
  788: 1  02E4	24 10				add	a, #16
  789: 1  02E6	54 7F				anl	a, #07fh
  790: 1  02E8	F5 3D				mov	defcol, a
  791: 1  02EA	F5 2D				mov	color, a
  792: 1  02EC	80 D4				sjmp	main_loop
  793: 1
  794: 1  02EE	B4 87 04	main_F8:	cjne	a, #F8, main_F9			;F8 8/7 data bits
  795: 1  02F1	B2 14				cpl	databits
  796: 1  02F3	80 38				sjmp	main_status
  797: 1
  798: 1  02F5	B4 88 04	main_F9:	cjne	a, #F9, main_cout		;F9 toggle even/odd parity
  799: 1  02F8	B2 15				cpl	evenodd
  800: 1  02FA	80 31				sjmp	main_status
  801: 1
  802: 1  02FC	30 14 0A	main_cout:	jnb	databits, main_cout2		;8 databits, just output
  803: 1  02FF	54 7F				anl	a, #07fh
  804: 1  0301	A2 D0				mov	c, P
  805: 1  0303	30 15 01			jnb	evenodd, main_cout1
  806: 1  0306	B3				cpl	c
  807: 1  0307	92 E7		main_cout1:	mov	acc.7, c
  808: 1
  809: 1  0309	12 0A E1	main_cout2:	call	cout				;send out over serial
  810: 1  030C	B4 0D 08			cjne	a, #C_CR, main_serin		;CR sent?
  811: 1  030F	30 12 05			jnb	newlinemode, main_serin

ASEM-51 V1.3                                        Copyright (c) 2002 by W.W. Heinz                                         PAGE 16



 Line  I  Addr  Code            Source

  812: 1  0312	74 0A				mov	a, #C_NEWLINE			;send LF, too
  813: 1  0314	12 0A E1			call	cout
  814: 1
  815: 1  0317	E5 34		main_serin:	mov	a, serstart			;serin available?
  816: 1  0319	B5 35 02			cjne	a, serend, loop_cin
  817: 1  031C	80 A4				sjmp	main_loop			;no serin available
  818: 1
  819: 1  031E	12 0A F1	loop_cin:	call	cin				;read from serial
  820: 1  0321	12 03 3E			call	ansiout				;output to terminal's CRT
  821: 1
  822: 1  0324	E5 22				mov	a, flags2			;have flags changed?
  823: 1  0326	65 3C				xrl	a, oldstatus
  824: 1  0328	60 98				jz	main_loop			;no
  825: 1  032A	85 22 3C			mov	oldstatus, flags2
  826: 1  032D	12 0D 44	main_status:	call	prtstatus			;print status-line
  827: 1  0330	80 90				sjmp	main_loop
  828: 1
  829: 1  0332	12 0D 24	setbaud:	call	getbaud
  830: 1  0335	C2 8E				clr	tr1
  831: 1  0337	F5 8D				mov	TH1, a
  832: 1  0339	F5 8B				mov	TL1, a
  833: 1  033B	D2 8E				setb	tr1
  834: 1  033D	22				ret
  835: 1			;===============================================
  836: 1			; ansiout: dispatch according to state
  837: 1			;===============================================
  838: 1  033E	30 14 02	ansiout:	jnb	databits, ansiout3
  839: 1  0341	54 7F				anl	a, #07fh
  840: 1
  841: 1  0343	FF		ansiout3:	mov	r7, a			;save acc in r7
  842: 1  0344	E5 33				mov	a, state
  843: 1  0346	60 20				jz	do_idle			;speed up
  844: 1  0348	24 0C				add	a, #ansi_tab-ansiout1+1	;fetch low-byte
  845: 1  034A	83				movc	a, @a+pc
  846: 1  034B	C0 E0		ansiout1:	push	acc			;2
  847: 1  034D	E5 33				mov	a, state		;2
  848: 1  034F	24 04				add	a, #ansi_tab-ansiout2	;2
  849: 1  0351	83				movc	a, @a+pc		;1 fetch, high-byte
  850: 1  0352	C0 E0		ansiout2:	push	acc			;2
  851: 1  0354	EF				mov	a, r7			;1
  852: 1  0355	22				ret				;1
  853: 1
  854: 1  0356	03 68 04 6C	ansi_tab:	dw	do_idle, do_esc, do_csi, do_esc_q, do_esc_hash, do_cmd_arg, do_esc_lbrack, d
       1  035A	04 CF 07 E9	o_csi_q
       1  035E	07 ED 08 05
       1  0362	07 F9 07 9E
  855: 1  0366	07 F9				dw	do_esc_rbrack
  856: 1
  857: 1
  858: 1			;===============================================
  859: 1			; state IDLE
  860: 1			;===============================================
  861: 1  0368	A2 01		do_idle:	mov	C, lastchar
  862: 1  036A	92 02				mov	lchartmp, C
  863: 1  036C	C2 01				clr	lastchar
  864: 1

ASEM-51 V1.3                                        Copyright (c) 2002 by W.W. Heinz                                         PAGE 17



 Line  I  Addr  Code            Source

  865: 1  036E	E4				clr	a
  866: 1  036F	F8				mov	r0, a				;x-offset
  867: 1  0370	F9				mov	r1, a				;y-offset
  868: 1  0371	FA				mov	r2, a				;scrolling, 0 = no
  869: 1
  870: 1  0372	BF 7F 04	do_idle_del:	cjne	r7, #C_DEL, do_idle_pre
  871: 1  0375	18				dec	r0
  872: 1  0376	02 08 44			jmp	ansi_move
  873: 1
  874: 1  0379	BF 20 00	do_idle_pre:	cjne	r7, #32, $+3			;speed up
  875: 1  037C	50 6B				jnc	draw_char
  876: 1
  877: 1  037E	BF 07 01			cjne	r7, #C_BELL, do_idle_bs
  878: 1  0381	22				ret					;no bell yet
  879: 1
  880: 1  0382	BF 08 04	do_idle_bs:	cjne	r7, #C_BACKSP, do_idle_tab	;backspace
  881: 1  0385	18				dec	r0
  882: 1  0386	02 08 44			jmp	ansi_move
  883: 1
  884: 1  0389	BF 09 26	do_idle_tab:	cjne	r7, #C_TAB, do_idle_nl		;tabulator
  885: 1  038C	12 08 FF			call	tab_set_r0_r1
  886: 1  038F	E4		do_idle_tab3:	clr	a
  887: 1  0390	09				inc	r1
  888: 1  0391	05 37				inc	cursorx
  889: 1  0393	B9 08 10			cjne	r1, #8, do_idle_tab1
  890: 1  0396	08				inc	r0
  891: 1  0397	F9				mov	r1, a
  892: 1  0398	B8 5A 0B			cjne	r0, #tabutab+10, do_idle_tab1
  893: 1  039B	F8				mov	r0, a
  894: 1  039C	F5 37				mov	cursorx, a
  895: 1  039E	09				inc	r1
  896: 1  039F	0A				inc	r2				;scroll on
  897: 1  03A0	12 08 44			call	ansi_move
  898: 1  03A3	12 08 FF			call	tab_set_r0_r1
  899: 1  03A6	12 09 0F	do_idle_tab1:	call	getbit
  900: 1  03A9	56				anl	a, @r0
  901: 1  03AA	60 E3				jz	do_idle_tab3			;bit not found
  902: 1  03AC	E4		do_idle_tab2:	clr	a
  903: 1  03AD	F8				mov	r0, a
  904: 1  03AE	F9				mov	r1, a
  905: 1  03AF	02 08 44			jmp	ansi_move
  906: 1
  907: 1
  908: 1  03B2	BF 0A 08	do_idle_nl:	cjne	r7, #C_NEWLINE, do_idle_cr
  909: 1  03B5	75 37 00	do_newline:	mov	cursorx, #0
  910: 1  03B8	09				inc	r1
  911: 1  03B9	0A				inc	r2
  912: 1  03BA	02 08 44			jmp	ansi_move
  913: 1
  914: 1  03BD	BF 0D 0A	do_idle_cr:	cjne	r7, #C_CR, do_idle_esc
  915: 1  03C0	75 37 00	do_cr:		mov	cursorx, #0
  916: 1  03C3	12 08 44			call	ansi_move
  917: 1  03C6	20 12 EC			jb	newlinemode, do_newline		;per default, CR
  918: 1  03C9	22				ret
  919: 1
  920: 1  03CA	BF 1B 06	do_idle_esc:	cjne	r7, #C_ESC, do_idle_so

ASEM-51 V1.3                                        Copyright (c) 2002 by W.W. Heinz                                         PAGE 18



 Line  I  Addr  Code            Source

  921: 1  03CD	75 33 02			mov	state, #ST_ESC
  922: 1  03D0	02 09 1B			jmp	clearargs
  923: 1
  924: 1  03D3	BF 0E 03	do_idle_so:	cjne	r7, #C_SO, do_idle_si
  925: 1  03D6	D2 00				setb	special
  926: 1  03D8	22				ret
  927: 1
  928: 1  03D9	BF 0F 03	do_idle_si:	cjne	r7, #C_SI, do_idle_vt
  929: 1  03DC	C2 00				clr	special
  930: 1  03DE	22				ret
  931: 1
  932: 1  03DF	BF 0B 02	do_idle_vt:	cjne	r7, #C_VT, do_idle_ff
  933: 1  03E2	80 D1				sjmp	do_newline
  934: 1
  935: 1  03E4	BF 0C 02	do_idle_ff:	cjne	r7, #C_FF, do_idle_end
  936: 1  03E7	80 CC				sjmp	do_newline
  937: 1
  938: 1  03E9			do_idle_end:	;ajmp	draw_char
  939: 1
  940: 1
  941: 1
  942: 1  03E9	C0 07		draw_char:	push	ar7				;save r7 (received byte)
  943: 1  03EB	12 0A 18			call	cursor_off			;reset + disable cursor
  944: 1
  945: 1  03EE	0A				inc	r2				;with scroll
  946: 1  03EF	30 02 05			jnb	lchartmp, char_out		;last char in line?
  947: 1  03F2	30 10 02			jnb	wrap, char_out			;wrap turned on?
  948: 1  03F5	71 B5				call	do_newline
  949: 1
  950: 1			;===============================================
  951: 1			; draws a char in ACC at cursor position
  952: 1			;===============================================
  953: 1  03F7	12 0A 3B	char_out:	call	comp_dptr
  954: 1
  955: 1  03FA	D0 01				pop	ar1
  956: 1
  957: 1  03FC	30 00 0E			jnb	special, char_out_3	;special not set?
  958: 1  03FF	B9 60 00			cjne	r1, #060h, $+3
  959: 1  0402	40 09				jc	char_out_3		;<60h, do nothing
  960: 1  0404	B9 7F 00			cjne	r1, #07fh, $+3
  961: 1  0407	50 04				jnc	char_out_3		;>=7fh, do nothing
  962: 1  0409	E9				mov	a, r1
  963: 1  040A	94 5E				subb	a, #5eh			;carry set! subtract 5fh
  964: 1  040C	F9				mov	r1, a
  965: 1  040D	30 13 3D	char_out_3:	jnb	insert, char_out_4	;insert mode?
  966: 1
  967: 1  0410	C3				clr	c
  968: 1  0411	74 4F				mov	a, #WIDTH-1
  969: 1  0413	95 37				subb	a, cursorx
  970: 1  0415	33				rlc	a			;* 2
  971: 1  0416	60 35				jz	char_out_4
  972: 1  0418	F8				mov	r0, a			;R0: number of chars to copy in
  973: 1  0419	04				inc	a
  974: 1
  975: 1  041A	25 84				add	a, dp1l			;add r0, to dptr1 (destination)
  976: 1  041C	F5 84				mov	dp1l, a

ASEM-51 V1.3                                        Copyright (c) 2002 by W.W. Heinz                                         PAGE 19



 Line  I  Addr  Code            Source

  977: 1  041E	E5 85				mov	a, dp1h
  978: 1  0420	34 00				addc	a, #0
  979: 1  0422	F5 85				mov	dp1h, a
  980: 1
  981: 1  0424	E5 84				mov	a, dp1l			;dptr0 = dptr1 - 2 (source)
  982: 1  0426	94 02				subb	a, #2
  983: 1  0428	F5 82				mov	dp0l, a
  984: 1  042A	E5 85				mov	a, dp1h
  985: 1  042C	94 00				subb	a, #0
  986: 1  042E	F5 83				mov	dp0h, a
  987: 1
  988: 1
  989: 1
  990: 1
  991: 1  0430	E0		char_out_2:	movx	a, @dptr		;copy r0 bytes from right to left
  992: 1  0431	05 A2				inc	auxr1
  993: 1  0433	E5 90				mov	a, p1
  994: 1  0435	F0				movx	@dptr, a
  995: 1  0436	05 A2				inc	auxr1
  996: 1  0438	E5 82				mov	a, dp0l
  997: 1  043A	70 02				jnz	char_out_2a
  998: 1  043C	15 83				dec	dp0h
  999: 1  043E	15 82		char_out_2a:	dec	dp0l
 1000: 1  0440	E5 84				mov	a, dp1l
 1001: 1  0442	70 02				jnz	char_out_2b
 1002: 1  0444	15 85				dec	dp1h
 1003: 1  0446	15 84		char_out_2b:	dec	dp1l
 1004: 1  0448	D8 E6				djnz	r0, char_out_2
 1005: 1  044A	12 0A 3B			call	comp_dptr
 1006: 1
 1007: 1  044D	E9		char_out_4:	mov	a, r1
 1008: 1  044E	05 A2				inc	auxr1
 1009: 1  0450	F0				movx	@dptr, a
 1010: 1  0451	A3				inc	dptr
 1011: 1  0452	E5 2D				mov	a, color
 1012: 1  0454	30 03 01			jnb	inverse, char_out_1
 1013: 1  0457	C4				swap	a
 1014: 1  0458	F0		char_out_1:	movx	@dptr, a
 1015: 1  0459	05 A2				inc	auxr1
 1016: 1
 1017: 1  045B	E5 37				mov	a, cursorx
 1018: 1  045D	B4 4F 02			cjne	a, #WIDTH-1, draw_char_1
 1019: 1  0460	D2 01				setb	lastchar
 1020: 1
 1021: 1  0462	78 01		draw_char_1:	mov	r0, #1
 1022: 1  0464	79 00				mov	r1, #0
 1023: 1  0466	12 09 F8			call	draw_cursor
 1024: 1  0469	02 08 44			jmp	ansi_move
 1025: 1
 1026: 1			;===============================================
 1027: 1			; state ESC
 1028: 1			;===============================================
 1029: 1  046C	75 33 00	do_esc:		mov	state, #ST_IDLE
 1030: 1  046F	B4 1B 03			cjne	a, #C_ESC, do_esc_csi	;2x ESC? return to monitor
 1031: 1  0472	02 00 52			ljmp	monstart
 1032: 1

ASEM-51 V1.3                                        Copyright (c) 2002 by W.W. Heinz                                         PAGE 20



 Line  I  Addr  Code            Source

 1033: 1  0475	B4 5B 04	do_esc_csi:	cjne	a, #'[', do_esc_7	;switch to CSI state
 1034: 1  0478	75 33 04			mov	state, #ST_CSI
 1035: 1  047B	22				ret
 1036: 1
 1037: 1  047C	B4 37 07	do_esc_7:	cjne	a, #'7', do_esc_8	;save cursor
 1038: 1  047F	85 37 2B			mov	scursorx, cursorx
 1039: 1  0482	85 38 2C			mov	scursory, cursory
 1040: 1  0485	22				ret
 1041: 1
 1042: 1  0486	B4 38 09	do_esc_8:	cjne	a, #'8', do_esc_D	;restore cursor
 1043: 1  0489	85 2B 37			mov	cursorx, scursorx
 1044: 1  048C	85 2C 38			mov	cursory, scursory
 1045: 1  048F	02 09 F5			jmp	move_cursor
 1046: 1
 1047: 1  0492	B4 44 05	do_esc_D:	cjne	a, #'D', do_esc_M	;move cursor down and scroll
 1048: 1  0495	0A				inc	r2			;with scrolling
 1049: 1  0496	74 42				mov	a, #'B'
 1050: 1  0498	81 DD				ajmp	do_csi_keys		;do cursor down
 1051: 1
 1052: 1  049A	B4 4D 05	do_esc_M:	cjne	a, #'M', do_esc_ha	;move cursor up and scroll
 1053: 1  049D	0A				inc	r2			;with scrolling
 1054: 1  049E	74 41				mov	a, #'A'
 1055: 1  04A0	81 DD				ajmp	do_csi_keys		;do cursor up
 1056: 1
 1057: 1  04A2	B4 23 04	do_esc_ha:	cjne	a, #'#', do_esc_lbr
 1058: 1  04A5	75 33 08			mov	state, #ST_ESC_HASH
 1059: 1  04A8	22				ret
 1060: 1
 1061: 1  04A9	B4 28 04	do_esc_lbr:	cjne	a, #'(', do_esc_rbr
 1062: 1  04AC	75 33 0C			mov	state, #ST_ESC_LBRACK
 1063: 1  04AF	22				ret
 1064: 1
 1065: 1  04B0	B4 29 04	do_esc_rbr:	cjne	a, #')', do_esc_c
 1066: 1  04B3	75 33 10			mov	state, #ST_ESC_RBRACK
 1067: 1  04B6	22				ret
 1068: 1
 1069: 1  04B7	B4 63 03	do_esc_c:	cjne	a, #'c', do_esc_H
 1070: 1  04BA	02 08 B2			jmp	term_reset
 1071: 1
 1072: 1  04BD	B4 48 09	do_esc_H:	cjne	a, #'H', do_esc_Z
 1073: 1  04C0	12 08 FF			call	tab_set_r0_r1
 1074: 1  04C3	12 09 0F			call	getbit
 1075: 1  04C6	46				orl	a, @r0
 1076: 1  04C7	F6				mov	@r0, a
 1077: 1  04C8	22				ret
 1078: 1
 1079: 1  04C9	B4 5A 02	do_esc_Z:	cjne	a, #'Z', do_esc_ex
 1080: 1  04CC	C1 06				ajmp	do_csi_cc2
 1081: 1
 1082: 1  04CE	22		do_esc_ex:	ret
 1083: 1
 1084: 1			;===============================================
 1085: 1			; state CSI
 1086: 1			;===============================================
 1087: 1  04CF			do_csi:
 1088: 1  04CF	12 08 9B			call	isparm			;is parameter?

ASEM-51 V1.3                                        Copyright (c) 2002 by W.W. Heinz                                         PAGE 21



 Line  I  Addr  Code            Source

 1089: 1  04D2	50 09				jnc	do_csi_keys		;no
 1090: 1  04D4	85 33 23			mov	retstate, state
 1091: 1  04D7	75 33 0A			mov	state, #ST_CMD_ARG
 1092: 1  04DA	02 08 05			jmp	do_cmd_arg
 1093: 1
 1094: 1  04DD	78 00		do_csi_keys:	mov	r0, #0			;x (column)
 1095: 1  04DF	79 00				mov	r1, #0			;y (row
 1096: 1  04E1	75 33 00			mov	state, #ST_IDLE
 1097: 1
 1098: 1  04E4	B4 41 0B			cjne	a, #'A', do_csi_B	;cursor up
 1099: 1  04E7	12 08 30			call	args_gr_zero
 1100: 1  04EA	E5 26				mov	a, arg0
 1101: 1  04EC	F4				cpl	a
 1102: 1  04ED	04				inc	a
 1103: 1  04EE	F9				mov	r1, a
 1104: 1  04EF	02 08 44			jmp	ansi_move
 1105: 1
 1106: 1
 1107: 1  04F2	B4 42 08	do_csi_B: 	cjne	a, #'B', do_csi_C	;cursor down
 1108: 1  04F5	12 08 30			call	args_gr_zero
 1109: 1  04F8	A9 26				mov	r1, arg0
 1110: 1  04FA	02 08 44			jmp	ansi_move
 1111: 1
 1112: 1
 1113: 1  04FD	B4 43 08	do_csi_C:	cjne	a, #'C', do_csi_D	;cursor right
 1114: 1  0500	12 08 30			call	args_gr_zero
 1115: 1  0503	A8 26				mov	r0, arg0
 1116: 1  0505	02 08 44			jmp	ansi_move
 1117: 1
 1118: 1
 1119: 1  0508	B4 44 0B	do_csi_D:	cjne	a, #'D', do_csi_H 	;cursor left
 1120: 1  050B	12 08 30			call	args_gr_zero
 1121: 1  050E	E5 26				mov	a, arg0
 1122: 1  0510	F4				cpl	a
 1123: 1  0511	04				inc	a
 1124: 1  0512	F8				mov	r0, a
 1125: 1  0513	02 08 44			jmp	ansi_move
 1126: 1
 1127: 1
 1128: 1  0516	B4 48 02	do_csi_H:	cjne	a, #'H', do_csi_H1	;position cursor
 1129: 1  0519	80 03				sjmp	do_csi_H2
 1130: 1  051B	B4 66 10	do_csi_H1:	cjne	a, #'f', do_csi_s
 1131: 1  051E	12 08 30	do_csi_H2:	call	args_gr_zero
 1132: 1  0521	E5 26				mov	a, arg0
 1133: 1  0523	14				dec	a
 1134: 1  0524	F5 38				mov	cursory, a
 1135: 1  0526	E5 27				mov	a, arg1
 1136: 1  0528	14				dec	a
 1137: 1  0529	F5 37				mov	cursorx, a
 1138: 1  052B	02 08 44			jmp	ansi_move
 1139: 1
 1140: 1
 1141: 1  052E	B4 73 07	do_csi_s:	cjne	a, #'s', do_csi_u	;save cursor
 1142: 1  0531	85 37 2B			mov	scursorx, cursorx
 1143: 1  0534	85 38 2C			mov	scursory, cursory
 1144: 1  0537	22				ret

ASEM-51 V1.3                                        Copyright (c) 2002 by W.W. Heinz                                         PAGE 22



 Line  I  Addr  Code            Source

 1145: 1
 1146: 1
 1147: 1  0538	B4 75 09	do_csi_u:	cjne	a, #'u', do_csi_m	;restore cursor
 1148: 1  053B	85 2B 37			mov	cursorx, scursorx
 1149: 1  053E	85 2C 38			mov	cursory, scursory
 1150: 1  0541	02 08 44			jmp	ansi_move
 1151: 1
 1152: 1
 1153: 1  0544	B4 6D 6A	do_csi_m:	cjne	a, #'m', do_csi_n	;color handling
 1154: 1  0547	A9 25				mov	r1, nargs
 1155: 1  0549	B9 00 06			cjne	r1, #0, do_csi_ma	;no args, reset
 1156: 1  054C	85 3D 2D			mov	color, defcol
 1157: 1  054F	C2 03				clr	inverse
 1158: 1  0551	22				ret
 1159: 1  0552	78 26		do_csi_ma:	mov	r0, #arg0
 1160: 1  0554	E6		do_csi_mc:	mov	a, @r0
 1161: 1  0555	B4 00 07			cjne	a, #0, do_csi_md	;if arg = 0, all attrs off
 1162: 1  0558	85 3D 2D			mov	color, defcol
 1163: 1  055B	C2 03				clr	inverse
 1164: 1  055D	A1 AD				ajmp	do_csi_mx3		;loop nargs
 1165: 1  055F	B4 1E 00	do_csi_md:	cjne	a, #30, do_csi_mb
 1166: 1  0562	50 02		do_csi_mb:	jnc	do_csi_me		;arg >= 30
 1167: 1  0564	80 2A				sjmp	do_csi_mx		;loop nargs
 1168: 1  0566	B4 26 00	do_csi_me:	cjne	a, #38, do_csi_mf
 1169: 1  0569	50 42		do_csi_mf:	jnc	do_csi_mx3		;>= 38	loop nargs
 1170: 1  056B	94 1D				subb	a, #29			; - 30 (carry set!)
 1171: 1  056D	C4				swap	a
 1172: 1  056E	FA				mov	r2, a
 1173: 1  056F	E5 2D				mov	a, color
 1174: 1  0571	54 0F				anl	a, #0fh
 1175: 1  0573	4A				orl	a, r2
 1176: 1  0574	F5 2D				mov	color, a
 1177: 1  0576	A1 AD				ajmp	do_csi_mx3		;loop nargs
 1178: 1  0578	B4 28 00	do_csi_mg:	cjne	a, #40, $+3
 1179: 1  057B	50 02				jnc	do_csi_mh		;>= 40
 1180: 1  057D	A1 90				ajmp	do_csi_mx		;loop nargs
 1181: 1  057F	B4 30 00	do_csi_mh:	cjne	a, #48, $+3
 1182: 1  0582	50 0C				jnc	do_csi_mx		;>= 48 loop
 1183: 1  0584	94 27				subb	a, #39			;- 40 (carry set!)
 1184: 1  0586	FA				mov	r2, a
 1185: 1  0587	F5 2D				mov	color, a
 1186: 1  0589	54 F0				anl	a, #0f0h
 1187: 1  058B	4A				orl	a, r2
 1188: 1  058C	F5 2D				mov	color, a
 1189: 1  058E	A1 AD				ajmp	do_csi_mx3		;loop nargs
 1190: 1  0590	B4 07 02	do_csi_mx:	cjne	a, #7, do_csi_mx1	;inverse
 1191: 1  0593	D2 03				setb	inverse
 1192: 1  0595	B4 01 0A	do_csi_mx1:	cjne	a, #1, do_csi_mx2	;bold
 1193: 1  0598	E5 2D				mov	a, color
 1194: 1  059A	54 0F				anl	a, #0fh
 1195: 1  059C	44 30				orl	a, #YELLOW SHL 4
 1196: 1  059E	F5 2D				mov	color, a
 1197: 1  05A0	80 0B				sjmp	do_csi_mx3
 1198: 1  05A2	B4 05 08	do_csi_mx2:	cjne	a, #5, do_csi_mx3
 1199: 1  05A5	E5 2D				mov	a, color		;underline
 1200: 1  05A7	54 0F				anl	a, #0fh

ASEM-51 V1.3                                        Copyright (c) 2002 by W.W. Heinz                                         PAGE 23



 Line  I  Addr  Code            Source

 1201: 1  05A9	44 10				orl	a, #RED SHL 4
 1202: 1  05AB	F5 2D				mov	color, a
 1203: 1  05AD	08		do_csi_mx3:	inc	r0
 1204: 1  05AE	D9 A4				djnz	r1, do_csi_mc
 1205: 1  05B0	22				ret
 1206: 1
 1207: 1  05B1	B4 6E 4F	do_csi_n:	cjne	a, #'n', do_csi_cc	;terminal status report
 1208: 1  05B4	E5 26				mov	a, arg0
 1209: 1  05B6	B4 05 0E			cjne	a, #5, do_csi_n6
 1210: 1  05B9	78 01				mov	r0, #1			;always OK: "ESC [ 0 n"
 1211: 1  05BB	E8		do_csi_n1:	mov	a, r0
 1212: 1  05BC	12 05 F6			call	getreport
 1213: 1  05BF	12 0A E1			call	cout
 1214: 1  05C2	08				inc	r0
 1215: 1  05C3	B8 05 F5			cjne	r0, #5, do_csi_n1
 1216: 1  05C6	22				ret
 1217: 1  05C7	B4 06 39	do_csi_n6:	cjne	a, #6, do_csi_cc		;report cursor position
 1218: 1  05CA	74 1B				mov	a, #ESC
 1219: 1  05CC	12 0A E1			call	cout
 1220: 1  05CF	74 5B				mov	a, #'['
 1221: 1  05D1	12 0A E1			call	cout
 1222: 1  05D4	E5 38				mov	a, cursory
 1223: 1  05D6	95 31				subb	a, top
 1224: 1  05D8	12 05 EA			call	sendpos
 1225: 1  05DB	74 3B				mov	a, #';'
 1226: 1  05DD	12 0A E1			call	cout
 1227: 1  05E0	E5 37				mov	a, cursorx
 1228: 1  05E2	12 05 EA			call	sendpos
 1229: 1  05E5	74 52				mov	a, #'R'
 1230: 1  05E7	02 0A E1			jmp	cout
 1231: 1
 1232: 1  05EA	04		sendpos:	inc	a
 1233: 1  05EB	12 0A 2E			call	hex2dez
 1234: 1  05EE	E8				mov	a, r0
 1235: 1  05EF	12 0A E1			call	cout
 1236: 1  05F2	E9				mov	a, r1
 1237: 1  05F3	02 0A E1			jmp	cout
 1238: 1
 1239: 1  05F6	83		getreport:	movc	a, @a+pc
 1240: 1  05F7	22				ret
 1241: 1  05F8	1B 5B 30 6E	reportok:	db	ESC, "[0n"		;terminal OK
 1242: 1  05FC	1B 5B 3F 31	reportda:	db	ESC, "[?1;0c"		;device attributes (VT100, no options)
       1  0600	3B 30 63
 1243: 1
 1244: 1  0603	B4 63 0D	do_csi_cc:	cjne	a, #'c', do_csi_r
 1245: 1  0606	78 05		do_csi_cc2:	mov	r0, #5			;reportda
 1246: 1  0608	E8		do_csi_cc1:	mov	a, r0
 1247: 1  0609	B1 F6				call	getreport
 1248: 1  060B	12 0A E1			call	cout
 1249: 1  060E	08				inc	r0
 1250: 1  060F	B8 0C F6			cjne	r0, #5+7, do_csi_cc1
 1251: 1  0612	22				ret
 1252: 1
 1253: 1  0613	B4 72 45	do_csi_r:	cjne	a, #'r', do_csi_J	;set scroll margins
 1254: 1  0616	E5 25				mov	a, nargs
 1255: 1  0618	70 08				jnz	do_csi_ra		;nargs > 0

ASEM-51 V1.3                                        Copyright (c) 2002 by W.W. Heinz                                         PAGE 24



 Line  I  Addr  Code            Source

 1256: 1  061A	75 31 00			mov	top, #0
 1257: 1  061D	75 32 17			mov	bottom, #HEIGHT-1
 1258: 1  0620	80 29				sjmp	do_csi_rc
 1259: 1  0622	12 08 30	do_csi_ra:	call	args_gr_zero
 1260: 1  0625	B4 02 00			cjne	a, #2, $+3
 1261: 1  0628	50 0A				jnc	do_csi_rb		;>= 2 args
 1262: 1  062A	85 26 31			mov	top, arg0
 1263: 1  062D	15 31				dec	top
 1264: 1  062F	75 32 17			mov	bottom, #HEIGHT-1
 1265: 1  0632	80 17				sjmp	do_csi_rc
 1266: 1  0634	E5 26		do_csi_rb:	mov	a, arg0
 1267: 1  0636	95 27				subb	a, arg1			;carry clear!
 1268: 1  0638	50 21				jnc	do_csi_J		; a >= b
 1269: 1  063A	85 26 31			mov	top, arg0
 1270: 1  063D	15 31				dec	top
 1271: 1
 1272: 1  063F	E5 27				mov	a, arg1
 1273: 1  0641	B4 19 00			cjne	a, #HEIGHT+1, $+3
 1274: 1  0644	40 02				jc	do_csi_re
 1275: 1  0646	74 18				mov	a, #HEIGHT
 1276: 1  0648	14		do_csi_re:	dec	a
 1277: 1  0649	F5 32				mov	bottom, a
 1278: 1
 1279: 1  064B	E4		do_csi_rc:	clr	a			;cursor home
 1280: 1  064C	F8				mov	r0, a
 1281: 1  064D	F9				mov	r1, a
 1282: 1  064E	F5 37				mov	cursorx, a
 1283: 1  0650	F5 38				mov	cursory, a
 1284: 1  0652	30 11 03			jnb	origin, do_csi_rd
 1285: 1  0655	85 31 38			mov	cursory, top
 1286: 1  0658	02 08 44	do_csi_rd:	jmp	ansi_move
 1287: 1
 1288: 1
 1289: 1  065B	B4 4A 35	do_csi_J:	cjne	a, #'J', do_csi_ques		;ED  Erase In Display
 1290: 1  065E	A8 26				mov	r0, arg0
 1291: 1  0660	B8 00 0F	do_csi_Ja:	cjne	r0, #0, do_csi_Jb
 1292: 1  0663	A8 38		do_csi_Jc:	mov	r0, cursory			;Erase from the active position to the end o
       1			f the screen, inclusive (default)
 1293: 1  0665	79 17				mov	r1, #HEIGHT-1			;y from cursory to HEIGHT-1
 1294: 1  0667	AA 37				mov	r2, cursorx			;start position x
 1295: 1  0669	74 50				mov	a, #WIDTH			;chars to erase first line
 1296: 1  066B	9A				subb	a, r2
 1297: 1  066C	FB				mov	r3, a
 1298: 1  066D	7D 50				mov	r5, #WIDTH			;chars to erase last line
 1299: 1  066F	02 09 C4			jmp	clear_lines
 1300: 1
 1301: 1  0672	B8 01 0E	do_csi_Jb:	cjne	r0, #1, do_csi_Jd
 1302: 1  0675	78 00				mov	r0, #0				;Erase from start of the screen to the activ
       1			e position, inclusive
 1303: 1  0677	A9 38				mov	r1, cursory
 1304: 1  0679	7A 00				mov	r2, #0
 1305: 1  067B	7B 50				mov	r3, #WIDTH			;chars to erase first line
 1306: 1  067D	AD 37				mov	r5, cursorx
 1307: 1  067F	0D				inc	r5				;chars to erase last line
 1308: 1  0680	02 09 C4			jmp	clear_lines
 1309: 1

ASEM-51 V1.3                                        Copyright (c) 2002 by W.W. Heinz                                         PAGE 25



 Line  I  Addr  Code            Source

 1310: 1  0683	B8 02 0D	do_csi_Jd:	cjne	r0, #2, do_csi_ques
 1311: 1  0686	78 00				mov	r0, #0				;Erase all of the display  all lines are er
       1			ased and the cursor does not move.
 1312: 1  0688	79 17				mov	r1, #HEIGHT-1
 1313: 1  068A	7A 00				mov	r2, #0
 1314: 1  068C	7B 50				mov	r3, #WIDTH			;chars to erase first line
 1315: 1  068E	7D 50				mov	r5, #WIDTH			;chars to erase first line
 1316: 1  0690	02 09 C4			jmp	clear_lines
 1317: 1
 1318: 1  0693	B4 3F 04	do_csi_ques:	cjne	a, #'?', do_csi_K
 1319: 1  0696	75 33 0E			mov	state, #ST_CSI_Q
 1320: 1  0699	22				ret
 1321: 1
 1322: 1  069A	B4 4B 29	do_csi_K:	cjne	a, #'K', do_csi_g
 1323: 1  069D	A8 38				mov	r0, cursory
 1324: 1  069F	A9 38				mov	r1, cursory
 1325: 1  06A1	E5 26				mov	a, arg0
 1326: 1  06A3	B4 00 09			cjne	a, #0, do_csi_Ka		;Erase from the active position to the end o
       1			f the line, inclusive (default)
 1327: 1  06A6	AA 37				mov	r2, cursorx
 1328: 1  06A8	74 50				mov	a, #WIDTH
 1329: 1  06AA	9A				subb	a, r2
 1330: 1  06AB	FD				mov	r5, a
 1331: 1  06AC	02 09 C4			jmp	clear_lines
 1332: 1  06AF	B4 01 08	do_csi_Ka:	cjne	a, #1, do_csi_Kb		;Erase from the start of the screen to the a
       1			ctive position, inclusive
 1333: 1  06B2	7A 00				mov	r2, #0
 1334: 1  06B4	AD 37				mov	r5, cursorx
 1335: 1  06B6	0D				inc	r5
 1336: 1  06B7	02 09 C4			jmp	clear_lines
 1337: 1  06BA	B4 02 07	do_csi_Kb:	cjne	a, #2, do_csi_end1		;Erase all of the line, inclusive
 1338: 1  06BD	7A 00				mov	r2, #0
 1339: 1  06BF	7D 50				mov	r5, #WIDTH
 1340: 1  06C1	02 09 C4			jmp	clear_lines
 1341: 1  06C4	E1 9D		do_csi_end1:	ajmp	do_csi_end
 1342: 1
 1343: 1  06C6	B4 67 13	do_csi_g:	cjne	a, #'g', do_csi_L
 1344: 1  06C9	E5 26				mov	a, arg0
 1345: 1  06CB	B4 03 03			cjne	a, #3, do_csi_g1
 1346: 1  06CE	02 08 F3			jmp	cleartabu			;clear all tabs
 1347: 1  06D1	12 08 FF	do_csi_g1:	call	tab_set_r0_r1
 1348: 1  06D4	12 09 0F			call	getbit
 1349: 1  06D7	F4				cpl	a
 1350: 1  06D8	56				anl	a, @r0
 1351: 1  06D9	F6				mov	@r0, a
 1352: 1  06DA	E1 9D				ajmp	do_csi_end
 1353: 1
 1354: 1  06DC	B4 4C 26	do_csi_L:	cjne	a, #'L', do_csi_MM		;insert line
 1355: 1  06DF	12 08 30			call	args_gr_zero
 1356: 1  06E2	E5 38				mov	a, cursory			;check if within bounds
 1357: 1  06E4	B5 31 00			cjne	a, top, $+3
 1358: 1  06E7	40 DB				jc	do_csi_end1
 1359: 1  06E9	B5 32 00			cjne	a, bottom, $+3
 1360: 1  06EC	80 02				sjmp	do_csi_L1
 1361: 1  06EE	50 D4				jnc	do_csi_end1
 1362: 1  06F0	12 0A 18	do_csi_L1:	call	cursor_off

ASEM-51 V1.3                                        Copyright (c) 2002 by W.W. Heinz                                         PAGE 26



 Line  I  Addr  Code            Source

 1363: 1  06F3	A8 26				mov	r0, arg0
 1364: 1  06F5	7B FF		do_csi_L2:	mov	r3, #-1
 1365: 1  06F7	C3				clr	c
 1366: 1  06F8	E5 32				mov	a, bottom
 1367: 1  06FA	95 38				subb	a, cursory
 1368: 1  06FC	FC				mov	r4, a
 1369: 1  06FD	12 09 36			call	scroll_r4
 1370: 1  0700	D8 F3				djnz	r0, do_csi_L2
 1371: 1  0702	02 0A 06			jmp	cursor_on
 1372: 1
 1373: 1  0705	B4 4D 2D	do_csi_MM:	cjne	a, #'M', do_csi_hh		;delete line
 1374: 1  0708	12 08 30			call	args_gr_zero
 1375: 1  070B	E5 38				mov	a, cursory			;check if within bounds
 1376: 1  070D	B5 31 00			cjne	a, top, $+3
 1377: 1  0710	40 B2				jc	do_csi_end1
 1378: 1  0712	B5 32 00			cjne	a, bottom, $+3
 1379: 1  0715	80 02				sjmp	do_csi_MM1
 1380: 1  0717	50 AB				jnc	do_csi_end1
 1381: 1  0719	12 0A 18	do_csi_MM1:	call	cursor_off
 1382: 1  071C	A8 26				mov	r0, arg0
 1383: 1  071E	C0 31				push	top
 1384: 1  0720	7B 01		do_csi_MM2:	mov	r3, #1
 1385: 1  0722	C3				clr	c
 1386: 1  0723	E5 32				mov	a, bottom
 1387: 1  0725	95 38				subb	a, cursory
 1388: 1  0727	FC				mov	r4, a
 1389: 1  0728	85 38 31			mov	top, cursory
 1390: 1  072B	12 09 36			call	scroll_r4
 1391: 1  072E	D8 F0				djnz	r0, do_csi_MM2
 1392: 1  0730	D0 31				pop	top
 1393: 1  0732	02 0A 06			jmp	cursor_on
 1394: 1
 1395: 1  0735	75 33 00	do_csi_hh:	mov	state, #ST_IDLE			;h set NEWLINE / INSERT
 1396: 1  0738	85 22 3C			mov	oldstatus, flags2
 1397: 1
 1398: 1  073B	B4 68 16			cjne	a, #'h', do_csi_ll		;set mode
 1399: 1  073E	78 26				mov	r0, #arg0
 1400: 1  0740	A9 25				mov	r1, nargs
 1401: 1  0742	B9 00 01			cjne	r1, #0, do_csi_hh1		;>= 1 arg
 1402: 1  0745	22				ret
 1403: 1  0746	B6 14 02	do_csi_hh1:	cjne	@r0, #LNM, do_csi_hh2
 1404: 1  0749	D2 12				setb	newlinemode			;set newlinemode
 1405: 1  074B	B6 04 02	do_csi_hh2:	cjne	@r0, #IRM, do_csi_hhx
 1406: 1  074E	D2 13				setb	insert				;set insert mode
 1407: 1  0750	08		do_csi_hhx:	inc	r0
 1408: 1  0751	D9 F3				djnz	r1, do_csi_hh1
 1409: 1  0753	22				ret
 1410: 1
 1411: 1  0754	B4 6C 16	do_csi_ll:	cjne	a, #'l', do_csi_P		;h reset NEWLINE / INSERT
 1412: 1  0757	78 26				mov	r0, #arg0
 1413: 1  0759	A9 25				mov	r1, nargs
 1414: 1  075B	B9 00 01			cjne	r1, #0, do_csi_ll1
 1415: 1  075E	22				ret
 1416: 1  075F	B6 14 02	do_csi_ll1:	cjne	@r0, #LNM, do_csi_ll2
 1417: 1  0762	C2 12				clr	newlinemode			;clear newlinemode
 1418: 1  0764	B6 04 02	do_csi_ll2:	cjne	@r0, #IRM, do_csi_llx

ASEM-51 V1.3                                        Copyright (c) 2002 by W.W. Heinz                                         PAGE 27



 Line  I  Addr  Code            Source

 1419: 1  0767	C2 13				clr	insert				;clear insert mode
 1420: 1  0769	08		do_csi_llx:	inc	r0
 1421: 1  076A	D9 F3				djnz	r1, do_csi_ll1
 1422: 1  076C	22				ret
 1423: 1
 1424: 1  076D	B4 50 2D	do_csi_P:	cjne	a, #'P', do_csi_end		;Delete Character (DCH)
 1425: 1  0770	12 08 30			call	args_gr_zero
 1426: 1  0773	A9 26				mov	r1, arg0
 1427: 1  0775	C3		do_csi_P2:	clr	c
 1428: 1  0776	74 4F				mov	a, #WIDTH-1
 1429: 1  0778	95 37				subb	a, cursorx
 1430: 1  077A	60 21				jz	do_csi_end			;nothing to do
 1431: 1  077C	23				rl	a
 1432: 1  077D	F8				mov	r0, a
 1433: 1  077E	12 0A 3B			call	comp_dptr			;compute dptr1
 1434: 1  0781	85 84 82			mov	dp0l, dp1l			;copy to dptr0
 1435: 1  0784	85 85 83			mov	dp0h, dp1h
 1436: 1  0787	A3				inc	dptr				;
 1437: 1  0788	A3				inc	dptr				;dptr0 = dptr1 + 2
 1438: 1
 1439: 1  0789	E0		do_csi_P1:	movx	a, @dptr
 1440: 1  078A	E5 90				mov	a, P1
 1441: 1  078C	A3				inc	dptr
 1442: 1  078D	05 A2				inc	auxr1
 1443: 1  078F	F0				movx	@dptr, a
 1444: 1  0790	A3				inc	dptr
 1445: 1  0791	05 A2				inc	auxr1
 1446: 1  0793	D8 F4				djnz	r0, do_csi_P1
 1447: 1  0795	05 A2				inc	auxr1
 1448: 1  0797	E4				clr	a
 1449: 1  0798	F0				movx	@dptr, a
 1450: 1  0799	05 A2				inc	auxr1
 1451: 1  079B	D9 D8				djnz	r1, do_csi_P2
 1452: 1  079D	22		do_csi_end:	ret
 1453: 1
 1454: 1			;		mov	a, r0
 1455: 1			;		call	phex
 1456: 1			;		mov	a, dp0h
 1457: 1			;		call	phex
 1458: 1			;		mov	a, dp0l
 1459: 1			;		call	phex
 1460: 1			;		call	space
 1461: 1			;		mov	a, dp1h
 1462: 1			;		call	phex
 1463: 1			;		mov	a, dp1l
 1464: 1			;		call	phex
 1465: 1			;		call	space
 1466: 1			;		call	space
 1467: 1
 1468: 1			;===============================================
 1469: 1			; state CSI_questionmark "ESC [ ?"
 1470: 1			;===============================================
 1471: 1  079E	12 08 9B	do_csi_q:	call	isparm				;is parameter?
 1472: 1  07A1	50 09				jnc	do_csi_q_h			;no
 1473: 1  07A3	85 33 23			mov	retstate, state
 1474: 1  07A6	75 33 0A			mov	state, #ST_CMD_ARG

ASEM-51 V1.3                                        Copyright (c) 2002 by W.W. Heinz                                         PAGE 28



 Line  I  Addr  Code            Source

 1475: 1  07A9	02 08 05			jmp	do_cmd_arg
 1476: 1
 1477: 1  07AC	75 33 00	do_csi_q_h:	mov	state, #ST_IDLE
 1478: 1  07AF	85 22 3C			mov	oldstatus, flags2
 1479: 1
 1480: 1  07B2	B4 68 18			cjne	a, #'h', do_csi_q_l		;set mode
 1481: 1  07B5	78 26				mov	r0, #arg0
 1482: 1  07B7	A9 25				mov	r1, nargs
 1483: 1  07B9	B9 00 01			cjne	r1, #0, do_csi_q_h1		;>= 1 arg
 1484: 1  07BC	22				ret
 1485: 1  07BD	B6 07 02	do_csi_q_h1:	cjne	@r0, #DECAWM, do_csi_q_h2	;set auto wrap
 1486: 1  07C0	D2 10				setb	wrap
 1487: 1  07C2	B6 06 04	do_csi_q_h2:	cjne	@r0, #DECOM, do_csi_q_hx	;set origin
 1488: 1  07C5	D2 11				setb	origin
 1489: 1  07C7	C1 4B				ajmp	do_csi_rc			;position cursor home
 1490: 1  07C9	08		do_csi_q_hx:	inc	r0
 1491: 1  07CA	D9 F1				djnz	r1, do_csi_q_h1
 1492: 1  07CC	22				ret
 1493: 1
 1494: 1  07CD	B4 6C 18	do_csi_q_l:	cjne	a, #'l', do_csi_q_end		;reset mode
 1495: 1  07D0	78 26				mov	r0, #arg0
 1496: 1  07D2	A9 25				mov	r1, nargs
 1497: 1  07D4	B9 00 02			cjne	r1, #0, do_csi_q_l1
 1498: 1  07D7	80 C4				sjmp	do_csi_end
 1499: 1  07D9	B6 07 02	do_csi_q_l1:	cjne	@r0, #DECAWM, do_csi_q_l2	;reset auto wrap
 1500: 1  07DC	C2 10				clr	wrap
 1501: 1  07DE	B6 06 04	do_csi_q_l2:	cjne	@r0, #DECOM, do_csi_q_lx	;reset origin
 1502: 1  07E1	C2 11				clr	origin
 1503: 1  07E3	C1 4B				ajmp	do_csi_rc			;position cursor home
 1504: 1  07E5	08		do_csi_q_lx:	inc	r0
 1505: 1  07E6	D9 F1				djnz	r1, do_csi_q_l1
 1506: 1  07E8	22		do_csi_q_end:	ret
 1507: 1
 1508: 1
 1509: 1			;===============================================
 1510: 1			; state ESC_questionmark "ESC ?"
 1511: 1			;===============================================
 1512: 1  07E9			do_esc_q:
 1513: 1  07E9	75 33 00			mov	state, #ST_IDLE
 1514: 1  07EC	22				ret
 1515: 1
 1516: 1			;===============================================
 1517: 1			; state ESC_hash "ESC #"
 1518: 1			;===============================================
 1519: 1  07ED	75 33 00	do_esc_hash:	mov	state, #ST_IDLE
 1520: 1
 1521: 1  07F0	B4 38 05			cjne	a, #'8', do_esc_hash_end
 1522: 1  07F3	7C 45				mov	r4, #'E'
 1523: 1  07F5	02 09 B9			jmp	fill_screen
 1524: 1
 1525: 1  07F8			do_esc_hash_end:
 1526: 1  07F8	22				ret
 1527: 1
 1528: 1
 1529: 1			;===============================================
 1530: 1			; state ESC right-bracket "ESC )"

ASEM-51 V1.3                                        Copyright (c) 2002 by W.W. Heinz                                         PAGE 29



 Line  I  Addr  Code            Source

 1531: 1			;===============================================
 1532: 1  07F9			do_esc_rbrack:
 1533: 1			;===============================================
 1534: 1			; state ESC left-bracket "ESC ("
 1535: 1			;===============================================
 1536: 1  07F9	75 33 00	do_esc_lbrack:	mov	state, #ST_IDLE
 1537: 1
 1538: 1  07FC	B4 30 03			cjne	a, #'0', do_esc_lb_1
 1539: 1  07FF	D2 00				setb	special
 1540: 1  0801	22				ret
 1541: 1  0802	C2 00		do_esc_lb_1:	clr	special
 1542: 1  0804	22				ret
 1543: 1
 1544: 1
 1545: 1			;===============================================
 1546: 1			; state command arg
 1547: 1			;===============================================
 1548: 1  0805			do_cmd_arg:
 1549: 1  0805	F9				mov	r1, a			;save a
 1550: 1  0806	74 26				mov	a, #arg0		;pointer to vars
 1551: 1  0808	25 25				add	a, nargs
 1552: 1  080A	F8				mov	r0, a
 1553: 1  080B	E9				mov	a, r1
 1554: 1  080C	12 08 A7			call	isdigit
 1555: 1  080F	50 0A				jnc	do_cmd_arg_1		;no digit
 1556: 1			;		inc	argcnt
 1557: 1  0811	E6				mov	a, @r0
 1558: 1  0812	75 F0 0A			mov	b, #10
 1559: 1  0815	A4				mul	ab
 1560: 1  0816	29				add	a, r1
 1561: 1  0817	94 30				subb	a, #'0'
 1562: 1  0819	F6				mov	@r0, a
 1563: 1  081A	22				ret
 1564: 1  081B	B4 3B 03	do_cmd_arg_1:	cjne	a, #';', do_cmd_arg_2
 1565: 1  081E	05 25				inc	nargs
 1566: 1			;		mov	a, argcnt
 1567: 1			;		jnz	do_cmd_arg_3
 1568: 1			;		mov	@r0, #1
 1569: 1			;do_cmd_arg_3:	mov	argcnt, #0
 1570: 1  0820	22				ret
 1571: 1  0821	B4 1B 04	do_cmd_arg_2:	cjne	a, #C_ESC, do_cmd_arg_3
 1572: 1  0824	75 33 02			mov	state, #ST_ESC
 1573: 1  0827	22				ret
 1574: 1  0828	05 25		do_cmd_arg_3:	inc	nargs
 1575: 1  082A	85 23 33			mov	state, retstate
 1576: 1  082D			do_cmd_arg_4:	;mov	retstate, #0
 1577: 1  082D	02 03 3E			jmp	ansiout
 1578: 1
 1579: 1
 1580: 1			;
 1581: 1			; set arg0-3 to one if zero
 1582: 1			;
 1583: 1  0830	C0 00		args_gr_zero:	push	ar0
 1584: 1  0832	C0 01				push	ar1
 1585: 1  0834	78 26				mov	r0, #arg0
 1586: 1  0836	79 04				mov	r1, #4

ASEM-51 V1.3                                        Copyright (c) 2002 by W.W. Heinz                                         PAGE 30



 Line  I  Addr  Code            Source

 1587: 1  0838	B6 00 01	args_gr_zero_2:	cjne	@r0, #0, args_gr_zero_1
 1588: 1  083B	06				inc	@r0
 1589: 1  083C	08		args_gr_zero_1:	inc	r0
 1590: 1  083D	D9 F9				djnz	r1, args_gr_zero_2
 1591: 1  083F	D0 01				pop	ar1
 1592: 1  0841	D0 00				pop	ar0
 1593: 1  0843	22				ret
 1594: 1
 1595: 1			; r0: x - offset
 1596: 1			; r1: y - offset
 1597: 1			; r2: 0: without scroll, 1: with scroll
 1598: 1			; r3: scroll occured
 1599: 1			; r4: 0 = within bounds, 1 = out of bounds
 1600: 1  0844			ansi_move:
 1601: 1					;call	cursor_off
 1602: 1
 1603: 1  0844	7B 00				mov	r3, #0			;no scroll
 1604: 1  0846	AC 31				mov	r4, top
 1605: 1  0848	AD 32				mov	r5, bottom
 1606: 1
 1607: 1			;
 1608: 1			; check new x-posiion
 1609: 1			;
 1610: 1  084A	E8				mov	a, r0
 1611: 1  084B	25 37				add	a, cursorx		;< 0?
 1612: 1  084D	30 E7 01			jnb	acc.7, ansi_move_x1	;no, check width
 1613: 1  0850	E4				clr	a
 1614: 1  0851	B4 50 00	ansi_move_x1:	cjne	a, #WIDTH, $+3		;>= WIDTH ?
 1615: 1  0854	40 02				jc	ansi_move_x3		;< WIDTH
 1616: 1  0856	74 4F				mov	a, #WIDTH-1		;=WIDTH, set to WIDTH-1
 1617: 1  0858	F5 37		ansi_move_x3:	mov	cursorx, a
 1618: 1
 1619: 1			;
 1620: 1			; check if within margins
 1621: 1			;
 1622: 1  085A	20 11 13			jb	origin, ansi_move_y	;if origin, no out-of-margins
 1623: 1  085D	E5 38				mov	a, cursory		;check margins
 1624: 1  085F	B5 31 00			cjne	a, top, $+3
 1625: 1  0862	40 07				jc	ansi_move_m1		;< top!
 1626: 1  0864	B5 32 02			cjne	a, bottom, $+5
 1627: 1  0867	80 07				sjmp	ansi_move_y		;= bottom
 1628: 1  0869	40 05				jc	ansi_move_y		;< bottom
 1629: 1  086B	E4		ansi_move_m1:	clr	a
 1630: 1  086C	FA				mov	r2, a			;no scroll
 1631: 1  086D	FC				mov	r4, a
 1632: 1  086E	7D 17				mov	r5, #HEIGHT-1
 1633: 1
 1634: 1			;
 1635: 1			; check y-position
 1636: 1			;
 1637: 1  0870	E9		ansi_move_y:	mov	a, r1
 1638: 1  0871	25 38				add	a, cursory		;
 1639: 1  0873	20 E7 05			jb	acc.7, ansi_move_y2	;< 0
 1640: 1  0876	B5 04 00			cjne	a, ar4, $+3		;
 1641: 1  0879	50 04				jnc	ansi_move_y1		;>= top
 1642: 1  087B	C3		ansi_move_y2:	clr	c

ASEM-51 V1.3                                        Copyright (c) 2002 by W.W. Heinz                                         PAGE 31



 Line  I  Addr  Code            Source

 1643: 1  087C	9C				subb	a, r4
 1644: 1  087D	FB				mov	r3, a
 1645: 1  087E	EC				mov	a, r4			;< top, set to top
 1646: 1
 1647: 1  087F	B5 05 02	ansi_move_y1:	cjne	a, ar5, $+5		;= bottom ?
 1648: 1  0882	80 05				sjmp	ansi_move_y3		;yes
 1649: 1  0884	40 03				jc	ansi_move_y3		;< bottom?
 1650: 1  0886	9D				subb	a, r5			;no, >bottom
 1651: 1  0887	FB				mov	r3, a
 1652: 1  0888	ED				mov	a, r5			;set to bottom
 1653: 1  0889	F5 38		ansi_move_y3:	mov	cursory, a
 1654: 1  088B	12 0A 18			call	cursor_off
 1655: 1
 1656: 1  088E	EA				mov	a, r2			;is scrolling enabled ?
 1657: 1  088F	60 06				jz	ansi_move_ex		;no, exit
 1658: 1  0891	EB				mov	a, r3			;did scrolling occur?
 1659: 1  0892	60 03				jz	ansi_move_ex		;no, exit
 1660: 1
 1661: 1  0894	12 09 30			call	scroll
 1662: 1
 1663: 1  0897	12 09 F8	ansi_move_ex:	call	draw_cursor
 1664: 1  089A	22				ret
 1665: 1
 1666: 1			;ansi_line_left:
 1667: 1					;call	phex
 1668: 1			;		ret
 1669: 1
 1670: 1  089B	12 08 A7	isparm:		call	isdigit
 1671: 1  089E	40 04				jc	isparmex
 1672: 1  08A0	B4 3B 02			cjne	a, #';', isparm1
 1673: 1  08A3	D3				setb	c
 1674: 1  08A4	22		isparmex:	ret
 1675: 1  08A5	C3		isparm1:	clr	c
 1676: 1  08A6	22				ret
 1677: 1			;
 1678: 1			; is acc beteen '0' and '9'?
 1679: 1			; if so, return carry clear, set otherwise
 1680: 1			;
 1681: 1  08A7	B4 30 00	isdigit:	cjne	a, #'0', isdigit1
 1682: 1  08AA	50 02		isdigit1:	jnc	isdigit2		;>= '0'
 1683: 1  08AC	B3				cpl	c
 1684: 1  08AD	22				ret				;carry set
 1685: 1  08AE	B4 3A 00	isdigit2:	cjne	a, #'9'+1, isdigit3
 1686: 1  08B1	22		isdigit3:	ret				;= '9' carry clear
 1687: 1
 1688: 1
 1689: 1
 1690: 1			;===============================================
 1691: 1			; reset terminal
 1692: 1			;===============================================
 1693: 1  08B2	C2 AF		term_reset:	clr	ea
 1694: 1  08B4	12 08 DB			call	clear_vars
 1695: 1  08B7	75 3D 70			mov	defcol, #DEFAULTCOLOR
 1696: 1  08BA	85 3D 2D			mov	color, defcol
 1697: 1  08BD	75 32 17			mov	bottom, #HEIGHT-1
 1698: 1  08C0	75 34 40			mov	serstart, #serbuf

ASEM-51 V1.3                                        Copyright (c) 2002 by W.W. Heinz                                         PAGE 32



 Line  I  Addr  Code            Source

 1699: 1  08C3	75 35 40			mov	serend, #serbuf
 1700: 1  08C6	75 39 0A			mov	t0cnt, #C_TIME
 1701: 1
 1702: 1  08C9	12 03 32			call	setbaud
 1703: 1  08CC	12 08 E5			call	resettabu
 1704: 1  08CF	12 09 B7			call	clear_screen
 1705: 1  08D2	D2 AF				setb	ea
 1706: 1
 1707: 1  08D4	12 0D 44			call	prtstatus
 1708: 1  08D7	12 09 F8			call	draw_cursor
 1709: 1  08DA	22				ret
 1710: 1
 1711: 1			;
 1712: 1			; clear 32 vars from "state" on
 1713: 1			;
 1714: 1  08DB	78 20		clear_vars:	mov	r0, #VARS	;clear term-vars
 1715: 1  08DD	79 40				mov	r1, #64
 1716: 1  08DF	76 00		clear_v1:	mov	@r0, #0
 1717: 1  08E1	08				inc	r0
 1718: 1  08E2	D9 FB				djnz	r1, clear_v1
 1719: 1  08E4	22				ret
 1720: 1
 1721: 1
 1722: 1  08E5	78 50		resettabu:	mov	r0, #tabutab
 1723: 1  08E7	79 0A				mov	r1, #10
 1724: 1  08E9	76 80		resettabu1:	mov	@r0, #128
 1725: 1  08EB	08				inc	r0
 1726: 1  08EC	D9 FB				djnz	r1, resettabu1
 1727: 1  08EE	89 50				mov	tabutab, r1	;R1 = 0
 1728: 1  08F0	05 59				inc	tabutab+9	;128 + 1 = 129
 1729: 1  08F2	22				ret
 1730: 1
 1731: 1
 1732: 1  08F3	78 50		cleartabu:	mov	r0, #tabutab
 1733: 1  08F5	79 0A				mov	r1, #10
 1734: 1  08F7	76 00		cleartabu1:	mov	@r0, #0
 1735: 1  08F9	08				inc	r0
 1736: 1  08FA	D9 FB				djnz	r1, cleartabu1
 1737: 1  08FC	05 59				inc	tabutab+9	;tabutab+9 = 1
 1738: 1  08FE	22				ret
 1739: 1
 1740: 1			;
 1741: 1			; compute
 1742: 1			; r0 = cursorx / 8 (byte holding tab-info) + tabutab
 1743: 1			; r1 = cursorx AND 7 (bi tposition within byte)
 1744: 1			;
 1745: 1  08FF	E5 37		tab_set_r0_r1:	mov	a, cursorx
 1746: 1  0901	03				rr	a
 1747: 1  0902	03				rr	a
 1748: 1  0903	03				rr	a
 1749: 1  0904	54 0F				anl	a, #0fh
 1750: 1  0906	24 50				add	a, #tabutab
 1751: 1  0908	F8				mov	r0, a				;address byte
 1752: 1  0909	E5 37				mov	a, cursorx
 1753: 1  090B	54 07				anl	a, #7
 1754: 1  090D	F9				mov	r1, a

ASEM-51 V1.3                                        Copyright (c) 2002 by W.W. Heinz                                         PAGE 33



 Line  I  Addr  Code            Source

 1755: 1  090E	22				ret
 1756: 1
 1757: 1
 1758: 1  090F	E9		getbit:		mov	a, r1
 1759: 1  0910	04				inc	a
 1760: 1  0911	83				movc	a, @a+pc
 1761: 1  0912	22				ret
 1762: 1  0913	80 40 20 10	getbittab:	db	128, 64, 32, 16, 8, 4, 2, 1
       1  0917	08 04 02 01
 1763: 1
 1764: 1
 1765: 1  091B	78 25		clearargs:	mov	r0, #nargs
 1766: 1  091D	79 05				mov	r1, #5
 1767: 1  091F	76 00		clearargs1:	mov	@r0, #0
 1768: 1  0921	08				inc	r0
 1769: 1  0922	D9 FB				djnz	r1, clearargs1
 1770: 1  0924	22				ret
 1771: 1
 1772: 1
 1773: 1  0925	E4		print:		clr	a
 1774: 1  0926	93				movc	a, @a+dptr
 1775: 1  0927	70 01				jnz	print1
 1776: 1  0929	22				ret
 1777: 1  092A	12 03 3E	print1:		call	ansiout
 1778: 1  092D	A3				inc	dptr
 1779: 1  092E	80 F5				sjmp	print
 1780: 1
 1781: 1			;msg1:		db	C_ESC, "[J", C_ESC, "[5;5H", 0
 1782: 1			;msg4:		db	C_ESC,"[5;65H", C_ESC,"[31mH", C_ESC,"[32mello ", C_ESC, "[mWorld", C_ESC, "
       1			[AJ", C_ESC, "[23;65Ha", C_ESC, "[H"
 1783: 1			;msg2:		db	"Hello world!", C_NEWLINE,0
 1784: 1			;msg3:		db	C_ESC, "[5C", C_ESC, "[7D", 0
 1785: 1
 1786: 1			;===============================================
 1787: 1			; pyhsical routines
 1788: 1			;===============================================
 1789: 1
 1790: 1			;===============================================
 1791: 1			; scrolls one line up or down
 1792: 1			; clear first or last line
 1793: 1			; r3 positive (0-127) scroll-up, scroll-down otherwise
 1794: 1			; r4 numbers of lines to scroll
 1795: 1			; ----------------------------------------------
 1796: 1			; r5 used for x-count
 1797: 1			;===============================================
 1798: 1  0930	C3		scroll:		clr	c
 1799: 1  0931	E5 32				mov	a, bottom
 1800: 1  0933	95 31				subb	a, top
 1801: 1  0935	FC				mov	r4, a			;number of lines to scroll
 1802: 1  0936			scroll_r4:
 1803: 1  0936	BB 80 00			cjne	r3, #128, $+3
 1804: 1  0939	40 47				jc	scroll_up		;<128, positive, scroll up
 1805: 1
 1806: 1  093B	E5 32				mov	a, bottom
 1807: 1  093D	14				dec	a
 1808: 1  093E	75 F0 A0			mov	b, #WIDTH*2

ASEM-51 V1.3                                        Copyright (c) 2002 by W.W. Heinz                                         PAGE 34



 Line  I  Addr  Code            Source

 1809: 1  0941	A4				mul	ab
 1810: 1  0942	24 9F				add	a, #(WIDTH*2)-1
 1811: 1  0944	F5 82				mov	dp0l, a
 1812: 1  0946	E5 F0				mov	a, b
 1813: 1  0948	34 80				addc 	a, #80h
 1814: 1  094A	F5 83				mov	dp0h, a
 1815: 1
 1816: 1  094C	E5 82				mov	a, dp0l
 1817: 1  094E	24 A0				add	a, #WIDTH*2
 1818: 1  0950	F5 84				mov	dp1l, a
 1819: 1  0952	E5 83				mov	a, dp0h
 1820: 1  0954	34 00				addc	a, #0
 1821: 1  0956	F5 85				mov	dp1h, a
 1822: 1
 1823: 1			;		call	phex16
 1824: 1			;		mov	a, dp1h
 1825: 1			;		call	phex
 1826: 1			;		mov	a, dp1l
 1827: 1			;		call	phex
 1828: 1			;		jmp	cursor_on
 1829: 1
 1830: 1  0958	EC				mov	a, r4
 1831: 1  0959	60 1F				jz	scroll_down_6
 1832: 1  095B			scroll_down_4:
 1833: 1  095B	7D A0				mov	r5, #WIDTH*2
 1834: 1  095D			scroll_down_1:
 1835: 1  095D	E0				movx	a, @dptr
 1836: 1  095E	E5 90				mov	a, P1
 1837: 1  0960	05 A2				inc	auxr1
 1838: 1  0962	F0				movx	@dptr, a
 1839: 1  0963	05 A2				inc	auxr1
 1840: 1
 1841: 1  0965	E5 82				mov	a, dp0l
 1842: 1  0967	70 02				jnz	scroll_down_2
 1843: 1  0969	15 83				dec	dp0h
 1844: 1  096B	15 82		scroll_down_2:	dec	dp0l
 1845: 1
 1846: 1  096D	E5 84				mov	a, dp1l
 1847: 1  096F	70 02				jnz	scroll_down_3
 1848: 1  0971	15 85				dec	dp1h
 1849: 1  0973	15 84		scroll_down_3:	dec	dp1l
 1850: 1
 1851: 1  0975	DD E6				djnz	r5, scroll_down_1
 1852: 1  0977	DC E2				djnz	r4, scroll_down_4
 1853: 1
 1854: 1  0979	A3				inc	dptr
 1855: 1
 1856: 1					;call	phex16
 1857: 1  097A			scroll_down_6:
 1858: 1  097A	7D A0				mov	r5, #WIDTH*2
 1859: 1  097C	E4				clr	a
 1860: 1  097D	F0		scroll_down_5:	movx	@dptr, a
 1861: 1  097E	A3				inc	dptr
 1862: 1  097F	DD FC				djnz	r5, scroll_down_5
 1863: 1
 1864: 1					;ajmp	cursor_on		;reactivate cursor

ASEM-51 V1.3                                        Copyright (c) 2002 by W.W. Heinz                                         PAGE 35



 Line  I  Addr  Code            Source

 1865: 1  0981	22				ret
 1866: 1
 1867: 1  0982			scroll_up:
 1868: 1  0982	E5 31				mov	a, top			;dp0 = topline
 1869: 1  0984	75 F0 A0			mov	b, #WIDTH * 2		;dp1 = topline + 1
 1870: 1  0987	A4				mul	ab
 1871: 1  0988	F5 82				mov	dp0l, a
 1872: 1  098A	E5 F0				mov	a, b
 1873: 1  098C	34 80				addc	a, #80h
 1874: 1  098E	F5 83				mov	dp0h, a
 1875: 1
 1876: 1  0990	E5 82				mov	a, dp0l
 1877: 1  0992	24 A0				add	a, #WIDTH * 2
 1878: 1  0994	F5 84				mov	dp1l, a
 1879: 1  0996	E5 83				mov	a, dp0h
 1880: 1  0998	34 00				addc	a, #0
 1881: 1  099A	F5 85				mov	dp1h, a
 1882: 1
 1883: 1  099C	EC				mov	a, r4
 1884: 1  099D	60 10				jz	scroll_up_4
 1885: 1
 1886: 1  099F			scroll_up_1:
 1887: 1  099F	7D A0				mov	r5, #WIDTH * 2
 1888: 1
 1889: 1  09A1	05 A2		scroll_up_2:	inc	auxr1			;copy from line n+1 to line n
 1890: 1  09A3	E0				movx	a, @dptr
 1891: 1  09A4	A3				inc	dptr
 1892: 1  09A5	E5 90				mov	a, P1
 1893: 1  09A7	05 A2				inc	auxr1
 1894: 1  09A9	F0				movx	@dptr, a
 1895: 1  09AA	A3				inc	dptr
 1896: 1  09AB	DD F4				djnz	r5, scroll_up_2
 1897: 1  09AD	DC F0				djnz	r4, scroll_up_1
 1898: 1
 1899: 1  09AF			scroll_up_4:
 1900: 1  09AF	7D A0				mov	r5, #WIDTH * 2		;clear last line
 1901: 1  09B1	E4				clr	a
 1902: 1  09B2	F0		scroll_up_3:	movx	@dptr, a
 1903: 1  09B3	A3				inc	dptr
 1904: 1  09B4	DD FC				djnz	r5, scroll_up_3
 1905: 1
 1906: 1  09B6	22				ret
 1907: 1					;ajmp	cursor_on		;restore cursor
 1908: 1
 1909: 1
 1910: 1			;
 1911: 1			; r0: top line
 1912: 1			; r1: bottom line
 1913: 1			; r2: start position first line
 1914: 1			; r3: chars to fill first line
 1915: 1			; r4: value filled with
 1916: 1			; r5; chars to fill last line
 1917: 1			;
 1918: 1  09B7	7C 00		clear_screen:	mov	r4, #0
 1919: 1  09B9	E4		fill_screen:	clr	a
 1920: 1  09BA	F8				mov	r0, a

ASEM-51 V1.3                                        Copyright (c) 2002 by W.W. Heinz                                         PAGE 36



 Line  I  Addr  Code            Source

 1921: 1  09BB	79 17				mov	r1, #HEIGHT-1
 1922: 1  09BD	FA				mov	r2, a
 1923: 1  09BE	7B 50				mov	r3, #WIDTH
 1924: 1  09C0	7D 50				mov	r5, #WIDTH
 1925: 1  09C2	80 02				sjmp	fill_lines
 1926: 1
 1927: 1  09C4			clear_lines:
 1928: 1  09C4	7C 00				mov	r4, #0				;fill with zero
 1929: 1  09C6			fill_lines:
 1930: 1  09C6	EA				mov	a, r2				;r2 = r2 * 2
 1931: 1  09C7	23				rl	a
 1932: 1  09C8	FA				mov	r2, a
 1933: 1
 1934: 1  09C9	E9				mov	a, r1				;r1 = r1 - r0 + 1
 1935: 1  09CA	C3				clr	c
 1936: 1  09CB	98				subb	a, r0
 1937: 1  09CC	04				inc	a
 1938: 1  09CD	F9				mov	r1, a				;line count in r1
 1939: 1
 1940: 1  09CE	E8				mov	a, r0				;compute start-position from r0 und r2
 1941: 1  09CF	75 F0 A0			mov	b, #WIDTH * 2
 1942: 1  09D2	A4				mul	ab
 1943: 1  09D3	2A				add	a, r2
 1944: 1  09D4	F5 84				mov	dp1l, a
 1945: 1  09D6	E5 F0				mov	a, b
 1946: 1  09D8	34 80				addc	a, #80h
 1947: 1  09DA	F5 85				mov	dp1h, a
 1948: 1
 1949: 1  09DC	05 A2				inc	auxr1				;switch to dptr1
 1950: 1  09DE	A8 03				mov	r0, ar3				;chars to fill first line
 1951: 1
 1952: 1  09E0	B9 01 02	clear_lines2:	cjne 	r1, #1, clear_lines1		;last line?
 1953: 1  09E3	A8 05				mov	r0, ar5				;chars to fill last line
 1954: 1  09E5	EC		clear_lines1:	mov	a, r4
 1955: 1  09E6	F0				movx	@dptr, a
 1956: 1  09E7	A3				inc	dptr
 1957: 1  09E8	74 70				mov	a, #70h
 1958: 1  09EA	F0				movx	@dptr, a
 1959: 1  09EB	A3				inc	dptr
 1960: 1  09EC	D8 F7				djnz	r0, clear_lines1
 1961: 1  09EE	78 50				mov	r0, #WIDTH
 1962: 1  09F0	D9 EE				djnz	r1, clear_lines2
 1963: 1  09F2	05 A2				inc	auxr1
 1964: 1  09F4	22				ret
 1965: 1
 1966: 1
 1967: 1			;===============================================
 1968: 1			; move cursor
 1969: 1			;===============================================
 1970: 1  09F5	12 0A 18	move_cursor:	call	cursor_off			;restore color under cursor
 1971: 1  09F8	12 0A 3B	draw_cursor:	call	comp_dptr			;compute new address
 1972: 1  09FB	05 A2				inc	auxr1				;increase by 1 for color
 1973: 1  09FD	A3				inc	dptr
 1974: 1  09FE	05 A2				inc	auxr1
 1975: 1  0A00	85 84 2E			mov	cursorpos, dp1l			;store in cursorpos/+1
 1976: 1  0A03	85 85 2F			mov	cursorpos+1, dp1h

ASEM-51 V1.3                                        Copyright (c) 2002 by W.W. Heinz                                         PAGE 37



 Line  I  Addr  Code            Source

 1977: 1
 1978: 1			;		ajmp	cursor_on			;save color under cursor
 1979: 1			;
 1980: 1			; save color under new cursor position in cursorsave
 1981: 1			; enable interrupt
 1982: 1			;
 1983: 1  0A06			cursor_on:	;mov	a, cursorpos+1
 1984: 1					;call	phex
 1985: 1					;mov	a, cursorpos
 1986: 1					;call	phex
 1987: 1
 1988: 1  0A06	85 2E 84			mov	dp1l, cursorpos
 1989: 1  0A09	85 2F 85			mov	dp1h, cursorpos+1
 1990: 1  0A0C	05 A2				inc	auxr1
 1991: 1  0A0E	E0				movx	a, @dptr
 1992: 1  0A0F	E5 90				mov	a, P1
 1993: 1  0A11	F5 30				mov	cursorsave, a
 1994: 1  0A13	05 A2				inc	auxr1
 1995: 1  0A15	D2 8C				setb	tr0				;enable timer
 1996: 1  0A17	22				ret
 1997: 1
 1998: 1			;
 1999: 1			; clear timer0 interrupt
 2000: 1			; restore color under cursor
 2001: 1			; reset t0cnt
 2002: 1			;
 2003: 1  0A18	C2 8C		cursor_off:	clr	tr0				;stop timer
 2004: 1
 2005: 1			;		mov	a, cursorpos+1
 2006: 1			;		call	phex
 2007: 1			;		mov	a, cursorpos
 2008: 1			;		call	phex
 2009: 1
 2010: 1  0A1A	85 2E 84			mov	dp1l, cursorpos
 2011: 1  0A1D	85 2F 85			mov	dp1h, cursorpos+1
 2012: 1  0A20	05 A2				inc	auxr1
 2013: 1  0A22	E5 30				mov	a, cursorsave
 2014: 1  0A24	F0				movx	@dptr, a
 2015: 1  0A25	05 A2				inc	auxr1
 2016: 1  0A27	75 8C 80			mov	TH0, #128
 2017: 1  0A2A	75 39 01			mov	t0cnt, #1
 2018: 1  0A2D	22				ret
 2019: 1
 2020: 1			;
 2021: 1			; converts accu	into two digits in R0, R1 (high, low)
 2022: 1			;
 2023: 1  0A2E	75 F0 0A	hex2dez:	mov	b, #10
 2024: 1  0A31	84				div	ab
 2025: 1  0A32	24 30				add	a, #'0'
 2026: 1  0A34	F8				mov	r0, a
 2027: 1  0A35	E5 F0				mov	a, b
 2028: 1  0A37	24 30				add	a, #'0'
 2029: 1  0A39	F9				mov	r1, a
 2030: 1  0A3A	22				ret
 2031: 1
 2032: 1			;

ASEM-51 V1.3                                        Copyright (c) 2002 by W.W. Heinz                                         PAGE 38



 Line  I  Addr  Code            Source

 2033: 1			; compute dp1 cursor screen address
 2034: 1			; dp1l/h = cursorx * 2 + cursory * WIDTH * 2 + 0x8000
 2035: 1			;
 2036: 1  0A3B			comp_dptr:
 2037: 1  0A3B	E5 37				mov	a, cursorx
 2038: 1  0A3D	23				rl	a
 2039: 1  0A3E	FF				mov	r7, a
 2040: 1
 2041: 1  0A3F	E5 38				mov	a, cursory
 2042: 1  0A41	75 F0 A0			mov	b, #WIDTH * 2
 2043: 1  0A44	A4				mul	ab
 2044: 1
 2045: 1  0A45	2F				add	a, r7
 2046: 1  0A46	F5 84				mov	dp1l, a
 2047: 1  0A48	E5 F0				mov	a, b
 2048: 1  0A4A	34 80				addc	a, #80h
 2049: 1  0A4C	F5 85				mov	dp1h, a
 2050: 1  0A4E	22				ret
 2051: 1
 2052: 1					$INCLUDE (io.a51)
 2053: 2			;
 2054: 2			;
 2055: 2			;
 2056: 2  0A4F			init6845:
 2057: 2  0A4F	90 00 00			mov	dptr, #0		;enable ADR + DAT
 2058: 2  0A52	E0				movx	a, @dptr
 2059: 2
 2060: 2  0A53	90 80 00			mov	DPTR, #08000h
 2061: 2  0A56	05 A2				inc	AUXR1
 2062: 2  0A58	90 0A 7A			mov	DPTR, #SYDATA
 2063: 2  0A5B	05 A2				inc	AUXR1
 2064: 2  0A5D	78 00				mov	R0, #0
 2065: 2
 2066: 2  0A5F			setregs:
 2067: 2			;		call	PHEX
 2068: 2			;		call	SPACE
 2069: 2
 2070: 2  0A5F	E8				mov	A, R0			;send address
 2071: 2			;		call	PHEX
 2072: 2  0A60	F0				movx	@DPTR,A			;address register
 2073: 2  0A61	D2 B5				setb	T1			;clock high
 2074: 2  0A63	C2 B5				clr	T1			;clock low
 2075: 2  0A65	A3				inc	DPTR			;data reg
 2076: 2
 2077: 2  0A66	05 A2				inc	AUXR1			;data pointer
 2078: 2  0A68	93				movc	A, @A+DPTR
 2079: 2			;		call	PHEX
 2080: 2  0A69	05 A2				inc	AUXR1			;address pointer
 2081: 2  0A6B	F0				movx	@DPTR, A		;send data
 2082: 2  0A6C	D2 B5				setb	T1			;clock high
 2083: 2  0A6E	C2 B5				clr	T1			;clock low
 2084: 2
 2085: 2			;		call	SPACE
 2086: 2  0A70	A3				inc	DPTR
 2087: 2  0A71	08				inc	R0
 2088: 2  0A72	B8 0F EA			cjne	R0, #15, setregs

ASEM-51 V1.3                                        Copyright (c) 2002 by W.W. Heinz                                         PAGE 39



 Line  I  Addr  Code            Source

 2089: 2
 2090: 2  0A75	90 00 00			mov	dptr, #0		;enable ADR + DAT
 2091: 2  0A78	E0				movx	a, @dptr
 2092: 2
 2093: 2			;		call	newline
 2094: 2			;		call	CIN
 2095: 2			;
 2096: 2			;		setb	INT0
 2097: 2			;		call	CIN
 2098: 2  0A79	22				ret
 2099: 2
 2100: 2			;
 2101: 2			; 25,333 Mhz / 8 = 3,166 Mhz
 2102: 2			;
 2103: 2			; 31468 HZ = 31,77 uS
 2104: 2			;
 2105: 2			; 25,333 Mhz / 8 / 31468 ~ 	100 chars Horizontal Total
 2106: 2			;				  2 chars Fornt Porch
 2107: 2			;				  6 chars Back Porch
 2108: 2			;				 80 chars Horizontal Visible
 2109: 2			;				 12 chars Sync Pulse
 2110: 2			;Scanline part	Pixels	Time [s]
 2111: 2			;Visible area	640	25.422045680238
 2112: 2			;Front porch	16	0.63555114200596
 2113: 2			;Sync pulse	96	3.8133068520357
 2114: 2			;Back porch	48	1.9066534260179
 2115: 2			;Whole line	800	31.777557100298
 2116: 2
 2117: 2			;Frame part	Lines	Time [ms]
 2118: 2			;Visible area	400	12.711022840119
 2119: 2			;Front porch	12	0.38133068520357
 2120: 2			;Sync pulse	2	0.063555114200596
 2121: 2			;Back porch	35	1.1122144985104
 2122: 2			;Whole frame	449	14.268123138034
 2123: 2			;
 2124: 2  0A7A	64		SYDATA:		DB	100		;R0 Horizontal Total - 1
 2125: 2  0A7B	50				DB	80		;R1 Horizontal Displayed
 2126: 2  0A7C	54				DB	84		;R2 Horizontal Sync Position
 2127: 2  0A7D	0C				DB	0ch		;R3 VSYNC & HSYNC width
 2128: 2  0A7E	1C				DB	28		;R4 Vertical total - 1			;27	32
 2129: 2  0A7F	05				DB	5		;R5 Vertical Adjust
 2130: 2  0A80	19				DB	25		;R6 Vertical Displayed			;25	30
 2131: 2  0A81	1B				DB	27		;R7 Vertical Sync Position		;25	32
 2132: 2  0A82	00				DB	00h		;R8 Mode Control
 2133: 2  0A83	0F				DB	15		;R9 Scan Lines - 1 (character lines)
 2134: 2  0A84	00				DB	0		;R10 Cursor Start
 2135: 2  0A85	00				DB	0		;R11 Cursor End
 2136: 2  0A86	00				DB	000h		;R12 Display Start High
 2137: 2  0A87	00				DB	000h		;R13 Display Start Low
 2138: 2  0A88	00				DB	0		;R14 Cursor Pos High
 2139: 2  0A89	00				DB	0		;R15 Cursor Pos Low
 2140: 2  0A8A	00				DB	0		;R16 Light Pen High
 2141: 2  0A8B	00				DB	0		;R17 Light Pen Low
 2142: 2  0A8C	00				DB	0		;R18 Update Address Reg High
 2143: 2  0A8D	00				DB	0		;R19 Update Address Reg Low
 2144: 2								;R31 Dummy Register

ASEM-51 V1.3                                        Copyright (c) 2002 by W.W. Heinz                                         PAGE 40



 Line  I  Addr  Code            Source

 2145: 2			;
 2146: 2			;
 2147: 2			;
 2148: 2  0A8E			copyFont:
 2149: 2  0A8E	90 10 00			mov	DPTR, #vt100_font
 2150: 2  0A91	05 A2				inc	AUXR1
 2151: 2  0A93	90 A0 00			mov	DPTR, #(8000h+2000h) ;+4000h+1000h
 2152: 2  0A96	05 A2				inc	AUXR1
 2153: 2
 2154: 2  0A98	E4		copyFont1:	clr	A
 2155: 2  0A99	93				movc	A, @A+DPTR
 2156: 2  0A9A	A3				inc	DPTR
 2157: 2  0A9B	05 A2				inc	AUXR1
 2158: 2  0A9D	F0				movx	@DPTR, A
 2159: 2  0A9E	A3				inc	DPTR
 2160: 2  0A9F	05 A2				inc	AUXR1
 2161: 2
 2162: 2  0AA1	E5 83				mov	A, DP0H
 2163: 2					;call	PHEX
 2164: 2  0AA3	B4 80 F2			cjne	A, #80h, copyFont1
 2165: 2
 2166: 2			;		mov	A, AUXR1
 2167: 2			;		call	PHEX
 2168: 2			;		call	newline
 2169: 2  0AA6	22				ret
 2170: 2
 2171: 2			;
 2172: 2			;
 2173: 2			;
 2174: 2  0AA7	90 80 00	testScreen:	mov	DPTR, #8000h
 2175: 2  0AAA	78 15				mov	R0, #21
 2176: 2
 2177: 2  0AAC	79 50		testScreen3:	mov	R1, #80
 2178: 2  0AAE	7A 01				mov	R2, #1
 2179: 2  0AB0	EA		testScreen1:	mov	A, R2
 2180: 2  0AB1	F0				movx	@DPTR, A
 2181: 2  0AB2	A3				inc	DPTR
 2182: 2  0AB3	74 70				mov	A, #70h
 2183: 2					;anl	A, #3
 2184: 2					;orl	A, #0f0h
 2185: 2					;inc	A
 2186: 2  0AB5	F0				movx	@DPTR, A
 2187: 2  0AB6	A3				inc	DPTR
 2188: 2  0AB7	0A				inc	R2
 2189: 2  0AB8	BA 3A 02			cjne	R2, #'9'+1, testScreen2
 2190: 2  0ABB	7A 30				mov	R2, #'0'
 2191: 2  0ABD	D9 F1		testScreen2:	djnz	R1, testScreen1
 2192: 2  0ABF	D8 EB				djnz	R0, testScreen3
 2193: 2
 2194: 2  0AC1	E8		testScreen4:	mov	a, r0
 2195: 2  0AC2	F0				movx	@dptr, a
 2196: 2  0AC3	A3				inc	dptr
 2197: 2  0AC4	74 60				mov	a, #60h
 2198: 2  0AC6	F0				movx	@dptr, a
 2199: 2  0AC7	A3				inc	dptr
 2200: 2  0AC8	08				inc	r0

ASEM-51 V1.3                                        Copyright (c) 2002 by W.W. Heinz                                         PAGE 41



 Line  I  Addr  Code            Source

 2201: 2  0AC9	B8 00 F5			cjne	r0, #0, testScreen4
 2202: 2  0ACC	22				ret
 2203: 2			;
 2204: 2			;
 2205: 2			;
 2206: 2  0ACD	C0 E0		space:		push	acc
 2207: 2  0ACF	74 20				mov	a, #' '
 2208: 2  0AD1	12 0A E1			call	cout
 2209: 2  0AD4	D0 E0				pop	acc
 2210: 2  0AD6	22				ret
 2211: 2
 2212: 2  0AD7	C0 E0		newline:	push	acc
 2213: 2  0AD9	74 0A				mov	a, #0ah
 2214: 2  0ADB	12 0A E1			call	cout
 2215: 2  0ADE	D0 E0				pop	acc
 2216: 2  0AE0	22				ret
 2217: 2
 2218: 2
 2219: 2  0AE1	20 05 FD	cout:		jb	serbusy, cout
 2220: 2  0AE4	D2 05				setb	serbusy
 2221: 2  0AE6	F5 99				mov	sbuf, a
 2222: 2  0AE8	22				ret
 2223: 2
 2224: 2
 2225: 2  0AE9	30 99 FD	cout_x:		jnb	ti, cout_x
 2226: 2  0AEC	C2 99				clr	ti			;clr ti before the mov to sbuf!
 2227: 2  0AEE	F5 99				mov	sbuf, a
 2228: 2  0AF0	22				ret
 2229: 2
 2230: 2  0AF1	C0 00		cin:		push	ar0
 2231: 2  0AF3	E5 34		cin_2:		mov	a, serstart
 2232: 2  0AF5	B5 35 02			cjne	a, serend, cin_1
 2233: 2  0AF8	80 F9				sjmp	cin_2
 2234: 2  0AFA	C2 AC		cin_1:		clr	ES			;no serial interrupt
 2235: 2  0AFC	04				inc	a
 2236: 2  0AFD	F8				mov	r0, a
 2237: 2  0AFE	B8 50 00			cjne	r0, #serbuf+16, $+3
 2238: 2  0B01	40 02				jc	cin_3
 2239: 2  0B03	78 40				mov	r0, #serbuf
 2240: 2  0B05	E6		cin_3:		mov	a, @r0
 2241: 2  0B06	88 34				mov	serstart, r0
 2242: 2  0B08	15 36				dec	sercount
 2243: 2			;		push	acc
 2244: 2			;		mov	a, sercount
 2245: 2			;		call	phex
 2246: 2			;		pop	acc
 2247: 2
 2248: 2  0B0A	A8 36		cin_5:		mov	r0, sercount
 2249: 2  0B0C	B8 00 08			cjne	r0, #0, cin_4
 2250: 2
 2251: 2  0B0F	30 04 05			jnb	xonoff, cin_4
 2252: 2
 2253: 2  0B12	75 99 11	cin_7:		mov	SBUF, #C_XON
 2254: 2  0B15	C2 04				clr	xonoff
 2255: 2			;		mov	r0, #80
 2256: 2			;		djnz	r0, $

ASEM-51 V1.3                                        Copyright (c) 2002 by W.W. Heinz                                         PAGE 42



 Line  I  Addr  Code            Source

 2257: 2
 2258: 2  0B17	D0 00		cin_4:		pop	ar0
 2259: 2  0B19	D2 AC				setb	ES
 2260: 2  0B1B	22				ret
 2261: 2
 2262: 2
 2263: 2			;cin_x:		jnb	ri, cin
 2264: 2			;		clr	ri
 2265: 2			;		mov	a, sbuf
 2266: 2			;		ret
 2267: 2
 2268: 2			; Highly code efficient resursive call phex contributed
 2269: 2			; by Alexander B. Alexandrov <abalex@cbr.spb.ru>
 2270: 2
 2271: 2  0B1C			phex:
 2272: 2  0B1C			phex8:
 2273: 2  0B1C	71 1E				acall	phex_b
 2274: 2  0B1E	C4		phex_b:		swap	a		;SWAP A will be twice => A unchanged
 2275: 2  0B1F	C0 E0		phex1:		push	acc
 2276: 2  0B21	54 0F				anl	a, #15
 2277: 2  0B23	24 90				add	a, #90h	; acc is 0x9X, where X is hex digit
 2278: 2  0B25	D4				da	a		; if A to F, C=1 and lower four bits are 0..5
 2279: 2  0B26	34 40				addc	a, #40h
 2280: 2  0B28	D4				da	a
 2281: 2  0B29	51 E1				call	cout
 2282: 2  0B2B	D0 E0				pop	acc
 2283: 2  0B2D	22				ret
 2284: 2
 2285: 2  0B2E			phex16:
 2286: 2  0B2E	C0 E0				push	acc
 2287: 2  0B30	E5 83				mov	a, dph
 2288: 2  0B32	71 1C				call	phex
 2289: 2  0B34	E5 82				mov	a, dpl
 2290: 2  0B36	71 1C				call	phex
 2291: 2  0B38	D0 E0				pop	acc
 2292: 2  0B3A	22				ret
 2293: 2
 2294: 2			;a not so well documented feature of pstr is that you can print
 2295: 2			;multiple consecutive strings without needing to reload dptr
 2296: 2			;(which takes 3 bytes of code!)... this is useful for inserting
 2297: 2			;numbers or spaces between strings.
 2298: 2
 2299: 2			;pstr:		push	acc
 2300: 2			;pstr1:		clr	a
 2301: 2			;		movc	a, @a+dptr
 2302: 2			;		inc	dptr
 2303: 2			;		jz	pstr2
 2304: 2			;		mov	c, acc.7
 2305: 2			;		anl	a, 7Fh
 2306: 2			;		call	cout
 2307: 2			;		jc	pstr2
 2308: 2			;		sjmp	pstr1
 2309: 2			;pstr2:		pop	acc
 2310: 2			;		ret
 2311: 2
 2312: 2			;converts the ascii code in Acc to uppercase, if it is lowercase

ASEM-51 V1.3                                        Copyright (c) 2002 by W.W. Heinz                                         PAGE 43



 Line  I  Addr  Code            Source

 2313: 2
 2314: 2			; Code efficient (saves 6 byes) upper contributed
 2315: 2			; by Alexander B. Alexandrov <abalex@cbr.spb.ru>
 2316: 2
 2317: 2			;upper:
 2318: 2			;		cjne	a, #97, upper2
 2319: 2			;upper2:		jc	upper4		;end if acc < 97
 2320: 2			;		cjne	a, #123, upper3
 2321: 2			;upper3:		jnc	upper4		;end if acc >= 123
 2322: 2			;		add	a, #224		;convert to uppercase
 2323: 2			;upper4:		ret
 2324: 1
 2325: 1			;===============================================
 2326: 1			; decode scancode
 2327: 1			;===============================================
 2328: 1  0B3B			keydecode:
 2329: 1			;		mov	a, keyrxval
 2330: 1			;		call	phex
 2331: 1
 2332: 1  0B3B	74 E0				mov	a, #EXTENDED			;extended?
 2333: 1  0B3D	B5 3B 03			cjne	a, keyrxval, keybreak
 2334: 1  0B40	D2 09				setb	keyrxextended			;set extended flag
 2335: 1  0B42	22				ret
 2336: 1
 2337: 1  0B43	74 F0		keybreak:	mov	a, #BREAK			;break?
 2338: 1  0B45	B5 3B 03			cjne	a, keyrxval, keyshift
 2339: 1  0B48	D2 0A				setb	keyrxbreak
 2340: 1  0B4A	22				ret
 2341: 1
 2342: 1  0B4B	74 12		keyshift:	mov	a, #CLSHIFT			;left-shift?
 2343: 1  0B4D	B5 3B 02			cjne	a, keyrxval, keyshift1
 2344: 1  0B50	80 05				sjmp	keyshift2
 2345: 1  0B52	74 59		keyshift1:	mov	a, #CRSHIFT			;right shift?
 2346: 1  0B54	B5 3B 07			cjne	a, keyrxval, keyStrg
 2347: 1  0B57	A2 0A		keyshift2:	mov	c, keyrxbreak
 2348: 1  0B59	B3				cpl	c
 2349: 1  0B5A	92 0B				mov	keyrxshift, c
 2350: 1  0B5C	80 16				sjmp	keyCheckBrk1
 2351: 1
 2352: 1  0B5E	74 14		keyStrg:	mov	a, #CLSTRG
 2353: 1  0B60	B5 3B 07			cjne	a, keyrxval, keyCheckBrk
 2354: 1  0B63	A2 0A				mov	c, keyrxbreak
 2355: 1  0B65	B3				cpl	c
 2356: 1  0B66	92 0D				mov	keyrxstrg, c
 2357: 1  0B68	80 0A				sjmp	keyCheckBrk1
 2358: 1
 2359: 1  0B6A	30 0A 0C	keyCheckBrk:	jnb	keyrxbreak, keynormal		;break active?
 2360: 1  0B6D	74 11				mov	a, #ALTGR			;ALT-GR?
 2361: 1  0B6F	B5 3B 02			cjne	a, keyrxval, keyCheckBrk1
 2362: 1  0B72	C2 0C				clr	keyrxaltgr			;clear ALT-GR
 2363: 1  0B74	C2 0A		keyCheckBrk1:	clr	keyrxbreak
 2364: 1  0B76	C2 09				clr	keyrxextended
 2365: 1  0B78	22				ret
 2366: 1
 2367: 1  0B79	C0 00		keynormal:	push	ar0
 2368: 1  0B7B	30 0B 05			jnb	keyrxshift, keyMakeExt

ASEM-51 V1.3                                        Copyright (c) 2002 by W.W. Heinz                                         PAGE 44



 Line  I  Addr  Code            Source

 2369: 1  0B7E	12 0C 59			call	keygetshift
 2370: 1  0B81	80 3A				sjmp	keyExitOK
 2371: 1
 2372: 1  0B83	30 09 1A	keyMakeExt:	jnb	keyrxextended, keyAltGr
 2373: 1  0B86	C2 09				clr	keyrxextended			;clear extended
 2374: 1  0B88	78 0D				mov	r0, #13
 2375: 1  0B8A	12 0D 04	keyMakeExt2:	call	keygetextind
 2376: 1  0B8D	B5 3B 0C			cjne	a, keyrxval, keyMakeExt1	;found?
 2377: 1  0B90	12 0D 14			call	keygetext
 2378: 1  0B93	B4 11 04			cjne	a, #ALTGR, keyMakeExt3		;ALTGR-pressed?
 2379: 1  0B96	D2 0C				setb	keyrxaltgr			;set ALTGR-flag
 2380: 1  0B98	80 27				sjmp	keyExit
 2381: 1  0B9A	80 21		keyMakeExt3:	sjmp	keyExitOK
 2382: 1  0B9C	D8 EC		keyMakeExt1:	djnz	r0, keyMakeExt2
 2383: 1  0B9E	80 21				sjmp	keyExit
 2384: 1
 2385: 1  0BA0	30 0C 11	keyAltGr:	jnb	keyrxaltgr, keyMake		;AltGR pressed?
 2386: 1  0BA3	78 08				mov	r0, #8
 2387: 1  0BA5	12 0C EE	keyAltGr2:	call	keygetaltgrind
 2388: 1  0BA8	B5 3B 05			cjne	a, keyrxval, keyAltGr1		;found?
 2389: 1  0BAB	12 0C F9			call	keygetaltgr
 2390: 1  0BAE	80 0D				sjmp	keyExitOK
 2391: 1  0BB0	D8 F3		keyAltGr1:	djnz	r0, keyAltGr2
 2392: 1  0BB2	80 0D				sjmp	keyExit
 2393: 1
 2394: 1  0BB4	12 0B C4	keyMake:	call	keygetnoshift
 2395: 1  0BB7	30 0D 03			jnb	keyrxstrg, keyExitOK
 2396: 1  0BBA	C3				clr	c
 2397: 1  0BBB	94 60				subb	a, #96
 2398: 1
 2399: 1  0BBD	F5 3B		keyExitOK:	mov	keyrxval, a
 2400: 1  0BBF	D2 08				setb	keyavail
 2401: 1
 2402: 1			;		mov	p2, #High(08000h + 24*160 + 77*2)
 2403: 1			;		mov	r0, #Low(08000h + 24*160 + 77*2);
 2404: 1			;		movx	@r0, a
 2405: 1
 2406: 1  0BC1	D0 00		keyExit:	pop	ar0
 2407: 1  0BC3	22				ret
 2408: 1
 2409: 1
 2410: 1  0BC4	E5 3B		keygetnoshift:	mov	a, keyrxval
 2411: 1  0BC6	04				inc	a
 2412: 1  0BC7	83				movc	a, @a+pc
 2413: 1  0BC8	22				ret
 2414: 1  0BC9			CHARTABLE_NOSHIFT:
 2415: 1			;		 	 00   01   02   03   04   05   06   07   08   09   0A   0B   0C   0D   0E
       1			0F
 2416: 1  0BC9	00 88 00 84			db	  0,  F9,   0,  F5,  F3,  F1,  F2, F12,   0, F10,  F8,  F6,  F4,TABU, '^',
       1  0BCD	82 80 81 8B	 0	; 00
       1  0BD1	00 89 87 85
       1  0BD5	83 09 5E 00
 2417: 1  0BD9	00 00 00 00			db     	  0,   0,   0,   0,   0, 'q', '1',   0,   0,   0, 'y', 's', 'a', 'w', '2',
       1  0BDD	00 71 31 00	 0	; 10
       1  0BE1	00 00 79 73
       1  0BE5	61 77 32 00

ASEM-51 V1.3                                        Copyright (c) 2002 by W.W. Heinz                                         PAGE 45



 Line  I  Addr  Code            Source

 2418: 1  0BE9	00 63 78 64			db	  0, 'c', 'x', 'd', 'e', '4', '3',   0,   0, ' ', 'v', 'f', 't', 'r', '5',
       1  0BED	65 34 33 00	 0	; 20
       1  0BF1	00 20 76 66
       1  0BF5	74 72 35 00
 2419: 1  0BF9	00 6E 62 68			db	  0, 'n', 'b', 'h', 'g', 'z', '6',   0,   0,   0, 'm', 'j', 'u', '7', '8',
       1  0BFD	67 7A 36 00	 0	; 30
       1  0C01	00 00 6D 6A
       1  0C05	75 37 38 00
 2420: 1  0C09	00 2C 6B 69			db	  0, ',', 'k', 'i', 'o', '0', '9',   0,   0, '.', '-', 'l', 246, 'p', 223,
       1  0C0D	6F 30 39 00	 0	; 40 	5c = \, 223 = 
       1  0C11	00 2E 2D 6C
       1  0C15	F6 70 DF 00
 2421: 1  0C19	00 00 E4 58			db	  0,   0, 228,  'X',252, 180,   0,   0,   0,   0,C_CR, '+',   0, '#',   0,
       1  0C1D	FC B4 00 00	 0	; 50
       1  0C21	00 00 0D 2B
       1  0C25	00 23 00 00
 2422: 1  0C29	00 3C 00 00			db	  0, '<',   0,   0,   0,   0,C_DEL,  0,   0, '1',   0, '4', '7',   0,   0,
       1  0C2D	00 00 7F 00	 0	; 60
       1  0C31	00 31 00 34
       1  0C35	37 00 00 00
 2423: 1  0C39	30 2E 32 35			db	 '0', '.', '2', '5', '6', '8',ESC,   0, F11, '+', '3', '-', '*', '9', CLS,
       1  0C3D	36 38 1B 00	 0	; 70
       1  0C41	8A 2B 33 2D
       1  0C45	2A 39 01 00
 2424: 1  0C49	00 00 00 86			db	  0,   0,   0,  F7,   0,   0,   0,   0,   0,   0,   0,   0,   0,   0,   0,
       1  0C4D	00 00 00 00	 0	; 80
       1  0C51	00 00 00 00
       1  0C55	00 00 00 00
 2425: 1
 2426: 1  0C59	E5 3B		keygetshift:	mov	a, keyrxval
 2427: 1  0C5B	04				inc	a
 2428: 1  0C5C	83				movc	a, @a+pc
 2429: 1  0C5D	22				ret
 2430: 1  0C5E			CHARTABLE_SHIFT:
 2431: 1			;		 	 00   01   02   03   04   05   06   07   08   09   0A   0B   0C   0D   0E
       1			0F
 2432: 1  0C5E	00 09 00 05			db	  0,   9,   0,   5,   3,   1,   2,  12,   0,  10,   8,   6,   4,TABU,0B0h,
       1  0C62	03 01 02 0C	 0	; 00
       1  0C66	00 0A 08 06
       1  0C6A	04 09 B0 00
 2433: 1  0C6E	00 00 00 00			db        0,   0,   0,   0,   0, 'Q', '!',   0,   0,   0, 'Y', 'S', 'A', 'W', '"',
       1  0C72	00 51 21 00	 0	; 10
       1  0C76	00 00 59 53
       1  0C7A	41 57 22 00
 2434: 1  0C7E	00 43 58 44			db	  0, 'C', 'X', 'D', 'E', '$', 167,   0,   0, ' ', 'V', 'F', 'T', 'R', '%',
       1  0C82	45 24 A7 00	 0	; 20 	167=
       1  0C86	00 20 56 46
       1  0C8A	54 52 25 00
 2435: 1  0C8E	00 4E 42 48			db	  0, 'N', 'B', 'H', 'G', 'Z', '&',   0,   0,   0, 'M', 'J', 'U', '/', '(',
       1  0C92	47 5A 26 00	 0	; 30
       1  0C96	00 00 4D 4A
       1  0C9A	55 2F 28 00
 2436: 1  0C9E	00 3B 4B 49			db	  0, ';', 'K', 'I', 'O', '=', ')',   0,   0, ':', '_', 'L', 214, 'P', '?',
       1  0CA2	4F 3D 29 00	 0	; 40
       1  0CA6	00 3A 5F 4C
       1  0CAA	D6 50 3F 00

ASEM-51 V1.3                                        Copyright (c) 2002 by W.W. Heinz                                         PAGE 46



 Line  I  Addr  Code            Source

 2437: 1  0CAE	00 00 C4 00			db	  0,   0, 196,   0, 220, '`',   0,   0,   0,   0,  LF, '*',   0,027h,   0,
       1  0CB2	DC 60 00 00	 0	; 50
       1  0CB6	00 00 0A 2A
       1  0CBA	00 27 00 00
 2438: 1  0CBE	00 3E 00 00			db	  0, '>',   0,   0,   0,   0,CDCH,   0,   0, '1',   0, CCLF, '7',   0,  0,
       1  0CC2	00 00 FE 00	 0	; 60
       1  0CC6	00 31 00 1E
       1  0CCA	37 00 00 00
 2439: 1  0CCE	30 2E 1D 35			db	'0', '.', CCDN, '5', CCRT, CCUP,  0,   0,  11, '+', '3', '-', '*', '9', 0,
       1  0CD2	1F 1C 00 00	 0  ; 70
       1  0CD6	0B 2B 33 2D
       1  0CDA	2A 39 00 00
 2440: 1  0CDE	00 00 00 07			db	  0,   0,   0,   7,   0,   0,   0,   0,   0,   0,   0,   0,   0,  0,    0,
       1  0CE2	00 00 00 00	 0	; 80
       1  0CE6	00 00 00 00
       1  0CEA	00 00 00 00
 2441: 1
 2442: 1
 2443: 1  0CEE	E8		keygetaltgrind:	mov	a, r0
 2444: 1  0CEF	83				movc	a, @a+pc
 2445: 1  0CF0	22				ret
 2446: 1  0CF1			ALTGR_TABLE_IND:
 2447: 1  0CF1	15				db	015h	; q = @
 2448: 1  0CF2	61				db	061h	; <> = |
 2449: 1  0CF3	5B				db	05Bh	; *+ = ~
 2450: 1  0CF4	4E				db	04Eh	; ? = \
 2451: 1  0CF5	3E				db	03Eh	; 8( = [
 2452: 1  0CF6	46				db	046h	; 9) = ]
 2453: 1  0CF7	3D				db	03Dh	; 7/ = {
 2454: 1  0CF8	45				db	045h	; 0= = }
 2455: 1
 2456: 1
 2457: 1  0CF9	E8		keygetaltgr:	mov	a, r0
 2458: 1  0CFA	83				movc	a, @a+pc
 2459: 1  0CFB	22				ret
 2460: 1  0CFC	40		ALTGR_TABLE:	db	'@'
 2461: 1  0CFD	7C				db	'|'
 2462: 1  0CFE	7E				db	'~'
 2463: 1  0CFF	5C				db	05Ch
 2464: 1  0D00	5B				db	'['
 2465: 1  0D01	5D				db	']'
 2466: 1  0D02	7B				db	'{'
 2467: 1  0D03	7D				db	'}'
 2468: 1
 2469: 1
 2470: 1  0D04	E8		keygetextind:	mov	a, r0
 2471: 1  0D05	83				movc	a, @a+pc
 2472: 1  0D06	22				ret
 2473: 1  0D07	11		EXT_TABLE_IND:	db	ALTGR
 2474: 1  0D08	4A				db	04Ah	; /
 2475: 1  0D09	5A				db	05Ah	; ENTER
 2476: 1  0D0A	69				db	069h	; END
 2477: 1  0D0B	6B				db	06Bh	; LEFT
 2478: 1  0D0C	6C				db	06Ch	; HOME
 2479: 1  0D0D	70				db	070h	; INS
 2480: 1  0D0E	71				db	071h	; DEL

ASEM-51 V1.3                                        Copyright (c) 2002 by W.W. Heinz                                         PAGE 47



 Line  I  Addr  Code            Source

 2481: 1  0D0F	72				db	072h	; DOWN
 2482: 1  0D10	74				db	074h	; RIGHT
 2483: 1  0D11	75				db	075h	; Up
 2484: 1  0D12	7A				db	07Ah	; PAGE DOWN
 2485: 1  0D13	7D				db	07Dh	; PAGE UP
 2486: 1
 2487: 1  0D14	E8		keygetext:	mov	a, r0
 2488: 1  0D15	83				movc	a, @a+pc
 2489: 1  0D16	22				ret
 2490: 1  0D17	11		EXT_TABLE:	db	ALTGR
 2491: 1  0D18	2F				db	'/'	; NumPad division symbol
 2492: 1  0D19	0D				db	C_CR	; ENTER
 2493: 1  0D1A	1D				db	CCBT	; cursor bottom with SuperFlag
 2494: 1  0D1B	13				db	19	; cursor left	CTRL-S
 2495: 1  0D1C	1C				db	CCHM	; cursor home with SuperFLag
 2496: 1  0D1D	16				db	22	; insert	CTRL-V
 2497: 1  0D1E	07				db	7	; delete	CTRL-G
 2498: 1  0D1F	18				db	24	; cursor down	CTRL-X
 2499: 1  0D20	04				db	4	; cursor right	CTRL-D
 2500: 1  0D21	05				db	5	; cursor up	CTRL-E
 2501: 1  0D22	03				db	3	; pagedown CTRL-C
 2502: 1  0D23	12				db	18	; pageup CTRL-R
 2503: 1			;
 2504: 1			;
 2505: 1			;
 2506: 1  0D24	E5 2A		getbaud:	mov	a, baudidx
 2507: 1  0D26	04				inc	a
 2508: 1  0D27	83				movc	a, @a+pc
 2509: 1  0D28	22				ret
 2510: 1  0D29	FF				db	0ffh	;115200
 2511: 1  0D2A	F4				db	0f4h	;9600
 2512: 1  0D2B	FA				db	0fah	;19200
 2513: 1  0D2C	FD				db	0fdh	;38400
 2514: 1  0D2D	FE				db	0feh	;57600
 2515: 1
 2516: 1  0D2E	83		getbdtxt:	movc	a, @a+pc
 2517: 1  0D2F	22				ret
 2518: 1  0D30	31 31 35 32			db	"1152"
 2519: 1  0D34	20 20 39 36			db	"  96"
 2520: 1  0D38	20 31 39 32			db	" 192"
 2521: 1  0D3C	20 33 38 34			db	" 384"
 2522: 1  0D40	20 35 37 36			db	" 576"
 2523: 1
 2524: 1			;
 2525: 1			;
 2526: 1  0D44	90 8F 00	prtstatus:	mov	dptr, #08000h + 24 * WIDTH * 2
 2527: 1  0D47	78 01				mov	r0, #1
 2528: 1  0D49	12 0D 9F	prtstatus1:	call	getstatus			;get status line
 2529: 1  0D4C	F0				movx	@dptr, a
 2530: 1  0D4D	A3				inc	dptr
 2531: 1  0D4E	74 06				mov	a, #TURQUOISE			;color turquoise
 2532: 1  0D50	F0				movx	@dptr, a
 2533: 1  0D51	A3				inc	dptr
 2534: 1  0D52	08				inc	r0
 2535: 1  0D53	B8 51 F3			cjne	r0, #81, prtstatus1
 2536: 1

ASEM-51 V1.3                                        Copyright (c) 2002 by W.W. Heinz                                         PAGE 48



 Line  I  Addr  Code            Source

 2537: 1  0D56	90 8F 14			mov	dptr, #08000h + 24 * WIDTH * 2 + 10 * 2
 2538: 1  0D59	E5 2A				mov	a, baudidx
 2539: 1  0D5B	23				rl	a				;mul2
 2540: 1  0D5C	23				rl	a				;mul4
 2541: 1  0D5D	04				inc	a
 2542: 1  0D5E	F8				mov	r0, a
 2543: 1  0D5F	79 00				mov	r1, #0
 2544: 1  0D61	B1 2E		prtbaud:	call	getbdtxt
 2545: 1  0D63	F0				movx	@dptr, a
 2546: 1  0D64	A3				inc	dptr
 2547: 1  0D65	A3				inc	dptr
 2548: 1  0D66	08				inc	r0
 2549: 1  0D67	E8				mov	a, r0
 2550: 1  0D68	09				inc	r1
 2551: 1  0D69	B9 04 F5			cjne	r1, #4, prtbaud
 2552: 1
 2553: 1  0D6C	30 14 11			jnb	databits, prtstatus6		;print 7 data bits
 2554: 1  0D6F	74 37				mov	a, #'7'
 2555: 1  0D71	90 8F 0E			mov	dptr, #08000h + 24 * WIDTH * 2 + 7 * 2
 2556: 1  0D74	F0				movx	@dptr, a
 2557: 1  0D75	74 45				mov	a, #'E'
 2558: 1  0D77	30 15 02			jnb	evenodd, prtstatus7
 2559: 1  0D7A	74 4F				mov	a, #'O'
 2560: 1  0D7C	90 8F 10	prtstatus7:	mov	dptr, #08000h + 24 * WIDTH * 2 + 8 * 2
 2561: 1  0D7F	F0				movx	@dptr, a
 2562: 1  0D80	74 FB		prtstatus6:	mov	a, #251				;Haken
 2563: 1  0D82	30 12 04			jnb	newlinemode, prtstatus2
 2564: 1  0D85	90 8F 38			mov	dptr, #08000h + 24 * WIDTH * 2 + 28 * 2
 2565: 1  0D88	F0				movx	@dptr, a
 2566: 1  0D89	30 13 04	prtstatus2:	jnb	insert	, prtstatus3
 2567: 1  0D8C	90 8F 50			mov	dptr, #08000h + 24 * WIDTH * 2 + 40 * 2
 2568: 1  0D8F	F0				movx	@dptr, a
 2569: 1  0D90	30 11 04	prtstatus3:	jnb	origin, prtstatus4
 2570: 1  0D93	90 8F 68			mov	dptr, #08000h + 24 * WIDTH * 2 + 52 * 2
 2571: 1  0D96	F0				movx	@dptr, a
 2572: 1  0D97	30 10 04	prtstatus4:	jnb	wrap, prtstatus5
 2573: 1  0D9A	90 8F 7C			mov	dptr, #08000h + 24 * WIDTH * 2 + 62 * 2
 2574: 1  0D9D	F0				movx	@dptr, a
 2575: 1  0D9E	22		prtstatus5:	ret
 2576: 1
 2577: 1  0D9F	E8		getstatus:	mov	a, r0
 2578: 1  0DA0	83				movc	a, @a + pc
 2579: 1  0DA1	22				ret
 2580: 1			;			"0         1         2         3         4         5         6         7
       1			     "
 2581: 1			;			"012345678901234567890123456789012345678901234567890123456789012345678901234
       1			56789
 2582: 1  0DA2	7C 42 61 75	status:		db	"|Baud: 8N xxxx00 | Newline: - | Insert: - | Origin: - | Wrap: - |    VT102
       1  0DA6	64 3A 20 38	    |"
       1  0DAA	4E 20 78 78
       1  0DAE	78 78 30 30
       1  0DB2	20 7C 20 4E
       1  0DB6	65 77 6C 69
       1  0DBA	6E 65 3A 20
       1  0DBE	2D 20 7C 20
       1  0DC2	49 6E 73 65

ASEM-51 V1.3                                        Copyright (c) 2002 by W.W. Heinz                                         PAGE 49



 Line  I  Addr  Code            Source

       1  0DC6	72 74 3A 20
       1  0DCA	2D 20 7C 20
       1  0DCE	4F 72 69 67
       1  0DD2	69 6E 3A 20
       1  0DD6	2D 20 7C 20
       1  0DDA	57 72 61 70
       1  0DDE	3A 20 2D 20
       1  0DE2	7C 20 20 20
       1  0DE6	20 56 54 31
       1  0DEA	30 32 20 20
       1  0DEE	20 20 20 7C
 2583: 1
 2584: 1
 2585: 1					$include (vt100_font.a51)
 2586: 2	N      1000			org	base + 1000h
 2587: 2  1000			vt100_font:
 2588: 2  1000	00 00 00 00			db	000h, 000h, 000h, 000h, 000h, 000h, 000h, 000h, 000h, 000h, 000h, 000h
       2  1004	00 00 00 00
       2  1008	00 00 00 00
 2589: 2  100C	00 00 00 00			db	000h, 000h, 000h, 000h, 000h, 000h, 000h, 000h, 010h, 038h, 07Ch, 0FEh
       2  1010	00 00 00 00
       2  1014	10 38 7C FE
 2590: 2  1018	7C 38 10 00			db	07Ch, 038h, 010h, 000h, 000h, 000h, 000h, 000h, 055h, 0AAh, 055h, 0AAh
       2  101C	00 00 00 00
       2  1020	55 AA 55 AA
 2591: 2  1024	55 AA 55 AA			db	055h, 0AAh, 055h, 0AAh, 055h, 0AAh, 055h, 0AAh, 055h, 0AAh, 055h, 0AAh
       2  1028	55 AA 55 AA
       2  102C	55 AA 55 AA
 2592: 2  1030	00 88 88 88			db	000h, 088h, 088h, 088h, 0F8h, 088h, 088h, 088h, 000h, 03Eh, 008h, 008h
       2  1034	F8 88 88 88
       2  1038	00 3E 08 08
 2593: 2  103C	08 08 08 00			db	008h, 008h, 008h, 000h, 000h, 0F0h, 080h, 080h, 0E0h, 080h, 080h, 080h
       2  1040	00 F0 80 80
       2  1044	E0 80 80 80
 2594: 2  1048	1E 10 10 1C			db	01Eh, 010h, 010h, 01Ch, 010h, 010h, 010h, 000h, 000h, 070h, 080h, 080h
       2  104C	10 10 10 00
       2  1050	00 70 80 80
 2595: 2  1054	80 80 70 00			db	080h, 080h, 070h, 000h, 01Eh, 012h, 012h, 01Ch, 018h, 014h, 012h, 000h
       2  1058	1E 12 12 1C
       2  105C	18 14 12 00
 2596: 2  1060	00 80 80 80			db	000h, 080h, 080h, 080h, 080h, 080h, 0F0h, 000h, 01Eh, 010h, 010h, 01Ch
       2  1064	80 80 F0 00
       2  1068	1E 10 10 1C
 2597: 2  106C	10 10 10 00			db	010h, 010h, 010h, 000h, 000h, 038h, 06Ch, 06Ch, 038h, 000h, 000h, 000h
       2  1070	00 38 6C 6C
       2  1074	38 00 00 00
 2598: 2  1078	00 00 00 00			db	000h, 000h, 000h, 000h, 000h, 000h, 000h, 000h, 000h, 000h, 000h, 000h
       2  107C	00 00 00 00
       2  1080	00 00 00 00
 2599: 2  1084	18 18 7E 18			db	018h, 018h, 07Eh, 018h, 018h, 000h, 000h, 0FFh, 000h, 000h, 000h, 000h
       2  1088	18 00 00 FF
       2  108C	00 00 00 00
 2600: 2  1090	00 88 C8 A8			db	000h, 088h, 0C8h, 0A8h, 0A8h, 098h, 088h, 000h, 010h, 010h, 010h, 010h
       2  1094	A8 98 88 00
       2  1098	10 10 10 10
 2601: 2  109C	10 10 1E 00			db	010h, 010h, 01Eh, 000h, 000h, 088h, 088h, 088h, 050h, 050h, 050h, 020h

ASEM-51 V1.3                                        Copyright (c) 2002 by W.W. Heinz                                         PAGE 50



 Line  I  Addr  Code            Source

       2  10A0	00 88 88 88
       2  10A4	50 50 50 20
 2602: 2  10A8	00 3E 08 08			db	000h, 03Eh, 008h, 008h, 008h, 008h, 008h, 000h, 018h, 018h, 018h, 018h
       2  10AC	08 08 08 00
       2  10B0	18 18 18 18
 2603: 2  10B4	18 18 18 F8			db	018h, 018h, 018h, 0F8h, 000h, 000h, 000h, 000h, 000h, 000h, 000h, 000h
       2  10B8	00 00 00 00
       2  10BC	00 00 00 00
 2604: 2  10C0	00 00 00 00			db	000h, 000h, 000h, 000h, 000h, 000h, 000h, 0F8h, 018h, 018h, 018h, 018h
       2  10C4	00 00 00 F8
       2  10C8	18 18 18 18
 2605: 2  10CC	18 18 18 18			db	018h, 018h, 018h, 018h, 000h, 000h, 000h, 000h, 000h, 000h, 000h, 01Fh
       2  10D0	00 00 00 00
       2  10D4	00 00 00 1F
 2606: 2  10D8	18 18 18 18			db	018h, 018h, 018h, 018h, 018h, 018h, 018h, 018h, 018h, 018h, 018h, 018h
       2  10DC	18 18 18 18
       2  10E0	18 18 18 18
 2607: 2  10E4	18 18 18 1F			db	018h, 018h, 018h, 01Fh, 000h, 000h, 000h, 000h, 000h, 000h, 000h, 000h
       2  10E8	00 00 00 00
       2  10EC	00 00 00 00
 2608: 2  10F0	18 18 18 18			db	018h, 018h, 018h, 018h, 018h, 018h, 018h, 0FFh, 018h, 018h, 018h, 018h
       2  10F4	18 18 18 FF
       2  10F8	18 18 18 18
 2609: 2  10FC	18 18 18 18			db	018h, 018h, 018h, 018h, 0FFh, 000h, 000h, 000h, 000h, 000h, 000h, 000h
       2  1100	FF 00 00 00
       2  1104	00 00 00 00
 2610: 2  1108	00 00 00 00			db	000h, 000h, 000h, 000h, 000h, 000h, 000h, 000h, 000h, 000h, 000h, 0FFh
       2  110C	00 00 00 00
       2  1110	00 00 00 FF
 2611: 2  1114	00 00 00 00			db	000h, 000h, 000h, 000h, 000h, 000h, 000h, 000h, 000h, 000h, 000h, 000h
       2  1118	00 00 00 00
       2  111C	00 00 00 00
 2612: 2  1120	00 00 00 00			db	000h, 000h, 000h, 000h, 000h, 000h, 000h, 0FFh, 000h, 000h, 000h, 000h
       2  1124	00 00 00 FF
       2  1128	00 00 00 00
 2613: 2  112C	00 00 00 00			db	000h, 000h, 000h, 000h, 000h, 000h, 000h, 000h, 000h, 000h, 000h, 000h
       2  1130	00 00 00 00
       2  1134	00 00 00 00
 2614: 2  1138	00 00 00 FF			db	000h, 000h, 000h, 0FFh, 000h, 000h, 000h, 000h, 000h, 000h, 000h, 000h
       2  113C	00 00 00 00
       2  1140	00 00 00 00
 2615: 2  1144	00 00 00 00			db	000h, 000h, 000h, 000h, 000h, 000h, 000h, 000h, 000h, 000h, 0FFh, 000h
       2  1148	00 00 00 00
       2  114C	00 00 FF 00
 2616: 2  1150	18 18 18 18			db	018h, 018h, 018h, 018h, 018h, 018h, 018h, 01Fh, 018h, 018h, 018h, 018h
       2  1154	18 18 18 1F
       2  1158	18 18 18 18
 2617: 2  115C	18 18 18 18			db	018h, 018h, 018h, 018h, 018h, 018h, 018h, 018h, 018h, 018h, 018h, 0F8h
       2  1160	18 18 18 18
       2  1164	18 18 18 F8
 2618: 2  1168	18 18 18 18			db	018h, 018h, 018h, 018h, 018h, 018h, 018h, 018h, 018h, 018h, 018h, 018h
       2  116C	18 18 18 18
       2  1170	18 18 18 18
 2619: 2  1174	18 18 18 FF			db	018h, 018h, 018h, 0FFh, 000h, 000h, 000h, 000h, 000h, 000h, 000h, 000h
       2  1178	00 00 00 00
       2  117C	00 00 00 00

ASEM-51 V1.3                                        Copyright (c) 2002 by W.W. Heinz                                         PAGE 51



 Line  I  Addr  Code            Source

 2620: 2  1180	00 00 00 00			db	000h, 000h, 000h, 000h, 000h, 000h, 000h, 0FFh, 018h, 018h, 018h, 018h
       2  1184	00 00 00 FF
       2  1188	18 18 18 18
 2621: 2  118C	18 18 18 18			db	018h, 018h, 018h, 018h, 018h, 018h, 018h, 018h, 018h, 018h, 018h, 018h
       2  1190	18 18 18 18
       2  1194	18 18 18 18
 2622: 2  1198	18 18 18 18			db	018h, 018h, 018h, 018h, 018h, 018h, 018h, 018h, 000h, 000h, 000h, 00Ch
       2  119C	18 18 18 18
       2  11A0	00 00 00 0C
 2623: 2  11A4	18 30 60 30			db	018h, 030h, 060h, 030h, 018h, 00Ch, 000h, 07Eh, 000h, 000h, 000h, 000h
       2  11A8	18 0C 00 7E
       2  11AC	00 00 00 00
 2624: 2  11B0	00 00 00 30			db	000h, 000h, 000h, 030h, 018h, 00Ch, 006h, 00Ch, 018h, 030h, 000h, 07Eh
       2  11B4	18 0C 06 0C
       2  11B8	18 30 00 7E
 2625: 2  11BC	00 00 00 00			db	000h, 000h, 000h, 000h, 000h, 000h, 000h, 000h, 0FEh, 06Ch, 06Ch, 06Ch
       2  11C0	00 00 00 00
       2  11C4	FE 6C 6C 6C
 2626: 2  11C8	6C 6C 6C 6C			db	06Ch, 06Ch, 06Ch, 06Ch, 000h, 000h, 000h, 000h, 000h, 000h, 000h, 002h
       2  11CC	00 00 00 00
       2  11D0	00 00 00 02
 2627: 2  11D4	04 7E 08 10			db	004h, 07Eh, 008h, 010h, 07Eh, 020h, 040h, 000h, 000h, 000h, 000h, 000h
       2  11D8	7E 20 40 00
       2  11DC	00 00 00 00
 2628: 2  11E0	00 38 6C 64			db	000h, 038h, 06Ch, 064h, 060h, 0F0h, 060h, 060h, 060h, 060h, 0E6h, 0FCh
       2  11E4	60 F0 60 60
       2  11E8	60 60 E6 FC
 2629: 2  11EC	00 00 00 00			db	000h, 000h, 000h, 000h, 000h, 000h, 000h, 000h, 000h, 000h, 000h, 018h
       2  11F0	00 00 00 00
       2  11F4	00 00 00 18
 2630: 2  11F8	18 00 00 00			db	018h, 000h, 000h, 000h, 000h, 000h, 000h, 000h, 000h, 000h, 000h, 000h
       2  11FC	00 00 00 00
       2  1200	00 00 00 00
 2631: 2  1204	00 00 00 00			db	000h, 000h, 000h, 000h, 000h, 000h, 000h, 000h, 000h, 000h, 000h, 000h
       2  1208	00 00 00 00
       2  120C	00 00 00 00
 2632: 2  1210	00 00 18 3C			db	000h, 000h, 018h, 03Ch, 03Ch, 03Ch, 018h, 018h, 018h, 000h, 018h, 018h
       2  1214	3C 3C 18 18
       2  1218	18 00 18 18
 2633: 2  121C	00 00 00 00			db	000h, 000h, 000h, 000h, 000h, 066h, 066h, 066h, 024h, 000h, 000h, 000h
       2  1220	00 66 66 66
       2  1224	24 00 00 00
 2634: 2  1228	00 00 00 00			db	000h, 000h, 000h, 000h, 000h, 000h, 000h, 000h, 000h, 000h, 000h, 06Ch
       2  122C	00 00 00 00
       2  1230	00 00 00 6C
 2635: 2  1234	6C FE 6C 6C			db	06Ch, 0FEh, 06Ch, 06Ch, 06Ch, 0FEh, 06Ch, 06Ch, 000h, 000h, 000h, 000h
       2  1238	6C FE 6C 6C
       2  123C	00 00 00 00
 2636: 2  1240	18 18 7C C6			db	018h, 018h, 07Ch, 0C6h, 0C2h, 0C0h, 07Ch, 006h, 006h, 086h, 0C6h, 07Ch
       2  1244	C2 C0 7C 06
       2  1248	06 86 C6 7C
 2637: 2  124C	18 18 00 00			db	018h, 018h, 000h, 000h, 000h, 000h, 000h, 000h, 0C2h, 0C6h, 00Ch, 018h
       2  1250	00 00 00 00
       2  1254	C2 C6 0C 18
 2638: 2  1258	30 60 C6 86			db	030h, 060h, 0C6h, 086h, 000h, 000h, 000h, 000h, 000h, 000h, 038h, 06Ch
       2  125C	00 00 00 00

ASEM-51 V1.3                                        Copyright (c) 2002 by W.W. Heinz                                         PAGE 52



 Line  I  Addr  Code            Source

       2  1260	00 00 38 6C
 2639: 2  1264	6C 38 76 DC			db	06Ch, 038h, 076h, 0DCh, 0CCh, 0CCh, 0CCh, 076h, 000h, 000h, 000h, 000h
       2  1268	CC CC CC 76
       2  126C	00 00 00 00
 2640: 2  1270	00 30 30 30			db	000h, 030h, 030h, 030h, 060h, 000h, 000h, 000h, 000h, 000h, 000h, 000h
       2  1274	60 00 00 00
       2  1278	00 00 00 00
 2641: 2  127C	00 00 00 00			db	000h, 000h, 000h, 000h, 000h, 000h, 00Ch, 018h, 030h, 030h, 030h, 030h
       2  1280	00 00 0C 18
       2  1284	30 30 30 30
 2642: 2  1288	30 30 18 0C			db	030h, 030h, 018h, 00Ch, 000h, 000h, 000h, 000h, 000h, 000h, 030h, 018h
       2  128C	00 00 00 00
       2  1290	00 00 30 18
 2643: 2  1294	0C 0C 0C 0C			db	00Ch, 00Ch, 00Ch, 00Ch, 00Ch, 00Ch, 018h, 030h, 000h, 000h, 000h, 000h
       2  1298	0C 0C 18 30
       2  129C	00 00 00 00
 2644: 2  12A0	00 00 00 00			db	000h, 000h, 000h, 000h, 000h, 066h, 03Ch, 0FFh, 03Ch, 066h, 000h, 000h
       2  12A4	00 66 3C FF
       2  12A8	3C 66 00 00
 2645: 2  12AC	00 00 00 00			db	000h, 000h, 000h, 000h, 000h, 000h, 000h, 000h, 000h, 018h, 018h, 07Eh
       2  12B0	00 00 00 00
       2  12B4	00 18 18 7E
 2646: 2  12B8	18 18 00 00			db	018h, 018h, 000h, 000h, 000h, 000h, 000h, 000h, 000h, 000h, 000h, 000h
       2  12BC	00 00 00 00
       2  12C0	00 00 00 00
 2647: 2  12C4	00 00 00 00			db	000h, 000h, 000h, 000h, 000h, 018h, 018h, 018h, 030h, 000h, 000h, 000h
       2  12C8	00 18 18 18
       2  12CC	30 00 00 00
 2648: 2  12D0	00 00 00 00			db	000h, 000h, 000h, 000h, 000h, 000h, 000h, 0FEh, 000h, 000h, 000h, 000h
       2  12D4	00 00 00 FE
       2  12D8	00 00 00 00
 2649: 2  12DC	00 00 00 00			db	000h, 000h, 000h, 000h, 000h, 000h, 000h, 000h, 000h, 000h, 000h, 000h
       2  12E0	00 00 00 00
       2  12E4	00 00 00 00
 2650: 2  12E8	00 00 18 18			db	000h, 000h, 018h, 018h, 000h, 000h, 000h, 000h, 000h, 000h, 000h, 000h
       2  12EC	00 00 00 00
       2  12F0	00 00 00 00
 2651: 2  12F4	02 06 0C 18			db	002h, 006h, 00Ch, 018h, 030h, 060h, 0C0h, 080h, 000h, 000h, 000h, 000h
       2  12F8	30 60 C0 80
       2  12FC	00 00 00 00
 2652: 2  1300	00 00 38 6C			db	000h, 000h, 038h, 06Ch, 0C6h, 0C6h, 0D6h, 0D6h, 0C6h, 0C6h, 06Ch, 038h
       2  1304	C6 C6 D6 D6
       2  1308	C6 C6 6C 38
 2653: 2  130C	00 00 00 00			db	000h, 000h, 000h, 000h, 000h, 000h, 018h, 038h, 078h, 018h, 018h, 018h
       2  1310	00 00 18 38
       2  1314	78 18 18 18
 2654: 2  1318	18 18 18 7E			db	018h, 018h, 018h, 07Eh, 000h, 000h, 000h, 000h, 000h, 000h, 07Ch, 0C6h
       2  131C	00 00 00 00
       2  1320	00 00 7C C6
 2655: 2  1324	06 0C 18 30			db	006h, 00Ch, 018h, 030h, 060h, 0C0h, 0C6h, 0FEh, 000h, 000h, 000h, 000h
       2  1328	60 C0 C6 FE
       2  132C	00 00 00 00
 2656: 2  1330	00 00 7C C6			db	000h, 000h, 07Ch, 0C6h, 006h, 006h, 03Ch, 006h, 006h, 006h, 0C6h, 07Ch
       2  1334	06 06 3C 06
       2  1338	06 06 C6 7C
 2657: 2  133C	00 00 00 00			db	000h, 000h, 000h, 000h, 000h, 000h, 00Ch, 01Ch, 03Ch, 06Ch, 0CCh, 0FEh

ASEM-51 V1.3                                        Copyright (c) 2002 by W.W. Heinz                                         PAGE 53



 Line  I  Addr  Code            Source

       2  1340	00 00 0C 1C
       2  1344	3C 6C CC FE
 2658: 2  1348	0C 0C 0C 1E			db	00Ch, 00Ch, 00Ch, 01Eh, 000h, 000h, 000h, 000h, 000h, 000h, 0FEh, 0C0h
       2  134C	00 00 00 00
       2  1350	00 00 FE C0
 2659: 2  1354	C0 C0 FC 06			db	0C0h, 0C0h, 0FCh, 006h, 006h, 006h, 0C6h, 07Ch, 000h, 000h, 000h, 000h
       2  1358	06 06 C6 7C
       2  135C	00 00 00 00
 2660: 2  1360	00 00 38 60			db	000h, 000h, 038h, 060h, 0C0h, 0C0h, 0FCh, 0C6h, 0C6h, 0C6h, 0C6h, 07Ch
       2  1364	C0 C0 FC C6
       2  1368	C6 C6 C6 7C
 2661: 2  136C	00 00 00 00			db	000h, 000h, 000h, 000h, 000h, 000h, 0FEh, 0C6h, 006h, 006h, 00Ch, 018h
       2  1370	00 00 FE C6
       2  1374	06 06 0C 18
 2662: 2  1378	30 30 30 30			db	030h, 030h, 030h, 030h, 000h, 000h, 000h, 000h, 000h, 000h, 07Ch, 0C6h
       2  137C	00 00 00 00
       2  1380	00 00 7C C6
 2663: 2  1384	C6 C6 7C C6			db	0C6h, 0C6h, 07Ch, 0C6h, 0C6h, 0C6h, 0C6h, 07Ch, 000h, 000h, 000h, 000h
       2  1388	C6 C6 C6 7C
       2  138C	00 00 00 00
 2664: 2  1390	00 00 7C C6			db	000h, 000h, 07Ch, 0C6h, 0C6h, 0C6h, 07Eh, 006h, 006h, 006h, 00Ch, 078h
       2  1394	C6 C6 7E 06
       2  1398	06 06 0C 78
 2665: 2  139C	00 00 00 00			db	000h, 000h, 000h, 000h, 000h, 000h, 000h, 000h, 018h, 018h, 000h, 000h
       2  13A0	00 00 00 00
       2  13A4	18 18 00 00
 2666: 2  13A8	00 18 18 00			db	000h, 018h, 018h, 000h, 000h, 000h, 000h, 000h, 000h, 000h, 000h, 000h
       2  13AC	00 00 00 00
       2  13B0	00 00 00 00
 2667: 2  13B4	18 18 00 00			db	018h, 018h, 000h, 000h, 000h, 018h, 018h, 030h, 000h, 000h, 000h, 000h
       2  13B8	00 18 18 30
       2  13BC	00 00 00 00
 2668: 2  13C0	00 00 00 06			db	000h, 000h, 000h, 006h, 00Ch, 018h, 030h, 060h, 030h, 018h, 00Ch, 006h
       2  13C4	0C 18 30 60
       2  13C8	30 18 0C 06
 2669: 2  13CC	00 00 00 00			db	000h, 000h, 000h, 000h, 000h, 000h, 000h, 000h, 000h, 07Eh, 000h, 000h
       2  13D0	00 00 00 00
       2  13D4	00 7E 00 00
 2670: 2  13D8	7E 00 00 00			db	07Eh, 000h, 000h, 000h, 000h, 000h, 000h, 000h, 000h, 000h, 000h, 060h
       2  13DC	00 00 00 00
       2  13E0	00 00 00 60
 2671: 2  13E4	30 18 0C 06			db	030h, 018h, 00Ch, 006h, 00Ch, 018h, 030h, 060h, 000h, 000h, 000h, 000h
       2  13E8	0C 18 30 60
       2  13EC	00 00 00 00
 2672: 2  13F0	00 00 7C C6			db	000h, 000h, 07Ch, 0C6h, 0C6h, 00Ch, 018h, 018h, 018h, 000h, 018h, 018h
       2  13F4	C6 0C 18 18
       2  13F8	18 00 18 18
 2673: 2  13FC	00 00 00 00			db	000h, 000h, 000h, 000h, 000h, 000h, 000h, 07Ch, 0C6h, 0C6h, 0DEh, 0DEh
       2  1400	00 00 00 7C
       2  1404	C6 C6 DE DE
 2674: 2  1408	DE DC C0 7C			db	0DEh, 0DCh, 0C0h, 07Ch, 000h, 000h, 000h, 000h, 000h, 000h, 010h, 038h
       2  140C	00 00 00 00
       2  1410	00 00 10 38
 2675: 2  1414	6C C6 C6 FE			db	06Ch, 0C6h, 0C6h, 0FEh, 0C6h, 0C6h, 0C6h, 0C6h, 000h, 000h, 000h, 000h
       2  1418	C6 C6 C6 C6
       2  141C	00 00 00 00

ASEM-51 V1.3                                        Copyright (c) 2002 by W.W. Heinz                                         PAGE 54



 Line  I  Addr  Code            Source

 2676: 2  1420	00 00 FC 66			db	000h, 000h, 0FCh, 066h, 066h, 066h, 07Ch, 066h, 066h, 066h, 066h, 0FCh
       2  1424	66 66 7C 66
       2  1428	66 66 66 FC
 2677: 2  142C	00 00 00 00			db	000h, 000h, 000h, 000h, 000h, 000h, 03Ch, 066h, 0C2h, 0C0h, 0C0h, 0C0h
       2  1430	00 00 3C 66
       2  1434	C2 C0 C0 C0
 2678: 2  1438	C0 C2 66 3C			db	0C0h, 0C2h, 066h, 03Ch, 000h, 000h, 000h, 000h, 000h, 000h, 0F8h, 06Ch
       2  143C	00 00 00 00
       2  1440	00 00 F8 6C
 2679: 2  1444	66 66 66 66			db	066h, 066h, 066h, 066h, 066h, 066h, 06Ch, 0F8h, 000h, 000h, 000h, 000h
       2  1448	66 66 6C F8
       2  144C	00 00 00 00
 2680: 2  1450	00 00 FE 66			db	000h, 000h, 0FEh, 066h, 062h, 068h, 078h, 068h, 060h, 062h, 066h, 0FEh
       2  1454	62 68 78 68
       2  1458	60 62 66 FE
 2681: 2  145C	00 00 00 00			db	000h, 000h, 000h, 000h, 000h, 000h, 0FEh, 066h, 062h, 068h, 078h, 068h
       2  1460	00 00 FE 66
       2  1464	62 68 78 68
 2682: 2  1468	60 60 60 F0			db	060h, 060h, 060h, 0F0h, 000h, 000h, 000h, 000h, 000h, 000h, 03Ch, 066h
       2  146C	00 00 00 00
       2  1470	00 00 3C 66
 2683: 2  1474	C2 C0 C0 DE			db	0C2h, 0C0h, 0C0h, 0DEh, 0C6h, 0C6h, 066h, 03Ah, 000h, 000h, 000h, 000h
       2  1478	C6 C6 66 3A
       2  147C	00 00 00 00
 2684: 2  1480	00 00 C6 C6			db	000h, 000h, 0C6h, 0C6h, 0C6h, 0C6h, 0FEh, 0C6h, 0C6h, 0C6h, 0C6h, 0C6h
       2  1484	C6 C6 FE C6
       2  1488	C6 C6 C6 C6
 2685: 2  148C	00 00 00 00			db	000h, 000h, 000h, 000h, 000h, 000h, 03Ch, 018h, 018h, 018h, 018h, 018h
       2  1490	00 00 3C 18
       2  1494	18 18 18 18
 2686: 2  1498	18 18 18 3C			db	018h, 018h, 018h, 03Ch, 000h, 000h, 000h, 000h, 000h, 000h, 01Eh, 00Ch
       2  149C	00 00 00 00
       2  14A0	00 00 1E 0C
 2687: 2  14A4	0C 0C 0C 0C			db	00Ch, 00Ch, 00Ch, 00Ch, 0CCh, 0CCh, 0CCh, 078h, 000h, 000h, 000h, 000h
       2  14A8	CC CC CC 78
       2  14AC	00 00 00 00
 2688: 2  14B0	00 00 E6 66			db	000h, 000h, 0E6h, 066h, 066h, 06Ch, 078h, 078h, 06Ch, 066h, 066h, 0E6h
       2  14B4	66 6C 78 78
       2  14B8	6C 66 66 E6
 2689: 2  14BC	00 00 00 00			db	000h, 000h, 000h, 000h, 000h, 000h, 0F0h, 060h, 060h, 060h, 060h, 060h
       2  14C0	00 00 F0 60
       2  14C4	60 60 60 60
 2690: 2  14C8	60 62 66 FE			db	060h, 062h, 066h, 0FEh, 000h, 000h, 000h, 000h, 000h, 000h, 0C6h, 0EEh
       2  14CC	00 00 00 00
       2  14D0	00 00 C6 EE
 2691: 2  14D4	FE FE D6 C6			db	0FEh, 0FEh, 0D6h, 0C6h, 0C6h, 0C6h, 0C6h, 0C6h, 000h, 000h, 000h, 000h
       2  14D8	C6 C6 C6 C6
       2  14DC	00 00 00 00
 2692: 2  14E0	00 00 C6 E6			db	000h, 000h, 0C6h, 0E6h, 0F6h, 0FEh, 0DEh, 0CEh, 0C6h, 0C6h, 0C6h, 0C6h
       2  14E4	F6 FE DE CE
       2  14E8	C6 C6 C6 C6
 2693: 2  14EC	00 00 00 00			db	000h, 000h, 000h, 000h, 000h, 000h, 07Ch, 0C6h, 0C6h, 0C6h, 0C6h, 0C6h
       2  14F0	00 00 7C C6
       2  14F4	C6 C6 C6 C6
 2694: 2  14F8	C6 C6 C6 7C			db	0C6h, 0C6h, 0C6h, 07Ch, 000h, 000h, 000h, 000h, 000h, 000h, 0FCh, 066h
       2  14FC	00 00 00 00

ASEM-51 V1.3                                        Copyright (c) 2002 by W.W. Heinz                                         PAGE 55



 Line  I  Addr  Code            Source

       2  1500	00 00 FC 66
 2695: 2  1504	66 66 7C 60			db	066h, 066h, 07Ch, 060h, 060h, 060h, 060h, 0F0h, 000h, 000h, 000h, 000h
       2  1508	60 60 60 F0
       2  150C	00 00 00 00
 2696: 2  1510	00 00 7C C6			db	000h, 000h, 07Ch, 0C6h, 0C6h, 0C6h, 0C6h, 0C6h, 0C6h, 0D6h, 0DEh, 07Ch
       2  1514	C6 C6 C6 C6
       2  1518	C6 D6 DE 7C
 2697: 2  151C	0C 0E 00 00			db	00Ch, 00Eh, 000h, 000h, 000h, 000h, 0FCh, 066h, 066h, 066h, 07Ch, 06Ch
       2  1520	00 00 FC 66
       2  1524	66 66 7C 6C
 2698: 2  1528	66 66 66 E6			db	066h, 066h, 066h, 0E6h, 000h, 000h, 000h, 000h, 000h, 000h, 07Ch, 0C6h
       2  152C	00 00 00 00
       2  1530	00 00 7C C6
 2699: 2  1534	C6 60 38 0C			db	0C6h, 060h, 038h, 00Ch, 006h, 0C6h, 0C6h, 07Ch, 000h, 000h, 000h, 000h
       2  1538	06 C6 C6 7C
       2  153C	00 00 00 00
 2700: 2  1540	00 00 7E 7E			db	000h, 000h, 07Eh, 07Eh, 05Ah, 018h, 018h, 018h, 018h, 018h, 018h, 03Ch
       2  1544	5A 18 18 18
       2  1548	18 18 18 3C
 2701: 2  154C	00 00 00 00			db	000h, 000h, 000h, 000h, 000h, 000h, 0C6h, 0C6h, 0C6h, 0C6h, 0C6h, 0C6h
       2  1550	00 00 C6 C6
       2  1554	C6 C6 C6 C6
 2702: 2  1558	C6 C6 C6 7C			db	0C6h, 0C6h, 0C6h, 07Ch, 000h, 000h, 000h, 000h, 000h, 000h, 0C6h, 0C6h
       2  155C	00 00 00 00
       2  1560	00 00 C6 C6
 2703: 2  1564	C6 C6 C6 C6			db	0C6h, 0C6h, 0C6h, 0C6h, 0C6h, 06Ch, 038h, 010h, 000h, 000h, 000h, 000h
       2  1568	C6 6C 38 10
       2  156C	00 00 00 00
 2704: 2  1570	00 00 C6 C6			db	000h, 000h, 0C6h, 0C6h, 0C6h, 0C6h, 0D6h, 0D6h, 0D6h, 0FEh, 0EEh, 06Ch
       2  1574	C6 C6 D6 D6
       2  1578	D6 FE EE 6C
 2705: 2  157C	00 00 00 00			db	000h, 000h, 000h, 000h, 000h, 000h, 0C6h, 0C6h, 06Ch, 07Ch, 038h, 038h
       2  1580	00 00 C6 C6
       2  1584	6C 7C 38 38
 2706: 2  1588	7C 6C C6 C6			db	07Ch, 06Ch, 0C6h, 0C6h, 000h, 000h, 000h, 000h, 000h, 000h, 066h, 066h
       2  158C	00 00 00 00
       2  1590	00 00 66 66
 2707: 2  1594	66 66 3C 18			db	066h, 066h, 03Ch, 018h, 018h, 018h, 018h, 03Ch, 000h, 000h, 000h, 000h
       2  1598	18 18 18 3C
       2  159C	00 00 00 00
 2708: 2  15A0	00 00 FE C6			db	000h, 000h, 0FEh, 0C6h, 086h, 00Ch, 018h, 030h, 060h, 0C2h, 0C6h, 0FEh
       2  15A4	86 0C 18 30
       2  15A8	60 C2 C6 FE
 2709: 2  15AC	00 00 00 00			db	000h, 000h, 000h, 000h, 000h, 000h, 03Ch, 030h, 030h, 030h, 030h, 030h
       2  15B0	00 00 3C 30
       2  15B4	30 30 30 30
 2710: 2  15B8	30 30 30 3C			db	030h, 030h, 030h, 03Ch, 000h, 000h, 000h, 000h, 000h, 000h, 000h, 080h
       2  15BC	00 00 00 00
       2  15C0	00 00 00 80
 2711: 2  15C4	C0 E0 70 38			db	0C0h, 0E0h, 070h, 038h, 01Ch, 00Eh, 006h, 002h, 000h, 000h, 000h, 000h
       2  15C8	1C 0E 06 02
       2  15CC	00 00 00 00
 2712: 2  15D0	00 00 3C 0C			db	000h, 000h, 03Ch, 00Ch, 00Ch, 00Ch, 00Ch, 00Ch, 00Ch, 00Ch, 00Ch, 03Ch
       2  15D4	0C 0C 0C 0C
       2  15D8	0C 0C 0C 3C
 2713: 2  15DC	00 00 00 00			db	000h, 000h, 000h, 000h, 010h, 038h, 06Ch, 0C6h, 000h, 000h, 000h, 000h

ASEM-51 V1.3                                        Copyright (c) 2002 by W.W. Heinz                                         PAGE 56



 Line  I  Addr  Code            Source

       2  15E0	10 38 6C C6
       2  15E4	00 00 00 00
 2714: 2  15E8	00 00 00 00			db	000h, 000h, 000h, 000h, 000h, 000h, 000h, 000h, 000h, 000h, 000h, 000h
       2  15EC	00 00 00 00
       2  15F0	00 00 00 00
 2715: 2  15F4	00 00 00 00			db	000h, 000h, 000h, 000h, 000h, 000h, 000h, 000h, 000h, 0FFh, 000h, 000h
       2  15F8	00 00 00 00
       2  15FC	00 FF 00 00
 2716: 2  1600	30 30 18 00			db	030h, 030h, 018h, 000h, 000h, 000h, 000h, 000h, 000h, 000h, 000h, 000h
       2  1604	00 00 00 00
       2  1608	00 00 00 00
 2717: 2  160C	00 00 00 00			db	000h, 000h, 000h, 000h, 000h, 000h, 000h, 000h, 000h, 078h, 00Ch, 07Ch
       2  1610	00 00 00 00
       2  1614	00 78 0C 7C
 2718: 2  1618	CC CC CC 76			db	0CCh, 0CCh, 0CCh, 076h, 000h, 000h, 000h, 000h, 000h, 000h, 0E0h, 060h
       2  161C	00 00 00 00
       2  1620	00 00 E0 60
 2719: 2  1624	60 78 6C 66			db	060h, 078h, 06Ch, 066h, 066h, 066h, 066h, 07Ch, 000h, 000h, 000h, 000h
       2  1628	66 66 66 7C
       2  162C	00 00 00 00
 2720: 2  1630	00 00 00 00			db	000h, 000h, 000h, 000h, 000h, 07Ch, 0C6h, 0C0h, 0C0h, 0C0h, 0C6h, 07Ch
       2  1634	00 7C C6 C0
       2  1638	C0 C0 C6 7C
 2721: 2  163C	00 00 00 00			db	000h, 000h, 000h, 000h, 000h, 000h, 01Ch, 00Ch, 00Ch, 03Ch, 06Ch, 0CCh
       2  1640	00 00 1C 0C
       2  1644	0C 3C 6C CC
 2722: 2  1648	CC CC CC 76			db	0CCh, 0CCh, 0CCh, 076h, 000h, 000h, 000h, 000h, 000h, 000h, 000h, 000h
       2  164C	00 00 00 00
       2  1650	00 00 00 00
 2723: 2  1654	00 7C C6 FE			db	000h, 07Ch, 0C6h, 0FEh, 0C0h, 0C0h, 0C6h, 07Ch, 000h, 000h, 000h, 000h
       2  1658	C0 C0 C6 7C
       2  165C	00 00 00 00
 2724: 2  1660	00 00 38 6C			db	000h, 000h, 038h, 06Ch, 064h, 060h, 0F0h, 060h, 060h, 060h, 060h, 0F0h
       2  1664	64 60 F0 60
       2  1668	60 60 60 F0
 2725: 2  166C	00 00 00 00			db	000h, 000h, 000h, 000h, 000h, 000h, 000h, 000h, 000h, 076h, 0CCh, 0CCh
       2  1670	00 00 00 00
       2  1674	00 76 CC CC
 2726: 2  1678	CC CC CC 7C			db	0CCh, 0CCh, 0CCh, 07Ch, 00Ch, 0CCh, 078h, 000h, 000h, 000h, 0E0h, 060h
       2  167C	0C CC 78 00
       2  1680	00 00 E0 60
 2727: 2  1684	60 6C 76 66			db	060h, 06Ch, 076h, 066h, 066h, 066h, 066h, 0E6h, 000h, 000h, 000h, 000h
       2  1688	66 66 66 E6
       2  168C	00 00 00 00
 2728: 2  1690	00 00 18 18			db	000h, 000h, 018h, 018h, 000h, 038h, 018h, 018h, 018h, 018h, 018h, 03Ch
       2  1694	00 38 18 18
       2  1698	18 18 18 3C
 2729: 2  169C	00 00 00 00			db	000h, 000h, 000h, 000h, 000h, 000h, 006h, 006h, 000h, 00Eh, 006h, 006h
       2  16A0	00 00 06 06
       2  16A4	00 0E 06 06
 2730: 2  16A8	06 06 06 06			db	006h, 006h, 006h, 006h, 066h, 066h, 03Ch, 000h, 000h, 000h, 0E0h, 060h
       2  16AC	66 66 3C 00
       2  16B0	00 00 E0 60
 2731: 2  16B4	60 66 6C 78			db	060h, 066h, 06Ch, 078h, 078h, 06Ch, 066h, 0E6h, 000h, 000h, 000h, 000h
       2  16B8	78 6C 66 E6
       2  16BC	00 00 00 00

ASEM-51 V1.3                                        Copyright (c) 2002 by W.W. Heinz                                         PAGE 57



 Line  I  Addr  Code            Source

 2732: 2  16C0	00 00 38 18			db	000h, 000h, 038h, 018h, 018h, 018h, 018h, 018h, 018h, 018h, 018h, 03Ch
       2  16C4	18 18 18 18
       2  16C8	18 18 18 3C
 2733: 2  16CC	00 00 00 00			db	000h, 000h, 000h, 000h, 000h, 000h, 000h, 000h, 000h, 0ECh, 0FEh, 0D6h
       2  16D0	00 00 00 00
       2  16D4	00 EC FE D6
 2734: 2  16D8	D6 D6 D6 C6			db	0D6h, 0D6h, 0D6h, 0C6h, 000h, 000h, 000h, 000h, 000h, 000h, 000h, 000h
       2  16DC	00 00 00 00
       2  16E0	00 00 00 00
 2735: 2  16E4	00 DC 66 66			db	000h, 0DCh, 066h, 066h, 066h, 066h, 066h, 066h, 000h, 000h, 000h, 000h
       2  16E8	66 66 66 66
       2  16EC	00 00 00 00
 2736: 2  16F0	00 00 00 00			db	000h, 000h, 000h, 000h, 000h, 07Ch, 0C6h, 0C6h, 0C6h, 0C6h, 0C6h, 07Ch
       2  16F4	00 7C C6 C6
       2  16F8	C6 C6 C6 7C
 2737: 2  16FC	00 00 00 00			db	000h, 000h, 000h, 000h, 000h, 000h, 000h, 000h, 000h, 0DCh, 066h, 066h
       2  1700	00 00 00 00
       2  1704	00 DC 66 66
 2738: 2  1708	66 66 66 7C			db	066h, 066h, 066h, 07Ch, 060h, 060h, 0F0h, 000h, 000h, 000h, 000h, 000h
       2  170C	60 60 F0 00
       2  1710	00 00 00 00
 2739: 2  1714	00 76 CC CC			db	000h, 076h, 0CCh, 0CCh, 0CCh, 0CCh, 0CCh, 07Ch, 00Ch, 00Ch, 01Eh, 000h
       2  1718	CC CC CC 7C
       2  171C	0C 0C 1E 00
 2740: 2  1720	00 00 00 00			db	000h, 000h, 000h, 000h, 000h, 0DCh, 076h, 066h, 060h, 060h, 060h, 0F0h
       2  1724	00 DC 76 66
       2  1728	60 60 60 F0
 2741: 2  172C	00 00 00 00			db	000h, 000h, 000h, 000h, 000h, 000h, 000h, 000h, 000h, 07Ch, 0C6h, 060h
       2  1730	00 00 00 00
       2  1734	00 7C C6 60
 2742: 2  1738	38 0C C6 7C			db	038h, 00Ch, 0C6h, 07Ch, 000h, 000h, 000h, 000h, 000h, 000h, 010h, 030h
       2  173C	00 00 00 00
       2  1740	00 00 10 30
 2743: 2  1744	30 FC 30 30			db	030h, 0FCh, 030h, 030h, 030h, 030h, 036h, 01Ch, 000h, 000h, 000h, 000h
       2  1748	30 30 36 1C
       2  174C	00 00 00 00
 2744: 2  1750	00 00 00 00			db	000h, 000h, 000h, 000h, 000h, 0CCh, 0CCh, 0CCh, 0CCh, 0CCh, 0CCh, 076h
       2  1754	00 CC CC CC
       2  1758	CC CC CC 76
 2745: 2  175C	00 00 00 00			db	000h, 000h, 000h, 000h, 000h, 000h, 000h, 000h, 000h, 066h, 066h, 066h
       2  1760	00 00 00 00
       2  1764	00 66 66 66
 2746: 2  1768	66 66 3C 18			db	066h, 066h, 03Ch, 018h, 000h, 000h, 000h, 000h, 000h, 000h, 000h, 000h
       2  176C	00 00 00 00
       2  1770	00 00 00 00
 2747: 2  1774	00 C6 C6 D6			db	000h, 0C6h, 0C6h, 0D6h, 0D6h, 0D6h, 0FEh, 06Ch, 000h, 000h, 000h, 000h
       2  1778	D6 D6 FE 6C
       2  177C	00 00 00 00
 2748: 2  1780	00 00 00 00			db	000h, 000h, 000h, 000h, 000h, 0C6h, 06Ch, 038h, 038h, 038h, 06Ch, 0C6h
       2  1784	00 C6 6C 38
       2  1788	38 38 6C C6
 2749: 2  178C	00 00 00 00			db	000h, 000h, 000h, 000h, 000h, 000h, 000h, 000h, 000h, 0C6h, 0C6h, 0C6h
       2  1790	00 00 00 00
       2  1794	00 C6 C6 C6
 2750: 2  1798	C6 C6 C6 7E			db	0C6h, 0C6h, 0C6h, 07Eh, 006h, 00Ch, 0F8h, 000h, 000h, 000h, 000h, 000h
       2  179C	06 0C F8 00

ASEM-51 V1.3                                        Copyright (c) 2002 by W.W. Heinz                                         PAGE 58



 Line  I  Addr  Code            Source

       2  17A0	00 00 00 00
 2751: 2  17A4	00 FE CC 18			db	000h, 0FEh, 0CCh, 018h, 030h, 060h, 0C6h, 0FEh, 000h, 000h, 000h, 000h
       2  17A8	30 60 C6 FE
       2  17AC	00 00 00 00
 2752: 2  17B0	00 00 0E 18			db	000h, 000h, 00Eh, 018h, 018h, 018h, 070h, 018h, 018h, 018h, 018h, 00Eh
       2  17B4	18 18 70 18
       2  17B8	18 18 18 0E
 2753: 2  17BC	00 00 00 00			db	000h, 000h, 000h, 000h, 000h, 000h, 018h, 018h, 018h, 018h, 000h, 018h
       2  17C0	00 00 18 18
       2  17C4	18 18 00 18
 2754: 2  17C8	18 18 18 18			db	018h, 018h, 018h, 018h, 000h, 000h, 000h, 000h, 000h, 000h, 070h, 018h
       2  17CC	00 00 00 00
       2  17D0	00 00 70 18
 2755: 2  17D4	18 18 0E 18			db	018h, 018h, 00Eh, 018h, 018h, 018h, 018h, 070h, 000h, 000h, 000h, 000h
       2  17D8	18 18 18 70
       2  17DC	00 00 00 00
 2756: 2  17E0	00 00 76 DC			db	000h, 000h, 076h, 0DCh, 000h, 000h, 000h, 000h, 000h, 000h, 000h, 000h
       2  17E4	00 00 00 00
       2  17E8	00 00 00 00
 2757: 2  17EC	00 00 00 00			db	000h, 000h, 000h, 000h, 000h, 000h, 000h, 000h, 010h, 038h, 06Ch, 0C6h
       2  17F0	00 00 00 00
       2  17F4	10 38 6C C6
 2758: 2  17F8	C6 C6 FE 00			db	0C6h, 0C6h, 0FEh, 000h, 000h, 000h, 000h, 000h, 000h, 000h, 03Ch, 066h
       2  17FC	00 00 00 00
       2  1800	00 00 3C 66
 2759: 2  1804	C2 C0 C0 C0			db	0C2h, 0C0h, 0C0h, 0C0h, 0C2h, 066h, 03Ch, 00Ch, 006h, 07Ch, 000h, 000h
       2  1808	C2 66 3C 0C
       2  180C	06 7C 00 00
 2760: 2  1810	00 00 CC 00			db	000h, 000h, 0CCh, 000h, 000h, 0CCh, 0CCh, 0CCh, 0CCh, 0CCh, 0CCh, 076h
       2  1814	00 CC CC CC
       2  1818	CC CC CC 76
 2761: 2  181C	00 00 00 00			db	000h, 000h, 000h, 000h, 000h, 00Ch, 018h, 030h, 000h, 07Ch, 0C6h, 0FEh
       2  1820	00 0C 18 30
       2  1824	00 7C C6 FE
 2762: 2  1828	C0 C0 C6 7C			db	0C0h, 0C0h, 0C6h, 07Ch, 000h, 000h, 000h, 000h, 000h, 010h, 038h, 06Ch
       2  182C	00 00 00 00
       2  1830	00 10 38 6C
 2763: 2  1834	00 78 0C 7C			db	000h, 078h, 00Ch, 07Ch, 0CCh, 0CCh, 0CCh, 076h, 000h, 000h, 000h, 000h
       2  1838	CC CC CC 76
       2  183C	00 00 00 00
 2764: 2  1840	00 00 CC 00			db	000h, 000h, 0CCh, 000h, 000h, 078h, 00Ch, 07Ch, 0CCh, 0CCh, 0CCh, 076h
       2  1844	00 78 0C 7C
       2  1848	CC CC CC 76
 2765: 2  184C	00 00 00 00			db	000h, 000h, 000h, 000h, 000h, 060h, 030h, 018h, 000h, 078h, 00Ch, 07Ch
       2  1850	00 60 30 18
       2  1854	00 78 0C 7C
 2766: 2  1858	CC CC CC 76			db	0CCh, 0CCh, 0CCh, 076h, 000h, 000h, 000h, 000h, 000h, 038h, 06Ch, 038h
       2  185C	00 00 00 00
       2  1860	00 38 6C 38
 2767: 2  1864	00 78 0C 7C			db	000h, 078h, 00Ch, 07Ch, 0CCh, 0CCh, 0CCh, 076h, 000h, 000h, 000h, 000h
       2  1868	CC CC CC 76
       2  186C	00 00 00 00
 2768: 2  1870	00 00 00 00			db	000h, 000h, 000h, 000h, 03Ch, 066h, 060h, 060h, 066h, 03Ch, 00Ch, 006h
       2  1874	3C 66 60 60
       2  1878	66 3C 0C 06
 2769: 2  187C	3C 00 00 00			db	03Ch, 000h, 000h, 000h, 000h, 010h, 038h, 06Ch, 000h, 07Ch, 0C6h, 0FEh

ASEM-51 V1.3                                        Copyright (c) 2002 by W.W. Heinz                                         PAGE 59



 Line  I  Addr  Code            Source

       2  1880	00 10 38 6C
       2  1884	00 7C C6 FE
 2770: 2  1888	C0 C0 C6 7C			db	0C0h, 0C0h, 0C6h, 07Ch, 000h, 000h, 000h, 000h, 000h, 000h, 0C6h, 000h
       2  188C	00 00 00 00
       2  1890	00 00 C6 00
 2771: 2  1894	00 7C C6 FE			db	000h, 07Ch, 0C6h, 0FEh, 0C0h, 0C0h, 0C6h, 07Ch, 000h, 000h, 000h, 000h
       2  1898	C0 C0 C6 7C
       2  189C	00 00 00 00
 2772: 2  18A0	00 60 30 18			db	000h, 060h, 030h, 018h, 000h, 07Ch, 0C6h, 0FEh, 0C0h, 0C0h, 0C6h, 07Ch
       2  18A4	00 7C C6 FE
       2  18A8	C0 C0 C6 7C
 2773: 2  18AC	00 00 00 00			db	000h, 000h, 000h, 000h, 000h, 000h, 066h, 000h, 000h, 038h, 018h, 018h
       2  18B0	00 00 66 00
       2  18B4	00 38 18 18
 2774: 2  18B8	18 18 18 3C			db	018h, 018h, 018h, 03Ch, 000h, 000h, 000h, 000h, 000h, 018h, 03Ch, 066h
       2  18BC	00 00 00 00
       2  18C0	00 18 3C 66
 2775: 2  18C4	00 38 18 18			db	000h, 038h, 018h, 018h, 018h, 018h, 018h, 03Ch, 000h, 000h, 000h, 000h
       2  18C8	18 18 18 3C
       2  18CC	00 00 00 00
 2776: 2  18D0	00 60 30 18			db	000h, 060h, 030h, 018h, 000h, 038h, 018h, 018h, 018h, 018h, 018h, 03Ch
       2  18D4	00 38 18 18
       2  18D8	18 18 18 3C
 2777: 2  18DC	00 00 00 00			db	000h, 000h, 000h, 000h, 000h, 0C6h, 000h, 010h, 038h, 06Ch, 0C6h, 0C6h
       2  18E0	00 C6 00 10
       2  18E4	38 6C C6 C6
 2778: 2  18E8	FE C6 C6 C6			db	0FEh, 0C6h, 0C6h, 0C6h, 000h, 000h, 000h, 000h, 038h, 06Ch, 038h, 000h
       2  18EC	00 00 00 00
       2  18F0	38 6C 38 00
 2779: 2  18F4	38 6C C6 C6			db	038h, 06Ch, 0C6h, 0C6h, 0FEh, 0C6h, 0C6h, 0C6h, 000h, 000h, 000h, 000h
       2  18F8	FE C6 C6 C6
       2  18FC	00 00 00 00
 2780: 2  1900	18 30 60 00			db	018h, 030h, 060h, 000h, 0FEh, 066h, 060h, 07Ch, 060h, 060h, 066h, 0FEh
       2  1904	FE 66 60 7C
       2  1908	60 60 66 FE
 2781: 2  190C	00 00 00 00			db	000h, 000h, 000h, 000h, 000h, 000h, 000h, 000h, 000h, 0CCh, 076h, 036h
       2  1910	00 00 00 00
       2  1914	00 CC 76 36
 2782: 2  1918	7E D8 D8 6E			db	07Eh, 0D8h, 0D8h, 06Eh, 000h, 000h, 000h, 000h, 000h, 000h, 03Eh, 06Ch
       2  191C	00 00 00 00
       2  1920	00 00 3E 6C
 2783: 2  1924	CC CC FE CC			db	0CCh, 0CCh, 0FEh, 0CCh, 0CCh, 0CCh, 0CCh, 0CEh, 000h, 000h, 000h, 000h
       2  1928	CC CC CC CE
       2  192C	00 00 00 00
 2784: 2  1930	00 10 38 6C			db	000h, 010h, 038h, 06Ch, 000h, 07Ch, 0C6h, 0C6h, 0C6h, 0C6h, 0C6h, 07Ch
       2  1934	00 7C C6 C6
       2  1938	C6 C6 C6 7C
 2785: 2  193C	00 00 00 00			db	000h, 000h, 000h, 000h, 000h, 000h, 0C6h, 000h, 000h, 07Ch, 0C6h, 0C6h
       2  1940	00 00 C6 00
       2  1944	00 7C C6 C6
 2786: 2  1948	C6 C6 C6 7C			db	0C6h, 0C6h, 0C6h, 07Ch, 000h, 000h, 000h, 000h, 000h, 060h, 030h, 018h
       2  194C	00 00 00 00
       2  1950	00 60 30 18
 2787: 2  1954	00 7C C6 C6			db	000h, 07Ch, 0C6h, 0C6h, 0C6h, 0C6h, 0C6h, 07Ch, 000h, 000h, 000h, 000h
       2  1958	C6 C6 C6 7C
       2  195C	00 00 00 00

ASEM-51 V1.3                                        Copyright (c) 2002 by W.W. Heinz                                         PAGE 60



 Line  I  Addr  Code            Source

 2788: 2  1960	00 30 78 CC			db	000h, 030h, 078h, 0CCh, 000h, 0CCh, 0CCh, 0CCh, 0CCh, 0CCh, 0CCh, 076h
       2  1964	00 CC CC CC
       2  1968	CC CC CC 76
 2789: 2  196C	00 00 00 00			db	000h, 000h, 000h, 000h, 000h, 060h, 030h, 018h, 000h, 0CCh, 0CCh, 0CCh
       2  1970	00 60 30 18
       2  1974	00 CC CC CC
 2790: 2  1978	CC CC CC 76			db	0CCh, 0CCh, 0CCh, 076h, 000h, 000h, 000h, 000h, 000h, 000h, 0C6h, 000h
       2  197C	00 00 00 00
       2  1980	00 00 C6 00
 2791: 2  1984	00 C6 C6 C6			db	000h, 0C6h, 0C6h, 0C6h, 0C6h, 0C6h, 0C6h, 07Eh, 006h, 00Ch, 078h, 000h
       2  1988	C6 C6 C6 7E
       2  198C	06 0C 78 00
 2792: 2  1990	00 C6 00 7C			db	000h, 0C6h, 000h, 07Ch, 0C6h, 0C6h, 0C6h, 0C6h, 0C6h, 0C6h, 0C6h, 07Ch
       2  1994	C6 C6 C6 C6
       2  1998	C6 C6 C6 7C
 2793: 2  199C	00 00 00 00			db	000h, 000h, 000h, 000h, 000h, 0C6h, 000h, 0C6h, 0C6h, 0C6h, 0C6h, 0C6h
       2  19A0	00 C6 00 C6
       2  19A4	C6 C6 C6 C6
 2794: 2  19A8	C6 C6 C6 7C			db	0C6h, 0C6h, 0C6h, 07Ch, 000h, 000h, 000h, 000h, 000h, 018h, 018h, 03Ch
       2  19AC	00 00 00 00
       2  19B0	00 18 18 3C
 2795: 2  19B4	66 60 60 60			db	066h, 060h, 060h, 060h, 066h, 03Ch, 018h, 018h, 000h, 000h, 000h, 000h
       2  19B8	66 3C 18 18
       2  19BC	00 00 00 00
 2796: 2  19C0	00 38 6C 64			db	000h, 038h, 06Ch, 064h, 060h, 0F0h, 060h, 060h, 060h, 060h, 0E6h, 0FCh
       2  19C4	60 F0 60 60
       2  19C8	60 60 E6 FC
 2797: 2  19CC	00 00 00 00			db	000h, 000h, 000h, 000h, 000h, 000h, 066h, 066h, 03Ch, 018h, 07Eh, 018h
       2  19D0	00 00 66 66
       2  19D4	3C 18 7E 18
 2798: 2  19D8	7E 18 18 18			db	07Eh, 018h, 018h, 018h, 000h, 000h, 000h, 000h, 000h, 0F8h, 0CCh, 0CCh
       2  19DC	00 00 00 00
       2  19E0	00 F8 CC CC
 2799: 2  19E4	F8 C4 CC DE			db	0F8h, 0C4h, 0CCh, 0DEh, 0CCh, 0CCh, 0CCh, 0C6h, 000h, 000h, 000h, 000h
       2  19E8	CC CC CC C6
       2  19EC	00 00 00 00
 2800: 2  19F0	00 0E 1B 18			db	000h, 00Eh, 01Bh, 018h, 018h, 018h, 07Eh, 018h, 018h, 018h, 018h, 018h
       2  19F4	18 18 7E 18
       2  19F8	18 18 18 18
 2801: 2  19FC	D8 70 00 00			db	0D8h, 070h, 000h, 000h, 000h, 018h, 030h, 060h, 000h, 078h, 00Ch, 07Ch
       2  1A00	00 18 30 60
       2  1A04	00 78 0C 7C
 2802: 2  1A08	CC CC CC 76			db	0CCh, 0CCh, 0CCh, 076h, 000h, 000h, 000h, 000h, 000h, 00Ch, 018h, 030h
       2  1A0C	00 00 00 00
       2  1A10	00 0C 18 30
 2803: 2  1A14	00 38 18 18			db	000h, 038h, 018h, 018h, 018h, 018h, 018h, 03Ch, 000h, 000h, 000h, 000h
       2  1A18	18 18 18 3C
       2  1A1C	00 00 00 00
 2804: 2  1A20	00 18 30 60			db	000h, 018h, 030h, 060h, 000h, 07Ch, 0C6h, 0C6h, 0C6h, 0C6h, 0C6h, 07Ch
       2  1A24	00 7C C6 C6
       2  1A28	C6 C6 C6 7C
 2805: 2  1A2C	00 00 00 00			db	000h, 000h, 000h, 000h, 000h, 018h, 030h, 060h, 000h, 0CCh, 0CCh, 0CCh
       2  1A30	00 18 30 60
       2  1A34	00 CC CC CC
 2806: 2  1A38	CC CC CC 76			db	0CCh, 0CCh, 0CCh, 076h, 000h, 000h, 000h, 000h, 000h, 000h, 076h, 0DCh
       2  1A3C	00 00 00 00

ASEM-51 V1.3                                        Copyright (c) 2002 by W.W. Heinz                                         PAGE 61



 Line  I  Addr  Code            Source

       2  1A40	00 00 76 DC
 2807: 2  1A44	00 DC 66 66			db	000h, 0DCh, 066h, 066h, 066h, 066h, 066h, 066h, 000h, 000h, 000h, 000h
       2  1A48	66 66 66 66
       2  1A4C	00 00 00 00
 2808: 2  1A50	76 DC 00 C6			db	076h, 0DCh, 000h, 0C6h, 0E6h, 0F6h, 0FEh, 0DEh, 0CEh, 0C6h, 0C6h, 0C6h
       2  1A54	E6 F6 FE DE
       2  1A58	CE C6 C6 C6
 2809: 2  1A5C	00 00 00 00			db	000h, 000h, 000h, 000h, 000h, 03Ch, 06Ch, 06Ch, 03Eh, 000h, 07Eh, 000h
       2  1A60	00 3C 6C 6C
       2  1A64	3E 00 7E 00
 2810: 2  1A68	00 00 00 00			db	000h, 000h, 000h, 000h, 000h, 000h, 000h, 000h, 000h, 038h, 06Ch, 06Ch
       2  1A6C	00 00 00 00
       2  1A70	00 38 6C 6C
 2811: 2  1A74	38 00 7C 00			db	038h, 000h, 07Ch, 000h, 000h, 000h, 000h, 000h, 000h, 000h, 000h, 000h
       2  1A78	00 00 00 00
       2  1A7C	00 00 00 00
 2812: 2  1A80	00 00 30 30			db	000h, 000h, 030h, 030h, 000h, 030h, 030h, 060h, 0C0h, 0C6h, 0C6h, 07Ch
       2  1A84	00 30 30 60
       2  1A88	C0 C6 C6 7C
 2813: 2  1A8C	00 00 00 00			db	000h, 000h, 000h, 000h, 000h, 000h, 000h, 000h, 000h, 000h, 0FEh, 0C0h
       2  1A90	00 00 00 00
       2  1A94	00 00 FE C0
 2814: 2  1A98	C0 C0 C0 00			db	0C0h, 0C0h, 0C0h, 000h, 000h, 000h, 000h, 000h, 000h, 000h, 000h, 000h
       2  1A9C	00 00 00 00
       2  1AA0	00 00 00 00
 2815: 2  1AA4	00 00 FE 06			db	000h, 000h, 0FEh, 006h, 006h, 006h, 006h, 000h, 000h, 000h, 000h, 000h
       2  1AA8	06 06 06 00
       2  1AAC	00 00 00 00
 2816: 2  1AB0	00 C0 C0 C2			db	000h, 0C0h, 0C0h, 0C2h, 0C6h, 0CCh, 018h, 030h, 060h, 0DCh, 086h, 00Ch
       2  1AB4	C6 CC 18 30
       2  1AB8	60 DC 86 0C
 2817: 2  1ABC	18 3E 00 00			db	018h, 03Eh, 000h, 000h, 000h, 0C0h, 0C0h, 0C2h, 0C6h, 0CCh, 018h, 030h
       2  1AC0	00 C0 C0 C2
       2  1AC4	C6 CC 18 30
 2818: 2  1AC8	66 CE 9E 3E			db	066h, 0CEh, 09Eh, 03Eh, 006h, 006h, 000h, 000h, 000h, 000h, 018h, 018h
       2  1ACC	06 06 00 00
       2  1AD0	00 00 18 18
 2819: 2  1AD4	00 18 18 18			db	000h, 018h, 018h, 018h, 03Ch, 03Ch, 03Ch, 018h, 000h, 000h, 000h, 000h
       2  1AD8	3C 3C 3C 18
       2  1ADC	00 00 00 00
 2820: 2  1AE0	00 00 00 00			db	000h, 000h, 000h, 000h, 000h, 036h, 06Ch, 0D8h, 06Ch, 036h, 000h, 000h
       2  1AE4	00 36 6C D8
       2  1AE8	6C 36 00 00
 2821: 2  1AEC	00 00 00 00			db	000h, 000h, 000h, 000h, 000h, 000h, 000h, 000h, 000h, 0D8h, 06Ch, 036h
       2  1AF0	00 00 00 00
       2  1AF4	00 D8 6C 36
 2822: 2  1AF8	6C D8 00 00			db	06Ch, 0D8h, 000h, 000h, 000h, 000h, 000h, 000h, 011h, 044h, 011h, 044h
       2  1AFC	00 00 00 00
       2  1B00	11 44 11 44
 2823: 2  1B04	11 44 11 44			db	011h, 044h, 011h, 044h, 011h, 044h, 011h, 044h, 011h, 044h, 011h, 044h
       2  1B08	11 44 11 44
       2  1B0C	11 44 11 44
 2824: 2  1B10	55 AA 55 AA			db	055h, 0AAh, 055h, 0AAh, 055h, 0AAh, 055h, 0AAh, 055h, 0AAh, 055h, 0AAh
       2  1B14	55 AA 55 AA
       2  1B18	55 AA 55 AA
 2825: 2  1B1C	55 AA 55 AA			db	055h, 0AAh, 055h, 0AAh, 0DDh, 077h, 0DDh, 077h, 0DDh, 077h, 0DDh, 077h

ASEM-51 V1.3                                        Copyright (c) 2002 by W.W. Heinz                                         PAGE 62



 Line  I  Addr  Code            Source

       2  1B20	DD 77 DD 77
       2  1B24	DD 77 DD 77
 2826: 2  1B28	DD 77 DD 77			db	0DDh, 077h, 0DDh, 077h, 0DDh, 077h, 0DDh, 077h, 018h, 018h, 018h, 018h
       2  1B2C	DD 77 DD 77
       2  1B30	18 18 18 18
 2827: 2  1B34	18 18 18 18			db	018h, 018h, 018h, 018h, 018h, 018h, 018h, 018h, 018h, 018h, 018h, 018h
       2  1B38	18 18 18 18
       2  1B3C	18 18 18 18
 2828: 2  1B40	18 18 18 18			db	018h, 018h, 018h, 018h, 018h, 018h, 018h, 0F8h, 018h, 018h, 018h, 018h
       2  1B44	18 18 18 F8
       2  1B48	18 18 18 18
 2829: 2  1B4C	18 18 18 18			db	018h, 018h, 018h, 018h, 018h, 018h, 018h, 018h, 018h, 0F8h, 018h, 0F8h
       2  1B50	18 18 18 18
       2  1B54	18 F8 18 F8
 2830: 2  1B58	18 18 18 18			db	018h, 018h, 018h, 018h, 018h, 018h, 018h, 018h, 036h, 036h, 036h, 036h
       2  1B5C	18 18 18 18
       2  1B60	36 36 36 36
 2831: 2  1B64	36 36 36 F6			db	036h, 036h, 036h, 0F6h, 036h, 036h, 036h, 036h, 036h, 036h, 036h, 036h
       2  1B68	36 36 36 36
       2  1B6C	36 36 36 36
 2832: 2  1B70	00 00 00 00			db	000h, 000h, 000h, 000h, 000h, 000h, 000h, 0FEh, 036h, 036h, 036h, 036h
       2  1B74	00 00 00 FE
       2  1B78	36 36 36 36
 2833: 2  1B7C	36 36 36 36			db	036h, 036h, 036h, 036h, 000h, 000h, 000h, 000h, 000h, 0F8h, 018h, 0F8h
       2  1B80	00 00 00 00
       2  1B84	00 F8 18 F8
 2834: 2  1B88	18 18 18 18			db	018h, 018h, 018h, 018h, 018h, 018h, 018h, 018h, 036h, 036h, 036h, 036h
       2  1B8C	18 18 18 18
       2  1B90	36 36 36 36
 2835: 2  1B94	36 F6 06 F6			db	036h, 0F6h, 006h, 0F6h, 036h, 036h, 036h, 036h, 036h, 036h, 036h, 036h
       2  1B98	36 36 36 36
       2  1B9C	36 36 36 36
 2836: 2  1BA0	36 36 36 36			db	036h, 036h, 036h, 036h, 036h, 036h, 036h, 036h, 036h, 036h, 036h, 036h
       2  1BA4	36 36 36 36
       2  1BA8	36 36 36 36
 2837: 2  1BAC	36 36 36 36			db	036h, 036h, 036h, 036h, 000h, 000h, 000h, 000h, 000h, 0FEh, 006h, 0F6h
       2  1BB0	00 00 00 00
       2  1BB4	00 FE 06 F6
 2838: 2  1BB8	36 36 36 36			db	036h, 036h, 036h, 036h, 036h, 036h, 036h, 036h, 036h, 036h, 036h, 036h
       2  1BBC	36 36 36 36
       2  1BC0	36 36 36 36
 2839: 2  1BC4	36 F6 06 FE			db	036h, 0F6h, 006h, 0FEh, 000h, 000h, 000h, 000h, 000h, 000h, 000h, 000h
       2  1BC8	00 00 00 00
       2  1BCC	00 00 00 00
 2840: 2  1BD0	36 36 36 36			db	036h, 036h, 036h, 036h, 036h, 036h, 036h, 0FEh, 000h, 000h, 000h, 000h
       2  1BD4	36 36 36 FE
       2  1BD8	00 00 00 00
 2841: 2  1BDC	00 00 00 00			db	000h, 000h, 000h, 000h, 018h, 018h, 018h, 018h, 018h, 0F8h, 018h, 0F8h
       2  1BE0	18 18 18 18
       2  1BE4	18 F8 18 F8
 2842: 2  1BE8	00 00 00 00			db	000h, 000h, 000h, 000h, 000h, 000h, 000h, 000h, 000h, 000h, 000h, 000h
       2  1BEC	00 00 00 00
       2  1BF0	00 00 00 00
 2843: 2  1BF4	00 00 00 F8			db	000h, 000h, 000h, 0F8h, 018h, 018h, 018h, 018h, 018h, 018h, 018h, 018h
       2  1BF8	18 18 18 18
       2  1BFC	18 18 18 18

ASEM-51 V1.3                                        Copyright (c) 2002 by W.W. Heinz                                         PAGE 63



 Line  I  Addr  Code            Source

 2844: 2  1C00	18 18 18 18			db	018h, 018h, 018h, 018h, 018h, 018h, 018h, 01Fh, 000h, 000h, 000h, 000h
       2  1C04	18 18 18 1F
       2  1C08	00 00 00 00
 2845: 2  1C0C	00 00 00 00			db	000h, 000h, 000h, 000h, 018h, 018h, 018h, 018h, 018h, 018h, 018h, 0FFh
       2  1C10	18 18 18 18
       2  1C14	18 18 18 FF
 2846: 2  1C18	00 00 00 00			db	000h, 000h, 000h, 000h, 000h, 000h, 000h, 000h, 000h, 000h, 000h, 000h
       2  1C1C	00 00 00 00
       2  1C20	00 00 00 00
 2847: 2  1C24	00 00 00 FF			db	000h, 000h, 000h, 0FFh, 018h, 018h, 018h, 018h, 018h, 018h, 018h, 018h
       2  1C28	18 18 18 18
       2  1C2C	18 18 18 18
 2848: 2  1C30	18 18 18 18			db	018h, 018h, 018h, 018h, 018h, 018h, 018h, 01Fh, 018h, 018h, 018h, 018h
       2  1C34	18 18 18 1F
       2  1C38	18 18 18 18
 2849: 2  1C3C	18 18 18 18			db	018h, 018h, 018h, 018h, 000h, 000h, 000h, 000h, 000h, 000h, 000h, 0FFh
       2  1C40	00 00 00 00
       2  1C44	00 00 00 FF
 2850: 2  1C48	00 00 00 00			db	000h, 000h, 000h, 000h, 000h, 000h, 000h, 000h, 018h, 018h, 018h, 018h
       2  1C4C	00 00 00 00
       2  1C50	18 18 18 18
 2851: 2  1C54	18 18 18 FF			db	018h, 018h, 018h, 0FFh, 018h, 018h, 018h, 018h, 018h, 018h, 018h, 018h
       2  1C58	18 18 18 18
       2  1C5C	18 18 18 18
 2852: 2  1C60	18 18 18 18			db	018h, 018h, 018h, 018h, 018h, 01Fh, 018h, 01Fh, 018h, 018h, 018h, 018h
       2  1C64	18 1F 18 1F
       2  1C68	18 18 18 18
 2853: 2  1C6C	18 18 18 18			db	018h, 018h, 018h, 018h, 036h, 036h, 036h, 036h, 036h, 036h, 036h, 037h
       2  1C70	36 36 36 36
       2  1C74	36 36 36 37
 2854: 2  1C78	36 36 36 36			db	036h, 036h, 036h, 036h, 036h, 036h, 036h, 036h, 036h, 036h, 036h, 036h
       2  1C7C	36 36 36 36
       2  1C80	36 36 36 36
 2855: 2  1C84	36 37 30 3F			db	036h, 037h, 030h, 03Fh, 000h, 000h, 000h, 000h, 000h, 000h, 000h, 000h
       2  1C88	00 00 00 00
       2  1C8C	00 00 00 00
 2856: 2  1C90	00 00 00 00			db	000h, 000h, 000h, 000h, 000h, 03Fh, 030h, 037h, 036h, 036h, 036h, 036h
       2  1C94	00 3F 30 37
       2  1C98	36 36 36 36
 2857: 2  1C9C	36 36 36 36			db	036h, 036h, 036h, 036h, 036h, 036h, 036h, 036h, 036h, 0F7h, 000h, 0FFh
       2  1CA0	36 36 36 36
       2  1CA4	36 F7 00 FF
 2858: 2  1CA8	00 00 00 00			db	000h, 000h, 000h, 000h, 000h, 000h, 000h, 000h, 000h, 000h, 000h, 000h
       2  1CAC	00 00 00 00
       2  1CB0	00 00 00 00
 2859: 2  1CB4	00 FF 00 F7			db	000h, 0FFh, 000h, 0F7h, 036h, 036h, 036h, 036h, 036h, 036h, 036h, 036h
       2  1CB8	36 36 36 36
       2  1CBC	36 36 36 36
 2860: 2  1CC0	36 36 36 36			db	036h, 036h, 036h, 036h, 036h, 037h, 030h, 037h, 036h, 036h, 036h, 036h
       2  1CC4	36 37 30 37
       2  1CC8	36 36 36 36
 2861: 2  1CCC	36 36 36 36			db	036h, 036h, 036h, 036h, 000h, 000h, 000h, 000h, 000h, 0FFh, 000h, 0FFh
       2  1CD0	00 00 00 00
       2  1CD4	00 FF 00 FF
 2862: 2  1CD8	00 00 00 00			db	000h, 000h, 000h, 000h, 000h, 000h, 000h, 000h, 036h, 036h, 036h, 036h
       2  1CDC	00 00 00 00

ASEM-51 V1.3                                        Copyright (c) 2002 by W.W. Heinz                                         PAGE 64



 Line  I  Addr  Code            Source

       2  1CE0	36 36 36 36
 2863: 2  1CE4	36 F7 00 F7			db	036h, 0F7h, 000h, 0F7h, 036h, 036h, 036h, 036h, 036h, 036h, 036h, 036h
       2  1CE8	36 36 36 36
       2  1CEC	36 36 36 36
 2864: 2  1CF0	18 18 18 18			db	018h, 018h, 018h, 018h, 018h, 0FFh, 000h, 0FFh, 000h, 000h, 000h, 000h
       2  1CF4	18 FF 00 FF
       2  1CF8	00 00 00 00
 2865: 2  1CFC	00 00 00 00			db	000h, 000h, 000h, 000h, 036h, 036h, 036h, 036h, 036h, 036h, 036h, 0FFh
       2  1D00	36 36 36 36
       2  1D04	36 36 36 FF
 2866: 2  1D08	00 00 00 00			db	000h, 000h, 000h, 000h, 000h, 000h, 000h, 000h, 000h, 000h, 000h, 000h
       2  1D0C	00 00 00 00
       2  1D10	00 00 00 00
 2867: 2  1D14	00 FF 00 FF			db	000h, 0FFh, 000h, 0FFh, 018h, 018h, 018h, 018h, 018h, 018h, 018h, 018h
       2  1D18	18 18 18 18
       2  1D1C	18 18 18 18
 2868: 2  1D20	00 00 00 00			db	000h, 000h, 000h, 000h, 000h, 000h, 000h, 0FFh, 036h, 036h, 036h, 036h
       2  1D24	00 00 00 FF
       2  1D28	36 36 36 36
 2869: 2  1D2C	36 36 36 36			db	036h, 036h, 036h, 036h, 036h, 036h, 036h, 036h, 036h, 036h, 036h, 03Fh
       2  1D30	36 36 36 36
       2  1D34	36 36 36 3F
 2870: 2  1D38	00 00 00 00			db	000h, 000h, 000h, 000h, 000h, 000h, 000h, 000h, 018h, 018h, 018h, 018h
       2  1D3C	00 00 00 00
       2  1D40	18 18 18 18
 2871: 2  1D44	18 1F 18 1F			db	018h, 01Fh, 018h, 01Fh, 000h, 000h, 000h, 000h, 000h, 000h, 000h, 000h
       2  1D48	00 00 00 00
       2  1D4C	00 00 00 00
 2872: 2  1D50	00 00 00 00			db	000h, 000h, 000h, 000h, 000h, 01Fh, 018h, 01Fh, 018h, 018h, 018h, 018h
       2  1D54	00 1F 18 1F
       2  1D58	18 18 18 18
 2873: 2  1D5C	18 18 18 18			db	018h, 018h, 018h, 018h, 000h, 000h, 000h, 000h, 000h, 000h, 000h, 03Fh
       2  1D60	00 00 00 00
       2  1D64	00 00 00 3F
 2874: 2  1D68	36 36 36 36			db	036h, 036h, 036h, 036h, 036h, 036h, 036h, 036h, 036h, 036h, 036h, 036h
       2  1D6C	36 36 36 36
       2  1D70	36 36 36 36
 2875: 2  1D74	36 36 36 FF			db	036h, 036h, 036h, 0FFh, 036h, 036h, 036h, 036h, 036h, 036h, 036h, 036h
       2  1D78	36 36 36 36
       2  1D7C	36 36 36 36
 2876: 2  1D80	18 18 18 18			db	018h, 018h, 018h, 018h, 018h, 0FFh, 018h, 0FFh, 018h, 018h, 018h, 018h
       2  1D84	18 FF 18 FF
       2  1D88	18 18 18 18
 2877: 2  1D8C	18 18 18 18			db	018h, 018h, 018h, 018h, 018h, 018h, 018h, 018h, 018h, 018h, 018h, 0F8h
       2  1D90	18 18 18 18
       2  1D94	18 18 18 F8
 2878: 2  1D98	00 00 00 00			db	000h, 000h, 000h, 000h, 000h, 000h, 000h, 000h, 000h, 000h, 000h, 000h
       2  1D9C	00 00 00 00
       2  1DA0	00 00 00 00
 2879: 2  1DA4	00 00 00 1F			db	000h, 000h, 000h, 01Fh, 018h, 018h, 018h, 018h, 018h, 018h, 018h, 018h
       2  1DA8	18 18 18 18
       2  1DAC	18 18 18 18
 2880: 2  1DB0	FF FF FF FF			db	0FFh, 0FFh, 0FFh, 0FFh, 0FFh, 0FFh, 0FFh, 0FFh, 0FFh, 0FFh, 0FFh, 0FFh
       2  1DB4	FF FF FF FF
       2  1DB8	FF FF FF FF
 2881: 2  1DBC	FF FF FF FF			db	0FFh, 0FFh, 0FFh, 0FFh, 000h, 000h, 000h, 000h, 000h, 000h, 000h, 0FFh

ASEM-51 V1.3                                        Copyright (c) 2002 by W.W. Heinz                                         PAGE 65



 Line  I  Addr  Code            Source

       2  1DC0	00 00 00 00
       2  1DC4	00 00 00 FF
 2882: 2  1DC8	FF FF FF FF			db	0FFh, 0FFh, 0FFh, 0FFh, 0FFh, 0FFh, 0FFh, 0FFh, 0F0h, 0F0h, 0F0h, 0F0h
       2  1DCC	FF FF FF FF
       2  1DD0	F0 F0 F0 F0
 2883: 2  1DD4	F0 F0 F0 F0			db	0F0h, 0F0h, 0F0h, 0F0h, 0F0h, 0F0h, 0F0h, 0F0h, 0F0h, 0F0h, 0F0h, 0F0h
       2  1DD8	F0 F0 F0 F0
       2  1DDC	F0 F0 F0 F0
 2884: 2  1DE0	0F 0F 0F 0F			db	00Fh, 00Fh, 00Fh, 00Fh, 00Fh, 00Fh, 00Fh, 00Fh, 00Fh, 00Fh, 00Fh, 00Fh
       2  1DE4	0F 0F 0F 0F
       2  1DE8	0F 0F 0F 0F
 2885: 2  1DEC	0F 0F 0F 0F			db	00Fh, 00Fh, 00Fh, 00Fh, 0FFh, 0FFh, 0FFh, 0FFh, 0FFh, 0FFh, 0FFh, 000h
       2  1DF0	FF FF FF FF
       2  1DF4	FF FF FF 00
 2886: 2  1DF8	00 00 00 00			db	000h, 000h, 000h, 000h, 000h, 000h, 000h, 000h, 000h, 000h, 000h, 000h
       2  1DFC	00 00 00 00
       2  1E00	00 00 00 00
 2887: 2  1E04	00 76 DC D8			db	000h, 076h, 0DCh, 0D8h, 0D8h, 0D8h, 0DCh, 076h, 000h, 000h, 000h, 000h
       2  1E08	D8 D8 DC 76
       2  1E0C	00 00 00 00
 2888: 2  1E10	00 00 78 CC			db	000h, 000h, 078h, 0CCh, 0CCh, 0CCh, 0D8h, 0CCh, 0C6h, 0C6h, 0C6h, 0CCh
       2  1E14	CC CC D8 CC
       2  1E18	C6 C6 C6 CC
 2889: 2  1E1C	00 00 00 00			db	000h, 000h, 000h, 000h, 000h, 000h, 0FEh, 0C6h, 0C6h, 0C0h, 0C0h, 0C0h
       2  1E20	00 00 FE C6
       2  1E24	C6 C0 C0 C0
 2890: 2  1E28	C0 C0 C0 C0			db	0C0h, 0C0h, 0C0h, 0C0h, 000h, 000h, 000h, 000h, 000h, 000h, 000h, 000h
       2  1E2C	00 00 00 00
       2  1E30	00 00 00 00
 2891: 2  1E34	FE 6C 6C 6C			db	0FEh, 06Ch, 06Ch, 06Ch, 06Ch, 06Ch, 06Ch, 06Ch, 000h, 000h, 000h, 000h
       2  1E38	6C 6C 6C 6C
       2  1E3C	00 00 00 00
 2892: 2  1E40	00 00 00 FE			db	000h, 000h, 000h, 0FEh, 0C6h, 060h, 030h, 018h, 030h, 060h, 0C6h, 0FEh
       2  1E44	C6 60 30 18
       2  1E48	30 60 C6 FE
 2893: 2  1E4C	00 00 00 00			db	000h, 000h, 000h, 000h, 000h, 000h, 000h, 000h, 000h, 07Eh, 0D8h, 0D8h
       2  1E50	00 00 00 00
       2  1E54	00 7E D8 D8
 2894: 2  1E58	D8 D8 D8 70			db	0D8h, 0D8h, 0D8h, 070h, 000h, 000h, 000h, 000h, 000h, 000h, 000h, 000h
       2  1E5C	00 00 00 00
       2  1E60	00 00 00 00
 2895: 2  1E64	66 66 66 66			db	066h, 066h, 066h, 066h, 066h, 07Ch, 060h, 060h, 0C0h, 000h, 000h, 000h
       2  1E68	66 7C 60 60
       2  1E6C	C0 00 00 00
 2896: 2  1E70	00 00 00 00			db	000h, 000h, 000h, 000h, 076h, 0DCh, 018h, 018h, 018h, 018h, 018h, 018h
       2  1E74	76 DC 18 18
       2  1E78	18 18 18 18
 2897: 2  1E7C	00 00 00 00			db	000h, 000h, 000h, 000h, 000h, 000h, 000h, 07Eh, 018h, 03Ch, 066h, 066h
       2  1E80	00 00 00 7E
       2  1E84	18 3C 66 66
 2898: 2  1E88	66 3C 18 7E			db	066h, 03Ch, 018h, 07Eh, 000h, 000h, 000h, 000h, 000h, 000h, 000h, 038h
       2  1E8C	00 00 00 00
       2  1E90	00 00 00 38
 2899: 2  1E94	6C C6 C6 FE			db	06Ch, 0C6h, 0C6h, 0FEh, 0C6h, 0C6h, 06Ch, 038h, 000h, 000h, 000h, 000h
       2  1E98	C6 C6 6C 38
       2  1E9C	00 00 00 00

ASEM-51 V1.3                                        Copyright (c) 2002 by W.W. Heinz                                         PAGE 66



 Line  I  Addr  Code            Source

 2900: 2  1EA0	00 00 38 6C			db	000h, 000h, 038h, 06Ch, 0C6h, 0C6h, 0C6h, 06Ch, 06Ch, 06Ch, 06Ch, 0EEh
       2  1EA4	C6 C6 C6 6C
       2  1EA8	6C 6C 6C EE
 2901: 2  1EAC	00 00 00 00			db	000h, 000h, 000h, 000h, 000h, 000h, 01Eh, 030h, 018h, 00Ch, 03Eh, 066h
       2  1EB0	00 00 1E 30
       2  1EB4	18 0C 3E 66
 2902: 2  1EB8	66 66 66 3C			db	066h, 066h, 066h, 03Ch, 000h, 000h, 000h, 000h, 000h, 000h, 000h, 000h
       2  1EBC	00 00 00 00
       2  1EC0	00 00 00 00
 2903: 2  1EC4	00 7E DB DB			db	000h, 07Eh, 0DBh, 0DBh, 0DBh, 07Eh, 000h, 000h, 000h, 000h, 000h, 000h
       2  1EC8	DB 7E 00 00
       2  1ECC	00 00 00 00
 2904: 2  1ED0	00 00 00 03			db	000h, 000h, 000h, 003h, 006h, 07Eh, 0DBh, 0DBh, 0F3h, 07Eh, 060h, 0C0h
       2  1ED4	06 7E DB DB
       2  1ED8	F3 7E 60 C0
 2905: 2  1EDC	00 00 00 00			db	000h, 000h, 000h, 000h, 000h, 000h, 01Ch, 030h, 060h, 060h, 07Ch, 060h
       2  1EE0	00 00 1C 30
       2  1EE4	60 60 7C 60
 2906: 2  1EE8	60 60 30 1C			db	060h, 060h, 030h, 01Ch, 000h, 000h, 000h, 000h, 000h, 000h, 000h, 07Ch
       2  1EEC	00 00 00 00
       2  1EF0	00 00 00 7C
 2907: 2  1EF4	C6 C6 C6 C6			db	0C6h, 0C6h, 0C6h, 0C6h, 0C6h, 0C6h, 0C6h, 0C6h, 000h, 000h, 000h, 000h
       2  1EF8	C6 C6 C6 C6
       2  1EFC	00 00 00 00
 2908: 2  1F00	00 00 00 00			db	000h, 000h, 000h, 000h, 0FEh, 000h, 000h, 0FEh, 000h, 000h, 0FEh, 000h
       2  1F04	FE 00 00 FE
       2  1F08	00 00 FE 00
 2909: 2  1F0C	00 00 00 00			db	000h, 000h, 000h, 000h, 000h, 000h, 000h, 000h, 018h, 018h, 07Eh, 018h
       2  1F10	00 00 00 00
       2  1F14	18 18 7E 18
 2910: 2  1F18	18 00 00 FF			db	018h, 000h, 000h, 0FFh, 000h, 000h, 000h, 000h, 000h, 000h, 000h, 030h
       2  1F1C	00 00 00 00
       2  1F20	00 00 00 30
 2911: 2  1F24	18 0C 06 0C			db	018h, 00Ch, 006h, 00Ch, 018h, 030h, 000h, 07Eh, 000h, 000h, 000h, 000h
       2  1F28	18 30 00 7E
       2  1F2C	00 00 00 00
 2912: 2  1F30	00 00 00 0C			db	000h, 000h, 000h, 00Ch, 018h, 030h, 060h, 030h, 018h, 00Ch, 000h, 07Eh
       2  1F34	18 30 60 30
       2  1F38	18 0C 00 7E
 2913: 2  1F3C	00 00 00 00			db	000h, 000h, 000h, 000h, 000h, 000h, 00Eh, 01Bh, 01Bh, 018h, 018h, 018h
       2  1F40	00 00 0E 1B
       2  1F44	1B 18 18 18
 2914: 2  1F48	18 18 18 18			db	018h, 018h, 018h, 018h, 018h, 018h, 018h, 018h, 018h, 018h, 018h, 018h
       2  1F4C	18 18 18 18
       2  1F50	18 18 18 18
 2915: 2  1F54	18 18 18 18			db	018h, 018h, 018h, 018h, 0D8h, 0D8h, 0D8h, 070h, 000h, 000h, 000h, 000h
       2  1F58	D8 D8 D8 70
       2  1F5C	00 00 00 00
 2916: 2  1F60	00 00 00 00			db	000h, 000h, 000h, 000h, 018h, 018h, 000h, 07Eh, 000h, 018h, 018h, 000h
       2  1F64	18 18 00 7E
       2  1F68	00 18 18 00
 2917: 2  1F6C	00 00 00 00			db	000h, 000h, 000h, 000h, 000h, 000h, 000h, 000h, 000h, 076h, 0DCh, 000h
       2  1F70	00 00 00 00
       2  1F74	00 76 DC 00
 2918: 2  1F78	76 DC 00 00			db	076h, 0DCh, 000h, 000h, 000h, 000h, 000h, 000h, 000h, 038h, 06Ch, 06Ch
       2  1F7C	00 00 00 00

ASEM-51 V1.3                                        Copyright (c) 2002 by W.W. Heinz                                         PAGE 67



 Line  I  Addr  Code            Source

       2  1F80	00 38 6C 6C
 2919: 2  1F84	38 00 00 00			db	038h, 000h, 000h, 000h, 000h, 000h, 000h, 000h, 000h, 000h, 000h, 000h
       2  1F88	00 00 00 00
       2  1F8C	00 00 00 00
 2920: 2  1F90	00 00 00 00			db	000h, 000h, 000h, 000h, 000h, 000h, 000h, 018h, 018h, 000h, 000h, 000h
       2  1F94	00 00 00 18
       2  1F98	18 00 00 00
 2921: 2  1F9C	00 00 00 00			db	000h, 000h, 000h, 000h, 000h, 000h, 000h, 000h, 000h, 000h, 000h, 000h
       2  1FA0	00 00 00 00
       2  1FA4	00 00 00 00
 2922: 2  1FA8	18 00 00 00			db	018h, 000h, 000h, 000h, 000h, 000h, 000h, 000h, 000h, 00Fh, 00Ch, 00Ch
       2  1FAC	00 00 00 00
       2  1FB0	00 0F 0C 0C
 2923: 2  1FB4	0C 0C 0C EC			db	00Ch, 00Ch, 00Ch, 0ECh, 06Ch, 06Ch, 03Ch, 01Ch, 000h, 000h, 000h, 000h
       2  1FB8	6C 6C 3C 1C
       2  1FBC	00 00 00 00
 2924: 2  1FC0	00 D8 6C 6C			db	000h, 0D8h, 06Ch, 06Ch, 06Ch, 06Ch, 06Ch, 000h, 000h, 000h, 000h, 000h
       2  1FC4	6C 6C 6C 00
       2  1FC8	00 00 00 00
 2925: 2  1FCC	00 00 00 00			db	000h, 000h, 000h, 000h, 000h, 070h, 0D8h, 030h, 060h, 0C8h, 0F8h, 000h
       2  1FD0	00 70 D8 30
       2  1FD4	60 C8 F8 00
 2926: 2  1FD8	00 00 00 00			db	000h, 000h, 000h, 000h, 000h, 000h, 000h, 000h, 000h, 000h, 000h, 000h
       2  1FDC	00 00 00 00
       2  1FE0	00 00 00 00
 2927: 2  1FE4	7C 7C 7C 7C			db	07Ch, 07Ch, 07Ch, 07Ch, 07Ch, 07Ch, 07Ch, 000h, 000h, 000h, 000h, 000h
       2  1FE8	7C 7C 7C 00
       2  1FEC	00 00 00 00
 2928: 2  1FF0	00 00 00 00			db	000h, 000h, 000h, 000h, 000h, 000h, 000h, 000h, 000h, 000h, 000h, 000h
       2  1FF4	00 00 00 00
       2  1FF8	00 00 00 00
 2929: 2  1FFC	00 00 00 00			db	000h, 000h, 000h, 000h
 2930: 1			;		end
 2931:				;		$include (vt100_font.a51)
 2932:						END





                     register banks used:  0

                     no errors




ASEM-51 V1.3                                        Copyright (c) 2002 by W.W. Heinz                                         PAGE 68





	       L I S T   O F   S Y M B O L S
	       =============================


SYMBOL				  TYPE     VALUE	LINE
------------------------------------------------------------
??ASEM_51			  NUMBER    8051
??VERSION			  NUMBER    0130
AC				  BIT	      D6	  94
ACC				  DATA	      E0	  36
ALR				  NUMBER    0011	 492
ALTGR				  NUMBER    0011	 491
ALTGR_TABLE			  CODE	    0CFC	2460
ALTGR_TABLE_IND			  CODE	    0CF1	2446
ANSIOUT				  CODE	    033E	 838
ANSIOUT1			  CODE	    034B	 846
ANSIOUT2			  CODE	    0352	 850
ANSIOUT3			  CODE	    0343	 841
ANSI_MOVE			  CODE	    0844	1600
ANSI_MOVE_EX			  CODE	    0897	1663
ANSI_MOVE_M1			  CODE	    086B	1629
ANSI_MOVE_X1			  CODE	    0851	1614
ANSI_MOVE_X3			  CODE	    0858	1617
ANSI_MOVE_Y			  CODE	    0870	1637
ANSI_MOVE_Y1			  CODE	    087F	1647
ANSI_MOVE_Y2			  CODE	    087B	1642
ANSI_MOVE_Y3			  CODE	    0889	1653
ANSI_TAB			  CODE	    0356	 854
ARG0				  NUMBER    0026	 543
ARG1				  NUMBER    0027	 544
ARG2				  NUMBER    0028	 545
ARG3				  NUMBER    0029	 546
ARGS_GR_ZERO			  CODE	    0830	1583
ARGS_GR_ZERO_1			  CODE	    083C	1589
ARGS_GR_ZERO_2			  CODE	    0838	1587
AUXR				  DATA	      8E	  19
AUXR1				  DATA	      A2	  24
B				  DATA	      F0	  37
BACK				  NUMBER    0008	 464
BASE				  NUMBER    0000	 110
BAUDIDX				  NUMBER    002A	 547
BLACK				  NUMBER    0000	 429
BLUE				  NUMBER    0004	 433
BOTTOM				  NUMBER    0032	 555
BREAK				  NUMBER    00F0	 499
CCAPS				  NUMBER    0058	 496
CCBT				  NUMBER    001D	 457
CCDN				  NUMBER    001D	 469
CCHM				  NUMBER    001C	 456
CCLF				  NUMBER    001E	 470
CCLM				  NUMBER    001E	 458
CCRM				  NUMBER    001F	 459
CCRT				  NUMBER    001F	 471
CCUP				  NUMBER    001C	 468
CDCH				  NUMBER    00FE	 474
CHARTABLE_NOSHIFT		  CODE	    0BC9	2414

ASEM-51 V1.3                                        Copyright (c) 2002 by W.W. Heinz                                         PAGE 69



SYMBOL				  TYPE     VALUE	LINE
------------------------------------------------------------
CHARTABLE_SHIFT			  CODE	    0C5E	2430
CHAR_OUT			  CODE	    03F7	 953
CHAR_OUT_1			  CODE	    0458	1014
CHAR_OUT_2			  CODE	    0430	 991
CHAR_OUT_2A			  CODE	    043E	 999
CHAR_OUT_2B			  CODE	    0446	1003
CHAR_OUT_3			  CODE	    040D	 965
CHAR_OUT_4			  CODE	    044D	1007
CICH				  NUMBER    00FF	 475
CILN				  NUMBER    009D	 473
CIN				  CODE	    0AF1	2230
CIN_1				  CODE	    0AFA	2234
CIN_2				  CODE	    0AF3	2231
CIN_3				  CODE	    0B05	2240
CIN_4				  CODE	    0B17	2258
CIN_5				  CODE	    0B0A	2248
CIN_7				  CODE	    0B12	2253
CLEARARGS			  CODE	    091B	1765
CLEARARGS1			  CODE	    091F	1767
CLEARTABU			  CODE	    08F3	1732
CLEARTABU1			  CODE	    08F7	1734
CLEAR_LINES			  CODE	    09C4	1927
CLEAR_LINES1			  CODE	    09E5	1954
CLEAR_LINES2			  CODE	    09E0	1952
CLEAR_SCREEN			  CODE	    09B7	1918
CLEAR_V1			  CODE	    08DF	1716
CLEAR_VARS			  CODE	    08DB	1714
CLS				  NUMBER    0001	 463
CLSHIFT				  NUMBER    0012	 493
CLSTRG				  NUMBER    0014	 494
COLOR				  NUMBER    002D	 550
COMP_DPTR			  CODE	    0A3B	2036
COPYFONT			  CODE	    0A8E	2148
COPYFONT1			  CODE	    0A98	2154
COUT				  CODE	    0AE1	2219
COUT_SP				  CODE	    001E	 148
COUT_X				  CODE	    0AE9	2225
CPRL2				  BIT	      C8	  81
CRSHIFT				  NUMBER    0059	 495
CSPACE				  NUMBER    0020	 472
CT2				  BIT	      C9	  82
CURSORPOS			  NUMBER    002E	 551
CURSORPOS1			  NUMBER    002F	 552
CURSORSAVE			  NUMBER    0030	 553
CURSORX				  NUMBER    0037	 560
CURSORY				  NUMBER    0038	 561
CURSOR_OFF			  CODE	    0A18	2003
CURSOR_ON			  CODE	    0A06	1983
CY				  BIT	      D7	  95
C_BACKSP			  NUMBER    0008	 443
C_BELL				  NUMBER    0007	 442
C_CR				  NUMBER    000D	 448
C_DEL				  NUMBER    007F	 454
C_ESC				  NUMBER    001B	 453
C_FF				  NUMBER    000C	 447
C_NEWLINE			  NUMBER    000A	 445

ASEM-51 V1.3                                        Copyright (c) 2002 by W.W. Heinz                                         PAGE 70



SYMBOL				  TYPE     VALUE	LINE
------------------------------------------------------------
C_SI				  NUMBER    000F	 450
C_SO				  NUMBER    000E	 449
C_TAB				  NUMBER    0009	 444
C_TIME				  NUMBER    000A	 440
C_VT				  NUMBER    000B	 446
C_XOFF				  NUMBER    0013	 452
C_XON				  NUMBER    0011	 451
DASH				  CODE	    0016	 141
DASH_SP				  CODE	    0026	 155
DATABITS			  NUMBER    0014	 538
DECANM				  NUMBER    0002	 503
DECARM				  NUMBER    0008	 509
DECAWM				  NUMBER    0007	 508
DECCKM				  NUMBER    0001	 502
DECCOLM				  NUMBER    0003	 504
DECINLM				  NUMBER    0009	 510
DECOM				  NUMBER    0006	 507
DECSCLM				  NUMBER    0004	 505
DECSCNM				  NUMBER    0005	 506
DEFAULTCOLOR			  NUMBER    0070	 438
DEFCOL				  NUMBER    003D	 566
DNLD_PARM			  NUMBER    0010	 114
DOWNLOAD			  CODE	    00A0	 235
DOWNLOOP			  CODE	    00B3	 246
DO_CMD_ARG			  CODE	    0805	1548
DO_CMD_ARG_1			  CODE	    081B	1564
DO_CMD_ARG_2			  CODE	    0821	1571
DO_CMD_ARG_3			  CODE	    0828	1574
DO_CMD_ARG_4			  CODE	    082D	1576
DO_CR				  CODE	    03C0	 915
DO_CSI				  CODE	    04CF	1087
DO_CSI_B			  CODE	    04F2	1107
DO_CSI_C			  CODE	    04FD	1113
DO_CSI_CC			  CODE	    0603	1244
DO_CSI_CC1			  CODE	    0608	1246
DO_CSI_CC2			  CODE	    0606	1245
DO_CSI_D			  CODE	    0508	1119
DO_CSI_END			  CODE	    079D	1452
DO_CSI_END1			  CODE	    06C4	1341
DO_CSI_G			  CODE	    06C6	1343
DO_CSI_G1			  CODE	    06D1	1347
DO_CSI_H			  CODE	    0516	1128
DO_CSI_H1			  CODE	    051B	1130
DO_CSI_H2			  CODE	    051E	1131
DO_CSI_HH			  CODE	    0735	1395
DO_CSI_HH1			  CODE	    0746	1403
DO_CSI_HH2			  CODE	    074B	1405
DO_CSI_HHX			  CODE	    0750	1407
DO_CSI_J			  CODE	    065B	1289
DO_CSI_JA			  CODE	    0660	1291
DO_CSI_JB			  CODE	    0672	1301
DO_CSI_JC			  CODE	    0663	1292
DO_CSI_JD			  CODE	    0683	1310
DO_CSI_K			  CODE	    069A	1322
DO_CSI_KA			  CODE	    06AF	1332
DO_CSI_KB			  CODE	    06BA	1337

ASEM-51 V1.3                                        Copyright (c) 2002 by W.W. Heinz                                         PAGE 71



SYMBOL				  TYPE     VALUE	LINE
------------------------------------------------------------
DO_CSI_KEYS			  CODE	    04DD	1094
DO_CSI_L			  CODE	    06DC	1354
DO_CSI_L1			  CODE	    06F0	1362
DO_CSI_L2			  CODE	    06F5	1364
DO_CSI_LL			  CODE	    0754	1411
DO_CSI_LL1			  CODE	    075F	1416
DO_CSI_LL2			  CODE	    0764	1418
DO_CSI_LLX			  CODE	    0769	1420
DO_CSI_M			  CODE	    0544	1153
DO_CSI_MA			  CODE	    0552	1159
DO_CSI_MB			  CODE	    0562	1166
DO_CSI_MC			  CODE	    0554	1160
DO_CSI_MD			  CODE	    055F	1165
DO_CSI_ME			  CODE	    0566	1168
DO_CSI_MF			  CODE	    0569	1169
DO_CSI_MG			  CODE	    0578	1178
DO_CSI_MH			  CODE	    057F	1181
DO_CSI_MM			  CODE	    0705	1373
DO_CSI_MM1			  CODE	    0719	1381
DO_CSI_MM2			  CODE	    0720	1384
DO_CSI_MX			  CODE	    0590	1190
DO_CSI_MX1			  CODE	    0595	1192
DO_CSI_MX2			  CODE	    05A2	1198
DO_CSI_MX3			  CODE	    05AD	1203
DO_CSI_N			  CODE	    05B1	1207
DO_CSI_N1			  CODE	    05BB	1211
DO_CSI_N6			  CODE	    05C7	1217
DO_CSI_P			  CODE	    076D	1424
DO_CSI_P1			  CODE	    0789	1439
DO_CSI_P2			  CODE	    0775	1427
DO_CSI_Q			  CODE	    079E	1471
DO_CSI_QUES			  CODE	    0693	1318
DO_CSI_Q_END			  CODE	    07E8	1506
DO_CSI_Q_H			  CODE	    07AC	1477
DO_CSI_Q_H1			  CODE	    07BD	1485
DO_CSI_Q_H2			  CODE	    07C2	1487
DO_CSI_Q_HX			  CODE	    07C9	1490
DO_CSI_Q_L			  CODE	    07CD	1494
DO_CSI_Q_L1			  CODE	    07D9	1499
DO_CSI_Q_L2			  CODE	    07DE	1501
DO_CSI_Q_LX			  CODE	    07E5	1504
DO_CSI_R			  CODE	    0613	1253
DO_CSI_RA			  CODE	    0622	1259
DO_CSI_RB			  CODE	    0634	1266
DO_CSI_RC			  CODE	    064B	1279
DO_CSI_RD			  CODE	    0658	1286
DO_CSI_RE			  CODE	    0648	1276
DO_CSI_S			  CODE	    052E	1141
DO_CSI_U			  CODE	    0538	1147
DO_ESC				  CODE	    046C	1029
DO_ESC_7			  CODE	    047C	1037
DO_ESC_8			  CODE	    0486	1042
DO_ESC_C			  CODE	    04B7	1069
DO_ESC_CSI			  CODE	    0475	1033
DO_ESC_D			  CODE	    0492	1047
DO_ESC_EX			  CODE	    04CE	1082

ASEM-51 V1.3                                        Copyright (c) 2002 by W.W. Heinz                                         PAGE 72



SYMBOL				  TYPE     VALUE	LINE
------------------------------------------------------------
DO_ESC_H			  CODE	    04BD	1072
DO_ESC_HA			  CODE	    04A2	1057
DO_ESC_HASH			  CODE	    07ED	1519
DO_ESC_HASH_END			  CODE	    07F8	1525
DO_ESC_LBR			  CODE	    04A9	1061
DO_ESC_LBRACK			  CODE	    07F9	1536
DO_ESC_LB_1			  CODE	    0802	1541
DO_ESC_M			  CODE	    049A	1052
DO_ESC_Q			  CODE	    07E9	1512
DO_ESC_RBR			  CODE	    04B0	1065
DO_ESC_RBRACK			  CODE	    07F9	1532
DO_ESC_Z			  CODE	    04C9	1079
DO_IDLE				  CODE	    0368	 861
DO_IDLE_BS			  CODE	    0382	 880
DO_IDLE_CR			  CODE	    03BD	 914
DO_IDLE_DEL			  CODE	    0372	 870
DO_IDLE_END			  CODE	    03E9	 938
DO_IDLE_ESC			  CODE	    03CA	 920
DO_IDLE_FF			  CODE	    03E4	 935
DO_IDLE_NL			  CODE	    03B2	 908
DO_IDLE_PRE			  CODE	    0379	 874
DO_IDLE_SI			  CODE	    03D9	 928
DO_IDLE_SO			  CODE	    03D3	 924
DO_IDLE_TAB			  CODE	    0389	 884
DO_IDLE_TAB1			  CODE	    03A6	 899
DO_IDLE_TAB2			  CODE	    03AC	 902
DO_IDLE_TAB3			  CODE	    038F	 886
DO_IDLE_VT			  CODE	    03DF	 932
DO_NEWLINE			  CODE	    03B5	 909
DP0H				  DATA	      83	   9
DP0L				  DATA	      82	   8
DP1H				  DATA	      85	  11
DP1L				  DATA	      84	  10
DPH				  NUMBER    0083	 117
DPL				  NUMBER    0082	 116
DPTRTOR6R7			  CODE	    000E	 133
DRAW_CHAR			  CODE	    03E9	 942
DRAW_CHAR_1			  CODE	    0462	1021
DRAW_CURSOR			  CODE	    09F8	1971
DSPACE				  CODE	    0106	 320
DUMP				  CODE	    00BD	 260
DUMPLINE			  CODE	    00C1	 263
DUMPLINE1			  CODE	    00C8	 266
EA				  BIT	      AF	  66
ES				  BIT	      AC	  64
ESC				  NUMBER    001B	 467
ET0				  BIT	      A9	  61
ET1				  BIT	      AB	  63
ET2				  BIT	      AD	  65
EVENODD				  NUMBER    0015	 539
EX0				  BIT	      A8	  60
EX1				  BIT	      AA	  62
EXEN2				  BIT	      CB	  84
EXF2				  BIT	      CE	  87
EXINT0				  CODE	    025E	 659
EXINT0A				  CODE	    0281	 688

ASEM-51 V1.3                                        Copyright (c) 2002 by W.W. Heinz                                         PAGE 73



SYMBOL				  TYPE     VALUE	LINE
------------------------------------------------------------
EXINT0B				  CODE	    026B	 678
EXINT0EX			  CODE	    0288	 693
EXTENDED			  NUMBER    00E0	 498
EXTI0				  CODE	    0003	  98
EXTI1				  CODE	    0013	 100
EXT_TABLE			  CODE	    0D17	2490
EXT_TABLE_IND			  CODE	    0D07	2473
F0				  BIT	      D5	  93
F1				  NUMBER    0080	 477
F10				  NUMBER    0089	 486
F11				  NUMBER    008A	 487
F12				  NUMBER    008B	 488
F2				  NUMBER    0081	 478
F3				  NUMBER    0082	 479
F4				  NUMBER    0083	 480
F5				  NUMBER    0084	 481
F6				  NUMBER    0085	 482
F7				  NUMBER    0086	 483
F8				  NUMBER    0087	 484
F9				  NUMBER    0088	 485
FILL_LINES			  CODE	    09C6	1929
FILL_SCREEN			  CODE	    09B9	1919
FLAGS				  NUMBER    0020	 517
FLAGS1				  NUMBER    0021	 525
FLAGS2				  NUMBER    0022	 533
FREE0				  NUMBER    005A	 572
FREE1				  NUMBER    005B	 573
FREE2				  NUMBER    005C	 574
FREE3				  NUMBER    005D	 575
FREE4				  NUMBER    005E	 576
FREE5				  NUMBER    005F	 577
GETBAUD				  CODE	    0D24	2506
GETBDTXT			  CODE	    0D2E	2516
GETBIT				  CODE	    090F	1758
GETBITTAB			  CODE	    0913	1762
GETHEX				  CODE	    00EA	 297
GETHEX1				  CODE	    00F3	 301
GETHEX2				  CODE	    00FD	 306
GETHEXBYTE			  CODE	    00E2	 290
GETREPORT			  CODE	    05F6	1239
GETSTATUS			  CODE	    0D9F	2577
GOTO				  CODE	    00BB	 255
GREEN				  NUMBER    0002	 431
HEIGHT				  NUMBER    0018	 417
HEX2DEZ				  CODE	    0A2E	2023
IE				  DATA	      A8	  26
IE0				  BIT	      89	  40
IE1				  BIT	      8B	  42
INIT				  CODE	    02A5	 740
INIT6845			  CODE	    0A4F	2056
INIT_2				  CODE	    02BD	 765
INIT_LOOP			  CODE	    02BD	 753
INSERT				  NUMBER    0013	 537
INT0				  BIT	      B2	  69
INT1				  BIT	      B3	  70
INTR_RETURN			  CODE	    002E	 165

ASEM-51 V1.3                                        Copyright (c) 2002 by W.W. Heinz                                         PAGE 74



SYMBOL				  TYPE     VALUE	LINE
------------------------------------------------------------
INVERSE				  NUMBER    0003	 521
IP				  DATA	      B8	  28
IRM				  NUMBER    0004	 511
ISDIGIT				  CODE	    08A7	1681
ISDIGIT1			  CODE	    08AA	1682
ISDIGIT2			  CODE	    08AE	1685
ISDIGIT3			  CODE	    08B1	1686
ISPARM				  CODE	    089B	1670
ISPARM1				  CODE	    08A5	1675
ISPARMEX			  CODE	    08A4	1674
IT0				  BIT	      88	  39
IT1				  BIT	      8A	  41
KEYALTGR			  CODE	    0BA0	2385
KEYALTGR1			  CODE	    0BB0	2391
KEYALTGR2			  CODE	    0BA5	2387
KEYAVAIL			  NUMBER    0008	 526
KEYBREAK			  CODE	    0B43	2337
KEYCHECKBRK			  CODE	    0B6A	2359
KEYCHECKBRK1			  CODE	    0B74	2363
KEYDECODE			  CODE	    0B3B	2328
KEYEXIT				  CODE	    0BC1	2406
KEYEXITOK			  CODE	    0BBD	2399
KEYGETALTGR			  CODE	    0CF9	2457
KEYGETALTGRIND			  CODE	    0CEE	2443
KEYGETEXT			  CODE	    0D14	2487
KEYGETEXTIND			  CODE	    0D04	2470
KEYGETNOSHIFT			  CODE	    0BC4	2410
KEYGETSHIFT			  CODE	    0C59	2426
KEYMAKE				  CODE	    0BB4	2394
KEYMAKEEXT			  CODE	    0B83	2372
KEYMAKEEXT1			  CODE	    0B9C	2382
KEYMAKEEXT2			  CODE	    0B8A	2375
KEYMAKEEXT3			  CODE	    0B9A	2381
KEYNORMAL			  CODE	    0B79	2367
KEYRXALTGR			  NUMBER    000C	 530
KEYRXBREAK			  NUMBER    000A	 528
KEYRXCNT			  NUMBER    003A	 563
KEYRXEXTENDED			  NUMBER    0009	 527
KEYRXSHIFT			  NUMBER    000B	 529
KEYRXSTRG			  NUMBER    000D	 531
KEYRXVAL			  NUMBER    003B	 564
KEYSHIFT			  CODE	    0B4B	2342
KEYSHIFT1			  CODE	    0B52	2345
KEYSHIFT2			  CODE	    0B57	2347
KEYSTRG				  CODE	    0B5E	2352
LASTCHAR			  NUMBER    0001	 519
LCHARTMP			  NUMBER    0002	 520
LF				  NUMBER    000A	 466
LNM				  NUMBER    0014	 512
LOOP_CIN			  CODE	    031E	 819
MAGENTA				  NUMBER    0005	 434
MAIN_COUT			  CODE	    02FC	 802
MAIN_COUT1			  CODE	    0307	 807
MAIN_COUT2			  CODE	    0309	 809
MAIN_F6				  CODE	    02CE	 777
MAIN_F6A			  CODE	    02D8	 782

ASEM-51 V1.3                                        Copyright (c) 2002 by W.W. Heinz                                         PAGE 75



SYMBOL				  TYPE     VALUE	LINE
------------------------------------------------------------
MAIN_F7				  CODE	    02DF	 786
MAIN_F8				  CODE	    02EE	 794
MAIN_F9				  CODE	    02F5	 798
MAIN_LOOP			  CODE	    02C2	 771
MAIN_SERIN			  CODE	    0317	 815
MAIN_STATUS			  CODE	    032D	 826
MINITEXT			  CODE	    0152	 385
MISO				  BIT	      96	  50
MONCIN				  CODE	    00FE	 315
MONCOUT				  CODE	    010A	 322
MONMAIN				  CODE	    007D	 216
MONMAIN1			  CODE	    008D	 223
MONMAIN2			  CODE	    0092	 225
MONMAIN3			  CODE	    0097	 227
MONMAIN9			  CODE	    009C	 229
MONNEWLINE			  CODE	    0112	 335
MONPHEX				  CODE	    0133	 364
MONPHEX1			  CODE	    0136	 366
MONPHEX16			  CODE	    0145	 376
MONPHEX_B			  CODE	    0135	 365
MONPSTR				  CODE	    011F	 348
MONPSTR1			  CODE	    0121	 349
MONPSTR2			  CODE	    0130	 358
MONSPACE			  CODE	    0108	 321
MONSTART			  CODE	    0052	 193
MONWAIT				  CODE	    0070	 209
MOSI				  BIT	      95	  49
MOVE_CURSOR			  CODE	    09F5	1970
NARGS				  NUMBER    0025	 542
NEWADDR				  CODE	    00D8	 280
NEWLINE				  CODE	    0AD7	2212
NEWLINEMODE			  NUMBER    0012	 536
OLDSTATUS			  NUMBER    003C	 565
ORIGIN				  NUMBER    0011	 535
OV				  BIT	      D2	  90
P				  BIT	      D0	  89
P0				  DATA	      80	   6
P1				  DATA	      90	  20
P2				  DATA	      A0	  23
P3				  DATA	      B0	  27
PCON				  DATA	      87	  12
PHEX				  CODE	    0B1C	2271
PHEX1				  CODE	    0B1F	2275
PHEX16				  CODE	    0B2E	2285
PHEX8				  CODE	    0B1C	2272
PHEX_B				  CODE	    0B1E	2274
POWERON				  CODE	    002F	 171
PRINT				  CODE	    0925	1773
PRINT1				  CODE	    092A	1777
PRTBAUD				  CODE	    0D61	2544
PRTSTATUS			  CODE	    0D44	2526
PRTSTATUS1			  CODE	    0D49	2528
PRTSTATUS2			  CODE	    0D89	2566
PRTSTATUS3			  CODE	    0D90	2569
PRTSTATUS4			  CODE	    0D97	2572
PRTSTATUS5			  CODE	    0D9E	2575

ASEM-51 V1.3                                        Copyright (c) 2002 by W.W. Heinz                                         PAGE 76



SYMBOL				  TYPE     VALUE	LINE
------------------------------------------------------------
PRTSTATUS6			  CODE	    0D80	2562
PRTSTATUS7			  CODE	    0D7C	2560
PS				  BIT	      BC	  79
PSW				  DATA	      D0	  35
PSW_INIT			  NUMBER    0000	 113
PT0				  BIT	      B9	  76
PT1				  BIT	      BB	  78
PT2				  BIT	      BD	  80
PX0				  BIT	      B8	  75
PX1				  BIT	      BA	  77
R6R7TODPTR			  CODE	    0006	 125
RB8				  BIT	      9A	  54
RCAP2H				  DATA	      CB	  32
RCAP2L				  DATA	      CA	  31
RCLK				  BIT	      CD	  86
RD				  BIT	      B7	  74
RED				  NUMBER    0001	 430
REN				  BIT	      9C	  56
REPORTDA			  CODE	    05FC	1242
REPORTOK			  CODE	    05F8	1241
RESET				  CODE	    0000	  97
RESETTABU			  CODE	    08E5	1722
RESETTABU1			  CODE	    08E9	1724
RETSTATE			  NUMBER    0023	 541
RI				  BIT	      98	  52
RS0				  BIT	      D3	  91
RS1				  BIT	      D4	  92
RXD				  BIT	      B0	  67
SBUF				  DATA	      99	  22
SCK				  BIT	      97	  51
SCON				  DATA	      98	  21
SCROLL				  CODE	    0930	1798
SCROLL_DOWN_1			  CODE	    095D	1834
SCROLL_DOWN_2			  CODE	    096B	1844
SCROLL_DOWN_3			  CODE	    0973	1849
SCROLL_DOWN_4			  CODE	    095B	1832
SCROLL_DOWN_5			  CODE	    097D	1860
SCROLL_DOWN_6			  CODE	    097A	1857
SCROLL_R4			  CODE	    0936	1802
SCROLL_UP			  CODE	    0982	1867
SCROLL_UP_1			  CODE	    099F	1886
SCROLL_UP_2			  CODE	    09A1	1889
SCROLL_UP_3			  CODE	    09B2	1902
SCROLL_UP_4			  CODE	    09AF	1899
SCURSORX			  NUMBER    002B	 548
SCURSORY			  NUMBER    002C	 549
SENDPOS				  CODE	    05EA	1232
SERBUF				  NUMBER    0040	 568
SERBUSY				  NUMBER    0005	 523
SERCOUNT			  NUMBER    0036	 559
SEREND				  NUMBER    0035	 558
SERINT				  CODE	    0203	 592
SERINT1				  CODE	    0218	 604
SERINT2				  CODE	    022A	 612
SERINTEX			  CODE	    023A	 623
SERINTTI			  CODE	    0233	 619

ASEM-51 V1.3                                        Copyright (c) 2002 by W.W. Heinz                                         PAGE 77



SYMBOL				  TYPE     VALUE	LINE
------------------------------------------------------------
SERSTART			  NUMBER    0034	 557
SETBAUD				  CODE	    0332	 829
SETREGS				  CODE	    0A5F	2066
SINT				  CODE	    0023	 102
SM0				  BIT	      9F	  59
SM1				  BIT	      9E	  58
SM2				  BIT	      9D	  57
SP				  DATA	      81	   7
SPACE				  CODE	    0ACD	2206
SPECIAL				  NUMBER    0000	 518
STACK				  NUMBER    0080	 115
START				  CODE	    028D	 716
STATE				  NUMBER    0033	 556
STATUS				  CODE	    0DA2	2582
ST_CMD_ARG			  NUMBER    000A	 424
ST_CSI				  NUMBER    0004	 421
ST_CSI_Q			  NUMBER    000E	 426
ST_ESC				  NUMBER    0002	 420
ST_ESC_HASH			  NUMBER    0008	 423
ST_ESC_LBRACK			  NUMBER    000C	 425
ST_ESC_Q			  NUMBER    0006	 422
ST_ESC_RBRACK			  NUMBER    0010	 427
ST_IDLE				  NUMBER    0000	 419
SYDATA				  CODE	    0A7A	2124
T0				  BIT	      B4	  71
T0CNT				  NUMBER    0039	 562
T1				  BIT	      B5	  72
T2				  BIT	      90	  47
T2CON				  DATA	      C8	  29
T2EX				  BIT	      91	  48
T2MOD				  DATA	      C9	  30
TABU				  NUMBER    0009	 465
TABUTAB				  NUMBER    0050	 570
TAB_SET_R0_R1			  CODE	    08FF	1745
TB8				  BIT	      9B	  55
TCLK				  BIT	      CC	  85
TCON				  DATA	      88	  13
TERM_RESET			  CODE	    08B2	1693
TESTSCREEN			  CODE	    0AA7	2174
TESTSCREEN1			  CODE	    0AB0	2179
TESTSCREEN2			  CODE	    0ABD	2191
TESTSCREEN3			  CODE	    0AAC	2177
TESTSCREEN4			  CODE	    0AC1	2194
TF0				  BIT	      8D	  44
TF1				  BIT	      8F	  46
TF2				  BIT	      CF	  88
TH0				  DATA	      8C	  17
TH1				  DATA	      8D	  18
TH2				  DATA	      CD	  34
TI				  BIT	      99	  53
TIMER0				  CODE	    000B	  99
TIMER0INT			  CODE	    0241	 633
TIMER0INT_EX			  CODE	    025D	 649
TIMER1				  CODE	    001B	 101
TIMER2				  CODE	    002B	 103
TL0				  DATA	      8A	  15

ASEM-51 V1.3                                        Copyright (c) 2002 by W.W. Heinz                                         PAGE 78



SYMBOL				  TYPE     VALUE	LINE
------------------------------------------------------------
TL1				  DATA	      8B	  16
TL2				  DATA	      CC	  33
TMOD				  DATA	      89	  14
TOP				  NUMBER    0031	 554
TR0				  BIT	      8C	  43
TR1				  BIT	      8E	  45
TR2				  BIT	      CA	  83
TURQUOISE			  NUMBER    0006	 435
TXD				  BIT	      B1	  68
VARS				  NUMBER    0020	 515
VECTOR				  NUMBER    0000	 112
VT100_FONT			  CODE	    1000	2587
VT102BASE			  NUMBER    0000	 410
WDTRST				  DATA	      A6	  25
WHITE				  NUMBER    0007	 436
WIDTH				  NUMBER    0050	 416
WR				  BIT	      B6	  73
WRAP				  NUMBER    0010	 534
XONOFF				  NUMBER    0004	 522
YELLOW				  NUMBER    0003	 432
