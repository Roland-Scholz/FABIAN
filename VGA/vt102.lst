
ASEM-51 V1.3                                         Copyright (c) 2002 by W.W. Heinz                                         PAGE 1





       MCS-51 Family Macro Assembler   A S E M - 5 1   V 1.3
       =====================================================



	Source File:	C:\github\FABIAN\VGA\vt102.a51
	Object File:	C:\github\FABIAN\VGA\vt102.hex
	List File:	C:\github\FABIAN\VGA\vt102.lst



 Line  I  Addr  Code            Source

    1:				;===============================================
    2:				; AT89S52 code for emulating a VT102 terminal
    3:				; 2023-24 Roland Scholz (rolandscholz@gmx.de)
    4:				; no warranties
    5:				; do whatever you want with this code
    6:				; assembled with M-IDE Studio for MCS-51
    7:				;===============================================
    8:
    9:				;		$NOMOD51
   10:				;		$INCLUDE (89S52.MCU)
   11:
   12:				;base		equ	02000h
   13:				;monstart	equ	0h
   14:				;stack		equ	080h
   15:				;dpl		equ	dp0l
   16:				;dph		equ	dp0h
   17:
   18:				vt102base	equ	base
							^
			  @@@@@ symbol not defined @@@@@

   19:
   20:		N      0050	WIDTH		equ	80
   21:		N      0018	HEIGHT		equ	24
   22:
   23:		N      0000	ST_IDLE		equ	0
   24:		N      0002	ST_ESC		equ	2
   25:		N      0004	ST_CSI		equ	4
   26:		N      0006	ST_ESC_Q	equ	6
   27:		N      0008	ST_ESC_HASH	equ	8
   28:		N      000A	ST_CMD_ARG	equ	10
   29:		N      000C	ST_ESC_LBRACK	equ	12
   30:		N      000E	ST_CSI_Q	equ	14
   31:		N      0010	ST_ESC_RBRACK	equ	16
   32:
   33:		N      0000	BLACK		equ	0
   34:		N      0001	RED		equ	1
   35:		N      0002	GREEN		equ	2
   36:		N      0003	YELLOW		equ	3
   37:		N      0004	BLUE		equ	4
   38:		N      0005	MAGENTA		equ	5
   39:		N      0006	TURQUOISE	equ	6
   40:		N      0007	WHITE		equ	7

ASEM-51 V1.3                                         Copyright (c) 2002 by W.W. Heinz                                         PAGE 2



 Line  I  Addr  Code            Source

   41:
   42:		N      0070	DEFAULTCOLOR	equ	WHITE SHL 4 + BLACK
   43:
   44:		N      000A	C_TIME		equ	10
   45:
   46:		N      0007	C_BELL		equ	7
   47:		N      0008	C_BACKSP	equ	8
   48:		N      0009	C_TAB		equ	9
   49:		N      000A	C_NEWLINE	equ	10
   50:		N      000B	C_VT		equ	11
   51:		N      000C	C_FF		equ	12
   52:		N      000D	C_CR		equ	13
   53:		N      000E	C_SO		equ	14
   54:		N      000F	C_SI		equ	15
   55:		N      0011	C_XON		equ	17
   56:		N      0013	C_XOFF		equ	19
   57:		N      001B	C_ESC		equ	27
   58:		N      007F	C_DEL		equ	07fh
   59:
   60:		N      0007	CTRLG		equ	7
   61:		N      0008	CTRLH		equ	8
   62:		N      0009	CTRLI		equ	9
   63:		N      000A	CTRLJ		equ	10
   64:		N      000B	CTRLK		equ	11
   65:		N      000C	CTRLL		equ	12
   66:		N      000D	CTRLM		equ	13
   67:		N      001A	CTRLZ		equ	26
   68:		N      001E	CTRLLT		equ	30
   69:		N      001F	CTRLGT		equ	31
   70:
   71:		N      001C	CCHM		equ	01Ch	;move cursor home
   72:		N      001D	CCBT		equ	01Dh	;move cursor to bottom
   73:		N      001E	CCLM		equ	01Eh	;move cursor to left margin
   74:		N      001F	CCRM		equ	01Fh	;move cursor to right margin
   75:
   76:								;SUPERF equ 0
   77:
   78:		N      0001	CLS		equ	001h	;clear screen
   79:		N      0008	BACK		equ	008h	;backspace
   80:		N      0009	TABU		equ	009h	;tabulator
   81:		N      000A	LF		equ	00Ah	;$9B	;end of line (RETURN)
   82:		N      001B	ESC		equ	01Bh	;escape key
   83:		N      001C	CCUP		equ	01Ch	;cursor up
   84:		N      001D	CCDN		equ	01Dh	;cursor down
   85:		N      001E	CCLF		equ	01Eh	;cursor left
   86:		N      001F	CCRT		equ	01Fh	;cursor right
   87:		N      0020	CSPACE		equ	020h	;space
   88:		N      009D	CILN		equ	09Dh	;insert line
   89:		N      00FE	CDCH		equ	0FEh	;delete character
   90:		N      00FF	CICH		equ	0FFh	;insert character
   91:
   92:		N      0080	F1		equ	080h	;key code for F1
   93:		N      0081	F2		equ	081h	;key code for F2
   94:		N      0082	F3		equ	082h	;key code for F3
   95:		N      0083	F4		equ	083h	;key code for F4
   96:		N      0084	F5		equ	084h	;key code for F5

ASEM-51 V1.3                                         Copyright (c) 2002 by W.W. Heinz                                         PAGE 3



 Line  I  Addr  Code            Source

   97:		N      0085	F6		equ	085h	;key code for F6
   98:		N      0086	F7		equ	086h	;key code for F7
   99:		N      0087	F8		equ	087h	;key code for F8
  100:		N      0088	F9		equ	088h	;key code for F9
  101:		N      0089	F10		equ	089h	;key code for F10
  102:		N      008A	F11		equ	08ah	;key code for F11
  103:		N      008B	F12		equ	08bh	;key code for F12
  104:
  105:				;	special key scan-codes
  106:		N      0011	ALTGR		equ	011h	;extended!
  107:		N      0011	ALR		equ	011h
  108:		N      0012	CLSHIFT		equ	012h
  109:		N      0014	CLSTRG		equ	014h
  110:		N      0059	CRSHIFT		equ	059h
  111:		N      0058	CCAPS		equ	058h
  112:
  113:		N      00E0	EXTENDED	equ	0e0h
  114:		N      00F0	BREAK		equ	0f0h
  115:
  116:						;	0	;Error (ignored)
  117:		N      0001	DECCKM		equ	1	;Cursor key
  118:		N      0002	DECANM		equ	2	;ANSI/VT52
  119:		N      0003	DECCOLM		equ	3	;Column
  120:		N      0004	DECSCLM		equ	4	;Scrolling
  121:		N      0005	DECSCNM		equ	5	;Screen
  122:		N      0006	DECOM		equ	6	;Origin
  123:		N      0007	DECAWM		equ	7	;Auto wrap
  124:		N      0008	DECARM		equ	8	;Auto repeating
  125:		N      0009	DECINLM		equ	9	;Interlace
  126:		N      0004	IRM		equ	4	;Insert Replace mode
  127:		N      0014	LNM		equ	20	;new line mode
  128:
  129:		N      0030	VARLEN		equ	48
  130:
  131:		N      0020	VARS		equ	020h
  132:
  133:		N      0020	flags		equ	020h
  134:		B      0000	special		equ	flags.0
  135:		B      0001	lastchar	equ	flags.1
  136:		B      0002	lchartmp	equ	flags.2
  137:		B      0003	inverse		equ	flags.3
  138:		B      0004	xonoff		equ	flags.4
  139:		B      0005	serbusy		equ	flags.5
  140:
  141:		N      0021	flags1		equ	021h
  142:		B      0008	keyavail	equ	flags1.0
  143:		B      0009	keyrxextended	equ	flags1.1
  144:		B      000A	keyrxbreak	equ	flags1.2
  145:		B      000B	keyrxshift	equ	flags1.3
  146:		B      000C	keyrxaltgr	equ	flags1.4
  147:		B      000D	keyrxstrg	equ	flags1.5
  148:
  149:		N      0022	flags2		equ	022h
  150:		B      0010	wrap		equ	flags2.0
  151:		B      0011	origin		equ	flags2.1
  152:		B      0012	newlinemode	equ	flags2.2

ASEM-51 V1.3                                         Copyright (c) 2002 by W.W. Heinz                                         PAGE 4



 Line  I  Addr  Code            Source

  153:		B      0013	insert		equ	flags2.3
  154:		B      0014	databits	equ	flags2.4
  155:		B      0015	evenodd		equ	flags2.5
  156:		B      0016	termmode	equ	flags2.6
  157:		B      0017	dump		equ	flags2.7
  158:
  159:		N      0023	retstate	equ	023h
  160:		N      0025	nargs		equ	025h
  161:		N      0026	arg0		equ	026h
  162:		N      0027	arg1		equ	027h
  163:		N      0028	arg2		equ	028h
  164:		N      0029	arg3		equ	029h
  165:		N      002A	baudidx		equ	02ah
  166:		N      002B	scursorx	equ	02bh
  167:		N      002C	scursory	equ	02ch
  168:		N      002D	color		equ	02dh
  169:		N      002E	cursorpos	equ	02eh
  170:		N      002F	cursorpos1	equ	02fh
  171:		N      0030	cursorsave	equ	030h
  172:		N      0031	top		equ	031h
  173:		N      0032	bottom		equ	032h
  174:		N      0033	state		equ	033h
  175:		N      0034	serstart	equ	034h
  176:		N      0035	serend		equ	035h
  177:		N      0036	sercount	equ	036h
  178:		N      0037	cursorx		equ	037h
  179:		N      0038	cursory		equ	038h
  180:		N      0039	t0cnt		equ	039h
  181:		N      003A	keyrxcnt	equ	03ah
  182:		N      003B	keyrxval	equ	03bh
  183:		N      003C	oldstatus	equ	03ch
  184:		N      003D	defcol		equ	03dh
  185:
  186:
  187:		N      0040	tabutab		equ	040h		;10-bytes tabulator
  188:
  189:		N      004A	free0		equ	04ah
  190:		N      004B	free1		equ	04bh
  191:		N      004C	free2		equ	04ch
  192:		N      004D	free3		equ	04dh
  193:		N      004E	free4		equ	04eh
  194:		N      004F	free5		equ	04fh
  195:
  196:				;stack @ 50h
  197:
  198:		N      0080	serbuf		equ	080h
  199:		N      0040	serlim		equ	64
  200:
  201:				;===============================================
  202:				; Interrupt vector table
  203:				;
  204:				;===============================================
  205:						org	vt102base
							^
			  @@@@@ symbol not defined @@@@@


ASEM-51 V1.3                                         Copyright (c) 2002 by W.W. Heinz                                         PAGE 5



 Line  I  Addr  Code            Source

  206:	  0000	01 8A				ajmp	start
  207:
  208:						org	vt102base + 3		;ext int0 vector
							^
			  @@@@@ symbol not defined @@@@@

  209:	  0002	01 5B				ajmp	exint0			;PS/2 keyboard
  210:
  211:						org	vt102base + 11		;timer0 vector
							^
			  @@@@@ symbol not defined @@@@@

  212:	  0004	01 3E				ajmp	timer0int		;cursor blink
  213:
  214:						org	vt102base + 19		;ext int1 vector
							^
			  @@@@@ symbol not defined @@@@@

  215:										;not used
  216:
  217:						org	vt102base + 27		;timer1 vector
							^
			  @@@@@ symbol not defined @@@@@

  218:										;not used
  219:
  220:						org	vt102base + 35		;uart vector
							^
			  @@@@@ symbol not defined @@@@@

  221:	  0006	01 0B				ajmp	serint
  222:
  223:						org	vt102base + 43		;timer2 vector (8052)
							^
			  @@@@@ symbol not defined @@@@@

  224:										;not used
  225:
  226:				;
  227:				; leave space for a mini-monitor
  228:				;
  229:						org	vt102base + 200h
							^
			  @@@@@ symbol not defined @@@@@

  230:	  0008	02 00 8A			jmp	start
  231:
  232:	  000B	30 99 05	serint:		jnb	ti, serintri		;ti active?
  233:	  000E	C2 05				clr	serbusy
  234:	  0010	C2 99				clr	ti
  235:	  0012	32				reti
  236:
  237:	  0013	C0 D0		serintri:	push	psw
  238:	  0015	C0 E0				push	acc
  239:	  0017	C0 00				push	ar0
  240:

ASEM-51 V1.3                                         Copyright (c) 2002 by W.W. Heinz                                         PAGE 6



 Line  I  Addr  Code            Source

  241:	  0019	E5 35				mov	a, serend
  242:	  001B	04				inc	a
  243:	  001C	D2 E7				setb	acc.7
  244:	  001E	F5 35				mov	serend, a
  245:	  0020	F8				mov	r0, a
  246:	  0021	A6 99				mov	@r0, sbuf
  247:
  248:	  0023	20 04 0F			jb	xonoff, serintex	;XON/XOFF already active?
  249:	  0026	C3				clr	c			;no compute number auf bytes in buffer
  250:	  0027	95 34				subb	a, serstart
  251:	  0029	50 02				jnc	serint1
  252:	  002B	F4				cpl	a
  253:	  002C	04				inc	a
  254:	  002D	B4 40 05	serint1:	cjne	a, #serlim, serintex
  255:						;jc	serintex
  256:	  0030	D2 04				setb	xonoff
  257:
  258:	  0032	75 99 13			mov	SBUF, #C_XOFF
  259:
  260:	  0035	D0 00		serintex:	pop	ar0
  261:	  0037	D0 E0				pop	acc
  262:	  0039	D0 D0				pop	psw
  263:	  003B	C2 98				clr	ri			;no, receive int
  264:	  003D	32				reti
  265:
  266:
  267:
  268:
  269:
  270:
  271:				;===============================================
  272:				; Timer 0 Interrupt 0
  273:				;===============================================
  274:	  003E	D5 39 19	timer0int:	djnz	t0cnt, timer0int_ex
  275:	  0041	75 39 0A			mov	t0cnt, #C_TIME
  276:	  0044	C0 D0				push	psw
  277:	  0046	C0 E0				push	acc
  278:	  0048	C0 00				push	ar0
  279:
  280:	  004A	85 2F A0			mov	p2, cursorpos+1
  281:	  004D	A8 2E				mov	r0, cursorpos
  282:	  004F	E2				movx	a, @r0
  283:	  0050	E5 90				mov	a, p1
  284:	  0052	F4				cpl	a
  285:	  0053	F2				movx	@r0, a
  286:
  287:	  0054	D0 00				pop	ar0
  288:	  0056	D0 E0				pop	acc
  289:	  0058	D0 D0				pop	psw
  290:	  005A	32		timer0int_ex:	reti
  291:
  292:
  293:
  294:				;===============================================
  295:				; External Interrupt 0 (falling edge)
  296:				; collect bits sent from keyboard

ASEM-51 V1.3                                         Copyright (c) 2002 by W.W. Heinz                                         PAGE 7



 Line  I  Addr  Code            Source

  297:				; lsb first
  298:				; 8E1, start-bit (low), 8 data-bits, even-parity, stop-bit (high)
  299:				;===============================================
  300:	  005B	C0 D0		exint0:		push	psw
  301:	  005D	C0 E0				push	acc
  302:
  303:	  005F	E5 3A				mov	a, keyrxcnt
  304:				;		mov	dptr, #8000h
  305:				;		clr	c
  306:				;		rlc	a
  307:				;		add	a, dp0l
  308:				;		mov	dp0l, a
  309:				;		clr	a
  310:				;		mov	a, #'0'
  311:				;		mov	c, t0
  312:				;		mov	acc.0, c
  313:				;		movx	@dptr, a
  314:
  315:	  0061	E5 3A				mov	a, keyrxcnt
  316:	  0063	70 03				jnz	exint0b			;first bit?
  317:	  0065	20 B4 1D			jb	t0, exint0ex		;not zero, no startbit
  318:
  319:	  0068	04		exint0b:	inc	a
  320:	  0069	F5 3A				mov	keyrxcnt, a
  321:	  006B	B4 0A 00			cjne	a, #10, $+3
  322:	  006E	40 0E				jc	exint0a			;< 10, collect bits
  323:	  0070	B4 0B 12			cjne	a, #11, exint0ex	;skip parity-bit
  324:	  0073	75 3A 00			mov	keyrxcnt, #0
  325:	  0076	30 B4 0C			jnb	t0, exint0ex		;no stop bit?
  326:	  0079	12 09 C7			call	keydecode
  327:	  007C	80 07				sjmp 	exint0ex
  328:
  329:	  007E	E5 3B		exint0a:	mov	a, keyrxval
  330:	  0080	A2 B4				mov	c, t0			;shift in bit of t0
  331:	  0082	13				rrc	a
  332:	  0083	F5 3B				mov	keyrxval, a
  333:
  334:	  0085	D0 E0		exint0ex:	pop	acc
  335:	  0087	D0 D0				pop	psw
  336:	  0089	32				reti
  337:
  338:
  339:
  340:				;LOCAT		equ	02100h
  341:				;
  342:				;		org	LOCAT
  343:				;
  344:				;		ORG    LOCAT
  345:				;		DB     0A5H,0E5H,0E0H,0A5H	;SIGNITURE BYTES
  346:				;		DB     35,0,0,0			;ID (35=PROG), id (253=startup)
  347:				;		DB     0,0,0,0			;PROMPT CODE VECTOR
  348:				;		DB     0,0,0,0			;RESERVED
  349:				;		DB     0,0,0,0			;RESERVED
  350:				;		DB     0,0,0,0			;RESERVED
  351:				;		DB     0,0,0,0			;USER DEFINED
  352:				;		DB     255,255,255,255		;LENGTH AND CHECKSUM (255=UNUSED)

ASEM-51 V1.3                                         Copyright (c) 2002 by W.W. Heinz                                         PAGE 8



 Line  I  Addr  Code            Source

  353:				;		DB     "VT100",0		;MAX 31 CHARACTERS, PLUS THE ZERO
  354:
  355:				;		ORG    LOCAT+64			;EXECUTABLE CODE BEGINS HERE
  356:
  357:	  008A			start:
  358:
  359:	  008A	75 81 00			mov	sp, #stack		;set stack
							     ^
			  @@@@@ symbol not defined @@@@@

  360:										;1  1  0  1	0    1    1   1
  361:	  008D	75 B0 D7			mov	p3, #0d7h		;RD WR T1 T0	INT1 INT0 TXD RXD
  362:				;		clr	T0
  363:				;		clr	T1			;E 6845 = low
  364:				;		clr	INT0			;charset 0
  365:				;		clr	INT1			;screen 0
  366:	  0090	E4				clr	a
  367:	  0091	F5 00				mov	AUXR1, a
							^
			  @@@@@ symbol not defined @@@@@

  368:	  0093	F5 A8				mov	ie, a
  369:
  370:
  371:				;		setb	PS			;make PS high priority
  372:										;enbale all, serial, timer0, extint0
  373:	  0095	75 A8 93			mov	ie, #093h		;ea - ET2 ES  ET1 EX1 ET0 EX0
  374:	  0098	D2 88				setb	it0			;set int0 to falling edge
  375:
  376:
  377:	  009A	12 07 4C			call	term_reset
  378:
  379:	  009D	74 11				mov	a, #C_XON
  380:	  009F	12 09 7B			call	cout
  381:
  382:	  00A2	12 08 E9	init:		call	init6845
  383:	  00A5	12 09 28			call	copyFont
  384:	  00A8	12 09 41			call	testScreen
  385:
  386:	  00AB	90 80 00			mov	dptr, #8000h
  387:	  00AE	E0				movx	a, @dptr
  388:	  00AF	E5 90				mov	a, p1
  389:	  00B1	14				dec	a
  390:	  00B2	60 06				jz	init_loop
  391:	  00B4	90 00 00			mov	dptr, #0h
  392:	  00B7	E0				movx	a, @dptr
  393:	  00B8	80 E8				sjmp	init
  394:
  395:	  00BA			init_loop:
  396:				;		call	cin
  397:				;		cjne	a, #'x', init_1
  398:				;		sjmp	init_2
  399:
  400:				;init_1:		cjne	a, #'y', init_loop
  401:
  402:				;loop_test:	call	cin

ASEM-51 V1.3                                         Copyright (c) 2002 by W.W. Heinz                                         PAGE 9



 Line  I  Addr  Code            Source

  403:				;		call	cout
  404:				;		sjmp	loop_test
  405:
  406:
  407:	  00BA	D2 8C		init_2:		setb	tr0				;start timer0
  408:	  00BC	12 07 4C			call	term_reset
  409:
  410:				;		mov	dptr, #msg1
  411:				;		call	print
  412:
  413:	  00BF	30 08 74	main_loop:	jnb	keyavail, main_serin		;key available?
  414:	  00C2	C2 08				clr	keyavail			;clear key available
  415:	  00C4	E5 3B				mov	a, keyrxval
  416:
  417:	  00C6	B4 84 02			cjne	a, #F5, main_F6			;F5 ?
  418:	  00C9	01 BA				ajmp	init_2				;reset terminal
  419:	  00CB	B4 85 0E	main_F6:	cjne	a, #F6, main_F7			;F6 ?
  420:	  00CE	E5 2A				mov	a, baudidx			;switch baud
  421:	  00D0	04				inc	a
  422:	  00D1	B4 05 01			cjne	a, #5, main_F6a
  423:	  00D4	E4				clr	a
  424:	  00D5	F5 2A		main_F6a:	mov	baudidx, a
  425:	  00D7	12 01 51			call	setbaud
  426:	  00DA	80 70				sjmp	main_status
  427:
  428:
  429:	  00DC	B4 86 10	main_F7:	cjne	a, #F7, main_F8			;F7 8/7 data bits, even/odd
  430:	  00DF	20 14 04			jb	databits, main_F7a
  431:	  00E2	D2 14				setb	databits
  432:	  00E4	80 66				sjmp	main_status
  433:	  00E6	B2 15		main_F7a:	cpl	evenodd
  434:	  00E8	20 15 61			jb	evenodd, main_status
  435:	  00EB	C2 14				clr	databits
  436:	  00ED	80 5D				sjmp	main_status
  437:
  438:
  439:	  00EF	B4 87 04	main_F8:	cjne	a, #F8, main_F9			;F8 terminal mode VT102 / ADM-3A
  440:	  00F2	B2 16				cpl	termmode
  441:	  00F4	80 56				sjmp	main_status
  442:
  443:	  00F6	B4 88 04	main_F9:	cjne	a, #F9, main_F12		;F9 dump mode
  444:	  00F9	B2 17				cpl	dump
  445:	  00FB	80 4F				sjmp	main_status
  446:
  447:
  448:	  00FD	B4 8B 0C	main_F12:	cjne	a, #F12, main_cout		;F12 cycle color
  449:	  0100	E5 3D				mov	a, defcol
  450:	  0102	24 10				add	a, #16
  451:	  0104	54 7F				anl	a, #07fh
  452:	  0106	F5 3D				mov	defcol, a
  453:	  0108	F5 2D				mov	color, a
  454:	  010A	80 B3				sjmp	main_loop
  455:
  456:	  010C	30 16 0C	main_cout:	jnb	termmode, main_cout3		;ADM-3A to uppercase?
  457:	  010F	B4 61 00			cjne	a, #'a', $+3			;< 'a'
  458:	  0112	40 07				jc	main_cout3

ASEM-51 V1.3                                        Copyright (c) 2002 by W.W. Heinz                                         PAGE 10



 Line  I  Addr  Code            Source

  459:	  0114	B4 7B 00			cjne	a, #'z'+1, $+3			;<= z?
  460:	  0117	50 02				jnc	main_cout3
  461:	  0119	94 1F				subb	a, #31				;=32, carry set
  462:
  463:	  011B	30 14 0A	main_cout3:	jnb	databits, main_cout2		;8 databits, just output
  464:	  011E	54 7F				anl	a, #07fh
  465:	  0120	A2 D0				mov	c, P
  466:	  0122	30 15 01			jnb	evenodd, main_cout1
  467:	  0125	B3				cpl	c
  468:	  0126	92 E7		main_cout1:	mov	acc.7, c
  469:
  470:	  0128	12 09 7B	main_cout2:	call	cout				;send out over serial
  471:	  012B	B4 0D 08			cjne	a, #C_CR, main_serin		;CR sent?
  472:	  012E	30 12 05			jnb	newlinemode, main_serin
  473:	  0131	74 0A				mov	a, #C_NEWLINE			;send LF, too
  474:	  0133	12 09 7B			call	cout
  475:
  476:	  0136	E5 34		main_serin:	mov	a, serstart			;serin available?
  477:	  0138	B5 35 02			cjne	a, serend, loop_cin
  478:	  013B	80 82				sjmp	main_loop			;no serin available
  479:
  480:	  013D	12 09 83	loop_cin:	call	cin				;read from serial
  481:	  0140	12 01 5D			call	ansiout				;output to terminal's CRT
  482:
  483:	  0143	E5 22				mov	a, flags2			;have flags changed?
  484:	  0145	65 3C				xrl	a, oldstatus
  485:	  0147	60 06				jz	main_loop1			;no
  486:	  0149	85 22 3C			mov	oldstatus, flags2
  487:	  014C	12 0B D6	main_status:	call	prtstatus			;print status-line
  488:	  014F	01 BF		main_loop1:	ajmp	main_loop
  489:
  490:	  0151	12 0B B0	setbaud:	call	getbaud
  491:	  0154	C2 8E				clr	tr1
  492:	  0156	F5 8D				mov	TH1, a
  493:	  0158	F5 8B				mov	TL1, a
  494:	  015A	D2 8E				setb	tr1
  495:	  015C	22				ret
  496:				;===============================================
  497:				; ansiout: dispatch vt102 or ADM-3A
  498:				;===============================================
  499:	  015D	30 14 02	ansiout:	jnb	databits, ansiout3	;8-bit?
  500:	  0160	54 7F				anl	a, #07fh		;mask out bit 7
  501:	  0162	FF		ansiout3:	mov	r7, a			;save acc in r7
  502:
  503:	  0163	20 17 25			jb	dump, dumpterm
  504:	  0166	20 16 3D			jb	termmode, adm3a		;switch to ADM-3A
  505:
  506:	  0169	E5 33				mov	a, state
  507:				;		jz	do_idle			;speed up
  508:	  016B	24 0C				add	a, #ansi_tab-ansiout1+1	;fetch low-byte
  509:	  016D	83				movc	a, @a+pc
  510:	  016E	C0 E0		ansiout1:	push	acc			;2
  511:	  0170	E5 33				mov	a, state		;2
  512:	  0172	24 04				add	a, #ansi_tab-ansiout2	;2
  513:	  0174	83				movc	a, @a+pc		;1 fetch, high-byte
  514:	  0175	C0 E0		ansiout2:	push	acc			;2

ASEM-51 V1.3                                        Copyright (c) 2002 by W.W. Heinz                                         PAGE 11



 Line  I  Addr  Code            Source

  515:	  0177	EF				mov	a, r7			;1
  516:	  0178	22				ret				;1
  517:
  518:	  0179	02 01 03 05	ansi_tab:	dw	do_idle, do_esc, do_csi, do_esc_q, do_esc_hash, do_cmd_arg, do_esc_lbrack, d
	  017D	03 68 06 84	o_csi_q
	  0181	06 88 06 A0
	  0185	06 94 06 39
  519:	  0189	06 94				dw	do_esc_rbrack
  520:
  521:	  018B	D2 10		dumpterm:	setb	wrap
  522:	  018D	31 95				acall	dumpterm1
  523:	  018F	31 95				acall	dumpterm1
  524:	  0191	7F 20				mov	r7, #' '
  525:	  0193	41 82				ajmp	draw_char
  526:
  527:	  0195	C4		dumpterm1:	swap	a		;SWAP A will be twice => A unchanged
  528:	  0196	C0 E0				push	acc
  529:	  0198	54 0F				anl	a, #15
  530:	  019A	24 90				add	a, #90h	; acc is 0x9X, where X is hex digit
  531:	  019C	D4				da	a		; if A to F, C=1 and lower four bits are 0..5
  532:	  019D	34 40				addc	a, #40h
  533:	  019F	D4				da	a
  534:	  01A0	FF				mov	r7, a
  535:	  01A1	51 82				acall	draw_char
  536:	  01A3	D0 E0				pop	acc
  537:	  01A5	22				ret
  538:				;===============================================
  539:				; ADM-3A code
  540:				;===============================================
  541:	  01A6	AF 33		adm3a:		mov	r7, state
  542:	  01A8	BF 00 48			cjne	r7, #ST_IDLE, adm_esc		;in ESC state?
  543:
  544:	  01AB	FF				mov	r7, a
  545:	  01AC	A2 01				mov	C, lastchar
  546:	  01AE	92 02				mov	lchartmp, C
  547:	  01B0	C2 01				clr	lastchar
  548:
  549:	  01B2	E4				clr	a
  550:	  01B3	F8				mov	r0, a				;x-offset
  551:	  01B4	F9				mov	r1, a				;y-offset
  552:	  01B5	FA				mov	r2, a				;scrolling, 0 = no
  553:
  554:	  01B6	BF 07 02			cjne	r7, #CTRLG, adm_ctrl_h
  555:	  01B9	41 1A				ajmp	do_idle_bell+3			;bell
  556:	  01BB	BF 08 02	adm_ctrl_h:	cjne	r7, #CTRLH, adm_ctrl_i
  557:	  01BE	41 1E				ajmp	do_idle_bs+3			;back space
  558:	  01C0	BF 09 02	adm_ctrl_i:	cjne	r7, #CTRLI, adm_ctrl_j
  559:	  01C3	41 25				ajmp	do_idle_tab+3			;tab
  560:	  01C5	BF 0A 02	adm_ctrl_j:	cjne	r7, #CTRLJ, adm_ctrl_k
  561:	  01C8	41 4E				ajmp	do_idle_nl+3			;newline
  562:	  01CA	BF 0B 02	adm_ctrl_k:	cjne	r7, #CTRLK, adm_ctrl_l
  563:	  01CD	61 36				ajmp	do_esc_M+3			;cursor up
  564:	  01CF	BF 0C 02	adm_ctrl_l:	cjne	r7, #CTRLL, adm_ctrl_m
  565:	  01D2	61 99				ajmp	do_csi_C+3			;cursor right
  566:	  01D4	BF 0D 02	adm_ctrl_m:	cjne	r7, #CTRLM, adm_ctrl_z
  567:	  01D7	41 59				ajmp	do_idle_cr+3			;carriage return

ASEM-51 V1.3                                        Copyright (c) 2002 by W.W. Heinz                                         PAGE 12



 Line  I  Addr  Code            Source

  568:	  01D9	BF 1A 05	adm_ctrl_z:	cjne	r7, #CTRLZ, adm_ctrl_esc
  569:	  01DC	12 08 51	adm_ctrl_z1:	call	clear_screen			;clr-home
  570:	  01DF	81 E4				ajmp	do_csi_rc
  571:	  01E1	BF 1B 04	adm_ctrl_esc:	cjne	r7, #ESC, adm_ctrl_lt
  572:	  01E4	75 33 02			mov	state, #ST_ESC			;ESC
  573:	  01E7	22				ret
  574:	  01E8	BF 1E 02	adm_ctrl_lt:	cjne	r7, #CTRLLT, adm_ctrl_gr
  575:	  01EB	81 E4				ajmp	do_csi_rc			;CTRL-< (home)
  576:	  01ED	BF 1F 01	adm_ctrl_gr:	cjne	r7, #CTRLGT, adm_ctrl_draw
  577:	  01F0	22				ret					;CTRL-> (direct)
  578:
  579:	  01F1	41 82		adm_ctrl_draw:	ajmp	draw_char
  580:
  581:
  582:	  01F3	75 33 00	adm_esc:	mov	state, #ST_IDLE
  583:	  01F6	BF 2A 02			cjne	r7, #'*', adm_esc_7
  584:	  01F9	21 DC				ajmp	adm_ctrl_z1			;clr-home
  585:	  01FB	BF 37 02	adm_esc_7:	cjne	r7, #'7', adm_esc_ex
  586:	  01FE	D2 03				setb	inverse
  587:	  0200	22		adm_esc_ex:	ret
  588:				;===============================================
  589:				; state IDLE
  590:				;===============================================
  591:	  0201	A2 01		do_idle:	mov	C, lastchar
  592:	  0203	92 02				mov	lchartmp, C
  593:	  0205	C2 01				clr	lastchar
  594:
  595:	  0207	E4				clr	a
  596:	  0208	F8				mov	r0, a				;x-offset
  597:	  0209	F9				mov	r1, a				;y-offset
  598:	  020A	FA				mov	r2, a				;scrolling, 0 = no
  599:
  600:	  020B	BF 7F 04	do_idle_del:	cjne	r7, #C_DEL, do_idle_pre
  601:	  020E	18				dec	r0
  602:	  020F	02 06 DE			jmp	ansi_move
  603:
  604:	  0212	BF 20 00	do_idle_pre:	cjne	r7, #32, $+3			;speed up
  605:	  0215	50 6B				jnc	draw_char
  606:
  607:	  0217	BF 07 01	do_idle_bell:	cjne	r7, #C_BELL, do_idle_bs
  608:	  021A	22				ret					;no bell yet
  609:
  610:	  021B	BF 08 04	do_idle_bs:	cjne	r7, #C_BACKSP, do_idle_tab	;backspace
  611:	  021E	18				dec	r0
  612:	  021F	02 06 DE			jmp	ansi_move
  613:
  614:	  0222	BF 09 26	do_idle_tab:	cjne	r7, #C_TAB, do_idle_nl		;tabulator
  615:	  0225	12 07 9A			call	tab_set_r0_r1
  616:	  0228	E4		do_idle_tab3:	clr	a
  617:	  0229	09				inc	r1
  618:	  022A	05 37				inc	cursorx
  619:	  022C	B9 08 10			cjne	r1, #8, do_idle_tab1
  620:	  022F	08				inc	r0
  621:	  0230	F9				mov	r1, a
  622:	  0231	B8 4A 0B			cjne	r0, #tabutab+10, do_idle_tab1
  623:	  0234	F8				mov	r0, a

ASEM-51 V1.3                                        Copyright (c) 2002 by W.W. Heinz                                         PAGE 13



 Line  I  Addr  Code            Source

  624:	  0235	F5 37				mov	cursorx, a
  625:	  0237	09				inc	r1
  626:	  0238	0A				inc	r2				;scroll on
  627:	  0239	12 06 DE			call	ansi_move
  628:	  023C	12 07 9A			call	tab_set_r0_r1
  629:	  023F	12 07 AA	do_idle_tab1:	call	getbit
  630:	  0242	56				anl	a, @r0
  631:	  0243	60 E3				jz	do_idle_tab3			;bit not found
  632:	  0245	E4		do_idle_tab2:	clr	a
  633:	  0246	F8				mov	r0, a
  634:	  0247	F9				mov	r1, a
  635:	  0248	02 06 DE			jmp	ansi_move
  636:
  637:
  638:	  024B	BF 0A 08	do_idle_nl:	cjne	r7, #C_NEWLINE, do_idle_cr
  639:	  024E	75 37 00	do_newline:	mov	cursorx, #0
  640:	  0251	09				inc	r1
  641:	  0252	0A				inc	r2
  642:	  0253	02 06 DE			jmp	ansi_move
  643:
  644:	  0256	BF 0D 0A	do_idle_cr:	cjne	r7, #C_CR, do_idle_esc
  645:	  0259	75 37 00	do_cr:		mov	cursorx, #0
  646:	  025C	12 06 DE			call	ansi_move
  647:	  025F	20 12 EC			jb	newlinemode, do_newline		;per default, CR
  648:	  0262	22				ret
  649:
  650:	  0263	BF 1B 06	do_idle_esc:	cjne	r7, #C_ESC, do_idle_so
  651:	  0266	75 33 02			mov	state, #ST_ESC
  652:	  0269	02 07 B6			jmp	clearargs
  653:
  654:	  026C	BF 0E 03	do_idle_so:	cjne	r7, #C_SO, do_idle_si
  655:	  026F	D2 00				setb	special
  656:	  0271	22				ret
  657:
  658:	  0272	BF 0F 03	do_idle_si:	cjne	r7, #C_SI, do_idle_vt
  659:	  0275	C2 00				clr	special
  660:	  0277	22				ret
  661:
  662:	  0278	BF 0B 02	do_idle_vt:	cjne	r7, #C_VT, do_idle_ff
  663:	  027B	80 D1				sjmp	do_newline
  664:
  665:	  027D	BF 0C 02	do_idle_ff:	cjne	r7, #C_FF, do_idle_end
  666:	  0280	80 CC				sjmp	do_newline
  667:
  668:	  0282			do_idle_end:	;ajmp	draw_char
  669:
  670:
  671:
  672:	  0282	C0 07		draw_char:	push	ar7				;save r7 (received byte)
  673:	  0284	12 08 B2			call	cursor_off			;reset + disable cursor
  674:
  675:	  0287	0A				inc	r2				;with scroll
  676:	  0288	30 02 05			jnb	lchartmp, char_out		;last char in line?
  677:	  028B	30 10 02			jnb	wrap, char_out			;wrap turned on?
  678:	  028E	51 4E				call	do_newline
  679:

ASEM-51 V1.3                                        Copyright (c) 2002 by W.W. Heinz                                         PAGE 14



 Line  I  Addr  Code            Source

  680:				;===============================================
  681:				; draws a char in ACC at cursor position
  682:				;===============================================
  683:	  0290	12 08 D5	char_out:	call	comp_dptr
  684:
  685:	  0293	D0 01				pop	ar1
  686:
  687:	  0295	30 00 0E			jnb	special, char_out_3	;special not set?
  688:	  0298	B9 60 00			cjne	r1, #060h, $+3
  689:	  029B	40 09				jc	char_out_3		;<60h, do nothing
  690:	  029D	B9 7F 00			cjne	r1, #07fh, $+3
  691:	  02A0	50 04				jnc	char_out_3		;>=7fh, do nothing
  692:	  02A2	E9				mov	a, r1
  693:	  02A3	94 5E				subb	a, #5eh			;carry set! subtract 5fh
  694:	  02A5	F9				mov	r1, a
  695:	  02A6	30 13 3D	char_out_3:	jnb	insert, char_out_4	;insert mode?
  696:
  697:	  02A9	C3				clr	c
  698:	  02AA	74 4F				mov	a, #WIDTH-1
  699:	  02AC	95 37				subb	a, cursorx
  700:	  02AE	33				rlc	a			;* 2
  701:	  02AF	60 35				jz	char_out_4
  702:	  02B1	F8				mov	r0, a			;R0: number of chars to copy in
  703:	  02B2	04				inc	a
  704:
  705:	  02B3	25 00				add	a, dp1l			;add r0, to dptr1 (destination)
							   ^
			  @@@@@ symbol not defined @@@@@

  706:	  02B5	F5 00				mov	dp1l, a
							^
			  @@@@@ symbol not defined @@@@@

  707:	  02B7	E5 00				mov	a, dp1h
							   ^
			  @@@@@ symbol not defined @@@@@

  708:	  02B9	34 00				addc	a, #0
  709:	  02BB	F5 00				mov	dp1h, a
							^
			  @@@@@ symbol not defined @@@@@

  710:
  711:	  02BD	E5 00				mov	a, dp1l			;dptr0 = dptr1 - 2 (source)
							   ^
			  @@@@@ symbol not defined @@@@@

  712:	  02BF	94 02				subb	a, #2
  713:	  02C1	F5 00				mov	dp0l, a
							^
			  @@@@@ symbol not defined @@@@@

  714:	  02C3	E5 00				mov	a, dp1h
							   ^
			  @@@@@ symbol not defined @@@@@


ASEM-51 V1.3                                        Copyright (c) 2002 by W.W. Heinz                                         PAGE 15



 Line  I  Addr  Code            Source

  715:	  02C5	94 00				subb	a, #0
  716:	  02C7	F5 00				mov	dp0h, a
							^
			  @@@@@ symbol not defined @@@@@

  717:
  718:
  719:
  720:
  721:	  02C9	E0		char_out_2:	movx	a, @dptr		;copy r0 bytes from right to left
  722:	  02CA	05 00				inc	auxr1
							^
			  @@@@@ symbol not defined @@@@@

  723:	  02CC	E5 90				mov	a, p1
  724:	  02CE	F0				movx	@dptr, a
  725:	  02CF	05 00				inc	auxr1
							^
			  @@@@@ symbol not defined @@@@@

  726:	  02D1	E5 00				mov	a, dp0l
							   ^
			  @@@@@ symbol not defined @@@@@

  727:	  02D3	70 02				jnz	char_out_2a
  728:	  02D5	15 00				dec	dp0h
							^
			  @@@@@ symbol not defined @@@@@

  729:	  02D7	15 00		char_out_2a:	dec	dp0l
							^
			  @@@@@ symbol not defined @@@@@

  730:	  02D9	E5 00				mov	a, dp1l
							   ^
			  @@@@@ symbol not defined @@@@@

  731:	  02DB	70 02				jnz	char_out_2b
  732:	  02DD	15 00				dec	dp1h
							^
			  @@@@@ symbol not defined @@@@@

  733:	  02DF	15 00		char_out_2b:	dec	dp1l
							^
			  @@@@@ symbol not defined @@@@@

  734:	  02E1	D8 E6				djnz	r0, char_out_2
  735:	  02E3	12 08 D5			call	comp_dptr
  736:
  737:	  02E6	E9		char_out_4:	mov	a, r1
  738:	  02E7	05 00				inc	auxr1
							^
			  @@@@@ symbol not defined @@@@@

  739:	  02E9	F0				movx	@dptr, a
  740:	  02EA	A3				inc	dptr

ASEM-51 V1.3                                        Copyright (c) 2002 by W.W. Heinz                                         PAGE 16



 Line  I  Addr  Code            Source

  741:	  02EB	E5 2D				mov	a, color
  742:	  02ED	30 03 01			jnb	inverse, char_out_1
  743:	  02F0	C4				swap	a
  744:	  02F1	F0		char_out_1:	movx	@dptr, a
  745:	  02F2	05 00				inc	auxr1
							^
			  @@@@@ symbol not defined @@@@@

  746:
  747:	  02F4	E5 37				mov	a, cursorx
  748:	  02F6	B4 4F 02			cjne	a, #WIDTH-1, draw_char_1
  749:	  02F9	D2 01				setb	lastchar
  750:
  751:	  02FB	78 01		draw_char_1:	mov	r0, #1
  752:	  02FD	79 00				mov	r1, #0
  753:	  02FF	12 08 92			call	draw_cursor
  754:	  0302	02 06 DE			jmp	ansi_move
  755:
  756:				;===============================================
  757:				; state ESC
  758:				;===============================================
  759:	  0305	75 33 00	do_esc:		mov	state, #ST_IDLE
  760:	  0308	B4 1B 03			cjne	a, #C_ESC, do_esc_csi	;2x ESC? return to monitor
  761:				;		call	dump_vars
  762:				;		call	cin
  763:	  030B	02 00 00			ljmp	monstart
							^
			  @@@@@ symbol not defined @@@@@

  764:
  765:	  030E	B4 5B 04	do_esc_csi:	cjne	a, #'[', do_esc_7	;switch to CSI state
  766:	  0311	75 33 04			mov	state, #ST_CSI
  767:	  0314	22				ret
  768:
  769:	  0315	B4 37 07	do_esc_7:	cjne	a, #'7', do_esc_8	;save cursor
  770:	  0318	85 37 2B			mov	scursorx, cursorx
  771:	  031B	85 38 2C			mov	scursory, cursory
  772:	  031E	22				ret
  773:
  774:	  031F	B4 38 09	do_esc_8:	cjne	a, #'8', do_esc_D	;restore cursor
  775:	  0322	85 2B 37			mov	cursorx, scursorx
  776:	  0325	85 2C 38			mov	cursory, scursory
  777:	  0328	02 08 8F			jmp	move_cursor
  778:
  779:	  032B	B4 44 05	do_esc_D:	cjne	a, #'D', do_esc_M	;move cursor down and scroll
  780:	  032E	0A				inc	r2			;with scrolling
  781:	  032F	74 42				mov	a, #'B'
  782:	  0331	61 76				ajmp	do_csi_keys		;do cursor down
  783:
  784:	  0333	B4 4D 05	do_esc_M:	cjne	a, #'M', do_esc_ha	;move cursor up and scroll
  785:	  0336	0A				inc	r2			;with scrolling
  786:	  0337	74 41				mov	a, #'A'
  787:	  0339	61 76				ajmp	do_csi_keys		;do cursor up
  788:
  789:	  033B	B4 23 04	do_esc_ha:	cjne	a, #'#', do_esc_lbr
  790:	  033E	75 33 08			mov	state, #ST_ESC_HASH

ASEM-51 V1.3                                        Copyright (c) 2002 by W.W. Heinz                                         PAGE 17



 Line  I  Addr  Code            Source

  791:	  0341	22				ret
  792:
  793:	  0342	B4 28 04	do_esc_lbr:	cjne	a, #'(', do_esc_rbr
  794:	  0345	75 33 0C			mov	state, #ST_ESC_LBRACK
  795:	  0348	22				ret
  796:
  797:	  0349	B4 29 04	do_esc_rbr:	cjne	a, #')', do_esc_c
  798:	  034C	75 33 10			mov	state, #ST_ESC_RBRACK
  799:	  034F	22				ret
  800:
  801:	  0350	B4 63 03	do_esc_c:	cjne	a, #'c', do_esc_H
  802:	  0353	02 07 4C			jmp	term_reset
  803:
  804:	  0356	B4 48 09	do_esc_H:	cjne	a, #'H', do_esc_Z
  805:	  0359	12 07 9A			call	tab_set_r0_r1
  806:	  035C	12 07 AA			call	getbit
  807:	  035F	46				orl	a, @r0
  808:	  0360	F6				mov	@r0, a
  809:	  0361	22				ret
  810:
  811:	  0362	B4 5A 02	do_esc_Z:	cjne	a, #'Z', do_esc_ex
  812:	  0365	81 9F				ajmp	do_csi_cc2
  813:
  814:	  0367	22		do_esc_ex:	ret
  815:
  816:				;===============================================
  817:				; state CSI
  818:				;===============================================
  819:	  0368			do_csi:
  820:	  0368	12 07 35			call	isparm			;is parameter?
  821:	  036B	50 09				jnc	do_csi_keys		;no
  822:	  036D	85 33 23			mov	retstate, state
  823:	  0370	75 33 0A			mov	state, #ST_CMD_ARG
  824:	  0373	02 06 A0			jmp	do_cmd_arg
  825:
  826:	  0376	78 00		do_csi_keys:	mov	r0, #0			;x (column)
  827:	  0378	79 00				mov	r1, #0			;y (row
  828:	  037A	75 33 00			mov	state, #ST_IDLE
  829:
  830:	  037D	B4 41 0B			cjne	a, #'A', do_csi_B	;cursor up
  831:	  0380	12 06 CA			call	args_gr_zero
  832:	  0383	E5 26				mov	a, arg0
  833:	  0385	F4				cpl	a
  834:	  0386	04				inc	a
  835:	  0387	F9				mov	r1, a
  836:	  0388	02 06 DE			jmp	ansi_move
  837:
  838:
  839:	  038B	B4 42 08	do_csi_B: 	cjne	a, #'B', do_csi_C	;cursor down
  840:	  038E	12 06 CA			call	args_gr_zero
  841:	  0391	A9 26				mov	r1, arg0
  842:	  0393	02 06 DE			jmp	ansi_move
  843:
  844:
  845:	  0396	B4 43 08	do_csi_C:	cjne	a, #'C', do_csi_D	;cursor right
  846:	  0399	12 06 CA			call	args_gr_zero

ASEM-51 V1.3                                        Copyright (c) 2002 by W.W. Heinz                                         PAGE 18



 Line  I  Addr  Code            Source

  847:	  039C	A8 26				mov	r0, arg0
  848:	  039E	02 06 DE			jmp	ansi_move
  849:
  850:
  851:	  03A1	B4 44 0B	do_csi_D:	cjne	a, #'D', do_csi_H 	;cursor left
  852:	  03A4	12 06 CA			call	args_gr_zero
  853:	  03A7	E5 26				mov	a, arg0
  854:	  03A9	F4				cpl	a
  855:	  03AA	04				inc	a
  856:	  03AB	F8				mov	r0, a
  857:	  03AC	02 06 DE			jmp	ansi_move
  858:
  859:
  860:	  03AF	B4 48 02	do_csi_H:	cjne	a, #'H', do_csi_H1	;position cursor
  861:	  03B2	80 03				sjmp	do_csi_H2
  862:	  03B4	B4 66 10	do_csi_H1:	cjne	a, #'f', do_csi_s
  863:	  03B7	12 06 CA	do_csi_H2:	call	args_gr_zero
  864:	  03BA	E5 26				mov	a, arg0
  865:	  03BC	14				dec	a
  866:	  03BD	F5 38				mov	cursory, a
  867:	  03BF	E5 27				mov	a, arg1
  868:	  03C1	14				dec	a
  869:	  03C2	F5 37				mov	cursorx, a
  870:	  03C4	02 06 DE			jmp	ansi_move
  871:
  872:
  873:	  03C7	B4 73 07	do_csi_s:	cjne	a, #'s', do_csi_u	;save cursor
  874:	  03CA	85 37 2B			mov	scursorx, cursorx
  875:	  03CD	85 38 2C			mov	scursory, cursory
  876:	  03D0	22				ret
  877:
  878:
  879:	  03D1	B4 75 09	do_csi_u:	cjne	a, #'u', do_csi_m	;restore cursor
  880:	  03D4	85 2B 37			mov	cursorx, scursorx
  881:	  03D7	85 2C 38			mov	cursory, scursory
  882:	  03DA	02 06 DE			jmp	ansi_move
  883:
  884:
  885:	  03DD	B4 6D 6A	do_csi_m:	cjne	a, #'m', do_csi_n	;color handling
  886:	  03E0	A9 25				mov	r1, nargs
  887:	  03E2	B9 00 06			cjne	r1, #0, do_csi_ma	;no args, reset
  888:	  03E5	85 3D 2D			mov	color, defcol
  889:	  03E8	C2 03				clr	inverse
  890:	  03EA	22				ret
  891:	  03EB	78 26		do_csi_ma:	mov	r0, #arg0
  892:	  03ED	E6		do_csi_mc:	mov	a, @r0
  893:	  03EE	B4 00 07			cjne	a, #0, do_csi_md	;if arg = 0, all attrs off
  894:	  03F1	85 3D 2D			mov	color, defcol
  895:	  03F4	C2 03				clr	inverse
  896:	  03F6	81 46				ajmp	do_csi_mx3		;loop nargs
  897:	  03F8	B4 1E 00	do_csi_md:	cjne	a, #30, do_csi_mb
  898:	  03FB	50 02		do_csi_mb:	jnc	do_csi_me		;arg >= 30
  899:	  03FD	80 2A				sjmp	do_csi_mx		;loop nargs
  900:	  03FF	B4 26 00	do_csi_me:	cjne	a, #38, do_csi_mf
  901:	  0402	50 42		do_csi_mf:	jnc	do_csi_mx3		;>= 38	loop nargs
  902:	  0404	94 1D				subb	a, #29			; - 30 (carry set!)

ASEM-51 V1.3                                        Copyright (c) 2002 by W.W. Heinz                                         PAGE 19



 Line  I  Addr  Code            Source

  903:	  0406	C4				swap	a
  904:	  0407	FA				mov	r2, a
  905:	  0408	E5 2D				mov	a, color
  906:	  040A	54 0F				anl	a, #0fh
  907:	  040C	4A				orl	a, r2
  908:	  040D	F5 2D				mov	color, a
  909:	  040F	81 46				ajmp	do_csi_mx3		;loop nargs
  910:	  0411	B4 28 00	do_csi_mg:	cjne	a, #40, $+3
  911:	  0414	50 02				jnc	do_csi_mh		;>= 40
  912:	  0416	81 29				ajmp	do_csi_mx		;loop nargs
  913:	  0418	B4 30 00	do_csi_mh:	cjne	a, #48, $+3
  914:	  041B	50 0C				jnc	do_csi_mx		;>= 48 loop
  915:	  041D	94 27				subb	a, #39			;- 40 (carry set!)
  916:	  041F	FA				mov	r2, a
  917:	  0420	F5 2D				mov	color, a
  918:	  0422	54 F0				anl	a, #0f0h
  919:	  0424	4A				orl	a, r2
  920:	  0425	F5 2D				mov	color, a
  921:	  0427	81 46				ajmp	do_csi_mx3		;loop nargs
  922:	  0429	B4 07 02	do_csi_mx:	cjne	a, #7, do_csi_mx1	;inverse
  923:	  042C	D2 03				setb	inverse
  924:	  042E	B4 01 0A	do_csi_mx1:	cjne	a, #1, do_csi_mx2	;bold
  925:	  0431	E5 2D				mov	a, color
  926:	  0433	54 0F				anl	a, #0fh
  927:	  0435	44 30				orl	a, #YELLOW SHL 4
  928:	  0437	F5 2D				mov	color, a
  929:	  0439	80 0B				sjmp	do_csi_mx3
  930:	  043B	B4 05 08	do_csi_mx2:	cjne	a, #5, do_csi_mx3
  931:	  043E	E5 2D				mov	a, color		;underline
  932:	  0440	54 0F				anl	a, #0fh
  933:	  0442	44 10				orl	a, #RED SHL 4
  934:	  0444	F5 2D				mov	color, a
  935:	  0446	08		do_csi_mx3:	inc	r0
  936:	  0447	D9 A4				djnz	r1, do_csi_mc
  937:	  0449	22				ret
  938:
  939:	  044A	B4 6E 4F	do_csi_n:	cjne	a, #'n', do_csi_cc	;terminal status report
  940:	  044D	E5 26				mov	a, arg0
  941:	  044F	B4 05 0E			cjne	a, #5, do_csi_n6
  942:	  0452	78 01				mov	r0, #1			;always OK: "ESC [ 0 n"
  943:	  0454	E8		do_csi_n1:	mov	a, r0
  944:	  0455	12 04 8F			call	getreport
  945:	  0458	12 09 7B			call	cout
  946:	  045B	08				inc	r0
  947:	  045C	B8 05 F5			cjne	r0, #5, do_csi_n1
  948:	  045F	22				ret
  949:	  0460	B4 06 39	do_csi_n6:	cjne	a, #6, do_csi_cc	;report cursor position
  950:	  0463	74 1B				mov	a, #ESC
  951:	  0465	12 09 7B			call	cout
  952:	  0468	74 5B				mov	a, #'['
  953:	  046A	12 09 7B			call	cout
  954:	  046D	E5 38				mov	a, cursory
  955:	  046F	95 31				subb	a, top
  956:	  0471	12 04 83			call	sendpos
  957:	  0474	74 3B				mov	a, #';'
  958:	  0476	12 09 7B			call	cout

ASEM-51 V1.3                                        Copyright (c) 2002 by W.W. Heinz                                         PAGE 20



 Line  I  Addr  Code            Source

  959:	  0479	E5 37				mov	a, cursorx
  960:	  047B	12 04 83			call	sendpos
  961:	  047E	74 52				mov	a, #'R'
  962:	  0480	02 09 7B			jmp	cout
  963:
  964:	  0483	04		sendpos:	inc	a
  965:	  0484	12 08 C8			call	hex2dez
  966:	  0487	E8				mov	a, r0
  967:	  0488	12 09 7B			call	cout
  968:	  048B	E9				mov	a, r1
  969:	  048C	02 09 7B			jmp	cout
  970:
  971:	  048F	83		getreport:	movc	a, @a+pc
  972:	  0490	22				ret
  973:	  0491	1B 5B 30 6E	reportok:	db	ESC, "[0n"		;terminal OK
  974:	  0495	1B 5B 3F 31	reportda:	db	ESC, "[?1;0c"		;device attributes (VT100, no options)
	  0499	3B 30 63
  975:
  976:	  049C	B4 63 0D	do_csi_cc:	cjne	a, #'c', do_csi_r
  977:	  049F	78 05		do_csi_cc2:	mov	r0, #5			;reportda
  978:	  04A1	E8		do_csi_cc1:	mov	a, r0
  979:	  04A2	91 8F				call	getreport
  980:	  04A4	12 09 7B			call	cout
  981:	  04A7	08				inc	r0
  982:	  04A8	B8 0C F6			cjne	r0, #5+7, do_csi_cc1
  983:	  04AB	22				ret
  984:
  985:	  04AC	B4 72 45	do_csi_r:	cjne	a, #'r', do_csi_J	;set scroll margins
  986:	  04AF	E5 25				mov	a, nargs
  987:	  04B1	70 08				jnz	do_csi_ra		;nargs > 0
  988:	  04B3	75 31 00			mov	top, #0
  989:	  04B6	75 32 17			mov	bottom, #HEIGHT-1
  990:	  04B9	80 29				sjmp	do_csi_rc
  991:	  04BB	12 06 CA	do_csi_ra:	call	args_gr_zero
  992:	  04BE	B4 02 00			cjne	a, #2, $+3
  993:	  04C1	50 0A				jnc	do_csi_rb		;>= 2 args
  994:	  04C3	85 26 31			mov	top, arg0
  995:	  04C6	15 31				dec	top
  996:	  04C8	75 32 17			mov	bottom, #HEIGHT-1
  997:	  04CB	80 17				sjmp	do_csi_rc
  998:	  04CD	E5 26		do_csi_rb:	mov	a, arg0
  999:	  04CF	95 27				subb	a, arg1			;carry clear!
 1000:	  04D1	50 21				jnc	do_csi_J		; a >= b
 1001:	  04D3	85 26 31			mov	top, arg0
 1002:	  04D6	15 31				dec	top
 1003:
 1004:	  04D8	E5 27				mov	a, arg1
 1005:	  04DA	B4 19 00			cjne	a, #HEIGHT+1, $+3
 1006:	  04DD	40 02				jc	do_csi_re
 1007:	  04DF	74 18				mov	a, #HEIGHT
 1008:	  04E1	14		do_csi_re:	dec	a
 1009:	  04E2	F5 32				mov	bottom, a
 1010:
 1011:	  04E4	E4		do_csi_rc:	clr	a			;cursor home
 1012:	  04E5	F8				mov	r0, a
 1013:	  04E6	F9				mov	r1, a

ASEM-51 V1.3                                        Copyright (c) 2002 by W.W. Heinz                                         PAGE 21



 Line  I  Addr  Code            Source

 1014:	  04E7	F5 37				mov	cursorx, a
 1015:	  04E9	F5 38				mov	cursory, a
 1016:	  04EB	30 11 03			jnb	origin, do_csi_rd
 1017:	  04EE	85 31 38			mov	cursory, top
 1018:	  04F1	02 06 DE	do_csi_rd:	jmp	ansi_move
 1019:
 1020:
 1021:	  04F4	B4 4A 35	do_csi_J:	cjne	a, #'J', do_csi_ques		;ED – Erase In Display
 1022:	  04F7	A8 26				mov	r0, arg0
 1023:	  04F9	B8 00 0F	do_csi_Ja:	cjne	r0, #0, do_csi_Jb
 1024:	  04FC	A8 38		do_csi_Jc:	mov	r0, cursory			;Erase from the active position to the end o
				f the screen, inclusive (default)
 1025:	  04FE	79 17				mov	r1, #HEIGHT-1			;y from cursory to HEIGHT-1
 1026:	  0500	AA 37				mov	r2, cursorx			;start position x
 1027:	  0502	74 50				mov	a, #WIDTH			;chars to erase first line
 1028:	  0504	9A				subb	a, r2
 1029:	  0505	FB				mov	r3, a
 1030:	  0506	7D 50				mov	r5, #WIDTH			;chars to erase last line
 1031:	  0508	02 08 5E			jmp	clear_lines
 1032:
 1033:	  050B	B8 01 0E	do_csi_Jb:	cjne	r0, #1, do_csi_Jd
 1034:	  050E	78 00				mov	r0, #0				;Erase from start of the screen to the activ
				e position, inclusive
 1035:	  0510	A9 38				mov	r1, cursory
 1036:	  0512	7A 00				mov	r2, #0
 1037:	  0514	7B 50				mov	r3, #WIDTH			;chars to erase first line
 1038:	  0516	AD 37				mov	r5, cursorx
 1039:	  0518	0D				inc	r5				;chars to erase last line
 1040:	  0519	02 08 5E			jmp	clear_lines
 1041:
 1042:	  051C	B8 02 0D	do_csi_Jd:	cjne	r0, #2, do_csi_ques
 1043:	  051F	78 00				mov	r0, #0				;Erase all of the display – all lines are er
				ased and the cursor does not move.
 1044:	  0521	79 17				mov	r1, #HEIGHT-1
 1045:	  0523	7A 00				mov	r2, #0
 1046:	  0525	7B 50				mov	r3, #WIDTH			;chars to erase first line
 1047:	  0527	7D 50				mov	r5, #WIDTH			;chars to erase first line
 1048:	  0529	02 08 5E			jmp	clear_lines
 1049:
 1050:	  052C	B4 3F 04	do_csi_ques:	cjne	a, #'?', do_csi_K
 1051:	  052F	75 33 0E			mov	state, #ST_CSI_Q
 1052:	  0532	22				ret
 1053:
 1054:	  0533	B4 4B 2A	do_csi_K:	cjne	a, #'K', do_csi_g
 1055:	  0536	A8 38				mov	r0, cursory
 1056:	  0538	A9 38				mov	r1, cursory
 1057:	  053A	E5 26				mov	a, arg0
 1058:	  053C	B4 00 09			cjne	a, #0, do_csi_Ka		;Erase from the active position to the end o
				f the line, inclusive (default)
 1059:	  053F	AA 37				mov	r2, cursorx
 1060:	  0541	74 50				mov	a, #WIDTH
 1061:	  0543	9A				subb	a, r2
 1062:	  0544	FD				mov	r5, a
 1063:	  0545	02 08 5E			jmp	clear_lines
 1064:	  0548	B4 01 08	do_csi_Ka:	cjne	a, #1, do_csi_Kb		;Erase from the start of the screen to the a
				ctive position, inclusive

ASEM-51 V1.3                                        Copyright (c) 2002 by W.W. Heinz                                         PAGE 22



 Line  I  Addr  Code            Source

 1065:	  054B	7A 00				mov	r2, #0
 1066:	  054D	AD 37				mov	r5, cursorx
 1067:	  054F	0D				inc	r5
 1068:	  0550	02 08 5E			jmp	clear_lines
 1069:	  0553	B4 02 07	do_csi_Kb:	cjne	a, #2, do_csi_end1		;Erase all of the line, inclusive
 1070:	  0556	7A 00				mov	r2, #0
 1071:	  0558	7D 50				mov	r5, #WIDTH
 1072:	  055A	02 08 5E			jmp	clear_lines
 1073:	  055D	02 06 38	do_csi_end1:	jmp	do_csi_end
 1074:
 1075:	  0560	B4 67 14	do_csi_g:	cjne	a, #'g', do_csi_L
 1076:	  0563	E5 26				mov	a, arg0
 1077:	  0565	B4 03 03			cjne	a, #3, do_csi_g1
 1078:	  0568	02 07 8E			jmp	cleartabu			;clear all tabs
 1079:	  056B	12 07 9A	do_csi_g1:	call	tab_set_r0_r1
 1080:	  056E	12 07 AA			call	getbit
 1081:	  0571	F4				cpl	a
 1082:	  0572	56				anl	a, @r0
 1083:	  0573	F6				mov	@r0, a
 1084:	  0574	02 06 38			jmp	do_csi_end
 1085:
 1086:	  0577	B4 4C 26	do_csi_L:	cjne	a, #'L', do_csi_MM		;insert line
 1087:	  057A	12 06 CA			call	args_gr_zero
 1088:	  057D	E5 38				mov	a, cursory			;check if within bounds
 1089:	  057F	B5 31 00			cjne	a, top, $+3
 1090:	  0582	40 D9				jc	do_csi_end1
 1091:	  0584	B5 32 00			cjne	a, bottom, $+3
 1092:	  0587	80 02				sjmp	do_csi_L1
 1093:	  0589	50 D2				jnc	do_csi_end1
 1094:	  058B	12 08 B2	do_csi_L1:	call	cursor_off
 1095:	  058E	A8 26				mov	r0, arg0
 1096:	  0590	7B FF		do_csi_L2:	mov	r3, #-1
 1097:	  0592	C3				clr	c
 1098:	  0593	E5 32				mov	a, bottom
 1099:	  0595	95 38				subb	a, cursory
 1100:	  0597	FC				mov	r4, a
 1101:	  0598	12 07 D0			call	scroll_r4
 1102:	  059B	D8 F3				djnz	r0, do_csi_L2
 1103:	  059D	02 08 A0			jmp	cursor_on
 1104:
 1105:	  05A0	B4 4D 2D	do_csi_MM:	cjne	a, #'M', do_csi_hh		;delete line
 1106:	  05A3	12 06 CA			call	args_gr_zero
 1107:	  05A6	E5 38				mov	a, cursory			;check if within bounds
 1108:	  05A8	B5 31 00			cjne	a, top, $+3
 1109:	  05AB	40 B0				jc	do_csi_end1
 1110:	  05AD	B5 32 00			cjne	a, bottom, $+3
 1111:	  05B0	80 02				sjmp	do_csi_MM1
 1112:	  05B2	50 A9				jnc	do_csi_end1
 1113:	  05B4	12 08 B2	do_csi_MM1:	call	cursor_off
 1114:	  05B7	A8 26				mov	r0, arg0
 1115:	  05B9	C0 31				push	top
 1116:	  05BB	7B 01		do_csi_MM2:	mov	r3, #1
 1117:	  05BD	C3				clr	c
 1118:	  05BE	E5 32				mov	a, bottom
 1119:	  05C0	95 38				subb	a, cursory
 1120:	  05C2	FC				mov	r4, a

ASEM-51 V1.3                                        Copyright (c) 2002 by W.W. Heinz                                         PAGE 23



 Line  I  Addr  Code            Source

 1121:	  05C3	85 38 31			mov	top, cursory
 1122:	  05C6	12 07 D0			call	scroll_r4
 1123:	  05C9	D8 F0				djnz	r0, do_csi_MM2
 1124:	  05CB	D0 31				pop	top
 1125:	  05CD	02 08 A0			jmp	cursor_on
 1126:
 1127:	  05D0	75 33 00	do_csi_hh:	mov	state, #ST_IDLE			;h set NEWLINE / INSERT
 1128:	  05D3	85 22 3C			mov	oldstatus, flags2
 1129:
 1130:	  05D6	B4 68 16			cjne	a, #'h', do_csi_ll		;set mode
 1131:	  05D9	78 26				mov	r0, #arg0
 1132:	  05DB	A9 25				mov	r1, nargs
 1133:	  05DD	B9 00 01			cjne	r1, #0, do_csi_hh1		;>= 1 arg
 1134:	  05E0	22				ret
 1135:	  05E1	B6 14 02	do_csi_hh1:	cjne	@r0, #LNM, do_csi_hh2
 1136:	  05E4	D2 12				setb	newlinemode			;set newlinemode
 1137:	  05E6	B6 04 02	do_csi_hh2:	cjne	@r0, #IRM, do_csi_hhx
 1138:	  05E9	D2 13				setb	insert				;set insert mode
 1139:	  05EB	08		do_csi_hhx:	inc	r0
 1140:	  05EC	D9 F3				djnz	r1, do_csi_hh1
 1141:	  05EE	22				ret
 1142:
 1143:	  05EF	B4 6C 16	do_csi_ll:	cjne	a, #'l', do_csi_P		;h reset NEWLINE / INSERT
 1144:	  05F2	78 26				mov	r0, #arg0
 1145:	  05F4	A9 25				mov	r1, nargs
 1146:	  05F6	B9 00 01			cjne	r1, #0, do_csi_ll1
 1147:	  05F9	22				ret
 1148:	  05FA	B6 14 02	do_csi_ll1:	cjne	@r0, #LNM, do_csi_ll2
 1149:	  05FD	C2 12				clr	newlinemode			;clear newlinemode
 1150:	  05FF	B6 04 02	do_csi_ll2:	cjne	@r0, #IRM, do_csi_llx
 1151:	  0602	C2 13				clr	insert				;clear insert mode
 1152:	  0604	08		do_csi_llx:	inc	r0
 1153:	  0605	D9 F3				djnz	r1, do_csi_ll1
 1154:	  0607	22				ret
 1155:
 1156:	  0608	B4 50 2D	do_csi_P:	cjne	a, #'P', do_csi_end		;Delete Character (DCH)
 1157:	  060B	12 06 CA			call	args_gr_zero
 1158:	  060E	A9 26				mov	r1, arg0
 1159:	  0610	C3		do_csi_P2:	clr	c
 1160:	  0611	74 4F				mov	a, #WIDTH-1
 1161:	  0613	95 37				subb	a, cursorx
 1162:	  0615	60 21				jz	do_csi_end			;nothing to do
 1163:	  0617	23				rl	a
 1164:	  0618	F8				mov	r0, a
 1165:	  0619	12 08 D5			call	comp_dptr			;compute dptr1
 1166:	  061C	85 00 00			mov	dp0l, dp1l			;copy to dptr0
							^
			  @@@@@ symbol not defined @@@@@

 1167:	  061F	85 00 00			mov	dp0h, dp1h
							^
			  @@@@@ symbol not defined @@@@@

 1168:	  0622	A3				inc	dptr				;
 1169:	  0623	A3				inc	dptr				;dptr0 = dptr1 + 2
 1170:

ASEM-51 V1.3                                        Copyright (c) 2002 by W.W. Heinz                                         PAGE 24



 Line  I  Addr  Code            Source

 1171:	  0624	E0		do_csi_P1:	movx	a, @dptr
 1172:	  0625	E5 90				mov	a, P1
 1173:	  0627	A3				inc	dptr
 1174:	  0628	05 00				inc	auxr1
							^
			  @@@@@ symbol not defined @@@@@

 1175:	  062A	F0				movx	@dptr, a
 1176:	  062B	A3				inc	dptr
 1177:	  062C	05 00				inc	auxr1
							^
			  @@@@@ symbol not defined @@@@@

 1178:	  062E	D8 F4				djnz	r0, do_csi_P1
 1179:	  0630	05 00				inc	auxr1
							^
			  @@@@@ symbol not defined @@@@@

 1180:	  0632	E4				clr	a
 1181:	  0633	F0				movx	@dptr, a
 1182:	  0634	05 00				inc	auxr1
							^
			  @@@@@ symbol not defined @@@@@

 1183:	  0636	D9 D8				djnz	r1, do_csi_P2
 1184:	  0638	22		do_csi_end:	ret
 1185:
 1186:				;		mov	a, r0
 1187:				;		call	phex
 1188:				;		mov	a, dp0h
 1189:				;		call	phex
 1190:				;		mov	a, dp0l
 1191:				;		call	phex
 1192:				;		call	space
 1193:				;		mov	a, dp1h
 1194:				;		call	phex
 1195:				;		mov	a, dp1l
 1196:				;		call	phex
 1197:				;		call	space
 1198:				;		call	space
 1199:
 1200:				;===============================================
 1201:				; state CSI_questionmark "ESC [ ?"
 1202:				;===============================================
 1203:	  0639	12 07 35	do_csi_q:	call	isparm				;is parameter?
 1204:	  063C	50 09				jnc	do_csi_q_h			;no
 1205:	  063E	85 33 23			mov	retstate, state
 1206:	  0641	75 33 0A			mov	state, #ST_CMD_ARG
 1207:	  0644	02 06 A0			jmp	do_cmd_arg
 1208:
 1209:	  0647	75 33 00	do_csi_q_h:	mov	state, #ST_IDLE
 1210:	  064A	85 22 3C			mov	oldstatus, flags2
 1211:
 1212:	  064D	B4 68 18			cjne	a, #'h', do_csi_q_l		;set mode
 1213:	  0650	78 26				mov	r0, #arg0
 1214:	  0652	A9 25				mov	r1, nargs

ASEM-51 V1.3                                        Copyright (c) 2002 by W.W. Heinz                                         PAGE 25



 Line  I  Addr  Code            Source

 1215:	  0654	B9 00 01			cjne	r1, #0, do_csi_q_h1		;>= 1 arg
 1216:	  0657	22				ret
 1217:	  0658	B6 07 02	do_csi_q_h1:	cjne	@r0, #DECAWM, do_csi_q_h2	;set auto wrap
 1218:	  065B	D2 10				setb	wrap
 1219:	  065D	B6 06 04	do_csi_q_h2:	cjne	@r0, #DECOM, do_csi_q_hx	;set origin
 1220:	  0660	D2 11				setb	origin
 1221:	  0662	81 E4				jmp	do_csi_rc			;position cursor home
 1222:	  0664	08		do_csi_q_hx:	inc	r0
 1223:	  0665	D9 F1				djnz	r1, do_csi_q_h1
 1224:	  0667	22				ret
 1225:
 1226:	  0668	B4 6C 18	do_csi_q_l:	cjne	a, #'l', do_csi_q_end		;reset mode
 1227:	  066B	78 26				mov	r0, #arg0
 1228:	  066D	A9 25				mov	r1, nargs
 1229:	  066F	B9 00 02			cjne	r1, #0, do_csi_q_l1
 1230:	  0672	80 C4				sjmp	do_csi_end
 1231:	  0674	B6 07 02	do_csi_q_l1:	cjne	@r0, #DECAWM, do_csi_q_l2	;reset auto wrap
 1232:	  0677	C2 10				clr	wrap
 1233:	  0679	B6 06 04	do_csi_q_l2:	cjne	@r0, #DECOM, do_csi_q_lx	;reset origin
 1234:	  067C	C2 11				clr	origin
 1235:	  067E	81 E4				jmp	do_csi_rc			;position cursor home
 1236:	  0680	08		do_csi_q_lx:	inc	r0
 1237:	  0681	D9 F1				djnz	r1, do_csi_q_l1
 1238:	  0683	22		do_csi_q_end:	ret
 1239:
 1240:
 1241:				;===============================================
 1242:				; state ESC_questionmark "ESC ?"
 1243:				;===============================================
 1244:	  0684			do_esc_q:
 1245:	  0684	75 33 00			mov	state, #ST_IDLE
 1246:	  0687	22				ret
 1247:
 1248:				;===============================================
 1249:				; state ESC_hash "ESC #"
 1250:				;===============================================
 1251:	  0688	75 33 00	do_esc_hash:	mov	state, #ST_IDLE
 1252:
 1253:	  068B	B4 38 05			cjne	a, #'8', do_esc_hash_end
 1254:	  068E	7C 45				mov	r4, #'E'
 1255:	  0690	02 08 53			jmp	fill_screen
 1256:
 1257:	  0693			do_esc_hash_end:
 1258:	  0693	22				ret
 1259:
 1260:
 1261:				;===============================================
 1262:				; state ESC right-bracket "ESC )"
 1263:				;===============================================
 1264:	  0694			do_esc_rbrack:
 1265:				;===============================================
 1266:				; state ESC left-bracket "ESC ("
 1267:				;===============================================
 1268:	  0694	75 33 00	do_esc_lbrack:	mov	state, #ST_IDLE
 1269:
 1270:	  0697	B4 30 03			cjne	a, #'0', do_esc_lb_1

ASEM-51 V1.3                                        Copyright (c) 2002 by W.W. Heinz                                         PAGE 26



 Line  I  Addr  Code            Source

 1271:	  069A	D2 00				setb	special
 1272:	  069C	22				ret
 1273:	  069D	C2 00		do_esc_lb_1:	clr	special
 1274:	  069F	22				ret
 1275:
 1276:
 1277:				;===============================================
 1278:				; state command arg
 1279:				;===============================================
 1280:	  06A0			do_cmd_arg:
 1281:	  06A0	F9				mov	r1, a			;save a
 1282:	  06A1	74 26				mov	a, #arg0		;pointer to vars
 1283:	  06A3	25 25				add	a, nargs
 1284:	  06A5	F8				mov	r0, a
 1285:	  06A6	E9				mov	a, r1
 1286:	  06A7	12 07 41			call	isdigit
 1287:	  06AA	50 0A				jnc	do_cmd_arg_1		;no digit
 1288:				;		inc	argcnt
 1289:	  06AC	E6				mov	a, @r0
 1290:	  06AD	75 F0 0A			mov	b, #10
 1291:	  06B0	A4				mul	ab
 1292:	  06B1	29				add	a, r1
 1293:	  06B2	94 30				subb	a, #'0'
 1294:	  06B4	F6				mov	@r0, a
 1295:	  06B5	22				ret
 1296:	  06B6	B4 3B 03	do_cmd_arg_1:	cjne	a, #';', do_cmd_arg_2
 1297:	  06B9	05 25				inc	nargs
 1298:				;		mov	a, argcnt
 1299:				;		jnz	do_cmd_arg_3
 1300:				;		mov	@r0, #1
 1301:				;do_cmd_arg_3:	mov	argcnt, #0
 1302:	  06BB	22				ret
 1303:	  06BC	B4 1B 04	do_cmd_arg_2:	cjne	a, #C_ESC, do_cmd_arg_3
 1304:	  06BF	75 33 02			mov	state, #ST_ESC
 1305:	  06C2	22				ret
 1306:	  06C3	05 25		do_cmd_arg_3:	inc	nargs
 1307:	  06C5	85 23 33			mov	state, retstate
 1308:	  06C8			do_cmd_arg_4:	;mov	retstate, #0
 1309:	  06C8	21 5D				jmp	ansiout
 1310:
 1311:
 1312:				;
 1313:				; set arg0-3 to one if zero
 1314:				;
 1315:	  06CA	C0 00		args_gr_zero:	push	ar0
 1316:	  06CC	C0 01				push	ar1
 1317:	  06CE	78 26				mov	r0, #arg0
 1318:	  06D0	79 04				mov	r1, #4
 1319:	  06D2	B6 00 01	args_gr_zero_2:	cjne	@r0, #0, args_gr_zero_1
 1320:	  06D5	06				inc	@r0
 1321:	  06D6	08		args_gr_zero_1:	inc	r0
 1322:	  06D7	D9 F9				djnz	r1, args_gr_zero_2
 1323:	  06D9	D0 01				pop	ar1
 1324:	  06DB	D0 00				pop	ar0
 1325:	  06DD	22				ret
 1326:

ASEM-51 V1.3                                        Copyright (c) 2002 by W.W. Heinz                                         PAGE 27



 Line  I  Addr  Code            Source

 1327:				; r0: x - offset
 1328:				; r1: y - offset
 1329:				; r2: 0: without scroll, 1: with scroll
 1330:				; r3: scroll occured
 1331:				; r4: 0 = within bounds, 1 = out of bounds
 1332:	  06DE			ansi_move:
 1333:						;call	cursor_off
 1334:
 1335:	  06DE	7B 00				mov	r3, #0			;no scroll
 1336:	  06E0	AC 31				mov	r4, top
 1337:	  06E2	AD 32				mov	r5, bottom
 1338:
 1339:				;
 1340:				; check new x-posiion
 1341:				;
 1342:	  06E4	E8				mov	a, r0
 1343:	  06E5	25 37				add	a, cursorx		;< 0?
 1344:	  06E7	30 E7 01			jnb	acc.7, ansi_move_x1	;no, check width
 1345:	  06EA	E4				clr	a
 1346:	  06EB	B4 50 00	ansi_move_x1:	cjne	a, #WIDTH, $+3		;>= WIDTH ?
 1347:	  06EE	40 02				jc	ansi_move_x3		;< WIDTH
 1348:	  06F0	74 4F				mov	a, #WIDTH-1		;=WIDTH, set to WIDTH-1
 1349:	  06F2	F5 37		ansi_move_x3:	mov	cursorx, a
 1350:
 1351:				;
 1352:				; check if within margins
 1353:				;
 1354:	  06F4	20 11 13			jb	origin, ansi_move_y	;if origin, no out-of-margins
 1355:	  06F7	E5 38				mov	a, cursory		;check margins
 1356:	  06F9	B5 31 00			cjne	a, top, $+3
 1357:	  06FC	40 07				jc	ansi_move_m1		;< top!
 1358:	  06FE	B5 32 02			cjne	a, bottom, $+5
 1359:	  0701	80 07				sjmp	ansi_move_y		;= bottom
 1360:	  0703	40 05				jc	ansi_move_y		;< bottom
 1361:	  0705	E4		ansi_move_m1:	clr	a
 1362:	  0706	FA				mov	r2, a			;no scroll
 1363:	  0707	FC				mov	r4, a
 1364:	  0708	7D 17				mov	r5, #HEIGHT-1
 1365:
 1366:				;
 1367:				; check y-position
 1368:				;
 1369:	  070A	E9		ansi_move_y:	mov	a, r1
 1370:	  070B	25 38				add	a, cursory		;
 1371:	  070D	20 E7 05			jb	acc.7, ansi_move_y2	;< 0
 1372:	  0710	B5 04 00			cjne	a, ar4, $+3		;
 1373:	  0713	50 04				jnc	ansi_move_y1		;>= top
 1374:	  0715	C3		ansi_move_y2:	clr	c
 1375:	  0716	9C				subb	a, r4
 1376:	  0717	FB				mov	r3, a
 1377:	  0718	EC				mov	a, r4			;< top, set to top
 1378:
 1379:	  0719	B5 05 02	ansi_move_y1:	cjne	a, ar5, $+5		;= bottom ?
 1380:	  071C	80 05				sjmp	ansi_move_y3		;yes
 1381:	  071E	40 03				jc	ansi_move_y3		;< bottom?
 1382:	  0720	9D				subb	a, r5			;no, >bottom

ASEM-51 V1.3                                        Copyright (c) 2002 by W.W. Heinz                                         PAGE 28



 Line  I  Addr  Code            Source

 1383:	  0721	FB				mov	r3, a
 1384:	  0722	ED				mov	a, r5			;set to bottom
 1385:	  0723	F5 38		ansi_move_y3:	mov	cursory, a
 1386:	  0725	12 08 B2			call	cursor_off
 1387:
 1388:	  0728	EA				mov	a, r2			;is scrolling enabled ?
 1389:	  0729	60 06				jz	ansi_move_ex		;no, exit
 1390:	  072B	EB				mov	a, r3			;did scrolling occur?
 1391:	  072C	60 03				jz	ansi_move_ex		;no, exit
 1392:
 1393:	  072E	12 07 CA			call	scroll
 1394:
 1395:	  0731	12 08 92	ansi_move_ex:	call	draw_cursor
 1396:	  0734	22				ret
 1397:
 1398:				;ansi_line_left:
 1399:						;call	phex
 1400:				;		ret
 1401:
 1402:	  0735	12 07 41	isparm:		call	isdigit
 1403:	  0738	40 04				jc	isparmex
 1404:	  073A	B4 3B 02			cjne	a, #';', isparm1
 1405:	  073D	D3				setb	c
 1406:	  073E	22		isparmex:	ret
 1407:	  073F	C3		isparm1:	clr	c
 1408:	  0740	22				ret
 1409:				;
 1410:				; is acc beteen '0' and '9'?
 1411:				; if so, return carry clear, set otherwise
 1412:				;
 1413:	  0741	B4 30 00	isdigit:	cjne	a, #'0', isdigit1
 1414:	  0744	50 02		isdigit1:	jnc	isdigit2		;>= '0'
 1415:	  0746	B3				cpl	c
 1416:	  0747	22				ret				;carry set
 1417:	  0748	B4 3A 00	isdigit2:	cjne	a, #'9'+1, isdigit3
 1418:	  074B	22		isdigit3:	ret				;= '9' carry clear
 1419:
 1420:
 1421:
 1422:				;===============================================
 1423:				; reset terminal
 1424:				;===============================================
 1425:	  074C	C2 AF		term_reset:	clr	ea
 1426:	  074E	12 07 76			call	clear_vars
 1427:	  0751	75 3D 70			mov	defcol, #DEFAULTCOLOR
 1428:	  0754	85 3D 2D			mov	color, defcol
 1429:	  0757	75 32 17			mov	bottom, #HEIGHT-1
 1430:	  075A	75 34 80			mov	serstart, #serbuf
 1431:	  075D	75 35 80			mov	serend, #serbuf
 1432:	  0760	75 39 0A			mov	t0cnt, #C_TIME
 1433:
 1434:				;		inc	baudidx
 1435:				;		setb	databits
 1436:				;		setb	evenodd
 1437:	  0763	D2 16				setb	termmode
 1438:

ASEM-51 V1.3                                        Copyright (c) 2002 by W.W. Heinz                                         PAGE 29



 Line  I  Addr  Code            Source

 1439:	  0765	31 51				call	setbaud
 1440:	  0767	12 07 80			call	resettabu
 1441:	  076A	12 08 51			call	clear_screen
 1442:	  076D	D2 AF				setb	ea
 1443:
 1444:	  076F	12 0B D6			call	prtstatus
 1445:	  0772	12 08 92			call	draw_cursor
 1446:	  0775	22				ret
 1447:
 1448:				;
 1449:				; clear VARLEN vars from "state" on
 1450:				;
 1451:	  0776			clear_vars:
 1452:				;		mov	r0, #080h
 1453:				;clear_v2:	mov	@r0, #0aah
 1454:				;		inc	r0
 1455:				;		cjne	r0, #0, clear_v2
 1456:
 1457:	  0776	78 20				mov	r0, #VARS	;clear term-vars
 1458:	  0778	79 30				mov	r1, #VARLEN
 1459:	  077A	76 00		clear_v1:	mov	@r0, #0
 1460:	  077C	08				inc	r0
 1461:	  077D	D9 FB				djnz	r1, clear_v1
 1462:	  077F	22				ret
 1463:
 1464:				;dump_vars:	mov	r0, #0
 1465:				;dump_vars2:	mov	r1, #16
 1466:				;		mov	a, r0
 1467:				;		acall	phex
 1468:				;		acall	space
 1469:				;		mov	a, #':'
 1470:				;		acall	cout
 1471:				;		acall	space
 1472:				;dump_vars1:	mov	a, @r0
 1473:				;		acall	phex
 1474:				;		acall	space
 1475:				;		inc	r0
 1476:				;		djnz	r1, dump_vars1
 1477:				;		acall	newline
 1478:				;		cjne	r0, #0, dump_vars2
 1479:				;		ret
 1480:
 1481:	  0780	78 40		resettabu:	mov	r0, #tabutab
 1482:	  0782	79 0A				mov	r1, #10
 1483:	  0784	76 80		resettabu1:	mov	@r0, #128
 1484:	  0786	08				inc	r0
 1485:	  0787	D9 FB				djnz	r1, resettabu1
 1486:	  0789	89 40				mov	tabutab, r1	;R1 = 0
 1487:	  078B	05 49				inc	tabutab+9	;128 + 1 = 129
 1488:	  078D	22				ret
 1489:
 1490:
 1491:	  078E	78 40		cleartabu:	mov	r0, #tabutab
 1492:	  0790	79 0A				mov	r1, #10
 1493:	  0792	76 00		cleartabu1:	mov	@r0, #0
 1494:	  0794	08				inc	r0

ASEM-51 V1.3                                        Copyright (c) 2002 by W.W. Heinz                                         PAGE 30



 Line  I  Addr  Code            Source

 1495:	  0795	D9 FB				djnz	r1, cleartabu1
 1496:	  0797	05 49				inc	tabutab+9	;tabutab+9 = 1
 1497:	  0799	22				ret
 1498:
 1499:				;
 1500:				; compute
 1501:				; r0 = cursorx / 8 (byte holding tab-info) + tabutab
 1502:				; r1 = cursorx AND 7 (bi tposition within byte)
 1503:				;
 1504:	  079A	E5 37		tab_set_r0_r1:	mov	a, cursorx
 1505:	  079C	03				rr	a
 1506:	  079D	03				rr	a
 1507:	  079E	03				rr	a
 1508:	  079F	54 0F				anl	a, #0fh
 1509:	  07A1	24 40				add	a, #tabutab
 1510:	  07A3	F8				mov	r0, a				;address byte
 1511:	  07A4	E5 37				mov	a, cursorx
 1512:	  07A6	54 07				anl	a, #7
 1513:	  07A8	F9				mov	r1, a
 1514:	  07A9	22				ret
 1515:
 1516:
 1517:	  07AA	E9		getbit:		mov	a, r1
 1518:	  07AB	04				inc	a
 1519:	  07AC	83				movc	a, @a+pc
 1520:	  07AD	22				ret
 1521:	  07AE	80 40 20 10	getbittab:	db	128, 64, 32, 16, 8, 4, 2, 1
	  07B2	08 04 02 01
 1522:
 1523:
 1524:	  07B6	78 25		clearargs:	mov	r0, #nargs
 1525:	  07B8	79 05				mov	r1, #5
 1526:	  07BA	76 00		clearargs1:	mov	@r0, #0
 1527:	  07BC	08				inc	r0
 1528:	  07BD	D9 FB				djnz	r1, clearargs1
 1529:	  07BF	22				ret
 1530:
 1531:
 1532:	  07C0	E4		print:		clr	a
 1533:	  07C1	93				movc	a, @a+dptr
 1534:	  07C2	70 01				jnz	print1
 1535:	  07C4	22				ret
 1536:	  07C5	31 5D		print1:		call	ansiout
 1537:	  07C7	A3				inc	dptr
 1538:	  07C8	80 F6				sjmp	print
 1539:
 1540:				;msg1:		db	C_ESC, "[J", C_ESC, "[5;5H", 0
 1541:				;msg4:		db	C_ESC,"[5;65H", C_ESC,"[31mH", C_ESC,"[32mello ", C_ESC, "[mWorld", C_ESC, "
				[AJ", C_ESC, "[23;65Ha", C_ESC, "[H"
 1542:				;msg2:		db	"Hello world!", C_NEWLINE,0
 1543:				;msg3:		db	C_ESC, "[5C", C_ESC, "[7D", 0
 1544:
 1545:				;===============================================
 1546:				; pyhsical routines
 1547:				;===============================================
 1548:

ASEM-51 V1.3                                        Copyright (c) 2002 by W.W. Heinz                                         PAGE 31



 Line  I  Addr  Code            Source

 1549:				;===============================================
 1550:				; scrolls one line up or down
 1551:				; clear first or last line
 1552:				; r3 positive (0-127) scroll-up, scroll-down otherwise
 1553:				; r4 numbers of lines to scroll
 1554:				; ----------------------------------------------
 1555:				; r5 used for x-count
 1556:				;===============================================
 1557:	  07CA	C3		scroll:		clr	c
 1558:	  07CB	E5 32				mov	a, bottom
 1559:	  07CD	95 31				subb	a, top
 1560:	  07CF	FC				mov	r4, a			;number of lines to scroll
 1561:	  07D0			scroll_r4:
 1562:	  07D0	BB 80 00			cjne	r3, #128, $+3
 1563:	  07D3	40 47				jc	scroll_up		;<128, positive, scroll up
 1564:
 1565:	  07D5	E5 32				mov	a, bottom
 1566:	  07D7	14				dec	a
 1567:	  07D8	75 F0 A0			mov	b, #WIDTH*2
 1568:	  07DB	A4				mul	ab
 1569:	  07DC	24 9F				add	a, #(WIDTH*2)-1
 1570:	  07DE	F5 00				mov	dp0l, a
							^
			  @@@@@ symbol not defined @@@@@

 1571:	  07E0	E5 F0				mov	a, b
 1572:	  07E2	34 80				addc 	a, #80h
 1573:	  07E4	F5 00				mov	dp0h, a
							^
			  @@@@@ symbol not defined @@@@@

 1574:
 1575:	  07E6	E5 00				mov	a, dp0l
							   ^
			  @@@@@ symbol not defined @@@@@

 1576:	  07E8	24 A0				add	a, #WIDTH*2
 1577:	  07EA	F5 00				mov	dp1l, a
							^
			  @@@@@ symbol not defined @@@@@

 1578:	  07EC	E5 00				mov	a, dp0h
							   ^
			  @@@@@ symbol not defined @@@@@

 1579:	  07EE	34 00				addc	a, #0
 1580:	  07F0	F5 00				mov	dp1h, a
							^
			  @@@@@ symbol not defined @@@@@

 1581:
 1582:				;		call	phex16
 1583:				;		mov	a, dp1h
 1584:				;		call	phex
 1585:				;		mov	a, dp1l
 1586:				;		call	phex

ASEM-51 V1.3                                        Copyright (c) 2002 by W.W. Heinz                                         PAGE 32



 Line  I  Addr  Code            Source

 1587:				;		jmp	cursor_on
 1588:
 1589:	  07F2	EC				mov	a, r4
 1590:	  07F3	60 1F				jz	scroll_down_6
 1591:	  07F5			scroll_down_4:
 1592:	  07F5	7D A0				mov	r5, #WIDTH*2
 1593:	  07F7			scroll_down_1:
 1594:	  07F7	E0				movx	a, @dptr
 1595:	  07F8	E5 90				mov	a, P1
 1596:	  07FA	05 00				inc	auxr1
							^
			  @@@@@ symbol not defined @@@@@

 1597:	  07FC	F0				movx	@dptr, a
 1598:	  07FD	05 00				inc	auxr1
							^
			  @@@@@ symbol not defined @@@@@

 1599:
 1600:	  07FF	E5 00				mov	a, dp0l
							   ^
			  @@@@@ symbol not defined @@@@@

 1601:	  0801	70 02				jnz	scroll_down_2
 1602:	  0803	15 00				dec	dp0h
							^
			  @@@@@ symbol not defined @@@@@

 1603:	  0805	15 00		scroll_down_2:	dec	dp0l
							^
			  @@@@@ symbol not defined @@@@@

 1604:
 1605:	  0807	E5 00				mov	a, dp1l
							   ^
			  @@@@@ symbol not defined @@@@@

 1606:	  0809	70 02				jnz	scroll_down_3
 1607:	  080B	15 00				dec	dp1h
							^
			  @@@@@ symbol not defined @@@@@

 1608:	  080D	15 00		scroll_down_3:	dec	dp1l
							^
			  @@@@@ symbol not defined @@@@@

 1609:
 1610:	  080F	DD E6				djnz	r5, scroll_down_1
 1611:	  0811	DC E2				djnz	r4, scroll_down_4
 1612:
 1613:	  0813	A3				inc	dptr
 1614:
 1615:						;call	phex16
 1616:	  0814			scroll_down_6:
 1617:	  0814	7D A0				mov	r5, #WIDTH*2
 1618:	  0816	E4				clr	a

ASEM-51 V1.3                                        Copyright (c) 2002 by W.W. Heinz                                         PAGE 33



 Line  I  Addr  Code            Source

 1619:	  0817	F0		scroll_down_5:	movx	@dptr, a
 1620:	  0818	A3				inc	dptr
 1621:	  0819	DD FC				djnz	r5, scroll_down_5
 1622:
 1623:						;ajmp	cursor_on		;reactivate cursor
 1624:	  081B	22				ret
 1625:
 1626:	  081C			scroll_up:
 1627:	  081C	E5 31				mov	a, top			;dp0 = topline
 1628:	  081E	75 F0 A0			mov	b, #WIDTH * 2		;dp1 = topline + 1
 1629:	  0821	A4				mul	ab
 1630:	  0822	F5 00				mov	dp0l, a
							^
			  @@@@@ symbol not defined @@@@@

 1631:	  0824	E5 F0				mov	a, b
 1632:	  0826	34 80				addc	a, #80h
 1633:	  0828	F5 00				mov	dp0h, a
							^
			  @@@@@ symbol not defined @@@@@

 1634:
 1635:	  082A	E5 00				mov	a, dp0l
							   ^
			  @@@@@ symbol not defined @@@@@

 1636:	  082C	24 A0				add	a, #WIDTH * 2
 1637:	  082E	F5 00				mov	dp1l, a
							^
			  @@@@@ symbol not defined @@@@@

 1638:	  0830	E5 00				mov	a, dp0h
							   ^
			  @@@@@ symbol not defined @@@@@

 1639:	  0832	34 00				addc	a, #0
 1640:	  0834	F5 00				mov	dp1h, a
							^
			  @@@@@ symbol not defined @@@@@

 1641:
 1642:	  0836	EC				mov	a, r4
 1643:	  0837	60 10				jz	scroll_up_4
 1644:
 1645:	  0839			scroll_up_1:
 1646:	  0839	7D A0				mov	r5, #WIDTH * 2
 1647:
 1648:	  083B	05 00		scroll_up_2:	inc	auxr1			;copy from line n+1 to line n
							^
			  @@@@@ symbol not defined @@@@@

 1649:	  083D	E0				movx	a, @dptr
 1650:	  083E	A3				inc	dptr
 1651:	  083F	E5 90				mov	a, P1
 1652:	  0841	05 00				inc	auxr1
							^

ASEM-51 V1.3                                        Copyright (c) 2002 by W.W. Heinz                                         PAGE 34



 Line  I  Addr  Code            Source

			  @@@@@ symbol not defined @@@@@

 1653:	  0843	F0				movx	@dptr, a
 1654:	  0844	A3				inc	dptr
 1655:	  0845	DD F4				djnz	r5, scroll_up_2
 1656:	  0847	DC F0				djnz	r4, scroll_up_1
 1657:
 1658:	  0849			scroll_up_4:
 1659:	  0849	7D A0				mov	r5, #WIDTH * 2		;clear last line
 1660:	  084B	E4				clr	a
 1661:	  084C	F0		scroll_up_3:	movx	@dptr, a
 1662:	  084D	A3				inc	dptr
 1663:	  084E	DD FC				djnz	r5, scroll_up_3
 1664:
 1665:	  0850	22				ret
 1666:						;ajmp	cursor_on		;restore cursor
 1667:
 1668:
 1669:				;
 1670:				; r0: top line
 1671:				; r1: bottom line
 1672:				; r2: start position first line
 1673:				; r3: chars to fill first line
 1674:				; r4: value filled with
 1675:				; r5; chars to fill last line
 1676:				;
 1677:	  0851	7C 00		clear_screen:	mov	r4, #0
 1678:	  0853	E4		fill_screen:	clr	a
 1679:	  0854	F8				mov	r0, a
 1680:	  0855	79 17				mov	r1, #HEIGHT-1
 1681:	  0857	FA				mov	r2, a
 1682:	  0858	7B 50				mov	r3, #WIDTH
 1683:	  085A	7D 50				mov	r5, #WIDTH
 1684:	  085C	80 02				sjmp	fill_lines
 1685:
 1686:	  085E			clear_lines:
 1687:	  085E	7C 00				mov	r4, #0				;fill with zero
 1688:	  0860			fill_lines:
 1689:	  0860	EA				mov	a, r2				;r2 = r2 * 2
 1690:	  0861	23				rl	a
 1691:	  0862	FA				mov	r2, a
 1692:
 1693:	  0863	E9				mov	a, r1				;r1 = r1 - r0 + 1
 1694:	  0864	C3				clr	c
 1695:	  0865	98				subb	a, r0
 1696:	  0866	04				inc	a
 1697:	  0867	F9				mov	r1, a				;line count in r1
 1698:
 1699:	  0868	E8				mov	a, r0				;compute start-position from r0 und r2
 1700:	  0869	75 F0 A0			mov	b, #WIDTH * 2
 1701:	  086C	A4				mul	ab
 1702:	  086D	2A				add	a, r2
 1703:	  086E	F5 00				mov	dp1l, a
							^
			  @@@@@ symbol not defined @@@@@


ASEM-51 V1.3                                        Copyright (c) 2002 by W.W. Heinz                                         PAGE 35



 Line  I  Addr  Code            Source

 1704:	  0870	E5 F0				mov	a, b
 1705:	  0872	34 80				addc	a, #80h
 1706:	  0874	F5 00				mov	dp1h, a
							^
			  @@@@@ symbol not defined @@@@@

 1707:
 1708:	  0876	05 00				inc	auxr1				;switch to dptr1
							^
			  @@@@@ symbol not defined @@@@@

 1709:	  0878	A8 03				mov	r0, ar3				;chars to fill first line
 1710:
 1711:	  087A	B9 01 02	clear_lines2:	cjne 	r1, #1, clear_lines1		;last line?
 1712:	  087D	A8 05				mov	r0, ar5				;chars to fill last line
 1713:	  087F	EC		clear_lines1:	mov	a, r4
 1714:	  0880	F0				movx	@dptr, a
 1715:	  0881	A3				inc	dptr
 1716:	  0882	74 70				mov	a, #70h
 1717:	  0884	F0				movx	@dptr, a
 1718:	  0885	A3				inc	dptr
 1719:	  0886	D8 F7				djnz	r0, clear_lines1
 1720:	  0888	78 50				mov	r0, #WIDTH
 1721:	  088A	D9 EE				djnz	r1, clear_lines2
 1722:	  088C	05 00				inc	auxr1
							^
			  @@@@@ symbol not defined @@@@@

 1723:	  088E	22				ret
 1724:
 1725:
 1726:				;===============================================
 1727:				; move cursor
 1728:				;===============================================
 1729:	  088F	12 08 B2	move_cursor:	call	cursor_off			;restore color under cursor
 1730:	  0892	12 08 D5	draw_cursor:	call	comp_dptr			;compute new address
 1731:	  0895	05 00				inc	auxr1				;increase by 1 for color
							^
			  @@@@@ symbol not defined @@@@@

 1732:	  0897	A3				inc	dptr
 1733:	  0898	05 00				inc	auxr1
							^
			  @@@@@ symbol not defined @@@@@

 1734:	  089A	85 00 2E			mov	cursorpos, dp1l			;store in cursorpos/+1
								   ^
			  @@@@@ symbol not defined @@@@@

 1735:	  089D	85 00 2F			mov	cursorpos+1, dp1h
								     ^
			  @@@@@ symbol not defined @@@@@

 1736:
 1737:				;		ajmp	cursor_on			;save color under cursor
 1738:				;

ASEM-51 V1.3                                        Copyright (c) 2002 by W.W. Heinz                                         PAGE 36



 Line  I  Addr  Code            Source

 1739:				; save color under new cursor position in cursorsave
 1740:				; enable interrupt
 1741:				;
 1742:	  08A0			cursor_on:	;mov	a, cursorpos+1
 1743:						;call	phex
 1744:						;mov	a, cursorpos
 1745:						;call	phex
 1746:
 1747:	  08A0	85 2E 00			mov	dp1l, cursorpos
							^
			  @@@@@ symbol not defined @@@@@

 1748:	  08A3	85 2F 00			mov	dp1h, cursorpos+1
							^
			  @@@@@ symbol not defined @@@@@

 1749:	  08A6	05 00				inc	auxr1
							^
			  @@@@@ symbol not defined @@@@@

 1750:	  08A8	E0				movx	a, @dptr
 1751:	  08A9	E5 90				mov	a, P1
 1752:	  08AB	F5 30				mov	cursorsave, a
 1753:	  08AD	05 00				inc	auxr1
							^
			  @@@@@ symbol not defined @@@@@

 1754:	  08AF	D2 8C				setb	tr0				;enable timer
 1755:	  08B1	22				ret
 1756:
 1757:				;
 1758:				; clear timer0 interrupt
 1759:				; restore color under cursor
 1760:				; reset t0cnt
 1761:				;
 1762:	  08B2	C2 8C		cursor_off:	clr	tr0				;stop timer
 1763:
 1764:				;		mov	a, cursorpos+1
 1765:				;		call	phex
 1766:				;		mov	a, cursorpos
 1767:				;		call	phex
 1768:
 1769:	  08B4	85 2E 00			mov	dp1l, cursorpos
							^
			  @@@@@ symbol not defined @@@@@

 1770:	  08B7	85 2F 00			mov	dp1h, cursorpos+1
							^
			  @@@@@ symbol not defined @@@@@

 1771:	  08BA	05 00				inc	auxr1
							^
			  @@@@@ symbol not defined @@@@@

 1772:	  08BC	E5 30				mov	a, cursorsave
 1773:	  08BE	F0				movx	@dptr, a

ASEM-51 V1.3                                        Copyright (c) 2002 by W.W. Heinz                                         PAGE 37



 Line  I  Addr  Code            Source

 1774:	  08BF	05 00				inc	auxr1
							^
			  @@@@@ symbol not defined @@@@@

 1775:	  08C1	75 8C 80			mov	TH0, #128
 1776:	  08C4	75 39 01			mov	t0cnt, #1
 1777:	  08C7	22				ret
 1778:
 1779:				;
 1780:				; converts accu	into two digits in R0, R1 (high, low)
 1781:				;
 1782:	  08C8	75 F0 0A	hex2dez:	mov	b, #10
 1783:	  08CB	84				div	ab
 1784:	  08CC	24 30				add	a, #'0'
 1785:	  08CE	F8				mov	r0, a
 1786:	  08CF	E5 F0				mov	a, b
 1787:	  08D1	24 30				add	a, #'0'
 1788:	  08D3	F9				mov	r1, a
 1789:	  08D4	22				ret
 1790:
 1791:				;
 1792:				; compute dp1 cursor screen address
 1793:				; dp1l/h = cursorx * 2 + cursory * WIDTH * 2 + 0x8000
 1794:				;
 1795:	  08D5			comp_dptr:
 1796:	  08D5	E5 37				mov	a, cursorx
 1797:	  08D7	23				rl	a
 1798:	  08D8	FF				mov	r7, a
 1799:
 1800:	  08D9	E5 38				mov	a, cursory
 1801:	  08DB	75 F0 A0			mov	b, #WIDTH * 2
 1802:	  08DE	A4				mul	ab
 1803:
 1804:	  08DF	2F				add	a, r7
 1805:	  08E0	F5 00				mov	dp1l, a
							^
			  @@@@@ symbol not defined @@@@@

 1806:	  08E2	E5 F0				mov	a, b
 1807:	  08E4	34 80				addc	a, #80h
 1808:	  08E6	F5 00				mov	dp1h, a
							^
			  @@@@@ symbol not defined @@@@@

 1809:	  08E8	22				ret
 1810:
 1811:						$INCLUDE (io.a51)
 1812: 1			;
 1813: 1			;
 1814: 1			;
 1815: 1  08E9			init6845:
 1816: 1  08E9	90 00 00			mov	dptr, #0		;enable ADR + DAT
 1817: 1  08EC	E0				movx	a, @dptr
 1818: 1
 1819: 1  08ED	90 80 00			mov	DPTR, #08000h
 1820: 1  08F0	05 00				inc	AUXR1

ASEM-51 V1.3                                        Copyright (c) 2002 by W.W. Heinz                                         PAGE 38



 Line  I  Addr  Code            Source

							^
			  @@@@@ symbol not defined @@@@@

 1821: 1  08F2	90 09 14			mov	DPTR, #SYDATA
 1822: 1  08F5	05 00				inc	AUXR1
							^
			  @@@@@ symbol not defined @@@@@

 1823: 1  08F7	78 00				mov	R0, #0
 1824: 1
 1825: 1  08F9			setregs:
 1826: 1			;		call	PHEX
 1827: 1			;		call	SPACE
 1828: 1
 1829: 1  08F9	E8				mov	A, R0			;send address
 1830: 1			;		call	PHEX
 1831: 1  08FA	F0				movx	@DPTR,A			;address register
 1832: 1  08FB	D2 B5				setb	T1			;clock high
 1833: 1  08FD	C2 B5				clr	T1			;clock low
 1834: 1  08FF	A3				inc	DPTR			;data reg
 1835: 1
 1836: 1  0900	05 00				inc	AUXR1			;data pointer
							^
			  @@@@@ symbol not defined @@@@@

 1837: 1  0902	93				movc	A, @A+DPTR
 1838: 1			;		call	PHEX
 1839: 1  0903	05 00				inc	AUXR1			;address pointer
							^
			  @@@@@ symbol not defined @@@@@

 1840: 1  0905	F0				movx	@DPTR, A		;send data
 1841: 1  0906	D2 B5				setb	T1			;clock high
 1842: 1  0908	C2 B5				clr	T1			;clock low
 1843: 1
 1844: 1			;		call	SPACE
 1845: 1  090A	A3				inc	DPTR
 1846: 1  090B	08				inc	R0
 1847: 1  090C	B8 0F EA			cjne	R0, #15, setregs
 1848: 1
 1849: 1  090F	90 00 00			mov	dptr, #0		;enable ADR + DAT
 1850: 1  0912	E0				movx	a, @dptr
 1851: 1
 1852: 1			;		call	newline
 1853: 1			;		call	CIN
 1854: 1			;
 1855: 1			;		setb	INT0
 1856: 1			;		call	CIN
 1857: 1  0913	22				ret
 1858: 1
 1859: 1			;
 1860: 1			; 25,333 Mhz / 8 = 3,166 Mhz
 1861: 1			;
 1862: 1			; 31468 HZ = 31,77 uS
 1863: 1			;
 1864: 1			; 25,333 Mhz / 8 / 31468 ~ 	100 chars Horizontal Total

ASEM-51 V1.3                                        Copyright (c) 2002 by W.W. Heinz                                         PAGE 39



 Line  I  Addr  Code            Source

 1865: 1			;				  2 chars Fornt Porch
 1866: 1			;				  6 chars Back Porch
 1867: 1			;				 80 chars Horizontal Visible
 1868: 1			;				 12 chars Sync Pulse
 1869: 1			;Scanline part	Pixels	Time [µs]
 1870: 1			;Visible area	640	25.422045680238
 1871: 1			;Front porch	16	0.63555114200596
 1872: 1			;Sync pulse	96	3.8133068520357
 1873: 1			;Back porch	48	1.9066534260179
 1874: 1			;Whole line	800	31.777557100298
 1875: 1
 1876: 1			;Frame part	Lines	Time [ms]
 1877: 1			;Visible area	400	12.711022840119
 1878: 1			;Front porch	12	0.38133068520357
 1879: 1			;Sync pulse	2	0.063555114200596
 1880: 1			;Back porch	35	1.1122144985104
 1881: 1			;Whole frame	449	14.268123138034
 1882: 1			;
 1883: 1  0914	64		SYDATA:		DB	100		;R0 Horizontal Total - 1
 1884: 1  0915	50				DB	80		;R1 Horizontal Displayed
 1885: 1  0916	54				DB	84		;R2 Horizontal Sync Position
 1886: 1  0917	0C				DB	0ch		;R3 VSYNC & HSYNC width
 1887: 1  0918	1C				DB	28		;R4 Vertical total - 1			;27	32
 1888: 1  0919	05				DB	5		;R5 Vertical Adjust
 1889: 1  091A	19				DB	25		;R6 Vertical Displayed			;25	30
 1890: 1  091B	1B				DB	27		;R7 Vertical Sync Position		;25	32
 1891: 1  091C	00				DB	00h		;R8 Mode Control
 1892: 1  091D	0F				DB	15		;R9 Scan Lines - 1 (character lines)
 1893: 1  091E	00				DB	0		;R10 Cursor Start
 1894: 1  091F	00				DB	0		;R11 Cursor End
 1895: 1  0920	00				DB	000h		;R12 Display Start High
 1896: 1  0921	00				DB	000h		;R13 Display Start Low
 1897: 1  0922	00				DB	0		;R14 Cursor Pos High
 1898: 1  0923	00				DB	0		;R15 Cursor Pos Low
 1899: 1  0924	00				DB	0		;R16 Light Pen High
 1900: 1  0925	00				DB	0		;R17 Light Pen Low
 1901: 1  0926	00				DB	0		;R18 Update Address Reg High
 1902: 1  0927	00				DB	0		;R19 Update Address Reg Low
 1903: 1								;R31 Dummy Register
 1904: 1			;
 1905: 1			;
 1906: 1			;
 1907: 1  0928			copyFont:
 1908: 1  0928	90 0C 98			mov	DPTR, #vt100_font
 1909: 1  092B	05 00				inc	AUXR1
							^
			  @@@@@ symbol not defined @@@@@

 1910: 1  092D	90 A0 00			mov	DPTR, #(8000h+2000h) ;+4000h+1000h
 1911: 1  0930	05 00				inc	AUXR1
							^
			  @@@@@ symbol not defined @@@@@

 1912: 1
 1913: 1  0932	E4		copyFont1:	clr	A
 1914: 1  0933	93				movc	A, @A+DPTR

ASEM-51 V1.3                                        Copyright (c) 2002 by W.W. Heinz                                         PAGE 40



 Line  I  Addr  Code            Source

 1915: 1  0934	A3				inc	DPTR
 1916: 1  0935	05 00				inc	AUXR1
							^
			  @@@@@ symbol not defined @@@@@

 1917: 1  0937	F0				movx	@DPTR, A
 1918: 1  0938	A3				inc	DPTR
 1919: 1  0939	05 00				inc	AUXR1
							^
			  @@@@@ symbol not defined @@@@@

 1920: 1
 1921: 1  093B	E5 00				mov	A, DP0H
							   ^
			  @@@@@ symbol not defined @@@@@

 1922: 1					;call	PHEX
 1923: 1  093D	B4 80 F2			cjne	A, #80h, copyFont1
 1924: 1
 1925: 1			;		mov	A, AUXR1
 1926: 1			;		call	PHEX
 1927: 1			;		call	newline
 1928: 1  0940	22				ret
 1929: 1
 1930: 1			;
 1931: 1			;
 1932: 1			;
 1933: 1  0941	90 80 00	testScreen:	mov	DPTR, #8000h
 1934: 1  0944	78 15				mov	R0, #21
 1935: 1
 1936: 1  0946	79 50		testScreen3:	mov	R1, #80
 1937: 1  0948	7A 01				mov	R2, #1
 1938: 1  094A	EA		testScreen1:	mov	A, R2
 1939: 1  094B	F0				movx	@DPTR, A
 1940: 1  094C	A3				inc	DPTR
 1941: 1  094D	74 70				mov	A, #70h
 1942: 1					;anl	A, #3
 1943: 1					;orl	A, #0f0h
 1944: 1					;inc	A
 1945: 1  094F	F0				movx	@DPTR, A
 1946: 1  0950	A3				inc	DPTR
 1947: 1  0951	0A				inc	R2
 1948: 1  0952	BA 3A 02			cjne	R2, #'9'+1, testScreen2
 1949: 1  0955	7A 30				mov	R2, #'0'
 1950: 1  0957	D9 F1		testScreen2:	djnz	R1, testScreen1
 1951: 1  0959	D8 EB				djnz	R0, testScreen3
 1952: 1
 1953: 1  095B	E8		testScreen4:	mov	a, r0
 1954: 1  095C	F0				movx	@dptr, a
 1955: 1  095D	A3				inc	dptr
 1956: 1  095E	74 60				mov	a, #60h
 1957: 1  0960	F0				movx	@dptr, a
 1958: 1  0961	A3				inc	dptr
 1959: 1  0962	08				inc	r0
 1960: 1  0963	B8 00 F5			cjne	r0, #0, testScreen4
 1961: 1  0966	22				ret

ASEM-51 V1.3                                        Copyright (c) 2002 by W.W. Heinz                                         PAGE 41



 Line  I  Addr  Code            Source

 1962: 1			;
 1963: 1			;
 1964: 1			;
 1965: 1  0967	C0 E0		space:		push	acc
 1966: 1  0969	74 20				mov	a, #' '
 1967: 1  096B	12 09 7B			call	cout
 1968: 1  096E	D0 E0				pop	acc
 1969: 1  0970	22				ret
 1970: 1
 1971: 1  0971	C0 E0		newline:	push	acc
 1972: 1  0973	74 0A				mov	a, #0ah
 1973: 1  0975	12 09 7B			call	cout
 1974: 1  0978	D0 E0				pop	acc
 1975: 1  097A	22				ret
 1976: 1
 1977: 1
 1978: 1  097B	20 05 FD	cout:		jb	serbusy, cout
 1979: 1  097E	D2 05				setb	serbusy
 1980: 1  0980	F5 99				mov	sbuf, a
 1981: 1  0982	22				ret
 1982: 1
 1983: 1
 1984: 1  0983	C0 00		cin:		push	ar0
 1985: 1  0985	C0 01				push	ar1
 1986: 1  0987	E5 34		cin_2:		mov	a, serstart
 1987: 1  0989	A9 35				mov	r1, serend
 1988: 1  098B	B5 01 02			cjne	a, ar1, cin_1
 1989: 1  098E	80 F7				sjmp	cin_2
 1990: 1
 1991: 1  0990			cin_1:		;clr	ES			;no serial interrupt
 1992: 1  0990	04				inc	a
 1993: 1  0991	D2 E7				setb	acc.7
 1994: 1  0993	F8				mov	r0, a
 1995: 1  0994	F5 34				mov	serstart, a
 1996: 1
 1997: 1  0996	30 04 09			jnb	xonoff, cin_3		;XON/XOFF active?
 1998: 1  0999	B5 01 06			cjne	a, ar1, cin_3
 1999: 1
 2000: 1  099C			cin_4:		;setb	ES
 2001: 1  099C	74 11				mov	a, #C_XON		;yes, send XON
 2002: 1  099E	31 7B				acall	cout
 2003: 1  09A0	C2 04				clr	xonoff
 2004: 1
 2005: 1  09A2			cin_3:		;setb	ES
 2006: 1  09A2	E6				mov	a, @r0
 2007: 1  09A3	D0 01				pop	ar1
 2008: 1  09A5	D0 00				pop	ar0
 2009: 1  09A7	22				ret
 2010: 1
 2011: 1
 2012: 1			;cin_x:		jnb	ri, cin
 2013: 1			;		clr	ri
 2014: 1			;		mov	a, sbuf
 2015: 1			;		ret
 2016: 1
 2017: 1			; Highly code efficient resursive call phex contributed

ASEM-51 V1.3                                        Copyright (c) 2002 by W.W. Heinz                                         PAGE 42



 Line  I  Addr  Code            Source

 2018: 1			; by Alexander B. Alexandrov <abalex@cbr.spb.ru>
 2019: 1
 2020: 1  09A8			phex:
 2021: 1  09A8			phex8:
 2022: 1  09A8	31 AA				acall	phex_b
 2023: 1  09AA	C4		phex_b:		swap	a		;SWAP A will be twice => A unchanged
 2024: 1  09AB	C0 E0		phex1:		push	acc
 2025: 1  09AD	54 0F				anl	a, #15
 2026: 1  09AF	24 90				add	a, #90h	; acc is 0x9X, where X is hex digit
 2027: 1  09B1	D4				da	a		; if A to F, C=1 and lower four bits are 0..5
 2028: 1  09B2	34 40				addc	a, #40h
 2029: 1  09B4	D4				da	a
 2030: 1  09B5	31 7B				call	cout
 2031: 1  09B7	D0 E0				pop	acc
 2032: 1  09B9	22				ret
 2033: 1
 2034: 1  09BA			phex16:
 2035: 1  09BA	C0 E0				push	acc
 2036: 1  09BC	E5 83				mov	a, dph
 2037: 1  09BE	31 A8				call	phex
 2038: 1  09C0	E5 82				mov	a, dpl
 2039: 1  09C2	31 A8				call	phex
 2040: 1  09C4	D0 E0				pop	acc
 2041: 1  09C6	22				ret
 2042: 1
 2043: 1			;a not so well documented feature of pstr is that you can print
 2044: 1			;multiple consecutive strings without needing to reload dptr
 2045: 1			;(which takes 3 bytes of code!)... this is useful for inserting
 2046: 1			;numbers or spaces between strings.
 2047: 1
 2048: 1			;pstr:		push	acc
 2049: 1			;pstr1:		clr	a
 2050: 1			;		movc	a, @a+dptr
 2051: 1			;		inc	dptr
 2052: 1			;		jz	pstr2
 2053: 1			;		mov	c, acc.7
 2054: 1			;		anl	a, 7Fh
 2055: 1			;		call	cout
 2056: 1			;		jc	pstr2
 2057: 1			;		sjmp	pstr1
 2058: 1			;pstr2:		pop	acc
 2059: 1			;		ret
 2060: 1
 2061: 1			;converts the ascii code in Acc to uppercase, if it is lowercase
 2062: 1
 2063: 1			; Code efficient (saves 6 byes) upper contributed
 2064: 1			; by Alexander B. Alexandrov <abalex@cbr.spb.ru>
 2065: 1
 2066: 1			;upper:
 2067: 1			;		cjne	a, #97, upper2
 2068: 1			;upper2:		jc	upper4		;end if acc < 97
 2069: 1			;		cjne	a, #123, upper3
 2070: 1			;upper3:		jnc	upper4		;end if acc >= 123
 2071: 1			;		add	a, #224		;convert to uppercase
 2072: 1			;upper4:		ret
 2073:

ASEM-51 V1.3                                        Copyright (c) 2002 by W.W. Heinz                                         PAGE 43



 Line  I  Addr  Code            Source

 2074:				;===============================================
 2075:				; decode scancode
 2076:				;===============================================
 2077:	  09C7			keydecode:
 2078:				;		mov	a, keyrxval
 2079:				;		call	phex
 2080:
 2081:	  09C7	74 E0				mov	a, #EXTENDED			;extended?
 2082:	  09C9	B5 3B 03			cjne	a, keyrxval, keybreak
 2083:	  09CC	D2 09				setb	keyrxextended			;set extended flag
 2084:	  09CE	22				ret
 2085:
 2086:	  09CF	74 F0		keybreak:	mov	a, #BREAK			;break?
 2087:	  09D1	B5 3B 03			cjne	a, keyrxval, keyshift
 2088:	  09D4	D2 0A				setb	keyrxbreak
 2089:	  09D6	22				ret
 2090:
 2091:	  09D7	74 12		keyshift:	mov	a, #CLSHIFT			;left-shift?
 2092:	  09D9	B5 3B 02			cjne	a, keyrxval, keyshift1
 2093:	  09DC	80 05				sjmp	keyshift2
 2094:	  09DE	74 59		keyshift1:	mov	a, #CRSHIFT			;right shift?
 2095:	  09E0	B5 3B 07			cjne	a, keyrxval, keyStrg
 2096:	  09E3	A2 0A		keyshift2:	mov	c, keyrxbreak
 2097:	  09E5	B3				cpl	c
 2098:	  09E6	92 0B				mov	keyrxshift, c
 2099:	  09E8	80 16				sjmp	keyCheckBrk1
 2100:
 2101:	  09EA	74 14		keyStrg:	mov	a, #CLSTRG
 2102:	  09EC	B5 3B 07			cjne	a, keyrxval, keyCheckBrk
 2103:	  09EF	A2 0A				mov	c, keyrxbreak
 2104:	  09F1	B3				cpl	c
 2105:	  09F2	92 0D				mov	keyrxstrg, c
 2106:	  09F4	80 0A				sjmp	keyCheckBrk1
 2107:
 2108:	  09F6	30 0A 0C	keyCheckBrk:	jnb	keyrxbreak, keynormal		;break active?
 2109:	  09F9	74 11				mov	a, #ALTGR			;ALT-GR?
 2110:	  09FB	B5 3B 02			cjne	a, keyrxval, keyCheckBrk1
 2111:	  09FE	C2 0C				clr	keyrxaltgr			;clear ALT-GR
 2112:	  0A00	C2 0A		keyCheckBrk1:	clr	keyrxbreak
 2113:	  0A02	C2 09				clr	keyrxextended
 2114:	  0A04	22				ret
 2115:
 2116:	  0A05	C0 00		keynormal:	push	ar0
 2117:	  0A07	30 0B 05			jnb	keyrxshift, keyMakeExt
 2118:	  0A0A	12 0A E5			call	keygetshift
 2119:	  0A0D	80 3A				sjmp	keyExitOK
 2120:
 2121:	  0A0F	30 09 1A	keyMakeExt:	jnb	keyrxextended, keyAltGr
 2122:	  0A12	C2 09				clr	keyrxextended			;clear extended
 2123:	  0A14	78 0D				mov	r0, #13
 2124:	  0A16	12 0B 90	keyMakeExt2:	call	keygetextind
 2125:	  0A19	B5 3B 0C			cjne	a, keyrxval, keyMakeExt1	;found?
 2126:	  0A1C	12 0B A0			call	keygetext
 2127:	  0A1F	B4 11 04			cjne	a, #ALTGR, keyMakeExt3		;ALTGR-pressed?
 2128:	  0A22	D2 0C				setb	keyrxaltgr			;set ALTGR-flag
 2129:	  0A24	80 27				sjmp	keyExit

ASEM-51 V1.3                                        Copyright (c) 2002 by W.W. Heinz                                         PAGE 44



 Line  I  Addr  Code            Source

 2130:	  0A26	80 21		keyMakeExt3:	sjmp	keyExitOK
 2131:	  0A28	D8 EC		keyMakeExt1:	djnz	r0, keyMakeExt2
 2132:	  0A2A	80 21				sjmp	keyExit
 2133:
 2134:	  0A2C	30 0C 11	keyAltGr:	jnb	keyrxaltgr, keyMake		;AltGR pressed?
 2135:	  0A2F	78 08				mov	r0, #8
 2136:	  0A31	12 0B 7A	keyAltGr2:	call	keygetaltgrind
 2137:	  0A34	B5 3B 05			cjne	a, keyrxval, keyAltGr1		;found?
 2138:	  0A37	12 0B 85			call	keygetaltgr
 2139:	  0A3A	80 0D				sjmp	keyExitOK
 2140:	  0A3C	D8 F3		keyAltGr1:	djnz	r0, keyAltGr2
 2141:	  0A3E	80 0D				sjmp	keyExit
 2142:
 2143:	  0A40	12 0A 50	keyMake:	call	keygetnoshift
 2144:	  0A43	30 0D 03			jnb	keyrxstrg, keyExitOK
 2145:	  0A46	C3				clr	c
 2146:	  0A47	94 60				subb	a, #96
 2147:
 2148:	  0A49	F5 3B		keyExitOK:	mov	keyrxval, a
 2149:	  0A4B	D2 08				setb	keyavail
 2150:
 2151:				;		mov	p2, #High(08000h + 24*160 + 77*2)
 2152:				;		mov	r0, #Low(08000h + 24*160 + 77*2);
 2153:				;		movx	@r0, a
 2154:
 2155:	  0A4D	D0 00		keyExit:	pop	ar0
 2156:	  0A4F	22				ret
 2157:
 2158:
 2159:	  0A50	E5 3B		keygetnoshift:	mov	a, keyrxval
 2160:	  0A52	04				inc	a
 2161:	  0A53	83				movc	a, @a+pc
 2162:	  0A54	22				ret
 2163:	  0A55			CHARTABLE_NOSHIFT:
 2164:				;		 	 00   01   02   03   04   05   06   07   08   09   0A   0B   0C   0D   0E
				0F
 2165:	  0A55	00 88 00 84			db	  0,  F9,   0,  F5,  F3,  F1,  F2, F12,   0, F10,  F8,  F6,  F4,TABU, '^',
	  0A59	82 80 81 8B	 0	; 00
	  0A5D	00 89 87 85
	  0A61	83 09 5E 00
 2166:	  0A65	00 00 00 00			db     	  0,   0,   0,   0,   0, 'q', '1',   0,   0,   0, 'y', 's', 'a', 'w', '2',
	  0A69	00 71 31 00	 0	; 10
	  0A6D	00 00 79 73
	  0A71	61 77 32 00
 2167:	  0A75	00 63 78 64			db	  0, 'c', 'x', 'd', 'e', '4', '3',   0,   0, ' ', 'v', 'f', 't', 'r', '5',
	  0A79	65 34 33 00	 0	; 20
	  0A7D	00 20 76 66
	  0A81	74 72 35 00
 2168:	  0A85	00 6E 62 68			db	  0, 'n', 'b', 'h', 'g', 'z', '6',   0,   0,   0, 'm', 'j', 'u', '7', '8',
	  0A89	67 7A 36 00	 0	; 30
	  0A8D	00 00 6D 6A
	  0A91	75 37 38 00
 2169:	  0A95	00 2C 6B 69			db	  0, ',', 'k', 'i', 'o', '0', '9',   0,   0, '.', '-', 'l', 246, 'p', 223,
	  0A99	6F 30 39 00	 0	; 40 	5c = \, 223 = ß
	  0A9D	00 2E 2D 6C
	  0AA1	F6 70 DF 00

ASEM-51 V1.3                                        Copyright (c) 2002 by W.W. Heinz                                         PAGE 45



 Line  I  Addr  Code            Source

 2170:	  0AA5	00 00 E4 58			db	  0,   0, 228,  'X',252, 180,   0,   0,   0,   0,C_CR, '+',   0, '#',   0,
	  0AA9	FC B4 00 00	 0	; 50
	  0AAD	00 00 0D 2B
	  0AB1	00 23 00 00
 2171:	  0AB5	00 3C 00 00			db	  0, '<',   0,   0,   0,   0,C_DEL,  0,   0, '1',   0, '4', '7',   0,   0,
	  0AB9	00 00 7F 00	 0	; 60
	  0ABD	00 31 00 34
	  0AC1	37 00 00 00
 2172:	  0AC5	30 2E 32 35			db	 '0', '.', '2', '5', '6', '8',ESC,   0, F11, '+', '3', '-', '*', '9', CLS,
	  0AC9	36 38 1B 00	 0	; 70
	  0ACD	8A 2B 33 2D
	  0AD1	2A 39 01 00
 2173:	  0AD5	00 00 00 86			db	  0,   0,   0,  F7,   0,   0,   0,   0,   0,   0,   0,   0,   0,   0,   0,
	  0AD9	00 00 00 00	 0	; 80
	  0ADD	00 00 00 00
	  0AE1	00 00 00 00
 2174:
 2175:	  0AE5	E5 3B		keygetshift:	mov	a, keyrxval
 2176:	  0AE7	04				inc	a
 2177:	  0AE8	83				movc	a, @a+pc
 2178:	  0AE9	22				ret
 2179:	  0AEA			CHARTABLE_SHIFT:
 2180:				;		 	 00   01   02   03   04   05   06   07   08   09   0A   0B   0C   0D   0E
				0F
 2181:	  0AEA	00 09 00 05			db	  0,   9,   0,   5,   3,   1,   2,  12,   0,  10,   8,   6,   4,TABU,0B0h,
	  0AEE	03 01 02 0C	 0	; 00
	  0AF2	00 0A 08 06
	  0AF6	04 09 B0 00
 2182:	  0AFA	00 00 00 00			db        0,   0,   0,   0,   0, 'Q', '!',   0,   0,   0, 'Y', 'S', 'A', 'W', '"',
	  0AFE	00 51 21 00	 0	; 10
	  0B02	00 00 59 53
	  0B06	41 57 22 00
 2183:	  0B0A	00 43 58 44			db	  0, 'C', 'X', 'D', 'E', '$', 167,   0,   0, ' ', 'V', 'F', 'T', 'R', '%',
	  0B0E	45 24 A7 00	 0	; 20 	167=§
	  0B12	00 20 56 46
	  0B16	54 52 25 00
 2184:	  0B1A	00 4E 42 48			db	  0, 'N', 'B', 'H', 'G', 'Z', '&',   0,   0,   0, 'M', 'J', 'U', '/', '(',
	  0B1E	47 5A 26 00	 0	; 30
	  0B22	00 00 4D 4A
	  0B26	55 2F 28 00
 2185:	  0B2A	00 3B 4B 49			db	  0, ';', 'K', 'I', 'O', '=', ')',   0,   0, ':', '_', 'L', 214, 'P', '?',
	  0B2E	4F 3D 29 00	 0	; 40
	  0B32	00 3A 5F 4C
	  0B36	D6 50 3F 00
 2186:	  0B3A	00 00 C4 00			db	  0,   0, 196,   0, 220, '`',   0,   0,   0,   0,  LF, '*',   0,027h,   0,
	  0B3E	DC 60 00 00	 0	; 50
	  0B42	00 00 0A 2A
	  0B46	00 27 00 00
 2187:	  0B4A	00 3E 00 00			db	  0, '>',   0,   0,   0,   0,CDCH,   0,   0, '1',   0, CCLF, '7',   0,  0,
	  0B4E	00 00 FE 00	 0	; 60
	  0B52	00 31 00 1E
	  0B56	37 00 00 00
 2188:	  0B5A	30 2E 1D 35			db	'0', '.', CCDN, '5', CCRT, CCUP,  0,   0,  11, '+', '3', '-', '*', '9', 0,
	  0B5E	1F 1C 00 00	 0  ; 70
	  0B62	0B 2B 33 2D
	  0B66	2A 39 00 00

ASEM-51 V1.3                                        Copyright (c) 2002 by W.W. Heinz                                         PAGE 46



 Line  I  Addr  Code            Source

 2189:	  0B6A	00 00 00 07			db	  0,   0,   0,   7,   0,   0,   0,   0,   0,   0,   0,   0,   0,  0,    0,
	  0B6E	00 00 00 00	 0	; 80
	  0B72	00 00 00 00
	  0B76	00 00 00 00
 2190:
 2191:
 2192:	  0B7A	E8		keygetaltgrind:	mov	a, r0
 2193:	  0B7B	83				movc	a, @a+pc
 2194:	  0B7C	22				ret
 2195:	  0B7D			ALTGR_TABLE_IND:
 2196:	  0B7D	15				db	015h	; q = @
 2197:	  0B7E	61				db	061h	; <> = |
 2198:	  0B7F	5B				db	05Bh	; *+ = ~
 2199:	  0B80	4E				db	04Eh	; ?ß = \
 2200:	  0B81	3E				db	03Eh	; 8( = [
 2201:	  0B82	46				db	046h	; 9) = ]
 2202:	  0B83	3D				db	03Dh	; 7/ = {
 2203:	  0B84	45				db	045h	; 0= = }
 2204:
 2205:
 2206:	  0B85	E8		keygetaltgr:	mov	a, r0
 2207:	  0B86	83				movc	a, @a+pc
 2208:	  0B87	22				ret
 2209:	  0B88	40		ALTGR_TABLE:	db	'@'
 2210:	  0B89	7C				db	'|'
 2211:	  0B8A	7E				db	'~'
 2212:	  0B8B	5C				db	05Ch
 2213:	  0B8C	5B				db	'['
 2214:	  0B8D	5D				db	']'
 2215:	  0B8E	7B				db	'{'
 2216:	  0B8F	7D				db	'}'
 2217:
 2218:
 2219:	  0B90	E8		keygetextind:	mov	a, r0
 2220:	  0B91	83				movc	a, @a+pc
 2221:	  0B92	22				ret
 2222:	  0B93	11		EXT_TABLE_IND:	db	ALTGR
 2223:	  0B94	4A				db	04Ah	; /
 2224:	  0B95	5A				db	05Ah	; ENTER
 2225:	  0B96	69				db	069h	; END
 2226:	  0B97	6B				db	06Bh	; LEFT
 2227:	  0B98	6C				db	06Ch	; HOME
 2228:	  0B99	70				db	070h	; INS
 2229:	  0B9A	71				db	071h	; DEL
 2230:	  0B9B	72				db	072h	; DOWN
 2231:	  0B9C	74				db	074h	; RIGHT
 2232:	  0B9D	75				db	075h	; Up
 2233:	  0B9E	7A				db	07Ah	; PAGE DOWN
 2234:	  0B9F	7D				db	07Dh	; PAGE UP
 2235:
 2236:	  0BA0	E8		keygetext:	mov	a, r0
 2237:	  0BA1	83				movc	a, @a+pc
 2238:	  0BA2	22				ret
 2239:	  0BA3	11		EXT_TABLE:	db	ALTGR
 2240:	  0BA4	2F				db	'/'	; NumPad division symbol
 2241:	  0BA5	0D				db	C_CR	; ENTER

ASEM-51 V1.3                                        Copyright (c) 2002 by W.W. Heinz                                         PAGE 47



 Line  I  Addr  Code            Source

 2242:	  0BA6	1D				db	CCBT	; cursor bottom with SuperFlag
 2243:	  0BA7	13				db	19	; cursor left	CTRL-S
 2244:	  0BA8	1C				db	CCHM	; cursor home with SuperFLag
 2245:	  0BA9	16				db	22	; insert	CTRL-V
 2246:	  0BAA	07				db	7	; delete	CTRL-G
 2247:	  0BAB	18				db	24	; cursor down	CTRL-X
 2248:	  0BAC	04				db	4	; cursor right	CTRL-D
 2249:	  0BAD	05				db	5	; cursor up	CTRL-E
 2250:	  0BAE	03				db	3	; pagedown CTRL-C
 2251:	  0BAF	12				db	18	; pageup CTRL-R
 2252:				;
 2253:				;
 2254:				;
 2255:	  0BB0	E5 2A		getbaud:	mov	a, baudidx
 2256:	  0BB2	04				inc	a
 2257:	  0BB3	83				movc	a, @a+pc
 2258:	  0BB4	22				ret
 2259:	  0BB5	FF				db	0ffh	;115200
 2260:	  0BB6	F4				db	0f4h	;9600
 2261:	  0BB7	FA				db	0fah	;19200
 2262:	  0BB8	FD				db	0fdh	;38400
 2263:	  0BB9	FE				db	0feh	;57600
 2264:
 2265:	  0BBA	83		getbdtxt:	movc	a, @a+pc
 2266:	  0BBB	22				ret
 2267:	  0BBC	31 31 35 32			db	"1152"
 2268:	  0BC0	20 20 39 36			db	"  96"
 2269:	  0BC4	20 31 39 32			db	" 192"
 2270:	  0BC8	20 33 38 34			db	" 384"
 2271:	  0BCC	20 35 37 36			db	" 576"
 2272:	  0BD0	41 44 4D 2D	adm3atext:	db	"ADM-3A"
	  0BD4	33 41
 2273:
 2274:				;
 2275:				;
 2276:	  0BD6	90 8F 00	prtstatus:	mov	dptr, #08000h + 24 * WIDTH * 2
 2277:	  0BD9	78 01				mov	r0, #1
 2278:	  0BDB	12 0C 45	prtstatus1:	call	getstatus			;get status line
 2279:	  0BDE	F0				movx	@dptr, a
 2280:	  0BDF	A3				inc	dptr
 2281:	  0BE0	74 06				mov	a, #TURQUOISE			;color turquoise
 2282:	  0BE2	F0				movx	@dptr, a
 2283:	  0BE3	A3				inc	dptr
 2284:	  0BE4	08				inc	r0
 2285:	  0BE5	B8 51 F3			cjne	r0, #81, prtstatus1
 2286:
 2287:	  0BE8	90 8F 14			mov	dptr, #08000h + 24 * WIDTH * 2 + 10 * 2
 2288:	  0BEB	E5 2A				mov	a, baudidx
 2289:	  0BED	23				rl	a				;mul2
 2290:	  0BEE	23				rl	a				;mul4
 2291:	  0BEF	04				inc	a
 2292:	  0BF0	F8				mov	r0, a
 2293:	  0BF1	79 00				mov	r1, #0
 2294:	  0BF3	71 BA		prtbaud:	call	getbdtxt
 2295:	  0BF5	F0				movx	@dptr, a
 2296:	  0BF6	A3				inc	dptr

ASEM-51 V1.3                                        Copyright (c) 2002 by W.W. Heinz                                         PAGE 48



 Line  I  Addr  Code            Source

 2297:	  0BF7	A3				inc	dptr
 2298:	  0BF8	08				inc	r0
 2299:	  0BF9	E8				mov	a, r0
 2300:	  0BFA	09				inc	r1
 2301:	  0BFB	B9 04 F5			cjne	r1, #4, prtbaud
 2302:
 2303:	  0BFE	30 14 11			jnb	databits, prtstatus6		;print 7 data bits
 2304:	  0C01	74 37				mov	a, #'7'
 2305:	  0C03	90 8F 0E			mov	dptr, #08000h + 24 * WIDTH * 2 + 7 * 2
 2306:	  0C06	F0				movx	@dptr, a
 2307:	  0C07	74 45				mov	a, #'E'
 2308:	  0C09	30 15 02			jnb	evenodd, prtstatus7
 2309:	  0C0C	74 4F				mov	a, #'O'
 2310:	  0C0E	90 8F 10	prtstatus7:	mov	dptr, #08000h + 24 * WIDTH * 2 + 8 * 2
 2311:	  0C11	F0				movx	@dptr, a
 2312:	  0C12	74 FB		prtstatus6:	mov	a, #251				;Haken
 2313:	  0C14	30 12 04			jnb	newlinemode, prtstatus2
 2314:	  0C17	90 8F 38			mov	dptr, #08000h + 24 * WIDTH * 2 + 28 * 2
 2315:	  0C1A	F0				movx	@dptr, a
 2316:	  0C1B	30 13 04	prtstatus2:	jnb	insert	, prtstatus3
 2317:	  0C1E	90 8F 50			mov	dptr, #08000h + 24 * WIDTH * 2 + 40 * 2
 2318:	  0C21	F0				movx	@dptr, a
 2319:	  0C22	30 11 04	prtstatus3:	jnb	origin, prtstatus4
 2320:	  0C25	90 8F 68			mov	dptr, #08000h + 24 * WIDTH * 2 + 52 * 2
 2321:	  0C28	F0				movx	@dptr, a
 2322:	  0C29	30 10 04	prtstatus4:	jnb	wrap, prtstatus5
 2323:	  0C2C	90 8F 7C			mov	dptr, #08000h + 24 * WIDTH * 2 + 62 * 2
 2324:	  0C2F	F0				movx	@dptr, a
 2325:	  0C30	30 16 11	prtstatus5:	jnb	termmode, prtstatusex
 2326:	  0C33	90 8F 8A			mov	dptr, #08000h + 24 * WIDTH * 2 + 69 * 2
 2327:	  0C36	78 00				mov	r0, #0
 2328:	  0C38	E8		prtstatus5a:	mov	a, r0
 2329:	  0C39	24 15				add	a, #adm3atext-getbdtxt-1
 2330:	  0C3B	71 BA				acall	getbdtxt
 2331:	  0C3D	F0				movx	@dptr, a
 2332:	  0C3E	A3				inc	dptr
 2333:	  0C3F	A3				inc	dptr
 2334:	  0C40	08				inc	r0
 2335:	  0C41	B8 06 F4			cjne	r0, #6, prtstatus5a
 2336:	  0C44	22		prtstatusex:	ret
 2337:
 2338:	  0C45	E8		getstatus:	mov	a, r0
 2339:	  0C46	83				movc	a, @a + pc
 2340:	  0C47	22				ret
 2341:				;			"0         1         2         3         4         5         6         7
				     "
 2342:				;			"012345678901234567890123456789012345678901234567890123456789012345678901234
				56789
 2343:	  0C48	7C 42 61 75	status:		db	"|Baud: 8N xxxx00 | Newline: - | Insert: - | Origin: - | Wrap: - |    VT102
	  0C4C	64 3A 20 38	    |"
	  0C50	4E 20 78 78
	  0C54	78 78 30 30
	  0C58	20 7C 20 4E
	  0C5C	65 77 6C 69
	  0C60	6E 65 3A 20
	  0C64	2D 20 7C 20

ASEM-51 V1.3                                        Copyright (c) 2002 by W.W. Heinz                                         PAGE 49



 Line  I  Addr  Code            Source

	  0C68	49 6E 73 65
	  0C6C	72 74 3A 20
	  0C70	2D 20 7C 20
	  0C74	4F 72 69 67
	  0C78	69 6E 3A 20
	  0C7C	2D 20 7C 20
	  0C80	57 72 61 70
	  0C84	3A 20 2D 20
	  0C88	7C 20 20 20
	  0C8C	20 56 54 31
	  0C90	30 32 20 20
	  0C94	20 20 20 7C
 2344:
 2345:				;vt100_font	equ	base + 1000h
 2346:						$include (vt100_font.a51)
 2347: 1					org	base + 1000h
							^
			  @@@@@ symbol not defined @@@@@

 2348: 1  0C98			vt100_font:
 2349: 1  0C98	00 00 00 00			db	000h, 000h, 000h, 000h, 000h, 000h, 000h, 000h, 000h, 000h, 000h, 000h
       1  0C9C	00 00 00 00
       1  0CA0	00 00 00 00
 2350: 1  0CA4	00 00 00 00			db	000h, 000h, 000h, 000h, 000h, 000h, 000h, 000h, 010h, 038h, 07Ch, 0FEh
       1  0CA8	00 00 00 00
       1  0CAC	10 38 7C FE
 2351: 1  0CB0	7C 38 10 00			db	07Ch, 038h, 010h, 000h, 000h, 000h, 000h, 000h, 055h, 0AAh, 055h, 0AAh
       1  0CB4	00 00 00 00
       1  0CB8	55 AA 55 AA
 2352: 1  0CBC	55 AA 55 AA			db	055h, 0AAh, 055h, 0AAh, 055h, 0AAh, 055h, 0AAh, 055h, 0AAh, 055h, 0AAh
       1  0CC0	55 AA 55 AA
       1  0CC4	55 AA 55 AA
 2353: 1  0CC8	00 88 88 88			db	000h, 088h, 088h, 088h, 0F8h, 088h, 088h, 088h, 000h, 03Eh, 008h, 008h
       1  0CCC	F8 88 88 88
       1  0CD0	00 3E 08 08
 2354: 1  0CD4	08 08 08 00			db	008h, 008h, 008h, 000h, 000h, 0F0h, 080h, 080h, 0E0h, 080h, 080h, 080h
       1  0CD8	00 F0 80 80
       1  0CDC	E0 80 80 80
 2355: 1  0CE0	1E 10 10 1C			db	01Eh, 010h, 010h, 01Ch, 010h, 010h, 010h, 000h, 000h, 070h, 080h, 080h
       1  0CE4	10 10 10 00
       1  0CE8	00 70 80 80
 2356: 1  0CEC	80 80 70 00			db	080h, 080h, 070h, 000h, 01Eh, 012h, 012h, 01Ch, 018h, 014h, 012h, 000h
       1  0CF0	1E 12 12 1C
       1  0CF4	18 14 12 00
 2357: 1  0CF8	00 80 80 80			db	000h, 080h, 080h, 080h, 080h, 080h, 0F0h, 000h, 01Eh, 010h, 010h, 01Ch
       1  0CFC	80 80 F0 00
       1  0D00	1E 10 10 1C
 2358: 1  0D04	10 10 10 00			db	010h, 010h, 010h, 000h, 000h, 038h, 06Ch, 06Ch, 038h, 000h, 000h, 000h
       1  0D08	00 38 6C 6C
       1  0D0C	38 00 00 00
 2359: 1  0D10	00 00 00 00			db	000h, 000h, 000h, 000h, 000h, 000h, 000h, 000h, 000h, 000h, 000h, 000h
       1  0D14	00 00 00 00
       1  0D18	00 00 00 00
 2360: 1  0D1C	18 18 7E 18			db	018h, 018h, 07Eh, 018h, 018h, 000h, 000h, 0FFh, 000h, 000h, 000h, 000h
       1  0D20	18 00 00 FF
       1  0D24	00 00 00 00

ASEM-51 V1.3                                        Copyright (c) 2002 by W.W. Heinz                                         PAGE 50



 Line  I  Addr  Code            Source

 2361: 1  0D28	00 88 C8 A8			db	000h, 088h, 0C8h, 0A8h, 0A8h, 098h, 088h, 000h, 010h, 010h, 010h, 010h
       1  0D2C	A8 98 88 00
       1  0D30	10 10 10 10
 2362: 1  0D34	10 10 1E 00			db	010h, 010h, 01Eh, 000h, 000h, 088h, 088h, 088h, 050h, 050h, 050h, 020h
       1  0D38	00 88 88 88
       1  0D3C	50 50 50 20
 2363: 1  0D40	00 3E 08 08			db	000h, 03Eh, 008h, 008h, 008h, 008h, 008h, 000h, 018h, 018h, 018h, 018h
       1  0D44	08 08 08 00
       1  0D48	18 18 18 18
 2364: 1  0D4C	18 18 18 F8			db	018h, 018h, 018h, 0F8h, 000h, 000h, 000h, 000h, 000h, 000h, 000h, 000h
       1  0D50	00 00 00 00
       1  0D54	00 00 00 00
 2365: 1  0D58	00 00 00 00			db	000h, 000h, 000h, 000h, 000h, 000h, 000h, 0F8h, 018h, 018h, 018h, 018h
       1  0D5C	00 00 00 F8
       1  0D60	18 18 18 18
 2366: 1  0D64	18 18 18 18			db	018h, 018h, 018h, 018h, 000h, 000h, 000h, 000h, 000h, 000h, 000h, 01Fh
       1  0D68	00 00 00 00
       1  0D6C	00 00 00 1F
 2367: 1  0D70	18 18 18 18			db	018h, 018h, 018h, 018h, 018h, 018h, 018h, 018h, 018h, 018h, 018h, 018h
       1  0D74	18 18 18 18
       1  0D78	18 18 18 18
 2368: 1  0D7C	18 18 18 1F			db	018h, 018h, 018h, 01Fh, 000h, 000h, 000h, 000h, 000h, 000h, 000h, 000h
       1  0D80	00 00 00 00
       1  0D84	00 00 00 00
 2369: 1  0D88	18 18 18 18			db	018h, 018h, 018h, 018h, 018h, 018h, 018h, 0FFh, 018h, 018h, 018h, 018h
       1  0D8C	18 18 18 FF
       1  0D90	18 18 18 18
 2370: 1  0D94	18 18 18 18			db	018h, 018h, 018h, 018h, 0FFh, 000h, 000h, 000h, 000h, 000h, 000h, 000h
       1  0D98	FF 00 00 00
       1  0D9C	00 00 00 00
 2371: 1  0DA0	00 00 00 00			db	000h, 000h, 000h, 000h, 000h, 000h, 000h, 000h, 000h, 000h, 000h, 0FFh
       1  0DA4	00 00 00 00
       1  0DA8	00 00 00 FF
 2372: 1  0DAC	00 00 00 00			db	000h, 000h, 000h, 000h, 000h, 000h, 000h, 000h, 000h, 000h, 000h, 000h
       1  0DB0	00 00 00 00
       1  0DB4	00 00 00 00
 2373: 1  0DB8	00 00 00 00			db	000h, 000h, 000h, 000h, 000h, 000h, 000h, 0FFh, 000h, 000h, 000h, 000h
       1  0DBC	00 00 00 FF
       1  0DC0	00 00 00 00
 2374: 1  0DC4	00 00 00 00			db	000h, 000h, 000h, 000h, 000h, 000h, 000h, 000h, 000h, 000h, 000h, 000h
       1  0DC8	00 00 00 00
       1  0DCC	00 00 00 00
 2375: 1  0DD0	00 00 00 FF			db	000h, 000h, 000h, 0FFh, 000h, 000h, 000h, 000h, 000h, 000h, 000h, 000h
       1  0DD4	00 00 00 00
       1  0DD8	00 00 00 00
 2376: 1  0DDC	00 00 00 00			db	000h, 000h, 000h, 000h, 000h, 000h, 000h, 000h, 000h, 000h, 0FFh, 000h
       1  0DE0	00 00 00 00
       1  0DE4	00 00 FF 00
 2377: 1  0DE8	18 18 18 18			db	018h, 018h, 018h, 018h, 018h, 018h, 018h, 01Fh, 018h, 018h, 018h, 018h
       1  0DEC	18 18 18 1F
       1  0DF0	18 18 18 18
 2378: 1  0DF4	18 18 18 18			db	018h, 018h, 018h, 018h, 018h, 018h, 018h, 018h, 018h, 018h, 018h, 0F8h
       1  0DF8	18 18 18 18
       1  0DFC	18 18 18 F8
 2379: 1  0E00	18 18 18 18			db	018h, 018h, 018h, 018h, 018h, 018h, 018h, 018h, 018h, 018h, 018h, 018h
       1  0E04	18 18 18 18

ASEM-51 V1.3                                        Copyright (c) 2002 by W.W. Heinz                                         PAGE 51



 Line  I  Addr  Code            Source

       1  0E08	18 18 18 18
 2380: 1  0E0C	18 18 18 FF			db	018h, 018h, 018h, 0FFh, 000h, 000h, 000h, 000h, 000h, 000h, 000h, 000h
       1  0E10	00 00 00 00
       1  0E14	00 00 00 00
 2381: 1  0E18	00 00 00 00			db	000h, 000h, 000h, 000h, 000h, 000h, 000h, 0FFh, 018h, 018h, 018h, 018h
       1  0E1C	00 00 00 FF
       1  0E20	18 18 18 18
 2382: 1  0E24	18 18 18 18			db	018h, 018h, 018h, 018h, 018h, 018h, 018h, 018h, 018h, 018h, 018h, 018h
       1  0E28	18 18 18 18
       1  0E2C	18 18 18 18
 2383: 1  0E30	18 18 18 18			db	018h, 018h, 018h, 018h, 018h, 018h, 018h, 018h, 000h, 000h, 000h, 00Ch
       1  0E34	18 18 18 18
       1  0E38	00 00 00 0C
 2384: 1  0E3C	18 30 60 30			db	018h, 030h, 060h, 030h, 018h, 00Ch, 000h, 07Eh, 000h, 000h, 000h, 000h
       1  0E40	18 0C 00 7E
       1  0E44	00 00 00 00
 2385: 1  0E48	00 00 00 30			db	000h, 000h, 000h, 030h, 018h, 00Ch, 006h, 00Ch, 018h, 030h, 000h, 07Eh
       1  0E4C	18 0C 06 0C
       1  0E50	18 30 00 7E
 2386: 1  0E54	00 00 00 00			db	000h, 000h, 000h, 000h, 000h, 000h, 000h, 000h, 0FEh, 06Ch, 06Ch, 06Ch
       1  0E58	00 00 00 00
       1  0E5C	FE 6C 6C 6C
 2387: 1  0E60	6C 6C 6C 6C			db	06Ch, 06Ch, 06Ch, 06Ch, 000h, 000h, 000h, 000h, 000h, 000h, 000h, 002h
       1  0E64	00 00 00 00
       1  0E68	00 00 00 02
 2388: 1  0E6C	04 7E 08 10			db	004h, 07Eh, 008h, 010h, 07Eh, 020h, 040h, 000h, 000h, 000h, 000h, 000h
       1  0E70	7E 20 40 00
       1  0E74	00 00 00 00
 2389: 1  0E78	00 38 6C 64			db	000h, 038h, 06Ch, 064h, 060h, 0F0h, 060h, 060h, 060h, 060h, 0E6h, 0FCh
       1  0E7C	60 F0 60 60
       1  0E80	60 60 E6 FC
 2390: 1  0E84	00 00 00 00			db	000h, 000h, 000h, 000h, 000h, 000h, 000h, 000h, 000h, 000h, 000h, 018h
       1  0E88	00 00 00 00
       1  0E8C	00 00 00 18
 2391: 1  0E90	18 00 00 00			db	018h, 000h, 000h, 000h, 000h, 000h, 000h, 000h, 000h, 000h, 000h, 000h
       1  0E94	00 00 00 00
       1  0E98	00 00 00 00
 2392: 1  0E9C	00 00 00 00			db	000h, 000h, 000h, 000h, 000h, 000h, 000h, 000h, 000h, 000h, 000h, 000h
       1  0EA0	00 00 00 00
       1  0EA4	00 00 00 00
 2393: 1  0EA8	00 00 18 3C			db	000h, 000h, 018h, 03Ch, 03Ch, 03Ch, 018h, 018h, 018h, 000h, 018h, 018h
       1  0EAC	3C 3C 18 18
       1  0EB0	18 00 18 18
 2394: 1  0EB4	00 00 00 00			db	000h, 000h, 000h, 000h, 000h, 066h, 066h, 066h, 024h, 000h, 000h, 000h
       1  0EB8	00 66 66 66
       1  0EBC	24 00 00 00
 2395: 1  0EC0	00 00 00 00			db	000h, 000h, 000h, 000h, 000h, 000h, 000h, 000h, 000h, 000h, 000h, 06Ch
       1  0EC4	00 00 00 00
       1  0EC8	00 00 00 6C
 2396: 1  0ECC	6C FE 6C 6C			db	06Ch, 0FEh, 06Ch, 06Ch, 06Ch, 0FEh, 06Ch, 06Ch, 000h, 000h, 000h, 000h
       1  0ED0	6C FE 6C 6C
       1  0ED4	00 00 00 00
 2397: 1  0ED8	18 18 7C C6			db	018h, 018h, 07Ch, 0C6h, 0C2h, 0C0h, 07Ch, 006h, 006h, 086h, 0C6h, 07Ch
       1  0EDC	C2 C0 7C 06
       1  0EE0	06 86 C6 7C
 2398: 1  0EE4	18 18 00 00			db	018h, 018h, 000h, 000h, 000h, 000h, 000h, 000h, 0C2h, 0C6h, 00Ch, 018h

ASEM-51 V1.3                                        Copyright (c) 2002 by W.W. Heinz                                         PAGE 52



 Line  I  Addr  Code            Source

       1  0EE8	00 00 00 00
       1  0EEC	C2 C6 0C 18
 2399: 1  0EF0	30 60 C6 86			db	030h, 060h, 0C6h, 086h, 000h, 000h, 000h, 000h, 000h, 000h, 038h, 06Ch
       1  0EF4	00 00 00 00
       1  0EF8	00 00 38 6C
 2400: 1  0EFC	6C 38 76 DC			db	06Ch, 038h, 076h, 0DCh, 0CCh, 0CCh, 0CCh, 076h, 000h, 000h, 000h, 000h
       1  0F00	CC CC CC 76
       1  0F04	00 00 00 00
 2401: 1  0F08	00 30 30 30			db	000h, 030h, 030h, 030h, 060h, 000h, 000h, 000h, 000h, 000h, 000h, 000h
       1  0F0C	60 00 00 00
       1  0F10	00 00 00 00
 2402: 1  0F14	00 00 00 00			db	000h, 000h, 000h, 000h, 000h, 000h, 00Ch, 018h, 030h, 030h, 030h, 030h
       1  0F18	00 00 0C 18
       1  0F1C	30 30 30 30
 2403: 1  0F20	30 30 18 0C			db	030h, 030h, 018h, 00Ch, 000h, 000h, 000h, 000h, 000h, 000h, 030h, 018h
       1  0F24	00 00 00 00
       1  0F28	00 00 30 18
 2404: 1  0F2C	0C 0C 0C 0C			db	00Ch, 00Ch, 00Ch, 00Ch, 00Ch, 00Ch, 018h, 030h, 000h, 000h, 000h, 000h
       1  0F30	0C 0C 18 30
       1  0F34	00 00 00 00
 2405: 1  0F38	00 00 00 00			db	000h, 000h, 000h, 000h, 000h, 066h, 03Ch, 0FFh, 03Ch, 066h, 000h, 000h
       1  0F3C	00 66 3C FF
       1  0F40	3C 66 00 00
 2406: 1  0F44	00 00 00 00			db	000h, 000h, 000h, 000h, 000h, 000h, 000h, 000h, 000h, 018h, 018h, 07Eh
       1  0F48	00 00 00 00
       1  0F4C	00 18 18 7E
 2407: 1  0F50	18 18 00 00			db	018h, 018h, 000h, 000h, 000h, 000h, 000h, 000h, 000h, 000h, 000h, 000h
       1  0F54	00 00 00 00
       1  0F58	00 00 00 00
 2408: 1  0F5C	00 00 00 00			db	000h, 000h, 000h, 000h, 000h, 018h, 018h, 018h, 030h, 000h, 000h, 000h
       1  0F60	00 18 18 18
       1  0F64	30 00 00 00
 2409: 1  0F68	00 00 00 00			db	000h, 000h, 000h, 000h, 000h, 000h, 000h, 0FEh, 000h, 000h, 000h, 000h
       1  0F6C	00 00 00 FE
       1  0F70	00 00 00 00
 2410: 1  0F74	00 00 00 00			db	000h, 000h, 000h, 000h, 000h, 000h, 000h, 000h, 000h, 000h, 000h, 000h
       1  0F78	00 00 00 00
       1  0F7C	00 00 00 00
 2411: 1  0F80	00 00 18 18			db	000h, 000h, 018h, 018h, 000h, 000h, 000h, 000h, 000h, 000h, 000h, 000h
       1  0F84	00 00 00 00
       1  0F88	00 00 00 00
 2412: 1  0F8C	02 06 0C 18			db	002h, 006h, 00Ch, 018h, 030h, 060h, 0C0h, 080h, 000h, 000h, 000h, 000h
       1  0F90	30 60 C0 80
       1  0F94	00 00 00 00
 2413: 1  0F98	00 00 38 6C			db	000h, 000h, 038h, 06Ch, 0C6h, 0C6h, 0D6h, 0D6h, 0C6h, 0C6h, 06Ch, 038h
       1  0F9C	C6 C6 D6 D6
       1  0FA0	C6 C6 6C 38
 2414: 1  0FA4	00 00 00 00			db	000h, 000h, 000h, 000h, 000h, 000h, 018h, 038h, 078h, 018h, 018h, 018h
       1  0FA8	00 00 18 38
       1  0FAC	78 18 18 18
 2415: 1  0FB0	18 18 18 7E			db	018h, 018h, 018h, 07Eh, 000h, 000h, 000h, 000h, 000h, 000h, 07Ch, 0C6h
       1  0FB4	00 00 00 00
       1  0FB8	00 00 7C C6
 2416: 1  0FBC	06 0C 18 30			db	006h, 00Ch, 018h, 030h, 060h, 0C0h, 0C6h, 0FEh, 000h, 000h, 000h, 000h
       1  0FC0	60 C0 C6 FE
       1  0FC4	00 00 00 00

ASEM-51 V1.3                                        Copyright (c) 2002 by W.W. Heinz                                         PAGE 53



 Line  I  Addr  Code            Source

 2417: 1  0FC8	00 00 7C C6			db	000h, 000h, 07Ch, 0C6h, 006h, 006h, 03Ch, 006h, 006h, 006h, 0C6h, 07Ch
       1  0FCC	06 06 3C 06
       1  0FD0	06 06 C6 7C
 2418: 1  0FD4	00 00 00 00			db	000h, 000h, 000h, 000h, 000h, 000h, 00Ch, 01Ch, 03Ch, 06Ch, 0CCh, 0FEh
       1  0FD8	00 00 0C 1C
       1  0FDC	3C 6C CC FE
 2419: 1  0FE0	0C 0C 0C 1E			db	00Ch, 00Ch, 00Ch, 01Eh, 000h, 000h, 000h, 000h, 000h, 000h, 0FEh, 0C0h
       1  0FE4	00 00 00 00
       1  0FE8	00 00 FE C0
 2420: 1  0FEC	C0 C0 FC 06			db	0C0h, 0C0h, 0FCh, 006h, 006h, 006h, 0C6h, 07Ch, 000h, 000h, 000h, 000h
       1  0FF0	06 06 C6 7C
       1  0FF4	00 00 00 00
 2421: 1  0FF8	00 00 38 60			db	000h, 000h, 038h, 060h, 0C0h, 0C0h, 0FCh, 0C6h, 0C6h, 0C6h, 0C6h, 07Ch
       1  0FFC	C0 C0 FC C6
       1  1000	C6 C6 C6 7C
 2422: 1  1004	00 00 00 00			db	000h, 000h, 000h, 000h, 000h, 000h, 0FEh, 0C6h, 006h, 006h, 00Ch, 018h
       1  1008	00 00 FE C6
       1  100C	06 06 0C 18
 2423: 1  1010	30 30 30 30			db	030h, 030h, 030h, 030h, 000h, 000h, 000h, 000h, 000h, 000h, 07Ch, 0C6h
       1  1014	00 00 00 00
       1  1018	00 00 7C C6
 2424: 1  101C	C6 C6 7C C6			db	0C6h, 0C6h, 07Ch, 0C6h, 0C6h, 0C6h, 0C6h, 07Ch, 000h, 000h, 000h, 000h
       1  1020	C6 C6 C6 7C
       1  1024	00 00 00 00
 2425: 1  1028	00 00 7C C6			db	000h, 000h, 07Ch, 0C6h, 0C6h, 0C6h, 07Eh, 006h, 006h, 006h, 00Ch, 078h
       1  102C	C6 C6 7E 06
       1  1030	06 06 0C 78
 2426: 1  1034	00 00 00 00			db	000h, 000h, 000h, 000h, 000h, 000h, 000h, 000h, 018h, 018h, 000h, 000h
       1  1038	00 00 00 00
       1  103C	18 18 00 00
 2427: 1  1040	00 18 18 00			db	000h, 018h, 018h, 000h, 000h, 000h, 000h, 000h, 000h, 000h, 000h, 000h
       1  1044	00 00 00 00
       1  1048	00 00 00 00
 2428: 1  104C	18 18 00 00			db	018h, 018h, 000h, 000h, 000h, 018h, 018h, 030h, 000h, 000h, 000h, 000h
       1  1050	00 18 18 30
       1  1054	00 00 00 00
 2429: 1  1058	00 00 00 06			db	000h, 000h, 000h, 006h, 00Ch, 018h, 030h, 060h, 030h, 018h, 00Ch, 006h
       1  105C	0C 18 30 60
       1  1060	30 18 0C 06
 2430: 1  1064	00 00 00 00			db	000h, 000h, 000h, 000h, 000h, 000h, 000h, 000h, 000h, 07Eh, 000h, 000h
       1  1068	00 00 00 00
       1  106C	00 7E 00 00
 2431: 1  1070	7E 00 00 00			db	07Eh, 000h, 000h, 000h, 000h, 000h, 000h, 000h, 000h, 000h, 000h, 060h
       1  1074	00 00 00 00
       1  1078	00 00 00 60
 2432: 1  107C	30 18 0C 06			db	030h, 018h, 00Ch, 006h, 00Ch, 018h, 030h, 060h, 000h, 000h, 000h, 000h
       1  1080	0C 18 30 60
       1  1084	00 00 00 00
 2433: 1  1088	00 00 7C C6			db	000h, 000h, 07Ch, 0C6h, 0C6h, 00Ch, 018h, 018h, 018h, 000h, 018h, 018h
       1  108C	C6 0C 18 18
       1  1090	18 00 18 18
 2434: 1  1094	00 00 00 00			db	000h, 000h, 000h, 000h, 000h, 000h, 000h, 07Ch, 0C6h, 0C6h, 0DEh, 0DEh
       1  1098	00 00 00 7C
       1  109C	C6 C6 DE DE
 2435: 1  10A0	DE DC C0 7C			db	0DEh, 0DCh, 0C0h, 07Ch, 000h, 000h, 000h, 000h, 000h, 000h, 010h, 038h
       1  10A4	00 00 00 00

ASEM-51 V1.3                                        Copyright (c) 2002 by W.W. Heinz                                         PAGE 54



 Line  I  Addr  Code            Source

       1  10A8	00 00 10 38
 2436: 1  10AC	6C C6 C6 FE			db	06Ch, 0C6h, 0C6h, 0FEh, 0C6h, 0C6h, 0C6h, 0C6h, 000h, 000h, 000h, 000h
       1  10B0	C6 C6 C6 C6
       1  10B4	00 00 00 00
 2437: 1  10B8	00 00 FC 66			db	000h, 000h, 0FCh, 066h, 066h, 066h, 07Ch, 066h, 066h, 066h, 066h, 0FCh
       1  10BC	66 66 7C 66
       1  10C0	66 66 66 FC
 2438: 1  10C4	00 00 00 00			db	000h, 000h, 000h, 000h, 000h, 000h, 03Ch, 066h, 0C2h, 0C0h, 0C0h, 0C0h
       1  10C8	00 00 3C 66
       1  10CC	C2 C0 C0 C0
 2439: 1  10D0	C0 C2 66 3C			db	0C0h, 0C2h, 066h, 03Ch, 000h, 000h, 000h, 000h, 000h, 000h, 0F8h, 06Ch
       1  10D4	00 00 00 00
       1  10D8	00 00 F8 6C
 2440: 1  10DC	66 66 66 66			db	066h, 066h, 066h, 066h, 066h, 066h, 06Ch, 0F8h, 000h, 000h, 000h, 000h
       1  10E0	66 66 6C F8
       1  10E4	00 00 00 00
 2441: 1  10E8	00 00 FE 66			db	000h, 000h, 0FEh, 066h, 062h, 068h, 078h, 068h, 060h, 062h, 066h, 0FEh
       1  10EC	62 68 78 68
       1  10F0	60 62 66 FE
 2442: 1  10F4	00 00 00 00			db	000h, 000h, 000h, 000h, 000h, 000h, 0FEh, 066h, 062h, 068h, 078h, 068h
       1  10F8	00 00 FE 66
       1  10FC	62 68 78 68
 2443: 1  1100	60 60 60 F0			db	060h, 060h, 060h, 0F0h, 000h, 000h, 000h, 000h, 000h, 000h, 03Ch, 066h
       1  1104	00 00 00 00
       1  1108	00 00 3C 66
 2444: 1  110C	C2 C0 C0 DE			db	0C2h, 0C0h, 0C0h, 0DEh, 0C6h, 0C6h, 066h, 03Ah, 000h, 000h, 000h, 000h
       1  1110	C6 C6 66 3A
       1  1114	00 00 00 00
 2445: 1  1118	00 00 C6 C6			db	000h, 000h, 0C6h, 0C6h, 0C6h, 0C6h, 0FEh, 0C6h, 0C6h, 0C6h, 0C6h, 0C6h
       1  111C	C6 C6 FE C6
       1  1120	C6 C6 C6 C6
 2446: 1  1124	00 00 00 00			db	000h, 000h, 000h, 000h, 000h, 000h, 03Ch, 018h, 018h, 018h, 018h, 018h
       1  1128	00 00 3C 18
       1  112C	18 18 18 18
 2447: 1  1130	18 18 18 3C			db	018h, 018h, 018h, 03Ch, 000h, 000h, 000h, 000h, 000h, 000h, 01Eh, 00Ch
       1  1134	00 00 00 00
       1  1138	00 00 1E 0C
 2448: 1  113C	0C 0C 0C 0C			db	00Ch, 00Ch, 00Ch, 00Ch, 0CCh, 0CCh, 0CCh, 078h, 000h, 000h, 000h, 000h
       1  1140	CC CC CC 78
       1  1144	00 00 00 00
 2449: 1  1148	00 00 E6 66			db	000h, 000h, 0E6h, 066h, 066h, 06Ch, 078h, 078h, 06Ch, 066h, 066h, 0E6h
       1  114C	66 6C 78 78
       1  1150	6C 66 66 E6
 2450: 1  1154	00 00 00 00			db	000h, 000h, 000h, 000h, 000h, 000h, 0F0h, 060h, 060h, 060h, 060h, 060h
       1  1158	00 00 F0 60
       1  115C	60 60 60 60
 2451: 1  1160	60 62 66 FE			db	060h, 062h, 066h, 0FEh, 000h, 000h, 000h, 000h, 000h, 000h, 0C6h, 0EEh
       1  1164	00 00 00 00
       1  1168	00 00 C6 EE
 2452: 1  116C	FE FE D6 C6			db	0FEh, 0FEh, 0D6h, 0C6h, 0C6h, 0C6h, 0C6h, 0C6h, 000h, 000h, 000h, 000h
       1  1170	C6 C6 C6 C6
       1  1174	00 00 00 00
 2453: 1  1178	00 00 C6 E6			db	000h, 000h, 0C6h, 0E6h, 0F6h, 0FEh, 0DEh, 0CEh, 0C6h, 0C6h, 0C6h, 0C6h
       1  117C	F6 FE DE CE
       1  1180	C6 C6 C6 C6
 2454: 1  1184	00 00 00 00			db	000h, 000h, 000h, 000h, 000h, 000h, 07Ch, 0C6h, 0C6h, 0C6h, 0C6h, 0C6h

ASEM-51 V1.3                                        Copyright (c) 2002 by W.W. Heinz                                         PAGE 55



 Line  I  Addr  Code            Source

       1  1188	00 00 7C C6
       1  118C	C6 C6 C6 C6
 2455: 1  1190	C6 C6 C6 7C			db	0C6h, 0C6h, 0C6h, 07Ch, 000h, 000h, 000h, 000h, 000h, 000h, 0FCh, 066h
       1  1194	00 00 00 00
       1  1198	00 00 FC 66
 2456: 1  119C	66 66 7C 60			db	066h, 066h, 07Ch, 060h, 060h, 060h, 060h, 0F0h, 000h, 000h, 000h, 000h
       1  11A0	60 60 60 F0
       1  11A4	00 00 00 00
 2457: 1  11A8	00 00 7C C6			db	000h, 000h, 07Ch, 0C6h, 0C6h, 0C6h, 0C6h, 0C6h, 0C6h, 0D6h, 0DEh, 07Ch
       1  11AC	C6 C6 C6 C6
       1  11B0	C6 D6 DE 7C
 2458: 1  11B4	0C 0E 00 00			db	00Ch, 00Eh, 000h, 000h, 000h, 000h, 0FCh, 066h, 066h, 066h, 07Ch, 06Ch
       1  11B8	00 00 FC 66
       1  11BC	66 66 7C 6C
 2459: 1  11C0	66 66 66 E6			db	066h, 066h, 066h, 0E6h, 000h, 000h, 000h, 000h, 000h, 000h, 07Ch, 0C6h
       1  11C4	00 00 00 00
       1  11C8	00 00 7C C6
 2460: 1  11CC	C6 60 38 0C			db	0C6h, 060h, 038h, 00Ch, 006h, 0C6h, 0C6h, 07Ch, 000h, 000h, 000h, 000h
       1  11D0	06 C6 C6 7C
       1  11D4	00 00 00 00
 2461: 1  11D8	00 00 7E 7E			db	000h, 000h, 07Eh, 07Eh, 05Ah, 018h, 018h, 018h, 018h, 018h, 018h, 03Ch
       1  11DC	5A 18 18 18
       1  11E0	18 18 18 3C
 2462: 1  11E4	00 00 00 00			db	000h, 000h, 000h, 000h, 000h, 000h, 0C6h, 0C6h, 0C6h, 0C6h, 0C6h, 0C6h
       1  11E8	00 00 C6 C6
       1  11EC	C6 C6 C6 C6
 2463: 1  11F0	C6 C6 C6 7C			db	0C6h, 0C6h, 0C6h, 07Ch, 000h, 000h, 000h, 000h, 000h, 000h, 0C6h, 0C6h
       1  11F4	00 00 00 00
       1  11F8	00 00 C6 C6
 2464: 1  11FC	C6 C6 C6 C6			db	0C6h, 0C6h, 0C6h, 0C6h, 0C6h, 06Ch, 038h, 010h, 000h, 000h, 000h, 000h
       1  1200	C6 6C 38 10
       1  1204	00 00 00 00
 2465: 1  1208	00 00 C6 C6			db	000h, 000h, 0C6h, 0C6h, 0C6h, 0C6h, 0D6h, 0D6h, 0D6h, 0FEh, 0EEh, 06Ch
       1  120C	C6 C6 D6 D6
       1  1210	D6 FE EE 6C
 2466: 1  1214	00 00 00 00			db	000h, 000h, 000h, 000h, 000h, 000h, 0C6h, 0C6h, 06Ch, 07Ch, 038h, 038h
       1  1218	00 00 C6 C6
       1  121C	6C 7C 38 38
 2467: 1  1220	7C 6C C6 C6			db	07Ch, 06Ch, 0C6h, 0C6h, 000h, 000h, 000h, 000h, 000h, 000h, 066h, 066h
       1  1224	00 00 00 00
       1  1228	00 00 66 66
 2468: 1  122C	66 66 3C 18			db	066h, 066h, 03Ch, 018h, 018h, 018h, 018h, 03Ch, 000h, 000h, 000h, 000h
       1  1230	18 18 18 3C
       1  1234	00 00 00 00
 2469: 1  1238	00 00 FE C6			db	000h, 000h, 0FEh, 0C6h, 086h, 00Ch, 018h, 030h, 060h, 0C2h, 0C6h, 0FEh
       1  123C	86 0C 18 30
       1  1240	60 C2 C6 FE
 2470: 1  1244	00 00 00 00			db	000h, 000h, 000h, 000h, 000h, 000h, 03Ch, 030h, 030h, 030h, 030h, 030h
       1  1248	00 00 3C 30
       1  124C	30 30 30 30
 2471: 1  1250	30 30 30 3C			db	030h, 030h, 030h, 03Ch, 000h, 000h, 000h, 000h, 000h, 000h, 000h, 080h
       1  1254	00 00 00 00
       1  1258	00 00 00 80
 2472: 1  125C	C0 E0 70 38			db	0C0h, 0E0h, 070h, 038h, 01Ch, 00Eh, 006h, 002h, 000h, 000h, 000h, 000h
       1  1260	1C 0E 06 02
       1  1264	00 00 00 00

ASEM-51 V1.3                                        Copyright (c) 2002 by W.W. Heinz                                         PAGE 56



 Line  I  Addr  Code            Source

 2473: 1  1268	00 00 3C 0C			db	000h, 000h, 03Ch, 00Ch, 00Ch, 00Ch, 00Ch, 00Ch, 00Ch, 00Ch, 00Ch, 03Ch
       1  126C	0C 0C 0C 0C
       1  1270	0C 0C 0C 3C
 2474: 1  1274	00 00 00 00			db	000h, 000h, 000h, 000h, 010h, 038h, 06Ch, 0C6h, 000h, 000h, 000h, 000h
       1  1278	10 38 6C C6
       1  127C	00 00 00 00
 2475: 1  1280	00 00 00 00			db	000h, 000h, 000h, 000h, 000h, 000h, 000h, 000h, 000h, 000h, 000h, 000h
       1  1284	00 00 00 00
       1  1288	00 00 00 00
 2476: 1  128C	00 00 00 00			db	000h, 000h, 000h, 000h, 000h, 000h, 000h, 000h, 000h, 0FFh, 000h, 000h
       1  1290	00 00 00 00
       1  1294	00 FF 00 00
 2477: 1  1298	30 30 18 00			db	030h, 030h, 018h, 000h, 000h, 000h, 000h, 000h, 000h, 000h, 000h, 000h
       1  129C	00 00 00 00
       1  12A0	00 00 00 00
 2478: 1  12A4	00 00 00 00			db	000h, 000h, 000h, 000h, 000h, 000h, 000h, 000h, 000h, 078h, 00Ch, 07Ch
       1  12A8	00 00 00 00
       1  12AC	00 78 0C 7C
 2479: 1  12B0	CC CC CC 76			db	0CCh, 0CCh, 0CCh, 076h, 000h, 000h, 000h, 000h, 000h, 000h, 0E0h, 060h
       1  12B4	00 00 00 00
       1  12B8	00 00 E0 60
 2480: 1  12BC	60 78 6C 66			db	060h, 078h, 06Ch, 066h, 066h, 066h, 066h, 07Ch, 000h, 000h, 000h, 000h
       1  12C0	66 66 66 7C
       1  12C4	00 00 00 00
 2481: 1  12C8	00 00 00 00			db	000h, 000h, 000h, 000h, 000h, 07Ch, 0C6h, 0C0h, 0C0h, 0C0h, 0C6h, 07Ch
       1  12CC	00 7C C6 C0
       1  12D0	C0 C0 C6 7C
 2482: 1  12D4	00 00 00 00			db	000h, 000h, 000h, 000h, 000h, 000h, 01Ch, 00Ch, 00Ch, 03Ch, 06Ch, 0CCh
       1  12D8	00 00 1C 0C
       1  12DC	0C 3C 6C CC
 2483: 1  12E0	CC CC CC 76			db	0CCh, 0CCh, 0CCh, 076h, 000h, 000h, 000h, 000h, 000h, 000h, 000h, 000h
       1  12E4	00 00 00 00
       1  12E8	00 00 00 00
 2484: 1  12EC	00 7C C6 FE			db	000h, 07Ch, 0C6h, 0FEh, 0C0h, 0C0h, 0C6h, 07Ch, 000h, 000h, 000h, 000h
       1  12F0	C0 C0 C6 7C
       1  12F4	00 00 00 00
 2485: 1  12F8	00 00 38 6C			db	000h, 000h, 038h, 06Ch, 064h, 060h, 0F0h, 060h, 060h, 060h, 060h, 0F0h
       1  12FC	64 60 F0 60
       1  1300	60 60 60 F0
 2486: 1  1304	00 00 00 00			db	000h, 000h, 000h, 000h, 000h, 000h, 000h, 000h, 000h, 076h, 0CCh, 0CCh
       1  1308	00 00 00 00
       1  130C	00 76 CC CC
 2487: 1  1310	CC CC CC 7C			db	0CCh, 0CCh, 0CCh, 07Ch, 00Ch, 0CCh, 078h, 000h, 000h, 000h, 0E0h, 060h
       1  1314	0C CC 78 00
       1  1318	00 00 E0 60
 2488: 1  131C	60 6C 76 66			db	060h, 06Ch, 076h, 066h, 066h, 066h, 066h, 0E6h, 000h, 000h, 000h, 000h
       1  1320	66 66 66 E6
       1  1324	00 00 00 00
 2489: 1  1328	00 00 18 18			db	000h, 000h, 018h, 018h, 000h, 038h, 018h, 018h, 018h, 018h, 018h, 03Ch
       1  132C	00 38 18 18
       1  1330	18 18 18 3C
 2490: 1  1334	00 00 00 00			db	000h, 000h, 000h, 000h, 000h, 000h, 006h, 006h, 000h, 00Eh, 006h, 006h
       1  1338	00 00 06 06
       1  133C	00 0E 06 06
 2491: 1  1340	06 06 06 06			db	006h, 006h, 006h, 006h, 066h, 066h, 03Ch, 000h, 000h, 000h, 0E0h, 060h
       1  1344	66 66 3C 00

ASEM-51 V1.3                                        Copyright (c) 2002 by W.W. Heinz                                         PAGE 57



 Line  I  Addr  Code            Source

       1  1348	00 00 E0 60
 2492: 1  134C	60 66 6C 78			db	060h, 066h, 06Ch, 078h, 078h, 06Ch, 066h, 0E6h, 000h, 000h, 000h, 000h
       1  1350	78 6C 66 E6
       1  1354	00 00 00 00
 2493: 1  1358	00 00 38 18			db	000h, 000h, 038h, 018h, 018h, 018h, 018h, 018h, 018h, 018h, 018h, 03Ch
       1  135C	18 18 18 18
       1  1360	18 18 18 3C
 2494: 1  1364	00 00 00 00			db	000h, 000h, 000h, 000h, 000h, 000h, 000h, 000h, 000h, 0ECh, 0FEh, 0D6h
       1  1368	00 00 00 00
       1  136C	00 EC FE D6
 2495: 1  1370	D6 D6 D6 C6			db	0D6h, 0D6h, 0D6h, 0C6h, 000h, 000h, 000h, 000h, 000h, 000h, 000h, 000h
       1  1374	00 00 00 00
       1  1378	00 00 00 00
 2496: 1  137C	00 DC 66 66			db	000h, 0DCh, 066h, 066h, 066h, 066h, 066h, 066h, 000h, 000h, 000h, 000h
       1  1380	66 66 66 66
       1  1384	00 00 00 00
 2497: 1  1388	00 00 00 00			db	000h, 000h, 000h, 000h, 000h, 07Ch, 0C6h, 0C6h, 0C6h, 0C6h, 0C6h, 07Ch
       1  138C	00 7C C6 C6
       1  1390	C6 C6 C6 7C
 2498: 1  1394	00 00 00 00			db	000h, 000h, 000h, 000h, 000h, 000h, 000h, 000h, 000h, 0DCh, 066h, 066h
       1  1398	00 00 00 00
       1  139C	00 DC 66 66
 2499: 1  13A0	66 66 66 7C			db	066h, 066h, 066h, 07Ch, 060h, 060h, 0F0h, 000h, 000h, 000h, 000h, 000h
       1  13A4	60 60 F0 00
       1  13A8	00 00 00 00
 2500: 1  13AC	00 76 CC CC			db	000h, 076h, 0CCh, 0CCh, 0CCh, 0CCh, 0CCh, 07Ch, 00Ch, 00Ch, 01Eh, 000h
       1  13B0	CC CC CC 7C
       1  13B4	0C 0C 1E 00
 2501: 1  13B8	00 00 00 00			db	000h, 000h, 000h, 000h, 000h, 0DCh, 076h, 066h, 060h, 060h, 060h, 0F0h
       1  13BC	00 DC 76 66
       1  13C0	60 60 60 F0
 2502: 1  13C4	00 00 00 00			db	000h, 000h, 000h, 000h, 000h, 000h, 000h, 000h, 000h, 07Ch, 0C6h, 060h
       1  13C8	00 00 00 00
       1  13CC	00 7C C6 60
 2503: 1  13D0	38 0C C6 7C			db	038h, 00Ch, 0C6h, 07Ch, 000h, 000h, 000h, 000h, 000h, 000h, 010h, 030h
       1  13D4	00 00 00 00
       1  13D8	00 00 10 30
 2504: 1  13DC	30 FC 30 30			db	030h, 0FCh, 030h, 030h, 030h, 030h, 036h, 01Ch, 000h, 000h, 000h, 000h
       1  13E0	30 30 36 1C
       1  13E4	00 00 00 00
 2505: 1  13E8	00 00 00 00			db	000h, 000h, 000h, 000h, 000h, 0CCh, 0CCh, 0CCh, 0CCh, 0CCh, 0CCh, 076h
       1  13EC	00 CC CC CC
       1  13F0	CC CC CC 76
 2506: 1  13F4	00 00 00 00			db	000h, 000h, 000h, 000h, 000h, 000h, 000h, 000h, 000h, 066h, 066h, 066h
       1  13F8	00 00 00 00
       1  13FC	00 66 66 66
 2507: 1  1400	66 66 3C 18			db	066h, 066h, 03Ch, 018h, 000h, 000h, 000h, 000h, 000h, 000h, 000h, 000h
       1  1404	00 00 00 00
       1  1408	00 00 00 00
 2508: 1  140C	00 C6 C6 D6			db	000h, 0C6h, 0C6h, 0D6h, 0D6h, 0D6h, 0FEh, 06Ch, 000h, 000h, 000h, 000h
       1  1410	D6 D6 FE 6C
       1  1414	00 00 00 00
 2509: 1  1418	00 00 00 00			db	000h, 000h, 000h, 000h, 000h, 0C6h, 06Ch, 038h, 038h, 038h, 06Ch, 0C6h
       1  141C	00 C6 6C 38
       1  1420	38 38 6C C6
 2510: 1  1424	00 00 00 00			db	000h, 000h, 000h, 000h, 000h, 000h, 000h, 000h, 000h, 0C6h, 0C6h, 0C6h

ASEM-51 V1.3                                        Copyright (c) 2002 by W.W. Heinz                                         PAGE 58



 Line  I  Addr  Code            Source

       1  1428	00 00 00 00
       1  142C	00 C6 C6 C6
 2511: 1  1430	C6 C6 C6 7E			db	0C6h, 0C6h, 0C6h, 07Eh, 006h, 00Ch, 0F8h, 000h, 000h, 000h, 000h, 000h
       1  1434	06 0C F8 00
       1  1438	00 00 00 00
 2512: 1  143C	00 FE CC 18			db	000h, 0FEh, 0CCh, 018h, 030h, 060h, 0C6h, 0FEh, 000h, 000h, 000h, 000h
       1  1440	30 60 C6 FE
       1  1444	00 00 00 00
 2513: 1  1448	00 00 0E 18			db	000h, 000h, 00Eh, 018h, 018h, 018h, 070h, 018h, 018h, 018h, 018h, 00Eh
       1  144C	18 18 70 18
       1  1450	18 18 18 0E
 2514: 1  1454	00 00 00 00			db	000h, 000h, 000h, 000h, 000h, 000h, 018h, 018h, 018h, 018h, 000h, 018h
       1  1458	00 00 18 18
       1  145C	18 18 00 18
 2515: 1  1460	18 18 18 18			db	018h, 018h, 018h, 018h, 000h, 000h, 000h, 000h, 000h, 000h, 070h, 018h
       1  1464	00 00 00 00
       1  1468	00 00 70 18
 2516: 1  146C	18 18 0E 18			db	018h, 018h, 00Eh, 018h, 018h, 018h, 018h, 070h, 000h, 000h, 000h, 000h
       1  1470	18 18 18 70
       1  1474	00 00 00 00
 2517: 1  1478	00 00 76 DC			db	000h, 000h, 076h, 0DCh, 000h, 000h, 000h, 000h, 000h, 000h, 000h, 000h
       1  147C	00 00 00 00
       1  1480	00 00 00 00
 2518: 1  1484	00 00 00 00			db	000h, 000h, 000h, 000h, 000h, 000h, 000h, 000h, 010h, 038h, 06Ch, 0C6h
       1  1488	00 00 00 00
       1  148C	10 38 6C C6
 2519: 1  1490	C6 C6 FE 00			db	0C6h, 0C6h, 0FEh, 000h, 000h, 000h, 000h, 000h, 000h, 000h, 03Ch, 066h
       1  1494	00 00 00 00
       1  1498	00 00 3C 66
 2520: 1  149C	C2 C0 C0 C0			db	0C2h, 0C0h, 0C0h, 0C0h, 0C2h, 066h, 03Ch, 00Ch, 006h, 07Ch, 000h, 000h
       1  14A0	C2 66 3C 0C
       1  14A4	06 7C 00 00
 2521: 1  14A8	00 00 CC 00			db	000h, 000h, 0CCh, 000h, 000h, 0CCh, 0CCh, 0CCh, 0CCh, 0CCh, 0CCh, 076h
       1  14AC	00 CC CC CC
       1  14B0	CC CC CC 76
 2522: 1  14B4	00 00 00 00			db	000h, 000h, 000h, 000h, 000h, 00Ch, 018h, 030h, 000h, 07Ch, 0C6h, 0FEh
       1  14B8	00 0C 18 30
       1  14BC	00 7C C6 FE
 2523: 1  14C0	C0 C0 C6 7C			db	0C0h, 0C0h, 0C6h, 07Ch, 000h, 000h, 000h, 000h, 000h, 010h, 038h, 06Ch
       1  14C4	00 00 00 00
       1  14C8	00 10 38 6C
 2524: 1  14CC	00 78 0C 7C			db	000h, 078h, 00Ch, 07Ch, 0CCh, 0CCh, 0CCh, 076h, 000h, 000h, 000h, 000h
       1  14D0	CC CC CC 76
       1  14D4	00 00 00 00
 2525: 1  14D8	00 00 CC 00			db	000h, 000h, 0CCh, 000h, 000h, 078h, 00Ch, 07Ch, 0CCh, 0CCh, 0CCh, 076h
       1  14DC	00 78 0C 7C
       1  14E0	CC CC CC 76
 2526: 1  14E4	00 00 00 00			db	000h, 000h, 000h, 000h, 000h, 060h, 030h, 018h, 000h, 078h, 00Ch, 07Ch
       1  14E8	00 60 30 18
       1  14EC	00 78 0C 7C
 2527: 1  14F0	CC CC CC 76			db	0CCh, 0CCh, 0CCh, 076h, 000h, 000h, 000h, 000h, 000h, 038h, 06Ch, 038h
       1  14F4	00 00 00 00
       1  14F8	00 38 6C 38
 2528: 1  14FC	00 78 0C 7C			db	000h, 078h, 00Ch, 07Ch, 0CCh, 0CCh, 0CCh, 076h, 000h, 000h, 000h, 000h
       1  1500	CC CC CC 76
       1  1504	00 00 00 00

ASEM-51 V1.3                                        Copyright (c) 2002 by W.W. Heinz                                         PAGE 59



 Line  I  Addr  Code            Source

 2529: 1  1508	00 00 00 00			db	000h, 000h, 000h, 000h, 03Ch, 066h, 060h, 060h, 066h, 03Ch, 00Ch, 006h
       1  150C	3C 66 60 60
       1  1510	66 3C 0C 06
 2530: 1  1514	3C 00 00 00			db	03Ch, 000h, 000h, 000h, 000h, 010h, 038h, 06Ch, 000h, 07Ch, 0C6h, 0FEh
       1  1518	00 10 38 6C
       1  151C	00 7C C6 FE
 2531: 1  1520	C0 C0 C6 7C			db	0C0h, 0C0h, 0C6h, 07Ch, 000h, 000h, 000h, 000h, 000h, 000h, 0C6h, 000h
       1  1524	00 00 00 00
       1  1528	00 00 C6 00
 2532: 1  152C	00 7C C6 FE			db	000h, 07Ch, 0C6h, 0FEh, 0C0h, 0C0h, 0C6h, 07Ch, 000h, 000h, 000h, 000h
       1  1530	C0 C0 C6 7C
       1  1534	00 00 00 00
 2533: 1  1538	00 60 30 18			db	000h, 060h, 030h, 018h, 000h, 07Ch, 0C6h, 0FEh, 0C0h, 0C0h, 0C6h, 07Ch
       1  153C	00 7C C6 FE
       1  1540	C0 C0 C6 7C
 2534: 1  1544	00 00 00 00			db	000h, 000h, 000h, 000h, 000h, 000h, 066h, 000h, 000h, 038h, 018h, 018h
       1  1548	00 00 66 00
       1  154C	00 38 18 18
 2535: 1  1550	18 18 18 3C			db	018h, 018h, 018h, 03Ch, 000h, 000h, 000h, 000h, 000h, 018h, 03Ch, 066h
       1  1554	00 00 00 00
       1  1558	00 18 3C 66
 2536: 1  155C	00 38 18 18			db	000h, 038h, 018h, 018h, 018h, 018h, 018h, 03Ch, 000h, 000h, 000h, 000h
       1  1560	18 18 18 3C
       1  1564	00 00 00 00
 2537: 1  1568	00 60 30 18			db	000h, 060h, 030h, 018h, 000h, 038h, 018h, 018h, 018h, 018h, 018h, 03Ch
       1  156C	00 38 18 18
       1  1570	18 18 18 3C
 2538: 1  1574	00 00 00 00			db	000h, 000h, 000h, 000h, 000h, 0C6h, 000h, 010h, 038h, 06Ch, 0C6h, 0C6h
       1  1578	00 C6 00 10
       1  157C	38 6C C6 C6
 2539: 1  1580	FE C6 C6 C6			db	0FEh, 0C6h, 0C6h, 0C6h, 000h, 000h, 000h, 000h, 038h, 06Ch, 038h, 000h
       1  1584	00 00 00 00
       1  1588	38 6C 38 00
 2540: 1  158C	38 6C C6 C6			db	038h, 06Ch, 0C6h, 0C6h, 0FEh, 0C6h, 0C6h, 0C6h, 000h, 000h, 000h, 000h
       1  1590	FE C6 C6 C6
       1  1594	00 00 00 00
 2541: 1  1598	18 30 60 00			db	018h, 030h, 060h, 000h, 0FEh, 066h, 060h, 07Ch, 060h, 060h, 066h, 0FEh
       1  159C	FE 66 60 7C
       1  15A0	60 60 66 FE
 2542: 1  15A4	00 00 00 00			db	000h, 000h, 000h, 000h, 000h, 000h, 000h, 000h, 000h, 0CCh, 076h, 036h
       1  15A8	00 00 00 00
       1  15AC	00 CC 76 36
 2543: 1  15B0	7E D8 D8 6E			db	07Eh, 0D8h, 0D8h, 06Eh, 000h, 000h, 000h, 000h, 000h, 000h, 03Eh, 06Ch
       1  15B4	00 00 00 00
       1  15B8	00 00 3E 6C
 2544: 1  15BC	CC CC FE CC			db	0CCh, 0CCh, 0FEh, 0CCh, 0CCh, 0CCh, 0CCh, 0CEh, 000h, 000h, 000h, 000h
       1  15C0	CC CC CC CE
       1  15C4	00 00 00 00
 2545: 1  15C8	00 10 38 6C			db	000h, 010h, 038h, 06Ch, 000h, 07Ch, 0C6h, 0C6h, 0C6h, 0C6h, 0C6h, 07Ch
       1  15CC	00 7C C6 C6
       1  15D0	C6 C6 C6 7C
 2546: 1  15D4	00 00 00 00			db	000h, 000h, 000h, 000h, 000h, 000h, 0C6h, 000h, 000h, 07Ch, 0C6h, 0C6h
       1  15D8	00 00 C6 00
       1  15DC	00 7C C6 C6
 2547: 1  15E0	C6 C6 C6 7C			db	0C6h, 0C6h, 0C6h, 07Ch, 000h, 000h, 000h, 000h, 000h, 060h, 030h, 018h
       1  15E4	00 00 00 00

ASEM-51 V1.3                                        Copyright (c) 2002 by W.W. Heinz                                         PAGE 60



 Line  I  Addr  Code            Source

       1  15E8	00 60 30 18
 2548: 1  15EC	00 7C C6 C6			db	000h, 07Ch, 0C6h, 0C6h, 0C6h, 0C6h, 0C6h, 07Ch, 000h, 000h, 000h, 000h
       1  15F0	C6 C6 C6 7C
       1  15F4	00 00 00 00
 2549: 1  15F8	00 30 78 CC			db	000h, 030h, 078h, 0CCh, 000h, 0CCh, 0CCh, 0CCh, 0CCh, 0CCh, 0CCh, 076h
       1  15FC	00 CC CC CC
       1  1600	CC CC CC 76
 2550: 1  1604	00 00 00 00			db	000h, 000h, 000h, 000h, 000h, 060h, 030h, 018h, 000h, 0CCh, 0CCh, 0CCh
       1  1608	00 60 30 18
       1  160C	00 CC CC CC
 2551: 1  1610	CC CC CC 76			db	0CCh, 0CCh, 0CCh, 076h, 000h, 000h, 000h, 000h, 000h, 000h, 0C6h, 000h
       1  1614	00 00 00 00
       1  1618	00 00 C6 00
 2552: 1  161C	00 C6 C6 C6			db	000h, 0C6h, 0C6h, 0C6h, 0C6h, 0C6h, 0C6h, 07Eh, 006h, 00Ch, 078h, 000h
       1  1620	C6 C6 C6 7E
       1  1624	06 0C 78 00
 2553: 1  1628	00 C6 00 7C			db	000h, 0C6h, 000h, 07Ch, 0C6h, 0C6h, 0C6h, 0C6h, 0C6h, 0C6h, 0C6h, 07Ch
       1  162C	C6 C6 C6 C6
       1  1630	C6 C6 C6 7C
 2554: 1  1634	00 00 00 00			db	000h, 000h, 000h, 000h, 000h, 0C6h, 000h, 0C6h, 0C6h, 0C6h, 0C6h, 0C6h
       1  1638	00 C6 00 C6
       1  163C	C6 C6 C6 C6
 2555: 1  1640	C6 C6 C6 7C			db	0C6h, 0C6h, 0C6h, 07Ch, 000h, 000h, 000h, 000h, 000h, 018h, 018h, 03Ch
       1  1644	00 00 00 00
       1  1648	00 18 18 3C
 2556: 1  164C	66 60 60 60			db	066h, 060h, 060h, 060h, 066h, 03Ch, 018h, 018h, 000h, 000h, 000h, 000h
       1  1650	66 3C 18 18
       1  1654	00 00 00 00
 2557: 1  1658	00 38 6C 64			db	000h, 038h, 06Ch, 064h, 060h, 0F0h, 060h, 060h, 060h, 060h, 0E6h, 0FCh
       1  165C	60 F0 60 60
       1  1660	60 60 E6 FC
 2558: 1  1664	00 00 00 00			db	000h, 000h, 000h, 000h, 000h, 000h, 066h, 066h, 03Ch, 018h, 07Eh, 018h
       1  1668	00 00 66 66
       1  166C	3C 18 7E 18
 2559: 1  1670	7E 18 18 18			db	07Eh, 018h, 018h, 018h, 000h, 000h, 000h, 000h, 000h, 0F8h, 0CCh, 0CCh
       1  1674	00 00 00 00
       1  1678	00 F8 CC CC
 2560: 1  167C	F8 C4 CC DE			db	0F8h, 0C4h, 0CCh, 0DEh, 0CCh, 0CCh, 0CCh, 0C6h, 000h, 000h, 000h, 000h
       1  1680	CC CC CC C6
       1  1684	00 00 00 00
 2561: 1  1688	00 0E 1B 18			db	000h, 00Eh, 01Bh, 018h, 018h, 018h, 07Eh, 018h, 018h, 018h, 018h, 018h
       1  168C	18 18 7E 18
       1  1690	18 18 18 18
 2562: 1  1694	D8 70 00 00			db	0D8h, 070h, 000h, 000h, 000h, 018h, 030h, 060h, 000h, 078h, 00Ch, 07Ch
       1  1698	00 18 30 60
       1  169C	00 78 0C 7C
 2563: 1  16A0	CC CC CC 76			db	0CCh, 0CCh, 0CCh, 076h, 000h, 000h, 000h, 000h, 000h, 00Ch, 018h, 030h
       1  16A4	00 00 00 00
       1  16A8	00 0C 18 30
 2564: 1  16AC	00 38 18 18			db	000h, 038h, 018h, 018h, 018h, 018h, 018h, 03Ch, 000h, 000h, 000h, 000h
       1  16B0	18 18 18 3C
       1  16B4	00 00 00 00
 2565: 1  16B8	00 18 30 60			db	000h, 018h, 030h, 060h, 000h, 07Ch, 0C6h, 0C6h, 0C6h, 0C6h, 0C6h, 07Ch
       1  16BC	00 7C C6 C6
       1  16C0	C6 C6 C6 7C
 2566: 1  16C4	00 00 00 00			db	000h, 000h, 000h, 000h, 000h, 018h, 030h, 060h, 000h, 0CCh, 0CCh, 0CCh

ASEM-51 V1.3                                        Copyright (c) 2002 by W.W. Heinz                                         PAGE 61



 Line  I  Addr  Code            Source

       1  16C8	00 18 30 60
       1  16CC	00 CC CC CC
 2567: 1  16D0	CC CC CC 76			db	0CCh, 0CCh, 0CCh, 076h, 000h, 000h, 000h, 000h, 000h, 000h, 076h, 0DCh
       1  16D4	00 00 00 00
       1  16D8	00 00 76 DC
 2568: 1  16DC	00 DC 66 66			db	000h, 0DCh, 066h, 066h, 066h, 066h, 066h, 066h, 000h, 000h, 000h, 000h
       1  16E0	66 66 66 66
       1  16E4	00 00 00 00
 2569: 1  16E8	76 DC 00 C6			db	076h, 0DCh, 000h, 0C6h, 0E6h, 0F6h, 0FEh, 0DEh, 0CEh, 0C6h, 0C6h, 0C6h
       1  16EC	E6 F6 FE DE
       1  16F0	CE C6 C6 C6
 2570: 1  16F4	00 00 00 00			db	000h, 000h, 000h, 000h, 000h, 03Ch, 06Ch, 06Ch, 03Eh, 000h, 07Eh, 000h
       1  16F8	00 3C 6C 6C
       1  16FC	3E 00 7E 00
 2571: 1  1700	00 00 00 00			db	000h, 000h, 000h, 000h, 000h, 000h, 000h, 000h, 000h, 038h, 06Ch, 06Ch
       1  1704	00 00 00 00
       1  1708	00 38 6C 6C
 2572: 1  170C	38 00 7C 00			db	038h, 000h, 07Ch, 000h, 000h, 000h, 000h, 000h, 000h, 000h, 000h, 000h
       1  1710	00 00 00 00
       1  1714	00 00 00 00
 2573: 1  1718	00 00 30 30			db	000h, 000h, 030h, 030h, 000h, 030h, 030h, 060h, 0C0h, 0C6h, 0C6h, 07Ch
       1  171C	00 30 30 60
       1  1720	C0 C6 C6 7C
 2574: 1  1724	00 00 00 00			db	000h, 000h, 000h, 000h, 000h, 000h, 000h, 000h, 000h, 000h, 0FEh, 0C0h
       1  1728	00 00 00 00
       1  172C	00 00 FE C0
 2575: 1  1730	C0 C0 C0 00			db	0C0h, 0C0h, 0C0h, 000h, 000h, 000h, 000h, 000h, 000h, 000h, 000h, 000h
       1  1734	00 00 00 00
       1  1738	00 00 00 00
 2576: 1  173C	00 00 FE 06			db	000h, 000h, 0FEh, 006h, 006h, 006h, 006h, 000h, 000h, 000h, 000h, 000h
       1  1740	06 06 06 00
       1  1744	00 00 00 00
 2577: 1  1748	00 C0 C0 C2			db	000h, 0C0h, 0C0h, 0C2h, 0C6h, 0CCh, 018h, 030h, 060h, 0DCh, 086h, 00Ch
       1  174C	C6 CC 18 30
       1  1750	60 DC 86 0C
 2578: 1  1754	18 3E 00 00			db	018h, 03Eh, 000h, 000h, 000h, 0C0h, 0C0h, 0C2h, 0C6h, 0CCh, 018h, 030h
       1  1758	00 C0 C0 C2
       1  175C	C6 CC 18 30
 2579: 1  1760	66 CE 9E 3E			db	066h, 0CEh, 09Eh, 03Eh, 006h, 006h, 000h, 000h, 000h, 000h, 018h, 018h
       1  1764	06 06 00 00
       1  1768	00 00 18 18
 2580: 1  176C	00 18 18 18			db	000h, 018h, 018h, 018h, 03Ch, 03Ch, 03Ch, 018h, 000h, 000h, 000h, 000h
       1  1770	3C 3C 3C 18
       1  1774	00 00 00 00
 2581: 1  1778	00 00 00 00			db	000h, 000h, 000h, 000h, 000h, 036h, 06Ch, 0D8h, 06Ch, 036h, 000h, 000h
       1  177C	00 36 6C D8
       1  1780	6C 36 00 00
 2582: 1  1784	00 00 00 00			db	000h, 000h, 000h, 000h, 000h, 000h, 000h, 000h, 000h, 0D8h, 06Ch, 036h
       1  1788	00 00 00 00
       1  178C	00 D8 6C 36
 2583: 1  1790	6C D8 00 00			db	06Ch, 0D8h, 000h, 000h, 000h, 000h, 000h, 000h, 011h, 044h, 011h, 044h
       1  1794	00 00 00 00
       1  1798	11 44 11 44
 2584: 1  179C	11 44 11 44			db	011h, 044h, 011h, 044h, 011h, 044h, 011h, 044h, 011h, 044h, 011h, 044h
       1  17A0	11 44 11 44
       1  17A4	11 44 11 44

ASEM-51 V1.3                                        Copyright (c) 2002 by W.W. Heinz                                         PAGE 62



 Line  I  Addr  Code            Source

 2585: 1  17A8	55 AA 55 AA			db	055h, 0AAh, 055h, 0AAh, 055h, 0AAh, 055h, 0AAh, 055h, 0AAh, 055h, 0AAh
       1  17AC	55 AA 55 AA
       1  17B0	55 AA 55 AA
 2586: 1  17B4	55 AA 55 AA			db	055h, 0AAh, 055h, 0AAh, 0DDh, 077h, 0DDh, 077h, 0DDh, 077h, 0DDh, 077h
       1  17B8	DD 77 DD 77
       1  17BC	DD 77 DD 77
 2587: 1  17C0	DD 77 DD 77			db	0DDh, 077h, 0DDh, 077h, 0DDh, 077h, 0DDh, 077h, 018h, 018h, 018h, 018h
       1  17C4	DD 77 DD 77
       1  17C8	18 18 18 18
 2588: 1  17CC	18 18 18 18			db	018h, 018h, 018h, 018h, 018h, 018h, 018h, 018h, 018h, 018h, 018h, 018h
       1  17D0	18 18 18 18
       1  17D4	18 18 18 18
 2589: 1  17D8	18 18 18 18			db	018h, 018h, 018h, 018h, 018h, 018h, 018h, 0F8h, 018h, 018h, 018h, 018h
       1  17DC	18 18 18 F8
       1  17E0	18 18 18 18
 2590: 1  17E4	18 18 18 18			db	018h, 018h, 018h, 018h, 018h, 018h, 018h, 018h, 018h, 0F8h, 018h, 0F8h
       1  17E8	18 18 18 18
       1  17EC	18 F8 18 F8
 2591: 1  17F0	18 18 18 18			db	018h, 018h, 018h, 018h, 018h, 018h, 018h, 018h, 036h, 036h, 036h, 036h
       1  17F4	18 18 18 18
       1  17F8	36 36 36 36
 2592: 1  17FC	36 36 36 F6			db	036h, 036h, 036h, 0F6h, 036h, 036h, 036h, 036h, 036h, 036h, 036h, 036h
       1  1800	36 36 36 36
       1  1804	36 36 36 36
 2593: 1  1808	00 00 00 00			db	000h, 000h, 000h, 000h, 000h, 000h, 000h, 0FEh, 036h, 036h, 036h, 036h
       1  180C	00 00 00 FE
       1  1810	36 36 36 36
 2594: 1  1814	36 36 36 36			db	036h, 036h, 036h, 036h, 000h, 000h, 000h, 000h, 000h, 0F8h, 018h, 0F8h
       1  1818	00 00 00 00
       1  181C	00 F8 18 F8
 2595: 1  1820	18 18 18 18			db	018h, 018h, 018h, 018h, 018h, 018h, 018h, 018h, 036h, 036h, 036h, 036h
       1  1824	18 18 18 18
       1  1828	36 36 36 36
 2596: 1  182C	36 F6 06 F6			db	036h, 0F6h, 006h, 0F6h, 036h, 036h, 036h, 036h, 036h, 036h, 036h, 036h
       1  1830	36 36 36 36
       1  1834	36 36 36 36
 2597: 1  1838	36 36 36 36			db	036h, 036h, 036h, 036h, 036h, 036h, 036h, 036h, 036h, 036h, 036h, 036h
       1  183C	36 36 36 36
       1  1840	36 36 36 36
 2598: 1  1844	36 36 36 36			db	036h, 036h, 036h, 036h, 000h, 000h, 000h, 000h, 000h, 0FEh, 006h, 0F6h
       1  1848	00 00 00 00
       1  184C	00 FE 06 F6
 2599: 1  1850	36 36 36 36			db	036h, 036h, 036h, 036h, 036h, 036h, 036h, 036h, 036h, 036h, 036h, 036h
       1  1854	36 36 36 36
       1  1858	36 36 36 36
 2600: 1  185C	36 F6 06 FE			db	036h, 0F6h, 006h, 0FEh, 000h, 000h, 000h, 000h, 000h, 000h, 000h, 000h
       1  1860	00 00 00 00
       1  1864	00 00 00 00
 2601: 1  1868	36 36 36 36			db	036h, 036h, 036h, 036h, 036h, 036h, 036h, 0FEh, 000h, 000h, 000h, 000h
       1  186C	36 36 36 FE
       1  1870	00 00 00 00
 2602: 1  1874	00 00 00 00			db	000h, 000h, 000h, 000h, 018h, 018h, 018h, 018h, 018h, 0F8h, 018h, 0F8h
       1  1878	18 18 18 18
       1  187C	18 F8 18 F8
 2603: 1  1880	00 00 00 00			db	000h, 000h, 000h, 000h, 000h, 000h, 000h, 000h, 000h, 000h, 000h, 000h
       1  1884	00 00 00 00

ASEM-51 V1.3                                        Copyright (c) 2002 by W.W. Heinz                                         PAGE 63



 Line  I  Addr  Code            Source

       1  1888	00 00 00 00
 2604: 1  188C	00 00 00 F8			db	000h, 000h, 000h, 0F8h, 018h, 018h, 018h, 018h, 018h, 018h, 018h, 018h
       1  1890	18 18 18 18
       1  1894	18 18 18 18
 2605: 1  1898	18 18 18 18			db	018h, 018h, 018h, 018h, 018h, 018h, 018h, 01Fh, 000h, 000h, 000h, 000h
       1  189C	18 18 18 1F
       1  18A0	00 00 00 00
 2606: 1  18A4	00 00 00 00			db	000h, 000h, 000h, 000h, 018h, 018h, 018h, 018h, 018h, 018h, 018h, 0FFh
       1  18A8	18 18 18 18
       1  18AC	18 18 18 FF
 2607: 1  18B0	00 00 00 00			db	000h, 000h, 000h, 000h, 000h, 000h, 000h, 000h, 000h, 000h, 000h, 000h
       1  18B4	00 00 00 00
       1  18B8	00 00 00 00
 2608: 1  18BC	00 00 00 FF			db	000h, 000h, 000h, 0FFh, 018h, 018h, 018h, 018h, 018h, 018h, 018h, 018h
       1  18C0	18 18 18 18
       1  18C4	18 18 18 18
 2609: 1  18C8	18 18 18 18			db	018h, 018h, 018h, 018h, 018h, 018h, 018h, 01Fh, 018h, 018h, 018h, 018h
       1  18CC	18 18 18 1F
       1  18D0	18 18 18 18
 2610: 1  18D4	18 18 18 18			db	018h, 018h, 018h, 018h, 000h, 000h, 000h, 000h, 000h, 000h, 000h, 0FFh
       1  18D8	00 00 00 00
       1  18DC	00 00 00 FF
 2611: 1  18E0	00 00 00 00			db	000h, 000h, 000h, 000h, 000h, 000h, 000h, 000h, 018h, 018h, 018h, 018h
       1  18E4	00 00 00 00
       1  18E8	18 18 18 18
 2612: 1  18EC	18 18 18 FF			db	018h, 018h, 018h, 0FFh, 018h, 018h, 018h, 018h, 018h, 018h, 018h, 018h
       1  18F0	18 18 18 18
       1  18F4	18 18 18 18
 2613: 1  18F8	18 18 18 18			db	018h, 018h, 018h, 018h, 018h, 01Fh, 018h, 01Fh, 018h, 018h, 018h, 018h
       1  18FC	18 1F 18 1F
       1  1900	18 18 18 18
 2614: 1  1904	18 18 18 18			db	018h, 018h, 018h, 018h, 036h, 036h, 036h, 036h, 036h, 036h, 036h, 037h
       1  1908	36 36 36 36
       1  190C	36 36 36 37
 2615: 1  1910	36 36 36 36			db	036h, 036h, 036h, 036h, 036h, 036h, 036h, 036h, 036h, 036h, 036h, 036h
       1  1914	36 36 36 36
       1  1918	36 36 36 36
 2616: 1  191C	36 37 30 3F			db	036h, 037h, 030h, 03Fh, 000h, 000h, 000h, 000h, 000h, 000h, 000h, 000h
       1  1920	00 00 00 00
       1  1924	00 00 00 00
 2617: 1  1928	00 00 00 00			db	000h, 000h, 000h, 000h, 000h, 03Fh, 030h, 037h, 036h, 036h, 036h, 036h
       1  192C	00 3F 30 37
       1  1930	36 36 36 36
 2618: 1  1934	36 36 36 36			db	036h, 036h, 036h, 036h, 036h, 036h, 036h, 036h, 036h, 0F7h, 000h, 0FFh
       1  1938	36 36 36 36
       1  193C	36 F7 00 FF
 2619: 1  1940	00 00 00 00			db	000h, 000h, 000h, 000h, 000h, 000h, 000h, 000h, 000h, 000h, 000h, 000h
       1  1944	00 00 00 00
       1  1948	00 00 00 00
 2620: 1  194C	00 FF 00 F7			db	000h, 0FFh, 000h, 0F7h, 036h, 036h, 036h, 036h, 036h, 036h, 036h, 036h
       1  1950	36 36 36 36
       1  1954	36 36 36 36
 2621: 1  1958	36 36 36 36			db	036h, 036h, 036h, 036h, 036h, 037h, 030h, 037h, 036h, 036h, 036h, 036h
       1  195C	36 37 30 37
       1  1960	36 36 36 36
 2622: 1  1964	36 36 36 36			db	036h, 036h, 036h, 036h, 000h, 000h, 000h, 000h, 000h, 0FFh, 000h, 0FFh

ASEM-51 V1.3                                        Copyright (c) 2002 by W.W. Heinz                                         PAGE 64



 Line  I  Addr  Code            Source

       1  1968	00 00 00 00
       1  196C	00 FF 00 FF
 2623: 1  1970	00 00 00 00			db	000h, 000h, 000h, 000h, 000h, 000h, 000h, 000h, 036h, 036h, 036h, 036h
       1  1974	00 00 00 00
       1  1978	36 36 36 36
 2624: 1  197C	36 F7 00 F7			db	036h, 0F7h, 000h, 0F7h, 036h, 036h, 036h, 036h, 036h, 036h, 036h, 036h
       1  1980	36 36 36 36
       1  1984	36 36 36 36
 2625: 1  1988	18 18 18 18			db	018h, 018h, 018h, 018h, 018h, 0FFh, 000h, 0FFh, 000h, 000h, 000h, 000h
       1  198C	18 FF 00 FF
       1  1990	00 00 00 00
 2626: 1  1994	00 00 00 00			db	000h, 000h, 000h, 000h, 036h, 036h, 036h, 036h, 036h, 036h, 036h, 0FFh
       1  1998	36 36 36 36
       1  199C	36 36 36 FF
 2627: 1  19A0	00 00 00 00			db	000h, 000h, 000h, 000h, 000h, 000h, 000h, 000h, 000h, 000h, 000h, 000h
       1  19A4	00 00 00 00
       1  19A8	00 00 00 00
 2628: 1  19AC	00 FF 00 FF			db	000h, 0FFh, 000h, 0FFh, 018h, 018h, 018h, 018h, 018h, 018h, 018h, 018h
       1  19B0	18 18 18 18
       1  19B4	18 18 18 18
 2629: 1  19B8	00 00 00 00			db	000h, 000h, 000h, 000h, 000h, 000h, 000h, 0FFh, 036h, 036h, 036h, 036h
       1  19BC	00 00 00 FF
       1  19C0	36 36 36 36
 2630: 1  19C4	36 36 36 36			db	036h, 036h, 036h, 036h, 036h, 036h, 036h, 036h, 036h, 036h, 036h, 03Fh
       1  19C8	36 36 36 36
       1  19CC	36 36 36 3F
 2631: 1  19D0	00 00 00 00			db	000h, 000h, 000h, 000h, 000h, 000h, 000h, 000h, 018h, 018h, 018h, 018h
       1  19D4	00 00 00 00
       1  19D8	18 18 18 18
 2632: 1  19DC	18 1F 18 1F			db	018h, 01Fh, 018h, 01Fh, 000h, 000h, 000h, 000h, 000h, 000h, 000h, 000h
       1  19E0	00 00 00 00
       1  19E4	00 00 00 00
 2633: 1  19E8	00 00 00 00			db	000h, 000h, 000h, 000h, 000h, 01Fh, 018h, 01Fh, 018h, 018h, 018h, 018h
       1  19EC	00 1F 18 1F
       1  19F0	18 18 18 18
 2634: 1  19F4	18 18 18 18			db	018h, 018h, 018h, 018h, 000h, 000h, 000h, 000h, 000h, 000h, 000h, 03Fh
       1  19F8	00 00 00 00
       1  19FC	00 00 00 3F
 2635: 1  1A00	36 36 36 36			db	036h, 036h, 036h, 036h, 036h, 036h, 036h, 036h, 036h, 036h, 036h, 036h
       1  1A04	36 36 36 36
       1  1A08	36 36 36 36
 2636: 1  1A0C	36 36 36 FF			db	036h, 036h, 036h, 0FFh, 036h, 036h, 036h, 036h, 036h, 036h, 036h, 036h
       1  1A10	36 36 36 36
       1  1A14	36 36 36 36
 2637: 1  1A18	18 18 18 18			db	018h, 018h, 018h, 018h, 018h, 0FFh, 018h, 0FFh, 018h, 018h, 018h, 018h
       1  1A1C	18 FF 18 FF
       1  1A20	18 18 18 18
 2638: 1  1A24	18 18 18 18			db	018h, 018h, 018h, 018h, 018h, 018h, 018h, 018h, 018h, 018h, 018h, 0F8h
       1  1A28	18 18 18 18
       1  1A2C	18 18 18 F8
 2639: 1  1A30	00 00 00 00			db	000h, 000h, 000h, 000h, 000h, 000h, 000h, 000h, 000h, 000h, 000h, 000h
       1  1A34	00 00 00 00
       1  1A38	00 00 00 00
 2640: 1  1A3C	00 00 00 1F			db	000h, 000h, 000h, 01Fh, 018h, 018h, 018h, 018h, 018h, 018h, 018h, 018h
       1  1A40	18 18 18 18
       1  1A44	18 18 18 18

ASEM-51 V1.3                                        Copyright (c) 2002 by W.W. Heinz                                         PAGE 65



 Line  I  Addr  Code            Source

 2641: 1  1A48	FF FF FF FF			db	0FFh, 0FFh, 0FFh, 0FFh, 0FFh, 0FFh, 0FFh, 0FFh, 0FFh, 0FFh, 0FFh, 0FFh
       1  1A4C	FF FF FF FF
       1  1A50	FF FF FF FF
 2642: 1  1A54	FF FF FF FF			db	0FFh, 0FFh, 0FFh, 0FFh, 000h, 000h, 000h, 000h, 000h, 000h, 000h, 0FFh
       1  1A58	00 00 00 00
       1  1A5C	00 00 00 FF
 2643: 1  1A60	FF FF FF FF			db	0FFh, 0FFh, 0FFh, 0FFh, 0FFh, 0FFh, 0FFh, 0FFh, 0F0h, 0F0h, 0F0h, 0F0h
       1  1A64	FF FF FF FF
       1  1A68	F0 F0 F0 F0
 2644: 1  1A6C	F0 F0 F0 F0			db	0F0h, 0F0h, 0F0h, 0F0h, 0F0h, 0F0h, 0F0h, 0F0h, 0F0h, 0F0h, 0F0h, 0F0h
       1  1A70	F0 F0 F0 F0
       1  1A74	F0 F0 F0 F0
 2645: 1  1A78	0F 0F 0F 0F			db	00Fh, 00Fh, 00Fh, 00Fh, 00Fh, 00Fh, 00Fh, 00Fh, 00Fh, 00Fh, 00Fh, 00Fh
       1  1A7C	0F 0F 0F 0F
       1  1A80	0F 0F 0F 0F
 2646: 1  1A84	0F 0F 0F 0F			db	00Fh, 00Fh, 00Fh, 00Fh, 0FFh, 0FFh, 0FFh, 0FFh, 0FFh, 0FFh, 0FFh, 000h
       1  1A88	FF FF FF FF
       1  1A8C	FF FF FF 00
 2647: 1  1A90	00 00 00 00			db	000h, 000h, 000h, 000h, 000h, 000h, 000h, 000h, 000h, 000h, 000h, 000h
       1  1A94	00 00 00 00
       1  1A98	00 00 00 00
 2648: 1  1A9C	00 76 DC D8			db	000h, 076h, 0DCh, 0D8h, 0D8h, 0D8h, 0DCh, 076h, 000h, 000h, 000h, 000h
       1  1AA0	D8 D8 DC 76
       1  1AA4	00 00 00 00
 2649: 1  1AA8	00 00 78 CC			db	000h, 000h, 078h, 0CCh, 0CCh, 0CCh, 0D8h, 0CCh, 0C6h, 0C6h, 0C6h, 0CCh
       1  1AAC	CC CC D8 CC
       1  1AB0	C6 C6 C6 CC
 2650: 1  1AB4	00 00 00 00			db	000h, 000h, 000h, 000h, 000h, 000h, 0FEh, 0C6h, 0C6h, 0C0h, 0C0h, 0C0h
       1  1AB8	00 00 FE C6
       1  1ABC	C6 C0 C0 C0
 2651: 1  1AC0	C0 C0 C0 C0			db	0C0h, 0C0h, 0C0h, 0C0h, 000h, 000h, 000h, 000h, 000h, 000h, 000h, 000h
       1  1AC4	00 00 00 00
       1  1AC8	00 00 00 00
 2652: 1  1ACC	FE 6C 6C 6C			db	0FEh, 06Ch, 06Ch, 06Ch, 06Ch, 06Ch, 06Ch, 06Ch, 000h, 000h, 000h, 000h
       1  1AD0	6C 6C 6C 6C
       1  1AD4	00 00 00 00
 2653: 1  1AD8	00 00 00 FE			db	000h, 000h, 000h, 0FEh, 0C6h, 060h, 030h, 018h, 030h, 060h, 0C6h, 0FEh
       1  1ADC	C6 60 30 18
       1  1AE0	30 60 C6 FE
 2654: 1  1AE4	00 00 00 00			db	000h, 000h, 000h, 000h, 000h, 000h, 000h, 000h, 000h, 07Eh, 0D8h, 0D8h
       1  1AE8	00 00 00 00
       1  1AEC	00 7E D8 D8
 2655: 1  1AF0	D8 D8 D8 70			db	0D8h, 0D8h, 0D8h, 070h, 000h, 000h, 000h, 000h, 000h, 000h, 000h, 000h
       1  1AF4	00 00 00 00
       1  1AF8	00 00 00 00
 2656: 1  1AFC	66 66 66 66			db	066h, 066h, 066h, 066h, 066h, 07Ch, 060h, 060h, 0C0h, 000h, 000h, 000h
       1  1B00	66 7C 60 60
       1  1B04	C0 00 00 00
 2657: 1  1B08	00 00 00 00			db	000h, 000h, 000h, 000h, 076h, 0DCh, 018h, 018h, 018h, 018h, 018h, 018h
       1  1B0C	76 DC 18 18
       1  1B10	18 18 18 18
 2658: 1  1B14	00 00 00 00			db	000h, 000h, 000h, 000h, 000h, 000h, 000h, 07Eh, 018h, 03Ch, 066h, 066h
       1  1B18	00 00 00 7E
       1  1B1C	18 3C 66 66
 2659: 1  1B20	66 3C 18 7E			db	066h, 03Ch, 018h, 07Eh, 000h, 000h, 000h, 000h, 000h, 000h, 000h, 038h
       1  1B24	00 00 00 00

ASEM-51 V1.3                                        Copyright (c) 2002 by W.W. Heinz                                         PAGE 66



 Line  I  Addr  Code            Source

       1  1B28	00 00 00 38
 2660: 1  1B2C	6C C6 C6 FE			db	06Ch, 0C6h, 0C6h, 0FEh, 0C6h, 0C6h, 06Ch, 038h, 000h, 000h, 000h, 000h
       1  1B30	C6 C6 6C 38
       1  1B34	00 00 00 00
 2661: 1  1B38	00 00 38 6C			db	000h, 000h, 038h, 06Ch, 0C6h, 0C6h, 0C6h, 06Ch, 06Ch, 06Ch, 06Ch, 0EEh
       1  1B3C	C6 C6 C6 6C
       1  1B40	6C 6C 6C EE
 2662: 1  1B44	00 00 00 00			db	000h, 000h, 000h, 000h, 000h, 000h, 01Eh, 030h, 018h, 00Ch, 03Eh, 066h
       1  1B48	00 00 1E 30
       1  1B4C	18 0C 3E 66
 2663: 1  1B50	66 66 66 3C			db	066h, 066h, 066h, 03Ch, 000h, 000h, 000h, 000h, 000h, 000h, 000h, 000h
       1  1B54	00 00 00 00
       1  1B58	00 00 00 00
 2664: 1  1B5C	00 7E DB DB			db	000h, 07Eh, 0DBh, 0DBh, 0DBh, 07Eh, 000h, 000h, 000h, 000h, 000h, 000h
       1  1B60	DB 7E 00 00
       1  1B64	00 00 00 00
 2665: 1  1B68	00 00 00 03			db	000h, 000h, 000h, 003h, 006h, 07Eh, 0DBh, 0DBh, 0F3h, 07Eh, 060h, 0C0h
       1  1B6C	06 7E DB DB
       1  1B70	F3 7E 60 C0
 2666: 1  1B74	00 00 00 00			db	000h, 000h, 000h, 000h, 000h, 000h, 01Ch, 030h, 060h, 060h, 07Ch, 060h
       1  1B78	00 00 1C 30
       1  1B7C	60 60 7C 60
 2667: 1  1B80	60 60 30 1C			db	060h, 060h, 030h, 01Ch, 000h, 000h, 000h, 000h, 000h, 000h, 000h, 07Ch
       1  1B84	00 00 00 00
       1  1B88	00 00 00 7C
 2668: 1  1B8C	C6 C6 C6 C6			db	0C6h, 0C6h, 0C6h, 0C6h, 0C6h, 0C6h, 0C6h, 0C6h, 000h, 000h, 000h, 000h
       1  1B90	C6 C6 C6 C6
       1  1B94	00 00 00 00
 2669: 1  1B98	00 00 00 00			db	000h, 000h, 000h, 000h, 0FEh, 000h, 000h, 0FEh, 000h, 000h, 0FEh, 000h
       1  1B9C	FE 00 00 FE
       1  1BA0	00 00 FE 00
 2670: 1  1BA4	00 00 00 00			db	000h, 000h, 000h, 000h, 000h, 000h, 000h, 000h, 018h, 018h, 07Eh, 018h
       1  1BA8	00 00 00 00
       1  1BAC	18 18 7E 18
 2671: 1  1BB0	18 00 00 FF			db	018h, 000h, 000h, 0FFh, 000h, 000h, 000h, 000h, 000h, 000h, 000h, 030h
       1  1BB4	00 00 00 00
       1  1BB8	00 00 00 30
 2672: 1  1BBC	18 0C 06 0C			db	018h, 00Ch, 006h, 00Ch, 018h, 030h, 000h, 07Eh, 000h, 000h, 000h, 000h
       1  1BC0	18 30 00 7E
       1  1BC4	00 00 00 00
 2673: 1  1BC8	00 00 00 0C			db	000h, 000h, 000h, 00Ch, 018h, 030h, 060h, 030h, 018h, 00Ch, 000h, 07Eh
       1  1BCC	18 30 60 30
       1  1BD0	18 0C 00 7E
 2674: 1  1BD4	00 00 00 00			db	000h, 000h, 000h, 000h, 000h, 000h, 00Eh, 01Bh, 01Bh, 018h, 018h, 018h
       1  1BD8	00 00 0E 1B
       1  1BDC	1B 18 18 18
 2675: 1  1BE0	18 18 18 18			db	018h, 018h, 018h, 018h, 018h, 018h, 018h, 018h, 018h, 018h, 018h, 018h
       1  1BE4	18 18 18 18
       1  1BE8	18 18 18 18
 2676: 1  1BEC	18 18 18 18			db	018h, 018h, 018h, 018h, 0D8h, 0D8h, 0D8h, 070h, 000h, 000h, 000h, 000h
       1  1BF0	D8 D8 D8 70
       1  1BF4	00 00 00 00
 2677: 1  1BF8	00 00 00 00			db	000h, 000h, 000h, 000h, 018h, 018h, 000h, 07Eh, 000h, 018h, 018h, 000h
       1  1BFC	18 18 00 7E
       1  1C00	00 18 18 00
 2678: 1  1C04	00 00 00 00			db	000h, 000h, 000h, 000h, 000h, 000h, 000h, 000h, 000h, 076h, 0DCh, 000h

ASEM-51 V1.3                                        Copyright (c) 2002 by W.W. Heinz                                         PAGE 67



 Line  I  Addr  Code            Source

       1  1C08	00 00 00 00
       1  1C0C	00 76 DC 00
 2679: 1  1C10	76 DC 00 00			db	076h, 0DCh, 000h, 000h, 000h, 000h, 000h, 000h, 000h, 038h, 06Ch, 06Ch
       1  1C14	00 00 00 00
       1  1C18	00 38 6C 6C
 2680: 1  1C1C	38 00 00 00			db	038h, 000h, 000h, 000h, 000h, 000h, 000h, 000h, 000h, 000h, 000h, 000h
       1  1C20	00 00 00 00
       1  1C24	00 00 00 00
 2681: 1  1C28	00 00 00 00			db	000h, 000h, 000h, 000h, 000h, 000h, 000h, 018h, 018h, 000h, 000h, 000h
       1  1C2C	00 00 00 18
       1  1C30	18 00 00 00
 2682: 1  1C34	00 00 00 00			db	000h, 000h, 000h, 000h, 000h, 000h, 000h, 000h, 000h, 000h, 000h, 000h
       1  1C38	00 00 00 00
       1  1C3C	00 00 00 00
 2683: 1  1C40	18 00 00 00			db	018h, 000h, 000h, 000h, 000h, 000h, 000h, 000h, 000h, 00Fh, 00Ch, 00Ch
       1  1C44	00 00 00 00
       1  1C48	00 0F 0C 0C
 2684: 1  1C4C	0C 0C 0C EC			db	00Ch, 00Ch, 00Ch, 0ECh, 06Ch, 06Ch, 03Ch, 01Ch, 000h, 000h, 000h, 000h
       1  1C50	6C 6C 3C 1C
       1  1C54	00 00 00 00
 2685: 1  1C58	00 D8 6C 6C			db	000h, 0D8h, 06Ch, 06Ch, 06Ch, 06Ch, 06Ch, 000h, 000h, 000h, 000h, 000h
       1  1C5C	6C 6C 6C 00
       1  1C60	00 00 00 00
 2686: 1  1C64	00 00 00 00			db	000h, 000h, 000h, 000h, 000h, 070h, 0D8h, 030h, 060h, 0C8h, 0F8h, 000h
       1  1C68	00 70 D8 30
       1  1C6C	60 C8 F8 00
 2687: 1  1C70	00 00 00 00			db	000h, 000h, 000h, 000h, 000h, 000h, 000h, 000h, 000h, 000h, 000h, 000h
       1  1C74	00 00 00 00
       1  1C78	00 00 00 00
 2688: 1  1C7C	7C 7C 7C 7C			db	07Ch, 07Ch, 07Ch, 07Ch, 07Ch, 07Ch, 07Ch, 000h, 000h, 000h, 000h, 000h
       1  1C80	7C 7C 7C 00
       1  1C84	00 00 00 00
 2689: 1  1C88	00 00 00 00			db	000h, 000h, 000h, 000h, 000h, 000h, 000h, 000h, 000h, 000h, 000h, 000h
       1  1C8C	00 00 00 00
       1  1C90	00 00 00 00
 2690: 1  1C94	00 00 00 00			db	000h, 000h, 000h, 000h
 2691:				;		end
				^
			  @@@@@ no END statement found @@@@@






                     register banks used:  0

                     87 errors detected




ASEM-51 V1.3                                        Copyright (c) 2002 by W.W. Heinz                                         PAGE 68





	       L I S T   O F   S Y M B O L S
	       =============================


SYMBOL				  TYPE     VALUE	LINE
------------------------------------------------------------
??ASEM_51			  NUMBER    8051
??VERSION			  NUMBER    0130
AC				  BIT	      D6
ACC				  DATA	      E0
ADM3A				  CODE	    01A6	 541
ADM3ATEXT			  CODE	    0BD0	2272
ADM_CTRL_DRAW			  CODE	    01F1	 579
ADM_CTRL_ESC			  CODE	    01E1	 571
ADM_CTRL_GR			  CODE	    01ED	 576
ADM_CTRL_H			  CODE	    01BB	 556
ADM_CTRL_I			  CODE	    01C0	 558
ADM_CTRL_J			  CODE	    01C5	 560
ADM_CTRL_K			  CODE	    01CA	 562
ADM_CTRL_L			  CODE	    01CF	 564
ADM_CTRL_LT			  CODE	    01E8	 574
ADM_CTRL_M			  CODE	    01D4	 566
ADM_CTRL_Z			  CODE	    01D9	 568
ADM_CTRL_Z1			  CODE	    01DC	 569
ADM_ESC				  CODE	    01F3	 582
ADM_ESC_7			  CODE	    01FB	 585
ADM_ESC_EX			  CODE	    0200	 587
ALR				  NUMBER    0011	 107
ALTGR				  NUMBER    0011	 106
ALTGR_TABLE			  CODE	    0B88	2209
ALTGR_TABLE_IND			  CODE	    0B7D	2195
ANSIOUT				  CODE	    015D	 499
ANSIOUT1			  CODE	    016E	 510
ANSIOUT2			  CODE	    0175	 514
ANSIOUT3			  CODE	    0162	 501
ANSI_MOVE			  CODE	    06DE	1332
ANSI_MOVE_EX			  CODE	    0731	1395
ANSI_MOVE_M1			  CODE	    0705	1361
ANSI_MOVE_X1			  CODE	    06EB	1346
ANSI_MOVE_X3			  CODE	    06F2	1349
ANSI_MOVE_Y			  CODE	    070A	1369
ANSI_MOVE_Y1			  CODE	    0719	1379
ANSI_MOVE_Y2			  CODE	    0715	1374
ANSI_MOVE_Y3			  CODE	    0723	1385
ANSI_TAB			  CODE	    0179	 518
ARG0				  NUMBER    0026	 161
ARG1				  NUMBER    0027	 162
ARG2				  NUMBER    0028	 163
ARG3				  NUMBER    0029	 164
ARGS_GR_ZERO			  CODE	    06CA	1315
ARGS_GR_ZERO_1			  CODE	    06D6	1321
ARGS_GR_ZERO_2			  CODE	    06D2	1319
B				  DATA	      F0
BACK				  NUMBER    0008	  79
BAUDIDX				  NUMBER    002A	 165
BLACK				  NUMBER    0000	  33

ASEM-51 V1.3                                        Copyright (c) 2002 by W.W. Heinz                                         PAGE 69



SYMBOL				  TYPE     VALUE	LINE
------------------------------------------------------------
BLUE				  NUMBER    0004	  37
BOTTOM				  NUMBER    0032	 173
BREAK				  NUMBER    00F0	 114
CCAPS				  NUMBER    0058	 111
CCBT				  NUMBER    001D	  72
CCDN				  NUMBER    001D	  84
CCHM				  NUMBER    001C	  71
CCLF				  NUMBER    001E	  85
CCLM				  NUMBER    001E	  73
CCRM				  NUMBER    001F	  74
CCRT				  NUMBER    001F	  86
CCUP				  NUMBER    001C	  83
CDCH				  NUMBER    00FE	  89
CHARTABLE_NOSHIFT		  CODE	    0A55	2163
CHARTABLE_SHIFT			  CODE	    0AEA	2179
CHAR_OUT			  CODE	    0290	 683
CHAR_OUT_1			  CODE	    02F1	 744
CHAR_OUT_2			  CODE	    02C9	 721
CHAR_OUT_2A			  CODE	    02D7	 729
CHAR_OUT_2B			  CODE	    02DF	 733
CHAR_OUT_3			  CODE	    02A6	 695
CHAR_OUT_4			  CODE	    02E6	 737
CICH				  NUMBER    00FF	  90
CILN				  NUMBER    009D	  88
CIN				  CODE	    0983	1984
CIN_1				  CODE	    0990	1991
CIN_2				  CODE	    0987	1986
CIN_3				  CODE	    09A2	2005
CIN_4				  CODE	    099C	2000
CLEARARGS			  CODE	    07B6	1524
CLEARARGS1			  CODE	    07BA	1526
CLEARTABU			  CODE	    078E	1491
CLEARTABU1			  CODE	    0792	1493
CLEAR_LINES			  CODE	    085E	1686
CLEAR_LINES1			  CODE	    087F	1713
CLEAR_LINES2			  CODE	    087A	1711
CLEAR_SCREEN			  CODE	    0851	1677
CLEAR_V1			  CODE	    077A	1459
CLEAR_VARS			  CODE	    0776	1451
CLS				  NUMBER    0001	  78
CLSHIFT				  NUMBER    0012	 108
CLSTRG				  NUMBER    0014	 109
COLOR				  NUMBER    002D	 168
COMP_DPTR			  CODE	    08D5	1795
COPYFONT			  CODE	    0928	1907
COPYFONT1			  CODE	    0932	1913
COUT				  CODE	    097B	1978
CRSHIFT				  NUMBER    0059	 110
CSPACE				  NUMBER    0020	  87
CTRLG				  NUMBER    0007	  60
CTRLGT				  NUMBER    001F	  69
CTRLH				  NUMBER    0008	  61
CTRLI				  NUMBER    0009	  62
CTRLJ				  NUMBER    000A	  63
CTRLK				  NUMBER    000B	  64
CTRLL				  NUMBER    000C	  65

ASEM-51 V1.3                                        Copyright (c) 2002 by W.W. Heinz                                         PAGE 70



SYMBOL				  TYPE     VALUE	LINE
------------------------------------------------------------
CTRLLT				  NUMBER    001E	  68
CTRLM				  NUMBER    000D	  66
CTRLZ				  NUMBER    001A	  67
CURSORPOS			  NUMBER    002E	 169
CURSORPOS1			  NUMBER    002F	 170
CURSORSAVE			  NUMBER    0030	 171
CURSORX				  NUMBER    0037	 178
CURSORY				  NUMBER    0038	 179
CURSOR_OFF			  CODE	    08B2	1762
CURSOR_ON			  CODE	    08A0	1742
CY				  BIT	      D7
C_BACKSP			  NUMBER    0008	  47
C_BELL				  NUMBER    0007	  46
C_CR				  NUMBER    000D	  52
C_DEL				  NUMBER    007F	  58
C_ESC				  NUMBER    001B	  57
C_FF				  NUMBER    000C	  51
C_NEWLINE			  NUMBER    000A	  49
C_SI				  NUMBER    000F	  54
C_SO				  NUMBER    000E	  53
C_TAB				  NUMBER    0009	  48
C_TIME				  NUMBER    000A	  44
C_VT				  NUMBER    000B	  50
C_XOFF				  NUMBER    0013	  56
C_XON				  NUMBER    0011	  55
DATABITS			  NUMBER    0014	 154
DECANM				  NUMBER    0002	 118
DECARM				  NUMBER    0008	 124
DECAWM				  NUMBER    0007	 123
DECCKM				  NUMBER    0001	 117
DECCOLM				  NUMBER    0003	 119
DECINLM				  NUMBER    0009	 125
DECOM				  NUMBER    0006	 122
DECSCLM				  NUMBER    0004	 120
DECSCNM				  NUMBER    0005	 121
DEFAULTCOLOR			  NUMBER    0070	  42
DEFCOL				  NUMBER    003D	 184
DO_CMD_ARG			  CODE	    06A0	1280
DO_CMD_ARG_1			  CODE	    06B6	1296
DO_CMD_ARG_2			  CODE	    06BC	1303
DO_CMD_ARG_3			  CODE	    06C3	1306
DO_CMD_ARG_4			  CODE	    06C8	1308
DO_CR				  CODE	    0259	 645
DO_CSI				  CODE	    0368	 819
DO_CSI_B			  CODE	    038B	 839
DO_CSI_C			  CODE	    0396	 845
DO_CSI_CC			  CODE	    049C	 976
DO_CSI_CC1			  CODE	    04A1	 978
DO_CSI_CC2			  CODE	    049F	 977
DO_CSI_D			  CODE	    03A1	 851
DO_CSI_END			  CODE	    0638	1184
DO_CSI_END1			  CODE	    055D	1073
DO_CSI_G			  CODE	    0560	1075
DO_CSI_G1			  CODE	    056B	1079
DO_CSI_H			  CODE	    03AF	 860
DO_CSI_H1			  CODE	    03B4	 862

ASEM-51 V1.3                                        Copyright (c) 2002 by W.W. Heinz                                         PAGE 71



SYMBOL				  TYPE     VALUE	LINE
------------------------------------------------------------
DO_CSI_H2			  CODE	    03B7	 863
DO_CSI_HH			  CODE	    05D0	1127
DO_CSI_HH1			  CODE	    05E1	1135
DO_CSI_HH2			  CODE	    05E6	1137
DO_CSI_HHX			  CODE	    05EB	1139
DO_CSI_J			  CODE	    04F4	1021
DO_CSI_JA			  CODE	    04F9	1023
DO_CSI_JB			  CODE	    050B	1033
DO_CSI_JC			  CODE	    04FC	1024
DO_CSI_JD			  CODE	    051C	1042
DO_CSI_K			  CODE	    0533	1054
DO_CSI_KA			  CODE	    0548	1064
DO_CSI_KB			  CODE	    0553	1069
DO_CSI_KEYS			  CODE	    0376	 826
DO_CSI_L			  CODE	    0577	1086
DO_CSI_L1			  CODE	    058B	1094
DO_CSI_L2			  CODE	    0590	1096
DO_CSI_LL			  CODE	    05EF	1143
DO_CSI_LL1			  CODE	    05FA	1148
DO_CSI_LL2			  CODE	    05FF	1150
DO_CSI_LLX			  CODE	    0604	1152
DO_CSI_M			  CODE	    03DD	 885
DO_CSI_MA			  CODE	    03EB	 891
DO_CSI_MB			  CODE	    03FB	 898
DO_CSI_MC			  CODE	    03ED	 892
DO_CSI_MD			  CODE	    03F8	 897
DO_CSI_ME			  CODE	    03FF	 900
DO_CSI_MF			  CODE	    0402	 901
DO_CSI_MG			  CODE	    0411	 910
DO_CSI_MH			  CODE	    0418	 913
DO_CSI_MM			  CODE	    05A0	1105
DO_CSI_MM1			  CODE	    05B4	1113
DO_CSI_MM2			  CODE	    05BB	1116
DO_CSI_MX			  CODE	    0429	 922
DO_CSI_MX1			  CODE	    042E	 924
DO_CSI_MX2			  CODE	    043B	 930
DO_CSI_MX3			  CODE	    0446	 935
DO_CSI_N			  CODE	    044A	 939
DO_CSI_N1			  CODE	    0454	 943
DO_CSI_N6			  CODE	    0460	 949
DO_CSI_P			  CODE	    0608	1156
DO_CSI_P1			  CODE	    0624	1171
DO_CSI_P2			  CODE	    0610	1159
DO_CSI_Q			  CODE	    0639	1203
DO_CSI_QUES			  CODE	    052C	1050
DO_CSI_Q_END			  CODE	    0683	1238
DO_CSI_Q_H			  CODE	    0647	1209
DO_CSI_Q_H1			  CODE	    0658	1217
DO_CSI_Q_H2			  CODE	    065D	1219
DO_CSI_Q_HX			  CODE	    0664	1222
DO_CSI_Q_L			  CODE	    0668	1226
DO_CSI_Q_L1			  CODE	    0674	1231
DO_CSI_Q_L2			  CODE	    0679	1233
DO_CSI_Q_LX			  CODE	    0680	1236
DO_CSI_R			  CODE	    04AC	 985
DO_CSI_RA			  CODE	    04BB	 991

ASEM-51 V1.3                                        Copyright (c) 2002 by W.W. Heinz                                         PAGE 72



SYMBOL				  TYPE     VALUE	LINE
------------------------------------------------------------
DO_CSI_RB			  CODE	    04CD	 998
DO_CSI_RC			  CODE	    04E4	1011
DO_CSI_RD			  CODE	    04F1	1018
DO_CSI_RE			  CODE	    04E1	1008
DO_CSI_S			  CODE	    03C7	 873
DO_CSI_U			  CODE	    03D1	 879
DO_ESC				  CODE	    0305	 759
DO_ESC_7			  CODE	    0315	 769
DO_ESC_8			  CODE	    031F	 774
DO_ESC_C			  CODE	    0350	 801
DO_ESC_CSI			  CODE	    030E	 765
DO_ESC_D			  CODE	    032B	 779
DO_ESC_EX			  CODE	    0367	 814
DO_ESC_H			  CODE	    0356	 804
DO_ESC_HA			  CODE	    033B	 789
DO_ESC_HASH			  CODE	    0688	1251
DO_ESC_HASH_END			  CODE	    0693	1257
DO_ESC_LBR			  CODE	    0342	 793
DO_ESC_LBRACK			  CODE	    0694	1268
DO_ESC_LB_1			  CODE	    069D	1273
DO_ESC_M			  CODE	    0333	 784
DO_ESC_Q			  CODE	    0684	1244
DO_ESC_RBR			  CODE	    0349	 797
DO_ESC_RBRACK			  CODE	    0694	1264
DO_ESC_Z			  CODE	    0362	 811
DO_IDLE				  CODE	    0201	 591
DO_IDLE_BELL			  CODE	    0217	 607
DO_IDLE_BS			  CODE	    021B	 610
DO_IDLE_CR			  CODE	    0256	 644
DO_IDLE_DEL			  CODE	    020B	 600
DO_IDLE_END			  CODE	    0282	 668
DO_IDLE_ESC			  CODE	    0263	 650
DO_IDLE_FF			  CODE	    027D	 665
DO_IDLE_NL			  CODE	    024B	 638
DO_IDLE_PRE			  CODE	    0212	 604
DO_IDLE_SI			  CODE	    0272	 658
DO_IDLE_SO			  CODE	    026C	 654
DO_IDLE_TAB			  CODE	    0222	 614
DO_IDLE_TAB1			  CODE	    023F	 629
DO_IDLE_TAB2			  CODE	    0245	 632
DO_IDLE_TAB3			  CODE	    0228	 616
DO_IDLE_VT			  CODE	    0278	 662
DO_NEWLINE			  CODE	    024E	 639
DPH				  DATA	      83
DPL				  DATA	      82
DRAW_CHAR			  CODE	    0282	 672
DRAW_CHAR_1			  CODE	    02FB	 751
DRAW_CURSOR			  CODE	    0892	1730
DUMP				  NUMBER    0017	 157
DUMPTERM			  CODE	    018B	 521
DUMPTERM1			  CODE	    0195	 527
EA				  BIT	      AF
ES				  BIT	      AC
ESC				  NUMBER    001B	  82
ET0				  BIT	      A9
ET1				  BIT	      AB

ASEM-51 V1.3                                        Copyright (c) 2002 by W.W. Heinz                                         PAGE 73



SYMBOL				  TYPE     VALUE	LINE
------------------------------------------------------------
EVENODD				  NUMBER    0015	 155
EX0				  BIT	      A8
EX1				  BIT	      AA
EXINT0				  CODE	    005B	 300
EXINT0A				  CODE	    007E	 329
EXINT0B				  CODE	    0068	 319
EXINT0EX			  CODE	    0085	 334
EXTENDED			  NUMBER    00E0	 113
EXTI0				  CODE	    0003
EXTI1				  CODE	    0013
EXT_TABLE			  CODE	    0BA3	2239
EXT_TABLE_IND			  CODE	    0B93	2222
F0				  BIT	      D5
F1				  NUMBER    0080	  92
F10				  NUMBER    0089	 101
F11				  NUMBER    008A	 102
F12				  NUMBER    008B	 103
F2				  NUMBER    0081	  93
F3				  NUMBER    0082	  94
F4				  NUMBER    0083	  95
F5				  NUMBER    0084	  96
F6				  NUMBER    0085	  97
F7				  NUMBER    0086	  98
F8				  NUMBER    0087	  99
F9				  NUMBER    0088	 100
FILL_LINES			  CODE	    0860	1688
FILL_SCREEN			  CODE	    0853	1678
FLAGS				  NUMBER    0020	 133
FLAGS1				  NUMBER    0021	 141
FLAGS2				  NUMBER    0022	 149
FREE0				  NUMBER    004A	 189
FREE1				  NUMBER    004B	 190
FREE2				  NUMBER    004C	 191
FREE3				  NUMBER    004D	 192
FREE4				  NUMBER    004E	 193
FREE5				  NUMBER    004F	 194
GETBAUD				  CODE	    0BB0	2255
GETBDTXT			  CODE	    0BBA	2265
GETBIT				  CODE	    07AA	1517
GETBITTAB			  CODE	    07AE	1521
GETREPORT			  CODE	    048F	 971
GETSTATUS			  CODE	    0C45	2338
GREEN				  NUMBER    0002	  35
HEIGHT				  NUMBER    0018	  21
HEX2DEZ				  CODE	    08C8	1782
IE				  DATA	      A8
IE0				  BIT	      89
IE1				  BIT	      8B
INIT				  CODE	    00A2	 382
INIT6845			  CODE	    08E9	1815
INIT_2				  CODE	    00BA	 407
INIT_LOOP			  CODE	    00BA	 395
INSERT				  NUMBER    0013	 153
INT0				  BIT	      B2
INT1				  BIT	      B3
INVERSE				  NUMBER    0003	 137

ASEM-51 V1.3                                        Copyright (c) 2002 by W.W. Heinz                                         PAGE 74



SYMBOL				  TYPE     VALUE	LINE
------------------------------------------------------------
IP				  DATA	      B8
IRM				  NUMBER    0004	 126
ISDIGIT				  CODE	    0741	1413
ISDIGIT1			  CODE	    0744	1414
ISDIGIT2			  CODE	    0748	1417
ISDIGIT3			  CODE	    074B	1418
ISPARM				  CODE	    0735	1402
ISPARM1				  CODE	    073F	1407
ISPARMEX			  CODE	    073E	1406
IT0				  BIT	      88
IT1				  BIT	      8A
KEYALTGR			  CODE	    0A2C	2134
KEYALTGR1			  CODE	    0A3C	2140
KEYALTGR2			  CODE	    0A31	2136
KEYAVAIL			  NUMBER    0008	 142
KEYBREAK			  CODE	    09CF	2086
KEYCHECKBRK			  CODE	    09F6	2108
KEYCHECKBRK1			  CODE	    0A00	2112
KEYDECODE			  CODE	    09C7	2077
KEYEXIT				  CODE	    0A4D	2155
KEYEXITOK			  CODE	    0A49	2148
KEYGETALTGR			  CODE	    0B85	2206
KEYGETALTGRIND			  CODE	    0B7A	2192
KEYGETEXT			  CODE	    0BA0	2236
KEYGETEXTIND			  CODE	    0B90	2219
KEYGETNOSHIFT			  CODE	    0A50	2159
KEYGETSHIFT			  CODE	    0AE5	2175
KEYMAKE				  CODE	    0A40	2143
KEYMAKEEXT			  CODE	    0A0F	2121
KEYMAKEEXT1			  CODE	    0A28	2131
KEYMAKEEXT2			  CODE	    0A16	2124
KEYMAKEEXT3			  CODE	    0A26	2130
KEYNORMAL			  CODE	    0A05	2116
KEYRXALTGR			  NUMBER    000C	 146
KEYRXBREAK			  NUMBER    000A	 144
KEYRXCNT			  NUMBER    003A	 181
KEYRXEXTENDED			  NUMBER    0009	 143
KEYRXSHIFT			  NUMBER    000B	 145
KEYRXSTRG			  NUMBER    000D	 147
KEYRXVAL			  NUMBER    003B	 182
KEYSHIFT			  CODE	    09D7	2091
KEYSHIFT1			  CODE	    09DE	2094
KEYSHIFT2			  CODE	    09E3	2096
KEYSTRG				  CODE	    09EA	2101
LASTCHAR			  NUMBER    0001	 135
LCHARTMP			  NUMBER    0002	 136
LF				  NUMBER    000A	  81
LNM				  NUMBER    0014	 127
LOOP_CIN			  CODE	    013D	 480
MAGENTA				  NUMBER    0005	  38
MAIN_COUT			  CODE	    010C	 456
MAIN_COUT1			  CODE	    0126	 468
MAIN_COUT2			  CODE	    0128	 470
MAIN_COUT3			  CODE	    011B	 463
MAIN_F12			  CODE	    00FD	 448
MAIN_F6				  CODE	    00CB	 419

ASEM-51 V1.3                                        Copyright (c) 2002 by W.W. Heinz                                         PAGE 75



SYMBOL				  TYPE     VALUE	LINE
------------------------------------------------------------
MAIN_F6A			  CODE	    00D5	 424
MAIN_F7				  CODE	    00DC	 429
MAIN_F7A			  CODE	    00E6	 433
MAIN_F8				  CODE	    00EF	 439
MAIN_F9				  CODE	    00F6	 443
MAIN_LOOP			  CODE	    00BF	 413
MAIN_LOOP1			  CODE	    014F	 488
MAIN_SERIN			  CODE	    0136	 476
MAIN_STATUS			  CODE	    014C	 487
MOVE_CURSOR			  CODE	    088F	1729
NARGS				  NUMBER    0025	 160
NEWLINE				  CODE	    0971	1971
NEWLINEMODE			  NUMBER    0012	 152
OLDSTATUS			  NUMBER    003C	 183
ORIGIN				  NUMBER    0011	 151
OV				  BIT	      D2
P				  BIT	      D0
P0				  DATA	      80
P1				  DATA	      90
P2				  DATA	      A0
P3				  DATA	      B0
PCON				  DATA	      87
PHEX				  CODE	    09A8	2020
PHEX1				  CODE	    09AB	2024
PHEX16				  CODE	    09BA	2034
PHEX8				  CODE	    09A8	2021
PHEX_B				  CODE	    09AA	2023
PRINT				  CODE	    07C0	1532
PRINT1				  CODE	    07C5	1536
PRTBAUD				  CODE	    0BF3	2294
PRTSTATUS			  CODE	    0BD6	2276
PRTSTATUS1			  CODE	    0BDB	2278
PRTSTATUS2			  CODE	    0C1B	2316
PRTSTATUS3			  CODE	    0C22	2319
PRTSTATUS4			  CODE	    0C29	2322
PRTSTATUS5			  CODE	    0C30	2325
PRTSTATUS5A			  CODE	    0C38	2328
PRTSTATUS6			  CODE	    0C12	2312
PRTSTATUS7			  CODE	    0C0E	2310
PRTSTATUSEX			  CODE	    0C44	2336
PS				  BIT	      BC
PSW				  DATA	      D0
PT0				  BIT	      B9
PT1				  BIT	      BB
PX0				  BIT	      B8
PX1				  BIT	      BA
RB8				  BIT	      9A
RD				  BIT	      B7
RED				  NUMBER    0001	  34
REN				  BIT	      9C
REPORTDA			  CODE	    0495	 974
REPORTOK			  CODE	    0491	 973
RESET				  CODE	    0000
RESETTABU			  CODE	    0780	1481
RESETTABU1			  CODE	    0784	1483
RETSTATE			  NUMBER    0023	 159

ASEM-51 V1.3                                        Copyright (c) 2002 by W.W. Heinz                                         PAGE 76



SYMBOL				  TYPE     VALUE	LINE
------------------------------------------------------------
RI				  BIT	      98
RS0				  BIT	      D3
RS1				  BIT	      D4
RXD				  BIT	      B0
SBUF				  DATA	      99
SCON				  DATA	      98
SCROLL				  CODE	    07CA	1557
SCROLL_DOWN_1			  CODE	    07F7	1593
SCROLL_DOWN_2			  CODE	    0805	1603
SCROLL_DOWN_3			  CODE	    080D	1608
SCROLL_DOWN_4			  CODE	    07F5	1591
SCROLL_DOWN_5			  CODE	    0817	1619
SCROLL_DOWN_6			  CODE	    0814	1616
SCROLL_R4			  CODE	    07D0	1561
SCROLL_UP			  CODE	    081C	1626
SCROLL_UP_1			  CODE	    0839	1645
SCROLL_UP_2			  CODE	    083B	1648
SCROLL_UP_3			  CODE	    084C	1661
SCROLL_UP_4			  CODE	    0849	1658
SCURSORX			  NUMBER    002B	 166
SCURSORY			  NUMBER    002C	 167
SENDPOS				  CODE	    0483	 964
SERBUF				  NUMBER    0080	 198
SERBUSY				  NUMBER    0005	 139
SERCOUNT			  NUMBER    0036	 177
SEREND				  NUMBER    0035	 176
SERINT				  CODE	    000B	 232
SERINT1				  CODE	    002D	 254
SERINTEX			  CODE	    0035	 260
SERINTRI			  CODE	    0013	 237
SERLIM				  NUMBER    0040	 199
SERSTART			  NUMBER    0034	 175
SETBAUD				  CODE	    0151	 490
SETREGS				  CODE	    08F9	1825
SINT				  CODE	    0023
SM0				  BIT	      9F
SM1				  BIT	      9E
SM2				  BIT	      9D
SP				  DATA	      81
SPACE				  CODE	    0967	1965
SPECIAL				  NUMBER    0000	 134
START				  CODE	    008A	 357
STATE				  NUMBER    0033	 174
STATUS				  CODE	    0C48	2343
ST_CMD_ARG			  NUMBER    000A	  28
ST_CSI				  NUMBER    0004	  25
ST_CSI_Q			  NUMBER    000E	  30
ST_ESC				  NUMBER    0002	  24
ST_ESC_HASH			  NUMBER    0008	  27
ST_ESC_LBRACK			  NUMBER    000C	  29
ST_ESC_Q			  NUMBER    0006	  26
ST_ESC_RBRACK			  NUMBER    0010	  31
ST_IDLE				  NUMBER    0000	  23
SYDATA				  CODE	    0914	1883
T0				  BIT	      B4
T0CNT				  NUMBER    0039	 180

ASEM-51 V1.3                                        Copyright (c) 2002 by W.W. Heinz                                         PAGE 77



SYMBOL				  TYPE     VALUE	LINE
------------------------------------------------------------
T1				  BIT	      B5
TABU				  NUMBER    0009	  80
TABUTAB				  NUMBER    0040	 187
TAB_SET_R0_R1			  CODE	    079A	1504
TB8				  BIT	      9B
TCON				  DATA	      88
TERMMODE			  NUMBER    0016	 156
TERM_RESET			  CODE	    074C	1425
TESTSCREEN			  CODE	    0941	1933
TESTSCREEN1			  CODE	    094A	1938
TESTSCREEN2			  CODE	    0957	1950
TESTSCREEN3			  CODE	    0946	1936
TESTSCREEN4			  CODE	    095B	1953
TF0				  BIT	      8D
TF1				  BIT	      8F
TH0				  DATA	      8C
TH1				  DATA	      8D
TI				  BIT	      99
TIMER0				  CODE	    000B
TIMER0INT			  CODE	    003E	 274
TIMER0INT_EX			  CODE	    005A	 290
TIMER1				  CODE	    001B
TL0				  DATA	      8A
TL1				  DATA	      8B
TMOD				  DATA	      89
TOP				  NUMBER    0031	 172
TR0				  BIT	      8C
TR1				  BIT	      8E
TURQUOISE			  NUMBER    0006	  39
TXD				  BIT	      B1
VARLEN				  NUMBER    0030	 129
VARS				  NUMBER    0020	 131
VT100_FONT			  CODE	    0C98	2348
WHITE				  NUMBER    0007	  40
WIDTH				  NUMBER    0050	  20
WR				  BIT	      B6
WRAP				  NUMBER    0010	 150
XONOFF				  NUMBER    0004	 138
YELLOW				  NUMBER    0003	  36
